<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop KDV Sistemi - Comprehensive Implementation Draft</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #e2e8f0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            line-height: 1.7;
            padding: 40px 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            margin-bottom: 50px;
            padding-bottom: 30px;
            border-bottom: 2px solid #334155;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #60a5fa, #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .meta {
            color: #94a3b8;
            font-size: 0.95rem;
        }

        section {
            margin-bottom: 50px;
        }

        h2 {
            font-size: 1.8rem;
            margin-bottom: 25px;
            color: #60a5fa;
        }

        h3 {
            font-size: 1.4rem;
            margin: 25px 0 15px;
            color: #93c5fd;
        }

        .step-card {
            background: rgba(30, 41, 59, 0.5);
            border-left: 4px solid #3b82f6;
            padding: 30px;
            margin: 25px 0;
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }

        .step-card h3 {
            margin-top: 0;
        }

        .step-number {
            display: inline-block;
            width: 40px;
            height: 40px;
            background: #3b82f6;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 40px;
            font-weight: 700;
            margin-right: 12px;
            font-size: 1.2rem;
        }

        .code-box {
            background: #1e293b;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #10b981;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
            white-space: pre-wrap;
        }

        .mockup {
            background: white;
            color: #1f2937;
            padding: 30px;
            border-radius: 12px;
            margin: 25px 0;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        .mockup h4 {
            color: #1f2937;
            margin-bottom: 20px;
            font-size: 1.2rem;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #374151;
            font-size: 0.95rem;
        }

        .form-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #d1d5db;
            border-radius: 8px;
            font-size: 1rem;
            background: #f9fafb;
        }

        .price-summary {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            padding: 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 12px;
            margin-top: 20px;
        }

        .price-summary-item {
            text-align: center;
            color: white;
        }

        .price-summary-label {
            font-size: 0.85rem;
            opacity: 0.9;
            margin-bottom: 5px;
        }

        .price-summary-value {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .product-card {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
        }

        .product-title {
            color: #1f2937;
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .product-price {
            font-size: 1.8rem;
            font-weight: 700;
            color: #2563eb;
            margin: 10px 0;
        }

        .product-price small {
            font-size: 0.9rem;
            color: #6b7280;
            font-weight: 400;
        }

        .highlight-box {
            background: rgba(16, 185, 129, 0.2);
            border: 2px solid #10b981;
            padding: 25px;
            margin: 25px 0;
            border-radius: 12px;
        }

        .highlight-box h4 {
            color: #10b981;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .alert-box {
            background: rgba(239, 68, 68, 0.2);
            border: 2px solid #ef4444;
            padding: 25px;
            margin: 25px 0;
            border-radius: 12px;
        }

        .alert-box h4 {
            color: #ef4444;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .info-box {
            background: rgba(59, 130, 246, 0.2);
            border: 2px solid #3b82f6;
            padding: 25px;
            margin: 25px 0;
            border-radius: 12px;
        }

        .info-box h4 {
            color: #3b82f6;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        ul {
            margin-left: 25px;
            margin-top: 10px;
        }

        li {
            margin: 8px 0;
        }

        .file-path {
            display: inline-block;
            background: rgba(59, 130, 246, 0.2);
            padding: 4px 10px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            color: #93c5fd;
        }

        footer {
            margin-top: 60px;
            padding-top: 30px;
            border-top: 1px solid #334155;
            color: #64748b;
            font-size: 0.9rem;
            text-align: center;
        }

        @media (max-width: 1024px) {
            .price-summary {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ›’ Shop KDV Sistemi - Implementation Draft</h1>
            <div class="meta">
                ğŸ“… 2025-12-03 | ğŸ¯ TÃ¼m AdÄ±mlar + Kod Ã–rnekleri + Mockup'lar | ğŸ¢ Ä°xtif
            </div>
        </header>

        <!-- Ã–ZET -->
        <section>
            <h2>ğŸ“‹ Ã–zet</h2>

            <div class="highlight-box">
                <h4>âœ… Uygulama Stratejisi</h4>
                <ul>
                    <li><strong>Database:</strong> Sadece <code>price_without_tax</code> + <code>tax_rate</code> (Runtime calculation)</li>
                    <li><strong>Admin Panel:</strong> Ä°ki input (KDV hariÃ§ + KDV dahil), Livewire ile senkron</li>
                    <li><strong>Frontend:</strong> Setting'e gÃ¶re gÃ¶sterim (shop_product_tax)</li>
                    <li><strong>Cart/Checkout:</strong> Her zaman KDV dahil</li>
                </ul>
            </div>

            <div class="info-box">
                <h4>âš¡ Neden Runtime Calculation?</h4>
                <p>Performans farkÄ± ihmal edilebilir (0.005ms), ama:</p>
                <ul>
                    <li>KDV oranÄ± deÄŸiÅŸince tek satÄ±r UPDATE</li>
                    <li>TutarsÄ±zlÄ±k riski yok</li>
                    <li>Single source of truth garantisi</li>
                </ul>
            </div>
        </section>

        <!-- ADIM 1: MIGRATION -->
        <section>
            <h2>ğŸ—„ï¸ AdÄ±m 1: Migration</h2>

            <div class="step-card">
                <h3><span class="step-number">1</span> Migration DosyasÄ± OluÅŸtur</h3>
                <p><span class="file-path">Modules/Shop/database/migrations/tenant/033_add_price_without_tax_to_shop_products.php</span></p>

                <div class="code-box"><?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;
use Illuminate\Support\Facades\DB;

return new class extends Migration
{
    public function up()
    {
        Schema::table('shop_products', function (Blueprint $table) {
            $table->decimal('price_without_tax', 12, 2)
                ->nullable()
                ->after('base_price')
                ->comment('KDV hariÃ§ fiyat (runtime calculation kaynak)');
        });

        // Data Migration: base_price â†’ price_without_tax
        // VarsayÄ±m: base_price KDV HARÄ°Ã‡ girilmiÅŸ
        DB::statement('
            UPDATE shop_products
            SET price_without_tax = base_price
            WHERE price_without_tax IS NULL
        ');
    }

    public function down()
    {
        Schema::table('shop_products', function (Blueprint $table) {
            $table->dropColumn('price_without_tax');
        });
    }
};</div>

                <div class="alert-box">
                    <h4>âš ï¸ Ã–NEMLÄ°: Data Migration VarsayÄ±mÄ±</h4>
                    <p>Mevcut <code>base_price</code> deÄŸerleri <strong>KDV HARÄ°Ã‡</strong> girilmiÅŸ varsayÄ±yorum.</p>
                    <p>EÄŸer KDV DAHÄ°L girildiyse, Ã¶nce hesaplama yapmalÄ±yÄ±z!</p>
                </div>
            </div>

            <div class="step-card">
                <h3><span class="step-number">2</span> Migration Ã‡alÄ±ÅŸtÄ±r</h3>
                <div class="code-box">php artisan tenants:migrate --tenants=2</div>
            </div>
        </section>

        <!-- ADIM 2: MODEL -->
        <section>
            <h2>ğŸ—ï¸ AdÄ±m 2: ShopProduct Model</h2>

            <div class="step-card">
                <h3><span class="step-number">3</span> Fillable ve Casts Ekle</h3>
                <p><span class="file-path">Modules/Shop/app/Models/ShopProduct.php</span></p>

                <div class="code-box">// Fillable array'e ekle:
protected $fillable = [
    // ... existing fields
    'base_price',
    'price_without_tax',  // â† YENÄ°!
    'tax_rate',
    // ... existing fields
];

// Casts array'e ekle:
protected $casts = [
    // ... existing casts
    'base_price' => 'decimal:2',
    'price_without_tax' => 'decimal:2',  // â† YENÄ°!
    'tax_rate' => 'decimal:2',
    // ... existing casts
];</div>
            </div>

            <div class="step-card">
                <h3><span class="step-number">4</span> Accessor MetodlarÄ± Ekle</h3>
                <div class="code-box">/**
 * KDV dahil fiyat hesaplama (Runtime)
 */
public function getPriceWithTaxAttribute(): float
{
    if (!$this->price_without_tax) {
        return 0.0;
    }

    $taxRate = $this->tax_rate ?? 20.0;
    return (float) ($this->price_without_tax * (1 + $taxRate / 100));
}

/**
 * KDV tutarÄ± hesaplama
 */
public function getTaxAmountAttribute(): float
{
    return $this->price_with_tax - ($this->price_without_tax ?? 0.0);
}

// KullanÄ±m:
$product = ShopProduct::find(1);
echo $product->price_without_tax;  // 1000.00 (DB'den)
echo $product->price_with_tax;     // 1200.00 (Hesaplanan!)
echo $product->tax_amount;         // 200.00 (Hesaplanan!)</div>
            </div>
        </section>

        <!-- ADIM 3: ADMIN LIVEWIRE -->
        <section>
            <h2>ğŸ¨ AdÄ±m 3: Admin Livewire Component</h2>

            <div class="step-card">
                <h3><span class="step-number">5</span> Component Ã–zellik ve Metodlar</h3>
                <p><span class="file-path">Modules/Shop/app/Http/Livewire/Admin/ShopProductManageComponent.php</span></p>

                <div class="code-box">// Public properties ekle:
public $price_without_tax;
public $price_with_tax;
public $tax_rate = 20.0;

// mount() iÃ§inde:
public function mount($productId = null)
{
    // ... existing code

    if ($productId) {
        $product = ShopProduct::find($productId);
        $this->price_without_tax = $product->price_without_tax;
        $this->tax_rate = $product->tax_rate ?? 20.0;
        $this->calculatePriceWithTax();
    }
}

// Livewire update metodlarÄ±:
public function updatedPriceWithoutTax()
{
    $this->calculatePriceWithTax();
}

public function updatedPriceWithTax()
{
    $this->calculatePriceWithoutTax();
}

public function updatedTaxRate()
{
    // Hangisi doluysa ondan hesapla
    if ($this->price_without_tax) {
        $this->calculatePriceWithTax();
    } elseif ($this->price_with_tax) {
        $this->calculatePriceWithoutTax();
    }
}

private function calculatePriceWithTax()
{
    if (!$this->price_without_tax || !$this->tax_rate) {
        $this->price_with_tax = null;
        return;
    }
    $this->price_with_tax = $this->price_without_tax * (1 + $this->tax_rate / 100);
}

private function calculatePriceWithoutTax()
{
    if (!$this->price_with_tax || !$this->tax_rate) {
        $this->price_without_tax = null;
        return;
    }
    $this->price_without_tax = $this->price_with_tax / (1 + $this->tax_rate / 100);
}

// save() metodunda:
public function save()
{
    // ... validation

    $product->update([
        'price_without_tax' => $this->price_without_tax,
        'tax_rate' => $this->tax_rate,
        // price_with_tax KAYDEDÄ°LMEZ! (accessor ile runtime)
    ]);
}</div>
            </div>

            <div class="step-card">
                <h3><span class="step-number">6</span> Admin Blade Template</h3>
                <p><span class="file-path">Modules/Shop/resources/views/admin/livewire/shop-product-manage-component.blade.php</span></p>

                <div class="code-box">&lt;!-- FiyatlandÄ±rma BÃ¶lÃ¼mÃ¼ --&gt;
&lt;div class="row"&gt;
    &lt;div class="col-md-4"&gt;
        &lt;div class="mb-3"&gt;
            &lt;label class="form-label"&gt;KDV HariÃ§ Fiyat (â‚º)&lt;/label&gt;
            &lt;input
                type="number"
                wire:model.live="price_without_tax"
                class="form-control"
                step="0.01"
                placeholder="Ã–rnek: 1000.00"
            &gt;
            &lt;small class="form-text text-muted"&gt;
                Buraya girilince KDV dahil otomatik hesaplanÄ±r
            &lt;/small&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;div class="col-md-4"&gt;
        &lt;div class="mb-3"&gt;
            &lt;label class="form-label"&gt;KDV Dahil Fiyat (â‚º)&lt;/label&gt;
            &lt;input
                type="number"
                wire:model.live="price_with_tax"
                class="form-control"
                step="0.01"
                placeholder="Ã–rnek: 1200.00"
            &gt;
            &lt;small class="form-text text-muted"&gt;
                Buraya girilince KDV hariÃ§ otomatik hesaplanÄ±r
            &lt;/small&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;div class="col-md-4"&gt;
        &lt;div class="mb-3"&gt;
            &lt;label class="form-label"&gt;KDV OranÄ± (%)&lt;/label&gt;
            &lt;input
                type="number"
                wire:model.live="tax_rate"
                class="form-control"
                step="0.01"
            &gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Fiyat Ã–zeti --&gt;
&lt;div class="alert alert-info"&gt;
    &lt;strong&gt;Ã–zet:&lt;/strong&gt;
    KDV HariÃ§: {{ number_format($price_without_tax ?? 0, 2) }} â‚º |
    KDV: {{ number_format(($price_with_tax ?? 0) - ($price_without_tax ?? 0), 2) }} â‚º |
    KDV Dahil: {{ number_format($price_with_tax ?? 0, 2) }} â‚º
&lt;/div&gt;</div>
            </div>

            <!-- ADMIN MOCKUP -->
            <h3>ğŸ¨ Admin Panel Mockup</h3>
            <div class="mockup">
                <h4>ÃœrÃ¼n FiyatlandÄ±rma</h4>

                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label">KDV HariÃ§ Fiyat (â‚º)</label>
                            <input type="text" class="form-input" value="1.000,00" placeholder="Buraya girin...">
                            <small style="color: #6b7280; font-size: 0.85rem;">â†’ KDV dahil otomatik hesaplanÄ±r</small>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label">KDV Dahil Fiyat (â‚º)</label>
                            <input type="text" class="form-input" value="1.200,00" placeholder="veya buraya girin...">
                            <small style="color: #6b7280; font-size: 0.85rem;">â†’ KDV hariÃ§ otomatik hesaplanÄ±r</small>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label">KDV OranÄ± (%)</label>
                            <input type="text" class="form-input" value="20,00">
                        </div>
                    </div>
                </div>

                <div class="price-summary">
                    <div class="price-summary-item">
                        <div class="price-summary-label">KDV HariÃ§</div>
                        <div class="price-summary-value">1.000,00 â‚º</div>
                    </div>
                    <div class="price-summary-item">
                        <div class="price-summary-label">KDV TutarÄ±</div>
                        <div class="price-summary-value">200,00 â‚º</div>
                    </div>
                    <div class="price-summary-item">
                        <div class="price-summary-label">KDV Dahil</div>
                        <div class="price-summary-value">1.200,00 â‚º</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ADIM 4: FRONTEND -->
        <section>
            <h2>ğŸŒ AdÄ±m 4: Frontend - ÃœrÃ¼n KartlarÄ±</h2>

            <div class="step-card">
                <h3><span class="step-number">7</span> ÃœrÃ¼n KartlarÄ±nda GÃ¶sterim</h3>
                <p><span class="file-path">resources/views/components/ixtif/product-card.blade.php</span></p>

                <div class="code-box">@php
    // Setting'den gÃ¶sterim modunu al
    $displayMode = setting('shop_product_tax', true);
    // true = KDV dahil gÃ¶ster
    // false = KDV hariÃ§ gÃ¶ster
@endphp

&lt;div class="product-card"&gt;
    &lt;h3&gt;{{ $product->title }}&lt;/h3&gt;

    &lt;div class="product-price"&gt;
        @if($displayMode)
            &lt;!-- KDV Dahil GÃ¶ster --&gt;
            &lt;span class="price"&gt;
                {{ number_format($product->price_with_tax, 2) }} â‚º
            &lt;/span&gt;
            &lt;small&gt;KDV Dahil&lt;/small&gt;
        @else
            &lt;!-- KDV HariÃ§ GÃ¶ster --&gt;
            &lt;span class="price"&gt;
                {{ number_format($product->price_without_tax, 2) }} â‚º
            &lt;/span&gt;
            &lt;small&gt;+ KDV&lt;/small&gt;
        @endif
    &lt;/div&gt;

    &lt;button&gt;Sepete Ekle&lt;/button&gt;
&lt;/div&gt;</div>
            </div>

            <!-- FRONTEND MOCKUP -->
            <h3>ğŸ¨ Frontend Mockup - Ä°ki Senaryo</h3>

            <div class="mockup">
                <h4>Senaryo 1: shop_product_tax = AÃ‡IK (KDV Dahil GÃ¶ster)</h4>
                <div class="product-card">
                    <div class="product-title">ğŸ—ï¸ Forklift 3 Ton AkÃ¼lÃ¼</div>
                    <p style="color: #6b7280; margin: 10px 0;">Elektrikli forklift, 3000 kg kaldÄ±rma kapasitesi</p>
                    <div class="product-price">
                        1.200,00 â‚º <small>KDV Dahil</small>
                    </div>
                </div>

                <h4 style="margin-top: 30px;">Senaryo 2: shop_product_tax = KAPALI (KDV HariÃ§ GÃ¶ster)</h4>
                <div class="product-card">
                    <div class="product-title">ğŸ—ï¸ Forklift 3 Ton AkÃ¼lÃ¼</div>
                    <p style="color: #6b7280; margin: 10px 0;">Elektrikli forklift, 3000 kg kaldÄ±rma kapasitesi</p>
                    <div class="product-price">
                        1.000,00 â‚º <small>+ KDV</small>
                    </div>
                </div>
            </div>

            <div class="alert-box">
                <h4>âš ï¸ Ã–NEMLÄ°: Cart & Checkout HER ZAMAN KDV Dahil!</h4>
                <p>ÃœrÃ¼n kartlarÄ±nda hangi gÃ¶sterim seÃ§ilirse seÃ§ilsin, sepet ve Ã¶deme sayfalarÄ±nda HER ZAMAN KDV dahil fiyat gÃ¶sterilir.</p>
            </div>
        </section>

        <!-- ADIM 5: CART SERVICE -->
        <section>
            <h2>ğŸ›’ AdÄ±m 5: CartService GÃ¼ncelleme</h2>

            <div class="step-card">
                <h3><span class="step-number">8</span> CartService setPricing Metodunu GÃ¼ncelle</h3>
                <p><span class="file-path">Modules/Cart/app/Services/CartService.php</span></p>

                <div class="code-box">protected function setPricing($cartItem, $item, $quantity): void
{
    // ESKÄ°: base_price kullanÄ±yorduk
    // YENÄ°: accessor'larÄ± kullan

    // KDV hariÃ§ fiyat
    $priceWithoutTax = $item->price_without_tax ?? 0;

    // KDV dahil fiyat (accessor ile runtime)
    $priceWithTax = $item->price_with_tax ?? 0;

    // KDV oranÄ±
    $taxRate = $item->tax_rate ?? 20.0;

    // KDV tutarÄ±
    $taxAmount = $priceWithTax - $priceWithoutTax;

    // Cart item'e set et
    $cartItem->unit_price = $priceWithoutTax;
    $cartItem->tax_amount = $taxAmount;
    $cartItem->tax_rate = $taxRate;
    $cartItem->final_price = $priceWithTax;
    $cartItem->subtotal = $priceWithoutTax * $quantity;
    $cartItem->total = $priceWithTax * $quantity;
}</div>

                <div class="info-box">
                    <h4>ğŸ’¡ ArtÄ±k Hesaplama Yok!</h4>
                    <p>Eskiden base_price'tan KDV dahil fiyatÄ± hesaplÄ±yorduk.</p>
                    <p>Åimdi accessor'dan direkt alÄ±yoruz â†’ Kod daha temiz!</p>
                </div>
            </div>
        </section>

        <!-- ADIM 6: SUBSCRIPTION -->
        <section>
            <h2>ğŸ’³ AdÄ±m 6: Subscription (AynÄ± MantÄ±k)</h2>

            <div class="step-card">
                <h3><span class="step-number">9</span> SubscriptionPlan GÃ¼ncelleme</h3>
                <p><span class="file-path">Modules/Subscription/app/Models/SubscriptionPlan.php</span></p>

                <div class="code-box">// billing_cycles JSON yapÄ±sÄ± gÃ¼ncellenecek:

// ESKÄ°:
{
    "monthly": {
        "price": 199.90,
        "duration_months": 1
    }
}

// YENÄ°:
{
    "monthly": {
        "price_without_tax": 166.58,
        "price_with_tax": 199.90,
        "tax_rate": 20.00,
        "duration_months": 1
    }
}

// Accessor ekle:
public function getPriceWithTaxForCycle($cycle)
{
    $data = $this->billing_cycles[$cycle] ?? null;
    if (!$data) return 0;

    $priceWithoutTax = $data['price_without_tax'] ?? 0;
    $taxRate = $data['tax_rate'] ?? 20.0;

    return $priceWithoutTax * (1 + $taxRate / 100);
}</div>
            </div>
        </section>

        <!-- TEST PLANI -->
        <section>
            <h2>âœ… Test PlanÄ±</h2>

            <div class="step-card">
                <h3><span class="step-number">10</span> Test AdÄ±mlarÄ±</h3>
                <ul>
                    <li><strong>Admin Panel:</strong>
                        <ul>
                            <li>KDV hariÃ§ fiyat gir â†’ KDV dahil otomatik hesaplanmalÄ±</li>
                            <li>KDV dahil fiyat gir â†’ KDV hariÃ§ otomatik hesaplanmalÄ±</li>
                            <li>KDV oranÄ± deÄŸiÅŸtir â†’ Ä°ki fiyat da gÃ¼ncellenmeli</li>
                            <li>Kaydet â†’ Sadece price_without_tax database'e yazÄ±lmalÄ±</li>
                        </ul>
                    </li>
                    <li><strong>Frontend:</strong>
                        <ul>
                            <li>shop_product_tax = true â†’ KDV dahil gÃ¶sterilmeli</li>
                            <li>shop_product_tax = false â†’ KDV hariÃ§ + KDV gÃ¶sterilmeli</li>
                        </ul>
                    </li>
                    <li><strong>Cart:</strong>
                        <ul>
                            <li>ÃœrÃ¼n ekle â†’ Her zaman KDV dahil fiyat gÃ¶rÃ¼nmeli</li>
                            <li>Toplam hesaplama doÄŸru mu kontrol et</li>
                        </ul>
                    </li>
                    <li><strong>Performans:</strong>
                        <ul>
                            <li>100 Ã¼rÃ¼n listesi â†’ Load time artÄ±ÅŸÄ± 0.01ms'den az olmalÄ±</li>
                        </ul>
                    </li>
                </ul>
            </div>
        </section>

        <!-- ONAY -->
        <section>
            <h2>ğŸ¯ Onay Bekleniyor</h2>

            <div class="highlight-box">
                <h4>âœ… TÃ¼m AdÄ±mlar HazÄ±r!</h4>
                <ul>
                    <li>âœ… Migration: price_without_tax ekle, base_price'dan data migrate et</li>
                    <li>âœ… Model: Accessor'lar ekle (getPriceWithTaxAttribute, getTaxAmountAttribute)</li>
                    <li>âœ… Admin Livewire: Ä°ki input senkron Ã§alÄ±ÅŸma</li>
                    <li>âœ… Frontend: shop_product_tax setting'e gÃ¶re gÃ¶sterim</li>
                    <li>âœ… CartService: Runtime calculation kullan</li>
                    <li>âœ… Subscription: AynÄ± mantÄ±ÄŸÄ± uygula</li>
                </ul>
            </div>

            <div class="alert-box">
                <h4>âš ï¸ Data Migration OnayÄ± Gerekli!</h4>
                <p>Mevcut <code>base_price</code> deÄŸerleri <strong>KDV HARÄ°Ã‡</strong> mi yoksa <strong>KDV DAHÄ°L</strong> mi girilmiÅŸ?</p>
                <p><strong>VarsayÄ±mÄ±m:</strong> KDV hariÃ§ (Ã§Ã¼nkÃ¼ tax_rate alanÄ± var)</p>
                <p><strong>Onaylar mÄ±sÄ±nÄ±z?</strong> Yoksa bir Ã¶rnek Ã¼rÃ¼ne bakayÄ±m mÄ±?</p>
            </div>

            <div class="info-box">
                <h4>ğŸš€ Uygulama OnayÄ±</h4>
                <p><strong>"UYGUNDUR"</strong> derseniz tÃ¼m adÄ±mlarÄ± sÄ±rayla uygulayacaÄŸÄ±m:</p>
                <ol>
                    <li>Migration Ã§alÄ±ÅŸtÄ±r</li>
                    <li>Model gÃ¼ncelle</li>
                    <li>Admin Livewire gÃ¼ncelle</li>
                    <li>Frontend gÃ¼ncelle</li>
                    <li>CartService gÃ¼ncelle</li>
                    <li>Cache temizle + test</li>
                </ol>
            </div>
        </section>

        <footer>
            ğŸ¤– Claude AI - 2025-12-03
        </footer>
    </div>
</body>
</html>