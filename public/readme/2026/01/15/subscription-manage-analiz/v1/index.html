<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subscription Manage Sayfa Analizi - Muzibu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        .gradient-bg { background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); }
        .card-hover:hover { transform: translateY(-2px); box-shadow: 0 10px 40px rgba(0,0,0,0.3); }
    </style>
</head>
<body class="gradient-bg min-h-screen text-gray-100">
    <div class="container mx-auto px-4 py-8 max-w-6xl">

        <!-- Header -->
        <div class="text-center mb-10">
            <div class="inline-flex items-center gap-3 bg-slate-800/50 px-6 py-3 rounded-full mb-4">
                <i class="fas fa-credit-card text-emerald-400 text-xl"></i>
                <span class="text-slate-400 text-sm">Admin Panel Analizi</span>
            </div>
            <h1 class="text-4xl font-bold mb-3">
                <span class="bg-gradient-to-r from-emerald-400 to-cyan-400 bg-clip-text text-transparent">
                    Subscription Manage Sayfası
                </span>
            </h1>
            <p class="text-slate-400 text-lg">/admin/subscription/manage - Sistem Analizi</p>
        </div>

        <!-- İki Seviyeli İçerik -->
        <div class="grid gap-8">

            <!-- BÖLÜM 1: Basit Anlatım -->
            <div class="bg-slate-800/50 rounded-2xl p-6 border border-slate-700/50">
                <div class="flex items-center gap-3 mb-6">
                    <div class="w-10 h-10 bg-blue-500/20 rounded-xl flex items-center justify-center">
                        <i class="fas fa-book-open text-blue-400"></i>
                    </div>
                    <h2 class="text-xl font-semibold text-blue-400">Basit Anlatım (Herkes İçin)</h2>
                </div>

                <div class="space-y-4 text-slate-300">
                    <div class="bg-slate-700/30 rounded-xl p-4">
                        <h3 class="font-semibold text-white mb-2"><i class="fas fa-question-circle text-yellow-400 mr-2"></i>Bu Sayfa Ne Yapıyor?</h3>
                        <p>Subscription Manage sayfası, kullanıcılara abonelik oluşturmak ve düzenlemek için kullanılıyor. Bir kullanıcıya yeni bir premium abonelik vermek istediğinizde bu sayfadan yapıyorsunuz.</p>
                    </div>

                    <div class="bg-slate-700/30 rounded-xl p-4">
                        <h3 class="font-semibold text-white mb-2"><i class="fas fa-cogs text-emerald-400 mr-2"></i>Mevcut Özellikler</h3>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li><strong>Kullanıcı Seçimi:</strong> Kime abonelik vereceğinizi seçiyorsunuz</li>
                            <li><strong>Plan Seçimi:</strong> Hangi paketi seçeceğinizi belirliyorsunuz (örn: Premium)</li>
                            <li><strong>Süre Seçimi:</strong> 15 gün, 1 ay, 3 ay, 1 yıl gibi seçenekler</li>
                            <li><strong>Tarih Ayarlama:</strong> Başlangıç ve bitiş tarihleri</li>
                            <li><strong>Deneme Süresi:</strong> Ücretsiz deneme verip vermeyeceğiniz</li>
                            <li><strong>Otomatik Yenileme:</strong> Süre dolduğunda otomatik uzatılsın mı</li>
                        </ul>
                    </div>

                    <div class="bg-slate-700/30 rounded-xl p-4">
                        <h3 class="font-semibold text-white mb-2"><i class="fas fa-link text-purple-400 mr-2"></i>Abonelik Zinciri Nedir?</h3>
                        <p>Bir kullanıcıya birden fazla abonelik satabilirsiniz. Örneğin bugün 1 aylık aldı, gelecek ay için de 3 aylık aldı. Bunlar "zincir" oluşturur - biri bitince diğeri otomatik başlar.</p>
                    </div>

                    <div class="bg-amber-500/10 border border-amber-500/30 rounded-xl p-4">
                        <h3 class="font-semibold text-amber-400 mb-2"><i class="fas fa-exclamation-triangle mr-2"></i>Geliştirme İhtiyacı</h3>
                        <p class="text-amber-200/80">Sayfanın hangi özelliklerini geliştirmek istediğinizi belirtin. Mevcut sistem zaten oldukça kapsamlı.</p>
                    </div>
                </div>
            </div>

            <!-- BÖLÜM 2: Teknik Detaylar -->
            <div class="bg-slate-800/50 rounded-2xl p-6 border border-slate-700/50">
                <div class="flex items-center gap-3 mb-6">
                    <div class="w-10 h-10 bg-emerald-500/20 rounded-xl flex items-center justify-center">
                        <i class="fas fa-code text-emerald-400"></i>
                    </div>
                    <h2 class="text-xl font-semibold text-emerald-400">Teknik Detaylar (Geliştiriciler İçin)</h2>
                </div>

                <!-- Dosya Yapısı -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold text-white mb-3"><i class="fas fa-folder-tree text-yellow-400 mr-2"></i>Dosya Yapısı</h3>
                    <div class="bg-slate-900/50 rounded-xl p-4 font-mono text-sm overflow-x-auto">
                        <pre class="text-slate-300">
Modules/Subscription/
├── App/Http/Livewire/Admin/
│   ├── <span class="text-emerald-400">SubscriptionManageComponent.php</span>  ← Ana component
│   ├── SubscriptionComponent.php           ← Liste sayfası
│   ├── SubscriptionPlanComponent.php       ← Plan listesi
│   └── SubscriptionPlanManageComponent.php ← Plan formu
├── resources/views/admin/livewire/
│   ├── <span class="text-emerald-400">subscription-manage-component.blade.php</span>  ← Form view
│   └── subscription-component.blade.php     ← Liste view
├── App/Models/
│   ├── <span class="text-cyan-400">Subscription.php</span>      ← Abonelik modeli
│   └── <span class="text-cyan-400">SubscriptionPlan.php</span>  ← Plan modeli
└── routes/admin.php</pre>
                    </div>
                </div>

                <!-- Route Bilgisi -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold text-white mb-3"><i class="fas fa-route text-blue-400 mr-2"></i>Route Tanımları</h3>
                    <div class="bg-slate-900/50 rounded-xl p-4 font-mono text-sm">
                        <p class="text-slate-400 mb-2">// Modules/Subscription/routes/admin.php</p>
                        <p><span class="text-yellow-400">GET</span> <span class="text-emerald-400">/admin/subscription/manage/{id?}</span> → SubscriptionManageComponent</p>
                        <p><span class="text-yellow-400">GET</span> <span class="text-slate-400">/admin/subscription/</span> → SubscriptionComponent (liste)</p>
                        <p><span class="text-yellow-400">GET</span> <span class="text-slate-400">/admin/subscription/stats</span> → SubscriptionStatsComponent</p>
                    </div>
                </div>

                <!-- Component Properties -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold text-white mb-3"><i class="fas fa-sliders text-purple-400 mr-2"></i>Livewire Component Properties</h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="bg-slate-900/50 rounded-xl p-4">
                            <h4 class="text-cyan-400 font-semibold mb-2">Form Alanları</h4>
                            <ul class="text-sm space-y-1 font-mono">
                                <li><span class="text-yellow-400">$user_id</span> - Kullanıcı ID</li>
                                <li><span class="text-yellow-400">$subscription_plan_id</span> - Plan ID</li>
                                <li><span class="text-yellow-400">$cycle_key</span> - Süre anahtarı (aylik, yillik...)</li>
                                <li><span class="text-yellow-400">$status</span> - active|trial|paused|cancelled|expired</li>
                                <li><span class="text-yellow-400">$started_at</span> - Başlangıç tarihi</li>
                                <li><span class="text-yellow-400">$current_period_end</span> - Bitiş tarihi</li>
                                <li><span class="text-yellow-400">$has_trial</span> - Deneme var mı</li>
                                <li><span class="text-yellow-400">$trial_days</span> - Deneme gün sayısı</li>
                                <li><span class="text-yellow-400">$auto_renew</span> - Otomatik yenileme</li>
                            </ul>
                        </div>
                        <div class="bg-slate-900/50 rounded-xl p-4">
                            <h4 class="text-cyan-400 font-semibold mb-2">Dinamik Cycle Sistemi</h4>
                            <ul class="text-sm space-y-1 font-mono">
                                <li><span class="text-emerald-400">$cycles</span> - Plan'dan gelen cycle listesi</li>
                                <li><span class="text-emerald-400">$selectedCycle</span> - Seçili cycle detayları</li>
                                <li class="text-slate-400 mt-2">Cycle Yapısı:</li>
                                <li class="pl-3">• label (çoklu dil)</li>
                                <li class="pl-3">• duration_days</li>
                                <li class="pl-3">• price / compare_price</li>
                                <li class="pl-3">• trial_days</li>
                                <li class="pl-3">• badge / promo_text</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Veritabanı Şeması -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold text-white mb-3"><i class="fas fa-database text-orange-400 mr-2"></i>Veritabanı Şeması</h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="bg-slate-900/50 rounded-xl p-4">
                            <h4 class="text-orange-400 font-semibold mb-2">subscriptions tablosu</h4>
                            <ul class="text-xs space-y-1 font-mono text-slate-300">
                                <li>subscription_id (PK)</li>
                                <li>user_id (FK → users)</li>
                                <li>subscription_plan_id (FK)</li>
                                <li>subscription_number (unique)</li>
                                <li>status (enum)</li>
                                <li>cycle_key, cycle_metadata (JSON)</li>
                                <li>price_per_cycle, currency</li>
                                <li>started_at, current_period_end</li>
                                <li>has_trial, trial_days, trial_ends_at</li>
                                <li>auto_renew, cancelled_at</li>
                                <li>metadata (JSON - order_id, corporate...)</li>
                            </ul>
                        </div>
                        <div class="bg-slate-900/50 rounded-xl p-4">
                            <h4 class="text-orange-400 font-semibold mb-2">subscription_plans tablosu</h4>
                            <ul class="text-xs space-y-1 font-mono text-slate-300">
                                <li>subscription_plan_id (PK)</li>
                                <li>title, description (JSON - çoklu dil)</li>
                                <li>slug (unique)</li>
                                <li>currency, tax_rate</li>
                                <li>billing_cycles (JSON - dinamik fiyatlar)</li>
                                <li>features (JSON)</li>
                                <li>device_limit</li>
                                <li>is_trial, is_featured, is_active</li>
                                <li>sort_order</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Status Değerleri -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold text-white mb-3"><i class="fas fa-traffic-light text-red-400 mr-2"></i>Status Değerleri</h3>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                        <div class="bg-emerald-500/20 border border-emerald-500/30 rounded-lg p-3 text-center">
                            <span class="text-emerald-400 font-semibold">active</span>
                            <p class="text-xs text-slate-400 mt-1">Aktif abonelik</p>
                        </div>
                        <div class="bg-cyan-500/20 border border-cyan-500/30 rounded-lg p-3 text-center">
                            <span class="text-cyan-400 font-semibold">trial</span>
                            <p class="text-xs text-slate-400 mt-1">Deneme süresi</p>
                        </div>
                        <div class="bg-yellow-500/20 border border-yellow-500/30 rounded-lg p-3 text-center">
                            <span class="text-yellow-400 font-semibold">pending</span>
                            <p class="text-xs text-slate-400 mt-1">Sırada bekliyor</p>
                        </div>
                        <div class="bg-orange-500/20 border border-orange-500/30 rounded-lg p-3 text-center">
                            <span class="text-orange-400 font-semibold">pending_payment</span>
                            <p class="text-xs text-slate-400 mt-1">Ödeme bekliyor</p>
                        </div>
                        <div class="bg-red-500/20 border border-red-500/30 rounded-lg p-3 text-center">
                            <span class="text-red-400 font-semibold">expired</span>
                            <p class="text-xs text-slate-400 mt-1">Süresi dolmuş</p>
                        </div>
                        <div class="bg-slate-500/20 border border-slate-500/30 rounded-lg p-3 text-center">
                            <span class="text-slate-400 font-semibold">cancelled</span>
                            <p class="text-xs text-slate-400 mt-1">İptal edilmiş</p>
                        </div>
                    </div>
                </div>

                <!-- Chain System -->
                <div class="bg-purple-500/10 border border-purple-500/30 rounded-xl p-4">
                    <h3 class="text-lg font-semibold text-purple-400 mb-3"><i class="fas fa-link mr-2"></i>Subscription Chain Sistemi</h3>
                    <div class="font-mono text-sm text-slate-300">
                        <pre>
Kullanıcı #123 Abonelik Zinciri:
┌─────────────────────────────────────────────────────┐
│ <span class="text-emerald-400">ACTIVE</span> (chain_position: 1)                         │
│ 1 Ocak → 1 Şubat                                    │
└─────────────────────────────────────────────────────┘
          ↓
┌─────────────────────────────────────────────────────┐
│ <span class="text-yellow-400">PENDING</span> (chain_position: 2)                        │
│ 1 Şubat → 1 Mart                                    │
└─────────────────────────────────────────────────────┘
          ↓
┌─────────────────────────────────────────────────────┐
│ <span class="text-yellow-400">PENDING</span> (chain_position: 3)                        │
│ 1 Mart → 1 Nisan                                    │
└─────────────────────────────────────────────────────┘

<span class="text-slate-500">// Silme durumunda → rechainUserSubscriptions() otomatik düzenler</span></pre>
                    </div>
                </div>
            </div>

            <!-- BÖLÜM 3: Mevcut Form Yapısı -->
            <div class="bg-slate-800/50 rounded-2xl p-6 border border-slate-700/50">
                <div class="flex items-center gap-3 mb-6">
                    <div class="w-10 h-10 bg-orange-500/20 rounded-xl flex items-center justify-center">
                        <i class="fas fa-window-restore text-orange-400"></i>
                    </div>
                    <h2 class="text-xl font-semibold text-orange-400">Mevcut Form Yapısı (UI)</h2>
                </div>

                <div class="grid md:grid-cols-2 gap-6">
                    <!-- Sol Kolon -->
                    <div class="space-y-4">
                        <h3 class="text-white font-semibold"><i class="fas fa-columns text-slate-400 mr-2"></i>Sol Kolon (col-lg-8)</h3>

                        <div class="bg-slate-700/30 rounded-xl p-4">
                            <h4 class="text-cyan-400 font-semibold mb-2">Card 1: Abonelik Bilgileri</h4>
                            <ul class="text-sm text-slate-300 space-y-1">
                                <li>• Kullanıcı Seçimi (select2, disabled düzenlemede)</li>
                                <li>• Plan Seçimi (select, wire:change ile cycle güncelle)</li>
                                <li>• Süre Seçeneği (dinamik radio/select)</li>
                                <li>• Cycle Detayları (info alert)</li>
                            </ul>
                        </div>

                        <div class="bg-slate-700/30 rounded-xl p-4">
                            <h4 class="text-cyan-400 font-semibold mb-2">Card 2: Tarihler</h4>
                            <ul class="text-sm text-slate-300 space-y-1">
                                <li>• Başlangıç Tarihi (datetime-local)</li>
                                <li>• Bitiş Tarihi (otomatik hesaplanır)</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Sağ Kolon -->
                    <div class="space-y-4">
                        <h3 class="text-white font-semibold"><i class="fas fa-columns text-slate-400 mr-2"></i>Sağ Kolon (col-lg-4)</h3>

                        <div class="bg-slate-700/30 rounded-xl p-4">
                            <h4 class="text-cyan-400 font-semibold mb-2">Card 3: Durum</h4>
                            <p class="text-sm text-slate-300">Status select (6 seçenek)</p>
                        </div>

                        <div class="bg-slate-700/30 rounded-xl p-4">
                            <h4 class="text-cyan-400 font-semibold mb-2">Card 4: Deneme Süresi</h4>
                            <ul class="text-sm text-slate-300 space-y-1">
                                <li>• Has Trial (checkbox)</li>
                                <li>• Trial Days (number, koşullu gösterim)</li>
                            </ul>
                        </div>

                        <div class="bg-slate-700/30 rounded-xl p-4">
                            <h4 class="text-cyan-400 font-semibold mb-2">Card 5: Yenileme</h4>
                            <p class="text-sm text-slate-300">Auto Renew (checkbox)</p>
                        </div>

                        <div class="bg-slate-700/30 rounded-xl p-4">
                            <h4 class="text-cyan-400 font-semibold mb-2">Card 6: Kaydet</h4>
                            <p class="text-sm text-slate-300">Submit Button</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- BÖLÜM 4: Geliştirme Önerileri -->
            <div class="bg-gradient-to-r from-emerald-500/10 to-cyan-500/10 rounded-2xl p-6 border border-emerald-500/30">
                <div class="flex items-center gap-3 mb-6">
                    <div class="w-10 h-10 bg-emerald-500/20 rounded-xl flex items-center justify-center">
                        <i class="fas fa-lightbulb text-emerald-400"></i>
                    </div>
                    <h2 class="text-xl font-semibold text-emerald-400">Geliştirme Önerileri</h2>
                </div>

                <div class="grid md:grid-cols-2 gap-4">
                    <div class="bg-slate-800/50 rounded-xl p-4">
                        <h3 class="text-white font-semibold mb-2"><i class="fas fa-plus-circle text-emerald-400 mr-2"></i>Eklenebilecek Özellikler</h3>
                        <ul class="text-sm text-slate-300 space-y-2">
                            <li>• Toplu abonelik oluşturma (CSV import)</li>
                            <li>• Abonelik klonlama</li>
                            <li>• Hızlı uzatma butonları (+7 gün, +30 gün)</li>
                            <li>• Abonelik notları/yorumları</li>
                            <li>• Fiyat override (manuel fiyat)</li>
                            <li>• Kurumsal hesap entegrasyonu</li>
                        </ul>
                    </div>
                    <div class="bg-slate-800/50 rounded-xl p-4">
                        <h3 class="text-white font-semibold mb-2"><i class="fas fa-magic text-purple-400 mr-2"></i>UX İyileştirmeleri</h3>
                        <ul class="text-sm text-slate-300 space-y-2">
                            <li>• Kullanıcı arama autocomplete</li>
                            <li>• Tarih seçici iyileştirmesi</li>
                            <li>• Önizleme modu (kaydetmeden önce)</li>
                            <li>• Daha iyi validation mesajları</li>
                            <li>• Keyboard shortcuts</li>
                        </ul>
                    </div>
                </div>

                <div class="mt-6 bg-amber-500/10 border border-amber-500/30 rounded-xl p-4">
                    <p class="text-amber-200"><i class="fas fa-question-circle mr-2"></i>Hangi özelliği geliştirmek istediğinizi belirtin, detaylı plan hazırlayalım.</p>
                </div>
            </div>

        </div>

        <!-- Footer -->
        <div class="text-center mt-10 pt-6 border-t border-slate-700/50">
            <p class="text-slate-500 text-sm">15 Ocak 2026 • Muzibu.com</p>
        </div>
    </div>
</body>
</html>