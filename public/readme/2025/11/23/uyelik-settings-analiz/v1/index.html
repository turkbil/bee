<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ãœyelik Sistemi - Settings Analizi & 2FA Karar</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #e2e8f0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            line-height: 1.7;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        header {
            margin-bottom: 40px;
            padding-bottom: 30px;
            border-bottom: 2px solid #334155;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #60a5fa, #a78bfa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .meta {
            color: #94a3b8;
            font-size: 0.95rem;
        }

        h2 {
            font-size: 1.6rem;
            margin-bottom: 20px;
            color: #60a5fa;
        }

        section {
            margin-bottom: 50px;
        }

        /* Decision Box */
        .decision-box {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1));
            border: 2px solid #3b82f6;
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .decision-box h3 {
            color: #60a5fa;
            font-size: 1.3rem;
            margin-bottom: 15px;
        }

        .decision-box p {
            margin-bottom: 15px;
            color: #cbd5e1;
        }

        .option-cards {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .option-cards { grid-template-columns: 1fr; }
        }

        .option-card {
            background: rgba(30, 41, 59, 0.8);
            padding: 20px;
            border-radius: 12px;
            border: 2px solid transparent;
        }

        .option-card.recommended {
            border-color: #10b981;
        }

        .option-card h4 {
            color: #f1f5f9;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .option-card.recommended h4::after {
            content: "Ã–NERÄ°LEN";
            background: #10b981;
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
        }

        .option-card ul {
            list-style: none;
            padding: 0;
        }

        .option-card li {
            padding: 4px 0;
            font-size: 0.9rem;
            color: #94a3b8;
        }

        .option-card li::before {
            content: "â€¢";
            color: #60a5fa;
            margin-right: 8px;
        }

        /* Settings Table */
        .settings-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        .settings-table th {
            background: rgba(59, 130, 246, 0.2);
            padding: 12px;
            text-align: left;
            font-weight: 600;
            color: #93c5fd;
        }

        .settings-table td {
            padding: 12px;
            border-bottom: 1px solid #334155;
        }

        .settings-table tr:hover {
            background: rgba(30, 41, 59, 0.5);
        }

        .badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .badge-exists { background: #10b981; color: white; }
        .badge-new { background: #f59e0b; color: white; }
        .badge-optional { background: #6b7280; color: white; }

        .key-code {
            font-family: monospace;
            background: rgba(0, 0, 0, 0.3);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.85rem;
            color: #fcd34d;
        }

        /* Info Box */
        .info-box {
            background: rgba(59, 130, 246, 0.1);
            border-left: 4px solid #3b82f6;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .info-box.warning {
            background: rgba(245, 158, 11, 0.1);
            border-color: #f59e0b;
        }

        .info-box.success {
            background: rgba(16, 185, 129, 0.1);
            border-color: #10b981;
        }

        .info-box h4 {
            color: #60a5fa;
            margin-bottom: 10px;
        }

        .info-box.warning h4 { color: #fcd34d; }
        .info-box.success h4 { color: #6ee7b7; }

        /* Group Section */
        .group-section {
            background: rgba(30, 41, 59, 0.5);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .group-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .group-title {
            font-size: 1.1rem;
            color: #f1f5f9;
        }

        .group-prefix {
            font-family: monospace;
            background: rgba(59, 130, 246, 0.2);
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 0.85rem;
            color: #93c5fd;
        }

        /* Flow Diagram */
        .flow-diagram {
            display: flex;
            flex-direction: column;
            gap: 15px;
            padding: 20px;
            background: rgba(30, 41, 59, 0.5);
            border-radius: 12px;
        }

        .flow-step {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .flow-number {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.9rem;
            flex-shrink: 0;
        }

        .flow-content {
            flex: 1;
        }

        .flow-content strong {
            color: #f1f5f9;
        }

        .flow-content span {
            font-size: 0.9rem;
            color: #94a3b8;
        }

        .flow-arrow {
            width: 32px;
            text-align: center;
            color: #64748b;
        }

        footer {
            margin-top: 50px;
            padding-top: 30px;
            border-top: 1px solid #334155;
            color: #64748b;
            font-size: 0.9rem;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>âš™ï¸ Settings Analizi & 2FA Karar</h1>
            <div class="meta">
                ğŸ“… Tarih: 2025-11-23 |
                ğŸ¯ Tenant-Aware Ãœyelik Sistemi |
                ğŸ“Š SettingManagement ModÃ¼lÃ¼
            </div>
        </header>

        <!-- 2FA Decision -->
        <section>
            <h2>ğŸ” 2FA KararÄ±: Tenant mÄ± KullanÄ±cÄ± mÄ±?</h2>

            <div class="decision-box">
                <h3>Soru: 2FA kimin kontrolÃ¼nde olmalÄ±?</h3>
                <p>Ä°ki faktÃ¶rlÃ¼ doÄŸrulama sisteminin nasÄ±l Ã§alÄ±ÅŸacaÄŸÄ±na karar vermeliyiz:</p>

                <div class="option-cards">
                    <div class="option-card recommended">
                        <h4>ğŸ¢ Tenant BazlÄ± (Hybrid)</h4>
                        <ul>
                            <li><strong>Tenant ayarÄ±:</strong> 2FA zorunlu/opsiyonel/kapalÄ±</li>
                            <li><strong>Zorunlu:</strong> TÃ¼m kullanÄ±cÄ±lar 2FA kullanmak zorunda</li>
                            <li><strong>Opsiyonel:</strong> KullanÄ±cÄ± kendi profilinden aÃ§ar/kapar</li>
                            <li><strong>KapalÄ±:</strong> HiÃ§ kimse kullanamaz</li>
                            <li>Setting: <code>auth_security_2fa_mode</code></li>
                            <li>DeÄŸerler: required / optional / disabled</li>
                        </ul>
                    </div>
                    <div class="option-card">
                        <h4>ğŸ‘¤ Sadece KullanÄ±cÄ± BazlÄ±</h4>
                        <ul>
                            <li>Her kullanÄ±cÄ± kendi kararÄ±nÄ± verir</li>
                            <li>Tenant mÃ¼dahale edemez</li>
                            <li>GÃ¼venlik standardÄ± yok</li>
                            <li>Kurumsal mÃ¼ÅŸteriler iÃ§in yetersiz</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="info-box success">
                <h4>âœ… Ã–nerilen: Hybrid YaklaÅŸÄ±m</h4>
                <p>Tenant, gÃ¼venlik politikasÄ±nÄ± belirler. KullanÄ±cÄ±, izin verildiÄŸinde kendi tercihini yapar.</p>
                <ul style="margin-top: 10px; padding-left: 20px;">
                    <li><strong>Muzibu:</strong> 2FA zorunlu (mÃ¼zik iÃ§erik koruma)</li>
                    <li><strong>Ä°xtif:</strong> 2FA opsiyonel veya kapalÄ± (B2B basit giriÅŸ)</li>
                    <li><strong>Kurumsal Tenant:</strong> 2FA zorunlu (gÃ¼venlik standardÄ±)</li>
                </ul>
            </div>
        </section>

        <!-- Mevcut Settings -->
        <section>
            <h2>ğŸ“‹ Mevcut Tenant-Aware Settings</h2>

            <p style="margin-bottom: 20px; color: #94a3b8;">
                SettingManagement modÃ¼lÃ¼nde tanÄ±mlÄ± 15 Ã¼yelik ayarÄ±:
            </p>

            <!-- KayÄ±t AyarlarÄ± -->
            <div class="group-section">
                <div class="group-header">
                    <span class="group-title">ğŸ“ KayÄ±t AyarlarÄ± (Group ID: 20)</span>
                    <span class="group-prefix">auth_registration</span>
                </div>
                <table class="settings-table">
                    <tr>
                        <th>Key</th>
                        <th>Label</th>
                        <th>Type</th>
                        <th>Default</th>
                    </tr>
                    <tr>
                        <td><span class="key-code">auth_registration_enabled</span></td>
                        <td>KayÄ±t Aktif</td>
                        <td>select</td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td><span class="key-code">auth_registration_email_verify</span></td>
                        <td>E-posta DoÄŸrulama</td>
                        <td>select</td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td><span class="key-code">auth_registration_approval</span></td>
                        <td>Admin OnayÄ±</td>
                        <td>select</td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td><span class="key-code">auth_registration_trial_days</span></td>
                        <td>Deneme SÃ¼resi</td>
                        <td>text</td>
                        <td>7</td>
                    </tr>
                    <tr>
                        <td><span class="key-code">auth_theme</span></td>
                        <td>Login/KayÄ±t TemasÄ±</td>
                        <td>select</td>
                        <td>minimal</td>
                    </tr>
                </table>
            </div>

            <!-- Oturum AyarlarÄ± -->
            <div class="group-section">
                <div class="group-header">
                    <span class="group-title">ğŸ”„ Oturum AyarlarÄ± (Group ID: 21)</span>
                    <span class="group-prefix">auth_session</span>
                </div>
                <table class="settings-table">
                    <tr>
                        <th>Key</th>
                        <th>Label</th>
                        <th>Type</th>
                        <th>Default</th>
                    </tr>
                    <tr>
                        <td><span class="key-code">auth_session_lifetime</span></td>
                        <td>Oturum SÃ¼resi (dk)</td>
                        <td>text</td>
                        <td>525600</td>
                    </tr>
                    <tr>
                        <td><span class="key-code">auth_session_device_limit</span></td>
                        <td>Cihaz Limiti</td>
                        <td>text</td>
                        <td>1</td>
                    </tr>
                </table>
            </div>

            <!-- GÃ¼venlik AyarlarÄ± -->
            <div class="group-section">
                <div class="group-header">
                    <span class="group-title">ğŸ”’ GÃ¼venlik AyarlarÄ± (Group ID: 22)</span>
                    <span class="group-prefix">auth_security</span>
                </div>
                <table class="settings-table">
                    <tr>
                        <th>Key</th>
                        <th>Label</th>
                        <th>Type</th>
                        <th>Default</th>
                    </tr>
                    <tr>
                        <td><span class="key-code">auth_security_max_attempts</span></td>
                        <td>Max GiriÅŸ Denemesi</td>
                        <td>text</td>
                        <td>5</td>
                    </tr>
                    <tr>
                        <td><span class="key-code">auth_security_lockout</span></td>
                        <td>Kilitleme SÃ¼resi (dk)</td>
                        <td>text</td>
                        <td>30</td>
                    </tr>
                    <tr>
                        <td><span class="key-code">auth_security_2fa_enabled</span></td>
                        <td>2FA Aktif</td>
                        <td>select</td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td><span class="key-code">auth_security_2fa_expiry</span></td>
                        <td>2FA Kod SÃ¼resi (dk)</td>
                        <td>text</td>
                        <td>5</td>
                    </tr>
                </table>
            </div>

            <!-- Abonelik AyarlarÄ± -->
            <div class="group-section">
                <div class="group-header">
                    <span class="group-title">ğŸ’³ Abonelik AyarlarÄ± (Group ID: 23)</span>
                    <span class="group-prefix">auth_subscription</span>
                </div>
                <table class="settings-table">
                    <tr>
                        <th>Key</th>
                        <th>Label</th>
                        <th>Type</th>
                        <th>Default</th>
                    </tr>
                    <tr>
                        <td><span class="key-code">auth_subscription_paid_enabled</span></td>
                        <td>Ãœcretli Ãœyelik</td>
                        <td>select</td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td><span class="key-code">auth_subscription_auto_renewal</span></td>
                        <td>Otomatik Yenileme</td>
                        <td>select</td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td><span class="key-code">auth_subscription_reminder_days</span></td>
                        <td>HatÄ±rlatma (gÃ¼n)</td>
                        <td>text</td>
                        <td>7</td>
                    </tr>
                    <tr>
                        <td><span class="key-code">auth_subscription_grace_days</span></td>
                        <td>Tolerans SÃ¼resi (gÃ¼n)</td>
                        <td>text</td>
                        <td>3</td>
                    </tr>
                </table>
            </div>

            <!-- Kurumsal AyarlarÄ± -->
            <div class="group-section">
                <div class="group-header">
                    <span class="group-title">ğŸ¢ Kurumsal Ayarlar (Group ID: 24)</span>
                    <span class="group-prefix">corporate</span>
                </div>
                <table class="settings-table">
                    <tr>
                        <th>Key</th>
                        <th>Label</th>
                        <th>Type</th>
                        <th>Default</th>
                    </tr>
                    <tr>
                        <td><span class="key-code">corporate_enabled</span></td>
                        <td>Kurumsal Ãœyelik</td>
                        <td>select</td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td><span class="key-code">corporate_max_users</span></td>
                        <td>Max Alt KullanÄ±cÄ±</td>
                        <td>text</td>
                        <td>0</td>
                    </tr>
                </table>
            </div>
        </section>

        <!-- Eksik Settings -->
        <section>
            <h2>ğŸ†• Eklenmesi Gereken Settings</h2>

            <div class="info-box warning">
                <h4>âš ï¸ Eksik Ayarlar</h4>
                <p>Ãœyelik sisteminin tam Ã§alÄ±ÅŸmasÄ± iÃ§in aÅŸaÄŸÄ±daki ayarlarÄ±n eklenmesi gerekiyor:</p>
            </div>

            <table class="settings-table">
                <tr>
                    <th>Key</th>
                    <th>Label</th>
                    <th>Type</th>
                    <th>Default</th>
                    <th>Durum</th>
                </tr>
                <tr>
                    <td><span class="key-code">auth_security_2fa_mode</span></td>
                    <td>2FA Modu</td>
                    <td>select</td>
                    <td>optional</td>
                    <td><span class="badge badge-new">YENÄ°</span></td>
                </tr>
                <tr>
                    <td><span class="key-code">auth_security_2fa_method</span></td>
                    <td>2FA YÃ¶ntemi</td>
                    <td>select</td>
                    <td>sms</td>
                    <td><span class="badge badge-new">YENÄ°</span></td>
                </tr>
                <tr>
                    <td><span class="key-code">auth_security_remember_device</span></td>
                    <td>Cihaz HatÄ±rla</td>
                    <td>select</td>
                    <td>1</td>
                    <td><span class="badge badge-new">YENÄ°</span></td>
                </tr>
                <tr>
                    <td><span class="key-code">auth_security_remember_days</span></td>
                    <td>Cihaz HatÄ±rla SÃ¼resi</td>
                    <td>text</td>
                    <td>30</td>
                    <td><span class="badge badge-new">YENÄ°</span></td>
                </tr>
                <tr>
                    <td><span class="key-code">sms_provider</span></td>
                    <td>SMS SaÄŸlayÄ±cÄ±</td>
                    <td>select</td>
                    <td>netgsm</td>
                    <td><span class="badge badge-new">YENÄ°</span></td>
                </tr>
                <tr>
                    <td><span class="key-code">sms_api_key</span></td>
                    <td>SMS API Key</td>
                    <td>password</td>
                    <td></td>
                    <td><span class="badge badge-new">YENÄ°</span></td>
                </tr>
                <tr>
                    <td><span class="key-code">sms_api_secret</span></td>
                    <td>SMS API Secret</td>
                    <td>password</td>
                    <td></td>
                    <td><span class="badge badge-new">YENÄ°</span></td>
                </tr>
                <tr>
                    <td><span class="key-code">sms_sender_id</span></td>
                    <td>SMS GÃ¶nderici AdÄ±</td>
                    <td>text</td>
                    <td></td>
                    <td><span class="badge badge-new">YENÄ°</span></td>
                </tr>
                <tr>
                    <td><span class="key-code">auth_registration_phone_required</span></td>
                    <td>Telefon Zorunlu</td>
                    <td>select</td>
                    <td>0</td>
                    <td><span class="badge badge-new">YENÄ°</span></td>
                </tr>
                <tr>
                    <td><span class="key-code">auth_registration_terms_required</span></td>
                    <td>KullanÄ±m ÅartlarÄ± Zorunlu</td>
                    <td>select</td>
                    <td>1</td>
                    <td><span class="badge badge-new">YENÄ°</span></td>
                </tr>
            </table>
        </section>

        <!-- 2FA Flow -->
        <section>
            <h2>ğŸ”„ 2FA Ã‡alÄ±ÅŸma MantÄ±ÄŸÄ±</h2>

            <div class="flow-diagram">
                <div class="flow-step">
                    <div class="flow-number">1</div>
                    <div class="flow-content">
                        <strong>Settings KontrolÃ¼</strong><br>
                        <span><code>setting('auth_security_2fa_mode')</code> â†’ required/optional/disabled</span>
                    </div>
                </div>
                <div class="flow-arrow">â†“</div>
                <div class="flow-step">
                    <div class="flow-number">2</div>
                    <div class="flow-content">
                        <strong>KullanÄ±cÄ± Tercihi</strong><br>
                        <span>mode=optional ise â†’ <code>user->two_factor_enabled</code> kontrol et</span>
                    </div>
                </div>
                <div class="flow-arrow">â†“</div>
                <div class="flow-step">
                    <div class="flow-number">3</div>
                    <div class="flow-content">
                        <strong>Cihaz KontrolÃ¼</strong><br>
                        <span><code>setting('auth_security_remember_device')</code> â†’ Cookie var mÄ±?</span>
                    </div>
                </div>
                <div class="flow-arrow">â†“</div>
                <div class="flow-step">
                    <div class="flow-number">4</div>
                    <div class="flow-content">
                        <strong>Kod GÃ¶nderimi</strong><br>
                        <span><code>setting('auth_security_2fa_method')</code> â†’ SMS/Email</span>
                    </div>
                </div>
                <div class="flow-arrow">â†“</div>
                <div class="flow-step">
                    <div class="flow-number">5</div>
                    <div class="flow-content">
                        <strong>DoÄŸrulama</strong><br>
                        <span><code>setting('auth_security_2fa_expiry')</code> dakika iÃ§inde kod girilmeli</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tenant Ã–rnekleri -->
        <section>
            <h2>ğŸ¢ Tenant BazlÄ± Ã–rnek KonfigÃ¼rasyonlar</h2>

            <div class="option-cards">
                <div class="option-card">
                    <h4>ğŸµ Muzibu (tenant_id: 1001)</h4>
                    <ul>
                        <li>auth_subscription_paid_enabled = 1</li>
                        <li>auth_security_2fa_mode = required</li>
                        <li>auth_security_2fa_method = sms</li>
                        <li>corporate_enabled = 1</li>
                        <li>auth_session_device_limit = 3</li>
                        <li>auth_registration_phone_required = 1</li>
                    </ul>
                </div>
                <div class="option-card">
                    <h4>ğŸ­ Ä°xtif (tenant_id: 2)</h4>
                    <ul>
                        <li>auth_subscription_paid_enabled = 0</li>
                        <li>auth_security_2fa_mode = disabled</li>
                        <li>corporate_enabled = 0</li>
                        <li>auth_session_device_limit = 1</li>
                        <li>auth_registration_approval = 1</li>
                        <li>auth_registration_phone_required = 0</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Sonraki AdÄ±mlar -->
        <section>
            <h2>ğŸ“‹ Sonraki AdÄ±mlar</h2>

            <div class="info-box">
                <h4>Onay SonrasÄ± YapÄ±lacaklar</h4>
                <ol style="margin-top: 10px; padding-left: 20px;">
                    <li>Eksik settings'leri SettingManagement'a ekle (seeder)</li>
                    <li>2FA mode logic'ini TwoFactorService'e ekle</li>
                    <li>SMS Provider entegrasyonu (NetGSM/Ä°letimerkezi)</li>
                    <li>Remember device cookie sistemi</li>
                    <li>UI sayfalarÄ±nÄ± tenant settings'e gÃ¶re conditional render</li>
                </ol>
            </div>
        </section>

        <footer>
            ğŸ¤– Claude AI tarafÄ±ndan oluÅŸturuldu | Settings Analizi & 2FA Karar DÃ¶kÃ¼manÄ±<br>
            ğŸ“… 2025-11-23 | ğŸ”§ SettingManagement ModÃ¼lÃ¼
        </footer>
    </div>
</body>
</html>
