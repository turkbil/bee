<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suistimal Tespiti - Mevcut vs Yeni Sistem v12</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body class="bg-slate-900 text-slate-100 min-h-screen">
    <div class="max-w-7xl mx-auto px-4 py-8">

        <!-- Header -->
        <header class="mb-10 text-center border-b border-slate-700 pb-8">
            <span class="bg-blue-500 text-white px-4 py-1 rounded-full text-sm font-bold mb-4 inline-block">İMPLEMENTASYON v12</span>
            <h1 class="text-3xl font-bold mb-2">Mevcut Sistem vs Yeni Ping-Pong Sistemi</h1>
            <p class="text-slate-400">Karşılaştırma + Beklenen Sonuç Tasarımı + Early Exit Optimizasyonu</p>
        </header>

        <!-- ==================== EARLY EXIT OPTİMİZASYONU ==================== -->
        <section class="mb-10">
            <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
                <span class="bg-emerald-500 text-white w-10 h-10 rounded-lg flex items-center justify-center">
                    <i class="fas fa-bolt"></i>
                </span>
                Early Exit Optimizasyonu (YENİ!)
            </h2>

            <div class="bg-emerald-900/20 border border-emerald-700 rounded-xl p-6">
                <div class="bg-slate-800 rounded-lg p-4 mb-4">
                    <h3 class="text-emerald-400 font-bold mb-2"><i class="fas fa-lightbulb mr-2"></i>Kullanıcı Önerisi:</h3>
                    <p class="text-slate-300 italic">"Bir kullanıcı hep aynı kıstaslarla girmişse Horizon'da incelenmesine gerek bile kalmaz."</p>
                </div>

                <div class="grid md:grid-cols-2 gap-6">
                    <!-- Mantık -->
                    <div class="bg-slate-800 rounded-lg p-4">
                        <h4 class="text-white font-bold mb-3">Mantık:</h4>
                        <ul class="text-slate-400 text-sm space-y-2">
                            <li class="flex items-start gap-2">
                                <span class="text-green-500">✓</span>
                                <span>Tüm play kayıtlarında <strong class="text-white">TEK IP</strong> varsa → TEMİZ</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-green-500">✓</span>
                                <span>Tüm kayıtlarda <strong class="text-white">TEK browser</strong> varsa → TEMİZ</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-green-500">✓</span>
                                <span>Tüm kayıtlarda <strong class="text-white">TEK platform</strong> varsa → TEMİZ</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-green-500">✓</span>
                                <span>Tüm kayıtlarda <strong class="text-white">TEK device</strong> varsa → TEMİZ</span>
                            </li>
                        </ul>
                        <div class="mt-4 bg-emerald-900/30 rounded p-3">
                            <p class="text-emerald-400 text-sm font-bold">→ Tek fingerprint = Ping-pong imkansız = Horizon'a gerek yok!</p>
                        </div>
                    </div>

                    <!-- Kod -->
                    <div class="bg-slate-800 rounded-lg p-4">
                        <h4 class="text-white font-bold mb-3">Pseudo Kod:</h4>
                        <pre class="bg-slate-900 rounded p-3 text-xs overflow-x-auto"><code class="text-slate-400">function quickCheck($userId, $start, $end) {
    $plays = getUserPlays($userId, $start, $end);

    // Unique değerler
    $uniqueIps = $plays->pluck('ip')->unique();
    $uniqueBrowsers = $plays->pluck('browser')->unique();
    $uniquePlatforms = $plays->pluck('platform')->unique();
    $uniqueDevices = $plays->pluck('device')->unique();

    // HEPSİ tek ise → TEMİZ, Horizon'a gönderme
    if ($uniqueIps->count() == 1 &&
        $uniqueBrowsers->count() == 1 &&
        $uniquePlatforms->count() == 1 &&
        $uniqueDevices->count() == 1) {

        return <span class="text-green-400">'CLEAN'</span>; // Direkt TEMİZ
    }

    return <span class="text-yellow-400">'NEEDS_SCAN'</span>; // Horizon'a gönder
}</code></pre>
                    </div>
                </div>

                <!-- Yeni Akış -->
                <div class="mt-6 bg-slate-900 rounded-lg p-4">
                    <h4 class="text-white font-bold mb-3">Güncellenmiş Çalışma Akışı:</h4>
                    <div class="flex items-center gap-3 flex-wrap text-sm">
                        <div class="bg-blue-500 px-3 py-2 rounded text-white">1. Tara buton</div>
                        <i class="fas fa-arrow-right text-slate-600"></i>
                        <div class="bg-emerald-500 px-3 py-2 rounded text-white font-bold">2. Quick Check</div>
                        <i class="fas fa-arrow-right text-slate-600"></i>
                        <div class="bg-slate-700 px-3 py-2 rounded">
                            <span class="text-green-400">TEK FP → TEMİZ</span>
                            <span class="text-slate-500 mx-2">|</span>
                            <span class="text-yellow-400">FARKLI → Horizon</span>
                        </div>
                    </div>
                </div>

                <!-- Performans -->
                <div class="mt-4 bg-yellow-900/20 border border-yellow-700 rounded-lg p-4">
                    <p class="text-yellow-400"><i class="fas fa-tachometer-alt mr-2"></i><strong>Performans Kazancı:</strong></p>
                    <ul class="text-slate-400 text-sm mt-2 space-y-1">
                        <li>• Tek fingerprint kullanıcılar → Horizon kuyruğuna girmez</li>
                        <li>• Tahmini: %60-70 kullanıcı direkt TEMİZ olacak</li>
                        <li>• Horizon sadece şüpheli durumları işler</li>
                        <li>• CPU ve zaman tasarrufu</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- ==================== MEVCUT SİSTEM ==================== -->
        <section class="mb-10">
            <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
                <span class="bg-red-500 text-white w-10 h-10 rounded-lg flex items-center justify-center">
                    <i class="fas fa-times"></i>
                </span>
                Mevcut Sistem (KALDIRILACAK/DEĞİŞECEK)
            </h2>

            <div class="bg-red-900/20 border border-red-800 rounded-xl p-6">
                <p class="text-slate-400 mb-4">Dosya: <code class="text-yellow-400">Modules/Muzibu/app/Services/AbuseDetectionService.php</code></p>

                <div class="grid md:grid-cols-2 gap-4">
                    <!-- Kaldırılacak -->
                    <div class="bg-slate-800 rounded-lg p-4">
                        <h3 class="text-red-400 font-bold mb-3"><i class="fas fa-trash mr-2"></i>KALDIRILACAK</h3>
                        <ul class="space-y-2 text-sm">
                            <li class="flex items-start gap-2">
                                <span class="text-red-500">❌</span>
                                <div>
                                    <code class="text-slate-400">detectHighVolume()</code>
                                    <p class="text-slate-500 text-xs">600+ şarkı/gün eşiği - B2B için gereksiz</p>
                                </div>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-red-500">❌</span>
                                <div>
                                    <code class="text-slate-400">detectRapidSkips()</code>
                                    <p class="text-slate-500 text-xs">30sn altı skip - B2B için gereksiz</p>
                                </div>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-red-500">❌</span>
                                <div>
                                    <code class="text-slate-400">detectRepeatSongs()</code>
                                    <p class="text-slate-500 text-xs">10+ tekrar - Playlist loop normal</p>
                                </div>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-red-500">❌</span>
                                <div>
                                    <code class="text-slate-400">detectNoSleepPattern()</code>
                                    <p class="text-slate-500 text-xs">02:00-06:00 dinleme - 24 saat işletme var</p>
                                </div>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-red-500">❌</span>
                                <div>
                                    <code class="text-slate-400">Puan sistemi (score)</code>
                                    <p class="text-slate-500 text-xs">Karmaşık - VAR/YOK'a dönecek</p>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <!-- Değişecek -->
                    <div class="bg-slate-800 rounded-lg p-4">
                        <h3 class="text-yellow-400 font-bold mb-3"><i class="fas fa-edit mr-2"></i>DEĞİŞECEK</h3>
                        <ul class="space-y-2 text-sm">
                            <li class="flex items-start gap-2">
                                <span class="text-yellow-500">⚠️</span>
                                <div>
                                    <code class="text-slate-400">detectMultiDevice()</code>
                                    <p class="text-slate-500 text-xs">5+ cihaz eşiği → Ping-pong kontrolüne</p>
                                </div>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-yellow-500">⚠️</span>
                                <div>
                                    <code class="text-slate-400">detectSuspiciousIp()</code>
                                    <p class="text-slate-500 text-xs">5+ IP eşiği → Ping-pong kontrolüne</p>
                                </div>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-green-500">✅</span>
                                <div>
                                    <code class="text-slate-400">detectOverlaps()</code>
                                    <p class="text-slate-500 text-xs">KORUNACAK - Eş zamanlı şarkı tespiti</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Mevcut Akış -->
                <div class="mt-6 bg-slate-900 rounded-lg p-4">
                    <h4 class="text-slate-400 font-bold mb-3">Mevcut Çalışma Akışı:</h4>
                    <div class="flex items-center gap-4 flex-wrap text-sm">
                        <div class="bg-slate-800 px-3 py-2 rounded">Admin: "Tara" buton</div>
                        <i class="fas fa-arrow-right text-slate-600"></i>
                        <div class="bg-slate-800 px-3 py-2 rounded">ScanUserForAbuseJob</div>
                        <i class="fas fa-arrow-right text-slate-600"></i>
                        <div class="bg-slate-800 px-3 py-2 rounded">Horizon Queue</div>
                        <i class="fas fa-arrow-right text-slate-600"></i>
                        <div class="bg-slate-800 px-3 py-2 rounded">AbuseDetectionService</div>
                        <i class="fas fa-arrow-right text-slate-600"></i>
                        <div class="bg-slate-800 px-3 py-2 rounded">AbuseReport kaydet</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== YENİ SİSTEM ==================== -->
        <section class="mb-10">
            <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
                <span class="bg-green-500 text-white w-10 h-10 rounded-lg flex items-center justify-center">
                    <i class="fas fa-check"></i>
                </span>
                Yeni Ping-Pong Sistemi (EKLENECEK)
            </h2>

            <div class="bg-green-900/20 border border-green-800 rounded-xl p-6">
                <div class="grid md:grid-cols-3 gap-4">
                    <!-- Pattern 1 -->
                    <div class="bg-slate-800 rounded-lg p-4">
                        <div class="flex items-center gap-2 mb-3">
                            <span class="bg-orange-500 text-white w-8 h-8 rounded-lg flex items-center justify-center">
                                <i class="fas fa-sync-alt"></i>
                            </span>
                            <h3 class="text-orange-400 font-bold">detectPingPong($field)</h3>
                        </div>
                        <p class="text-slate-400 text-sm mb-3">Herhangi bir veride A→B→A döngüsü</p>
                        <div class="bg-slate-900 rounded p-3 text-xs font-mono">
                            <p class="text-slate-500">// $field: ip_address, browser,</p>
                            <p class="text-slate-500">//         platform, device_type</p>
                            <p class="text-yellow-400 mt-2">→ Döngü varsa: SUİSTİMAL</p>
                            <p class="text-green-400">→ Tek yönlü: NORMAL</p>
                        </div>
                    </div>

                    <!-- Pattern 2 -->
                    <div class="bg-slate-800 rounded-lg p-4">
                        <div class="flex items-center gap-2 mb-3">
                            <span class="bg-red-500 text-white w-8 h-8 rounded-lg flex items-center justify-center">
                                <i class="fas fa-clone"></i>
                            </span>
                            <h3 class="text-red-400 font-bold">detectConcurrentDifferent()</h3>
                        </div>
                        <p class="text-slate-400 text-sm mb-3">Aynı anda 2 farklı fingerprint</p>
                        <div class="bg-slate-900 rounded p-3 text-xs font-mono">
                            <p class="text-slate-500">// fingerprint = IP+Browser+Platform</p>
                            <p class="text-slate-500">// Aynı zaman diliminde farklı FP</p>
                            <p class="text-yellow-400 mt-2">→ 2 farklı lokasyon: SUİSTİMAL</p>
                        </div>
                    </div>

                    <!-- Pattern 3 -->
                    <div class="bg-slate-800 rounded-lg p-4">
                        <div class="flex items-center gap-2 mb-3">
                            <span class="bg-purple-500 text-white w-8 h-8 rounded-lg flex items-center justify-center">
                                <i class="fas fa-broadcast-tower"></i>
                            </span>
                            <h3 class="text-purple-400 font-bold">detectSplitStream()</h3>
                        </div>
                        <p class="text-slate-400 text-sm mb-3">Aynı fingerprint + Overlap</p>
                        <div class="bg-slate-900 rounded p-3 text-xs font-mono">
                            <p class="text-slate-500">// Aynı FP'den aynı anda 2 şarkı</p>
                            <p class="text-slate-500">// (detectOverlaps() + same FP)</p>
                            <p class="text-yellow-400 mt-2">→ 1 PC → 2 hoparlör: SUİSTİMAL</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== BEKLENEN SONUÇ TASARIMI ==================== -->
        <section class="mb-10">
            <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
                <span class="bg-purple-500 text-white w-10 h-10 rounded-lg flex items-center justify-center">
                    <i class="fas fa-desktop"></i>
                </span>
                Beklenen Sonuç Tasarımı (Admin Panel)
            </h2>

            <div class="bg-slate-800 rounded-xl p-6 border-2 border-purple-500">
                <!-- Mock Admin UI -->
                <div class="bg-slate-900 rounded-lg overflow-hidden">
                    <!-- Header -->
                    <div class="bg-slate-800 px-4 py-3 border-b border-slate-700 flex items-center justify-between">
                        <h3 class="font-bold">Suistimal Raporu #1234</h3>
                        <span class="bg-red-500 text-white px-3 py-1 rounded-full text-sm">SUİSTİMAL</span>
                    </div>

                    <!-- User Info -->
                    <div class="p-4 border-b border-slate-700">
                        <div class="flex items-center gap-4">
                            <div class="bg-slate-700 w-12 h-12 rounded-full flex items-center justify-center">
                                <i class="fas fa-user text-slate-400"></i>
                            </div>
                            <div>
                                <p class="font-bold">Örnek Restoran A.Ş.</p>
                                <p class="text-slate-400 text-sm">ornek@restoran.com</p>
                            </div>
                            <div class="ml-auto text-right">
                                <p class="text-slate-400 text-sm">Tarama: 01.01.2026</p>
                                <p class="text-slate-400 text-sm">Dönem: Son 7 gün</p>
                            </div>
                        </div>
                    </div>

                    <!-- Pattern Cards -->
                    <div class="p-4">
                        <h4 class="font-bold mb-4 text-lg">Tespit Edilen Suistimal Türleri</h4>

                        <div class="space-y-4">
                            <!-- Ping-Pong Pattern -->
                            <div class="bg-orange-900/30 border border-orange-700 rounded-lg p-4">
                                <div class="flex items-start gap-3">
                                    <span class="bg-orange-500 text-white w-10 h-10 rounded-lg flex items-center justify-center shrink-0">
                                        <i class="fas fa-sync-alt"></i>
                                    </span>
                                    <div class="flex-1">
                                        <div class="flex items-center justify-between">
                                            <h5 class="font-bold text-orange-400">Ping-Pong Pattern</h5>
                                            <span class="bg-red-500 text-white px-2 py-0.5 rounded text-xs">TESPİT EDİLDİ</span>
                                        </div>
                                        <p class="text-slate-400 text-sm mt-1">IP adresinde döngü tespit edildi</p>

                                        <!-- Detay -->
                                        <div class="mt-3 bg-slate-900 rounded-lg p-3">
                                            <p class="text-sm text-slate-400 mb-2">Tespit edilen döngüler:</p>
                                            <div class="space-y-2 font-mono text-xs">
                                                <div class="flex items-center gap-2">
                                                    <span class="text-slate-500">IP:</span>
                                                    <span class="text-orange-400">92.44.x.x</span>
                                                    <i class="fas fa-arrow-right text-slate-600"></i>
                                                    <span class="text-blue-400">88.230.x.x</span>
                                                    <i class="fas fa-arrow-right text-slate-600"></i>
                                                    <span class="text-orange-400">92.44.x.x</span>
                                                    <span class="text-red-400 ml-2">❌ Döngü!</span>
                                                </div>
                                                <div class="flex items-center gap-2">
                                                    <span class="text-slate-500">Browser:</span>
                                                    <span class="text-orange-400">Chrome</span>
                                                    <i class="fas fa-arrow-right text-slate-600"></i>
                                                    <span class="text-blue-400">Safari</span>
                                                    <i class="fas fa-arrow-right text-slate-600"></i>
                                                    <span class="text-orange-400">Chrome</span>
                                                    <span class="text-red-400 ml-2">❌ Döngü!</span>
                                                </div>
                                            </div>
                                            <p class="text-red-400 text-sm mt-3">→ 2 kişi hesabı sırayla kullanıyor</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Concurrent Different Pattern -->
                            <div class="bg-red-900/30 border border-red-700 rounded-lg p-4">
                                <div class="flex items-start gap-3">
                                    <span class="bg-red-500 text-white w-10 h-10 rounded-lg flex items-center justify-center shrink-0">
                                        <i class="fas fa-clone"></i>
                                    </span>
                                    <div class="flex-1">
                                        <div class="flex items-center justify-between">
                                            <h5 class="font-bold text-red-400">Eş Zamanlı Farklı Kaynak</h5>
                                            <span class="bg-red-500 text-white px-2 py-0.5 rounded text-xs">TESPİT EDİLDİ</span>
                                        </div>
                                        <p class="text-slate-400 text-sm mt-1">Aynı anda 2 farklı lokasyondan dinleme</p>

                                        <!-- Detay -->
                                        <div class="mt-3 bg-slate-900 rounded-lg p-3">
                                            <p class="text-sm text-slate-400 mb-2">Çakışan oturumlar:</p>
                                            <div class="grid grid-cols-2 gap-3 text-xs">
                                                <div class="bg-slate-800 p-2 rounded">
                                                    <p class="text-slate-500">Oturum 1:</p>
                                                    <p class="text-white">10:00 - 10:05</p>
                                                    <p class="text-slate-400">92.44.x.x | Chrome | Windows</p>
                                                </div>
                                                <div class="bg-slate-800 p-2 rounded">
                                                    <p class="text-slate-500">Oturum 2 (aynı anda):</p>
                                                    <p class="text-white">10:02 - 10:07</p>
                                                    <p class="text-slate-400">88.230.x.x | Safari | macOS</p>
                                                </div>
                                            </div>
                                            <p class="text-red-400 text-sm mt-3">→ 2 farklı lokasyondan eş zamanlı kullanım</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Split Stream Pattern -->
                            <div class="bg-purple-900/30 border border-purple-700 rounded-lg p-4">
                                <div class="flex items-start gap-3">
                                    <span class="bg-purple-500 text-white w-10 h-10 rounded-lg flex items-center justify-center shrink-0">
                                        <i class="fas fa-broadcast-tower"></i>
                                    </span>
                                    <div class="flex-1">
                                        <div class="flex items-center justify-between">
                                            <h5 class="font-bold text-purple-400">Çoklu Yayın (Split Stream)</h5>
                                            <span class="bg-green-500 text-white px-2 py-0.5 rounded text-xs">TEMİZ</span>
                                        </div>
                                        <p class="text-slate-400 text-sm mt-1">Aynı cihazdan paralel yayın yok</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Summary -->
                    <div class="p-4 bg-slate-800 border-t border-slate-700">
                        <div class="grid grid-cols-4 gap-4 text-center">
                            <div>
                                <p class="text-2xl font-bold text-white">247</p>
                                <p class="text-slate-400 text-sm">Toplam Play</p>
                            </div>
                            <div>
                                <p class="text-2xl font-bold text-orange-400">3</p>
                                <p class="text-slate-400 text-sm">Ping-Pong</p>
                            </div>
                            <div>
                                <p class="text-2xl font-bold text-red-400">5</p>
                                <p class="text-slate-400 text-sm">Eş Zamanlı</p>
                            </div>
                            <div>
                                <p class="text-2xl font-bold text-green-400">0</p>
                                <p class="text-slate-400 text-sm">Split Stream</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== VERİTABANI DEĞİŞİKLİKLERİ ==================== -->
        <section class="mb-10">
            <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
                <span class="bg-blue-500 text-white w-10 h-10 rounded-lg flex items-center justify-center">
                    <i class="fas fa-database"></i>
                </span>
                Veritabanı Değişiklikleri
            </h2>

            <div class="bg-blue-900/20 border border-blue-700 rounded-xl p-6">
                <div class="grid md:grid-cols-2 gap-6">
                    <!-- Mevcut -->
                    <div class="bg-slate-800 rounded-lg p-4">
                        <h3 class="text-red-400 font-bold mb-3">Mevcut patterns_json:</h3>
                        <pre class="bg-slate-900 rounded p-3 text-xs overflow-x-auto"><code class="text-slate-400">{
  "high_volume": { "days": [...], "score": 400 },
  "multi_device": { "days": [...], "score": 200 },
  "suspicious_ip": { "days": [...], "score": 150 }
}</code></pre>
                    </div>

                    <!-- Yeni -->
                    <div class="bg-slate-800 rounded-lg p-4">
                        <h3 class="text-green-400 font-bold mb-3">Yeni patterns_json:</h3>
                        <pre class="bg-slate-900 rounded p-3 text-xs overflow-x-auto"><code class="text-green-400">{
  "ping_pong": {
    "detected": true,
    "fields": ["ip_address", "browser"],
    "cycles": [
      { "field": "ip_address", "values": ["92.44.x", "88.230.x", "92.44.x"] },
      { "field": "browser", "values": ["Chrome", "Safari", "Chrome"] }
    ]
  },
  "concurrent_different": {
    "detected": true,
    "count": 5,
    "samples": [...]
  },
  "split_stream": {
    "detected": false,
    "count": 0
  }
}</code></pre>
                    </div>
                </div>

                <div class="mt-4 bg-yellow-900/20 border border-yellow-700 rounded-lg p-4">
                    <p class="text-yellow-400"><i class="fas fa-info-circle mr-2"></i><strong>Not:</strong> Migration gerekmez. Mevcut <code>patterns_json</code> alanı kullanılacak, sadece içerik değişecek.</p>
                </div>
            </div>
        </section>

        <!-- ==================== İMPLEMENTASYON ADIMLARI ==================== -->
        <section class="mb-10">
            <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
                <span class="bg-emerald-500 text-white w-10 h-10 rounded-lg flex items-center justify-center">
                    <i class="fas fa-tasks"></i>
                </span>
                İmplementasyon Adımları
            </h2>

            <div class="bg-emerald-900/20 border border-emerald-700 rounded-xl p-6">
                <div class="space-y-4">
                    <div class="flex items-start gap-4">
                        <span class="bg-emerald-500 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold shrink-0">1</span>
                        <div class="flex-1 bg-slate-800 rounded-lg p-4">
                            <h4 class="font-bold text-white">AbuseDetectionService.php Güncelle</h4>
                            <ul class="text-slate-400 text-sm mt-2 space-y-1">
                                <li>• <code>detectPingPong($field)</code> fonksiyonu ekle</li>
                                <li>• <code>detectConcurrentDifferentSource()</code> fonksiyonu ekle</li>
                                <li>• <code>detectSplitStream()</code> fonksiyonu ekle (overlap + same fingerprint)</li>
                                <li>• Eski fonksiyonları kaldır (high_volume, rapid_skips, vb.)</li>
                                <li>• <code>detectAllPatterns()</code> güncelle</li>
                            </ul>
                        </div>
                    </div>

                    <div class="flex items-start gap-4">
                        <span class="bg-emerald-500 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold shrink-0">2</span>
                        <div class="flex-1 bg-slate-800 rounded-lg p-4">
                            <h4 class="font-bold text-white">Admin Panel View Güncelle</h4>
                            <ul class="text-slate-400 text-sm mt-2 space-y-1">
                                <li>• <code>abuse-reports/show.blade.php</code> güncelle</li>
                                <li>• 3 yeni pattern kartı ekle (Ping-Pong, Concurrent, Split)</li>
                                <li>• Eski pattern kartlarını kaldır</li>
                            </ul>
                        </div>
                    </div>

                    <div class="flex items-start gap-4">
                        <span class="bg-emerald-500 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold shrink-0">3</span>
                        <div class="flex-1 bg-slate-800 rounded-lg p-4">
                            <h4 class="font-bold text-white">Test Et</h4>
                            <ul class="text-slate-400 text-sm mt-2 space-y-1">
                                <li>• Admin panelden "Tara" butonuna bas</li>
                                <li>• Horizon kuyruğu işlesin</li>
                                <li>• Sonuçları kontrol et</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== ÇALIŞMA AKIŞI ==================== -->
        <section class="mb-10">
            <h2 class="text-2xl font-bold mb-6">Çalışma Akışı (Horizon ile)</h2>

            <div class="bg-slate-800 rounded-xl p-6">
                <div class="flex items-center justify-between flex-wrap gap-4">
                    <div class="text-center">
                        <div class="bg-blue-500 w-16 h-16 rounded-xl flex items-center justify-center mx-auto mb-2">
                            <i class="fas fa-mouse-pointer text-2xl"></i>
                        </div>
                        <p class="text-sm text-white font-bold">1. Admin</p>
                        <p class="text-xs text-slate-400">"Suistimal Tara"</p>
                    </div>
                    <i class="fas fa-arrow-right text-slate-600 text-2xl"></i>
                    <div class="text-center">
                        <div class="bg-purple-500 w-16 h-16 rounded-xl flex items-center justify-center mx-auto mb-2">
                            <i class="fas fa-server text-2xl"></i>
                        </div>
                        <p class="text-sm text-white font-bold">2. Controller</p>
                        <p class="text-xs text-slate-400">startScan()</p>
                    </div>
                    <i class="fas fa-arrow-right text-slate-600 text-2xl"></i>
                    <div class="text-center">
                        <div class="bg-orange-500 w-16 h-16 rounded-xl flex items-center justify-center mx-auto mb-2">
                            <i class="fas fa-paper-plane text-2xl"></i>
                        </div>
                        <p class="text-sm text-white font-bold">3. Dispatch</p>
                        <p class="text-xs text-slate-400">ScanUserForAbuseJob</p>
                    </div>
                    <i class="fas fa-arrow-right text-slate-600 text-2xl"></i>
                    <div class="text-center">
                        <div class="bg-red-500 w-16 h-16 rounded-xl flex items-center justify-center mx-auto mb-2">
                            <i class="fas fa-cogs text-2xl"></i>
                        </div>
                        <p class="text-sm text-white font-bold">4. Horizon</p>
                        <p class="text-xs text-slate-400">Queue işle</p>
                    </div>
                    <i class="fas fa-arrow-right text-slate-600 text-2xl"></i>
                    <div class="text-center">
                        <div class="bg-green-500 w-16 h-16 rounded-xl flex items-center justify-center mx-auto mb-2">
                            <i class="fas fa-search text-2xl"></i>
                        </div>
                        <p class="text-sm text-white font-bold">5. Service</p>
                        <p class="text-xs text-slate-400">Ping-Pong tespiti</p>
                    </div>
                    <i class="fas fa-arrow-right text-slate-600 text-2xl"></i>
                    <div class="text-center">
                        <div class="bg-emerald-500 w-16 h-16 rounded-xl flex items-center justify-center mx-auto mb-2">
                            <i class="fas fa-database text-2xl"></i>
                        </div>
                        <p class="text-sm text-white font-bold">6. Kaydet</p>
                        <p class="text-xs text-slate-400">AbuseReport</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="text-center text-slate-500 text-sm border-t border-slate-800 pt-8">
            <p class="text-emerald-400 font-bold">Suistimal Tespiti - İmplementasyon Planı v12</p>
            <p class="mt-1">Mevcut Sistem → Ping-Pong Sistemi Dönüşümü</p>
            <p class="mt-2 text-slate-600">1 Ocak 2026</p>
            <p class="mt-4 text-slate-700 text-xs italic">"Versiyon mantığı, eskiyi silmek ve unutmak değil; yeni kurallarla eskiyi geliştirip güçlendirmektir."</p>
        </footer>
    </div>
</body>
</html>
