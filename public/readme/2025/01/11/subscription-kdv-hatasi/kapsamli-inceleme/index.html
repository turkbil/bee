<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subscription Sistemi - KapsamlÄ± Ä°nceleme Raporu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); }
        .code-block { background: #1e293b; border-left: 4px solid #3b82f6; }
        .status-good { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
        .status-warning { background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); }
        .status-error { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); }
        .section-card { background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); }
        .section-card:hover { background: rgba(255,255,255,0.08); border-color: rgba(255,255,255,0.2); }
    </style>
</head>
<body class="gradient-bg text-white min-h-screen">

<!-- Header -->
<header class="border-b border-white/10 bg-black/20">
    <div class="container mx-auto px-6 py-8">
        <div class="flex items-center justify-between">
            <div class="flex items-center gap-4">
                <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg">
                    <i class="fas fa-search-dollar text-2xl text-white"></i>
                </div>
                <div>
                    <div class="flex items-center gap-3 mb-1">
                        <h1 class="text-3xl font-bold">Subscription Sistemi</h1>
                        <span class="px-3 py-1 bg-purple-600 rounded-lg text-sm font-semibold">KapsamlÄ± Ä°nceleme</span>
                    </div>
                    <p class="text-slate-400">Admin, Frontend, Checkout, Database - TÃ¼m Sistem Analizi</p>
                </div>
            </div>
            <div class="text-right">
                <div class="text-sm text-slate-400">Rapor Tarihi</div>
                <div class="text-lg font-semibold">11 Ocak 2025</div>
            </div>
        </div>
    </div>
</header>

<div class="container mx-auto px-6 py-12 max-w-7xl">

<!-- SECTION 1: BASÄ°T ANLATIM -->
<div class="section-card rounded-2xl p-8 mb-8">
    <div class="flex items-center gap-3 mb-6">
        <div class="w-12 h-12 rounded-xl bg-green-600 flex items-center justify-center">
            <i class="fas fa-user-friends text-xl"></i>
        </div>
        <h2 class="text-2xl font-bold">ğŸ“ Basit AnlatÄ±m (Herkes Ä°Ã§in)</h2>
    </div>

    <div class="space-y-6">
        <div class="bg-green-900/20 border border-green-700 rounded-xl p-6">
            <h3 class="text-xl font-semibold mb-4 flex items-center gap-2">
                <i class="fas fa-check-circle text-green-400"></i>
                Ne Ä°ncelendi?
            </h3>
            <ul class="space-y-3 text-slate-200">
                <li class="flex items-start gap-3">
                    <i class="fas fa-cog text-blue-400 mt-1"></i>
                    <div>
                        <strong>Admin Panel:</strong> Abonelik planlarÄ±nÄ±n nasÄ±l oluÅŸturulduÄŸu, fiyatlarÄ±n nasÄ±l girildiÄŸi, sÃ¼re seÃ§eneklerinin nasÄ±l eklendiÄŸi incelendi.
                    </div>
                </li>
                <li class="flex items-start gap-3">
                    <i class="fas fa-desktop text-purple-400 mt-1"></i>
                    <div>
                        <strong>Frontend (KullanÄ±cÄ± TarafÄ±):</strong> Abonelik planlarÄ±nÄ±n kullanÄ±cÄ±lara nasÄ±l gÃ¶sterildiÄŸi, fiyat etiketlerinin gÃ¶rÃ¼nÃ¼mÃ¼, satÄ±n alma butonlarÄ±nÄ±n Ã§alÄ±ÅŸmasÄ± kontrol edildi.
                    </div>
                </li>
                <li class="flex items-start gap-3">
                    <i class="fas fa-shopping-cart text-green-400 mt-1"></i>
                    <div>
                        <strong>Checkout (Ã–deme SayfasÄ±):</strong> Sepete eklenen aboneliÄŸin nasÄ±l gÃ¶sterildiÄŸi, KDV hesaplamasÄ±nÄ±n doÄŸruluÄŸu, toplam tutarlarÄ±n kontrolÃ¼ yapÄ±ldÄ±.
                    </div>
                </li>
                <li class="flex items-start gap-3">
                    <i class="fas fa-database text-yellow-400 mt-1"></i>
                    <div>
                        <strong>Database (VeritabanÄ±):</strong> Abonelik planlarÄ±nÄ±n nasÄ±l saklandÄ±ÄŸÄ±, fiyat bilgilerinin yapÄ±sÄ±, eksik olan alanlar tespit edildi.
                    </div>
                </li>
                <li class="flex items-start gap-3">
                    <i class="fas fa-code text-red-400 mt-1"></i>
                    <div>
                        <strong>Kod Ä°ncelemesi:</strong> Fiyat hesaplama mantÄ±ÄŸÄ±, KDV ayrÄ±ÅŸtÄ±rma iÅŸlemi, sepet entegrasyonu detaylÄ± olarak analiz edildi.
                    </div>
                </li>
            </ul>
        </div>

        <div class="bg-blue-900/20 border border-blue-700 rounded-xl p-6">
            <h3 class="text-xl font-semibold mb-4 flex items-center gap-2">
                <i class="fas fa-info-circle text-blue-400"></i>
                Mevcut Durum Ã–zeti
            </h3>
            <div class="space-y-4">
                <div class="flex items-start gap-3">
                    <span class="px-3 py-1 bg-green-600 rounded-lg text-sm font-semibold shrink-0">âœ… Ä°YÄ°</span>
                    <div class="text-slate-200">
                        <strong>Temel sistem saÄŸlam Ã§alÄ±ÅŸÄ±yor:</strong> Admin paneli, frontend gÃ¶rÃ¼nÃ¼m, sepet entegrasyonu temel seviyede sorunsuz. KDV hesaplama hatasÄ± dÃ¼zeltildi (SubscriptionCartBridge).
                    </div>
                </div>
                <div class="flex items-start gap-3">
                    <span class="px-3 py-1 bg-yellow-600 rounded-lg text-sm font-semibold shrink-0">âš ï¸ EKSÄ°K</span>
                    <div class="text-slate-200">
                        <strong>Esneklik yok:</strong> Åu anda tÃ¼m fiyatlar "KDV hariÃ§" olarak kabul ediliyor. MÃ¼ÅŸteriye gÃ¶re "KDV dahil" fiyat girilmek istendiÄŸinde sistem bunu desteklemiyor. Admin panelinde bu seÃ§enek yok.
                    </div>
                </div>
                <div class="flex items-start gap-3">
                    <span class="px-3 py-1 bg-red-600 rounded-lg text-sm font-semibold shrink-0">âŒ SORUN</span>
                    <div class="text-slate-200">
                        <strong>Frontend fiyat gÃ¶sterimi sabit:</strong> Plan sayfasÄ±nda fiyat her zaman "KDV + KDV" ÅŸeklinde gÃ¶steriliyor. EÄŸer fiyat zaten KDV dahil ise, bu bilgi frontend'e yansÄ±mÄ±yor.
                    </div>
                </div>
            </div>
        </div>

        <div class="bg-purple-900/20 border border-purple-700 rounded-xl p-6">
            <h3 class="text-xl font-semibold mb-4 flex items-center gap-2">
                <i class="fas fa-tasks text-purple-400"></i>
                Ne YapÄ±lmalÄ±?
            </h3>
            <ol class="space-y-3 text-slate-200">
                <li class="flex items-start gap-3">
                    <span class="px-3 py-1 bg-blue-600 rounded-lg text-sm font-semibold shrink-0">1</span>
                    <div>
                        <strong>Admin paneline seÃ§enek ekle:</strong> Her sÃ¼re eklenirken "Bu fiyat KDV dahil mi, hariÃ§ mi?" seÃ§eneÄŸi olmalÄ±. BÃ¶ylece farklÄ± mÃ¼ÅŸterilere gÃ¶re esnek fiyat giriÅŸi yapÄ±labilir.
                    </div>
                </li>
                <li class="flex items-start gap-3">
                    <span class="px-3 py-1 bg-blue-600 rounded-lg text-sm font-semibold shrink-0">2</span>
                    <div>
                        <strong>Frontend'i dinamikleÅŸtir:</strong> Plan sayfasÄ±nda fiyat gÃ¶sterimi, fiyatÄ±n tipi seÃ§imine gÃ¶re otomatik deÄŸiÅŸmeli. "600 TL + KDV" veya "600 TL (KDV Dahil)" ÅŸeklinde gÃ¶sterilmeli.
                    </div>
                </li>
                <li class="flex items-start gap-3">
                    <span class="px-3 py-1 bg-blue-600 rounded-lg text-sm font-semibold shrink-0">3</span>
                    <div>
                        <strong>VeritabanÄ±na yeni alan ekle (opsiyonel):</strong> Plan seviyesinde varsayÄ±lan fiyat tipi (default_price_type) saklanabilir. BÃ¶ylece tÃ¼m sÃ¼reler aynÄ± tip kullanÄ±r (gerekirse cycle bazÄ±nda da override edilebilir).
                    </div>
                </li>
                <li class="flex items-start gap-3">
                    <span class="px-3 py-1 bg-blue-600 rounded-lg text-sm font-semibold shrink-0">4</span>
                    <div>
                        <strong>Test ve doÄŸrulama:</strong> Hem KDV hariÃ§, hem KDV dahil senaryolarÄ± test edilmeli. Checkout sayfasÄ±nda doÄŸru toplam gÃ¶rÃ¼ndÃ¼ÄŸÃ¼nden emin olunmalÄ±.
                    </div>
                </li>
            </ol>
        </div>

        <div class="bg-yellow-900/20 border border-yellow-700 rounded-xl p-6">
            <h3 class="text-xl font-semibold mb-4 flex items-center gap-2">
                <i class="fas fa-lightbulb text-yellow-400"></i>
                Neden Ã–nemli?
            </h3>
            <p class="text-slate-200 leading-relaxed mb-4">
                <strong>MÃ¼ÅŸteri Deneyimi:</strong> KullanÄ±cÄ± planlarÄ± gÃ¶rÃ¼ntÃ¼lediÄŸinde, fiyatlarÄ±n net ve doÄŸru ÅŸekilde gÃ¶sterilmesi Ã§ok Ã¶nemli. "600 TL + KDV" yazdÄ±ÄŸÄ±nda kullanÄ±cÄ± 720 TL Ã¶deyeceÄŸini bilmeli. EÄŸer fiyat zaten KDV dahilse, kullanÄ±cÄ±yÄ± yanÄ±ltmamak iÃ§in "600 TL (KDV Dahil)" yazmalÄ±.
            </p>
            <p class="text-slate-200 leading-relaxed mb-4">
                <strong>Ä°ÅŸ EsnekliÄŸi:</strong> FarklÄ± mÃ¼ÅŸterilere farklÄ± fiyatlandÄ±rma modelleri sunabilmek (B2B iÃ§in KDV hariÃ§, B2C iÃ§in KDV dahil gibi) iÅŸletmenin esnekliÄŸini artÄ±rÄ±r ve satÄ±ÅŸ sÃ¼reÃ§lerini hÄ±zlandÄ±rÄ±r.
            </p>
            <p class="text-slate-200 leading-relaxed">
                <strong>Yasal Uyumluluk:</strong> E-ticaret yasalarÄ±na gÃ¶re, fiyatlarÄ±n net ve ÅŸeffaf gÃ¶sterilmesi zorunludur. KDV dahil/hariÃ§ bilgisinin doÄŸru ÅŸekilde gÃ¶sterilmesi yasal sorunlarÄ± Ã¶nler.
            </p>
        </div>
    </div>
</div>

<!-- SECTION 2: TEKNÄ°K DETAYLAR -->
<div class="section-card rounded-2xl p-8 mb-8">
    <div class="flex items-center gap-3 mb-6">
        <div class="w-12 h-12 rounded-xl bg-blue-600 flex items-center justify-center">
            <i class="fas fa-code text-xl"></i>
        </div>
        <h2 class="text-2xl font-bold">ğŸ”§ Teknik Detaylar (GeliÅŸtiriciler Ä°Ã§in)</h2>
    </div>

    <!-- 2.1 Admin Panel -->
    <div class="bg-slate-800/50 rounded-xl p-6 mb-6">
        <h3 class="text-xl font-semibold mb-4 flex items-center gap-2">
            <i class="fas fa-cog text-blue-400"></i>
            2.1. Admin Panel Ä°ncelemesi
        </h3>

        <div class="space-y-4">
            <div class="code-block rounded-lg p-4">
                <div class="text-sm text-slate-400 mb-2">ğŸ“ Dosya KonumlarÄ±</div>
                <div class="space-y-2 font-mono text-sm">
                    <div class="text-green-400">âœ“ Modules/Subscription/App/Http/Livewire/Admin/SubscriptionPlanManageComponent.php</div>
                    <div class="text-green-400">âœ“ Modules/Subscription/resources/views/admin/livewire/subscription-plan-manage-component.blade.php</div>
                </div>
            </div>

            <div class="grid md:grid-cols-2 gap-4">
                <div class="bg-green-900/20 border border-green-700 rounded-lg p-4">
                    <h4 class="font-semibold mb-3 flex items-center gap-2">
                        <i class="fas fa-check-circle text-green-400"></i>
                        Ä°yi Taraflar
                    </h4>
                    <ul class="space-y-2 text-sm text-slate-200">
                        <li class="flex items-start gap-2">
                            <i class="fas fa-star text-yellow-400 mt-1 shrink-0"></i>
                            <span>Dinamik cycle ekleme sistemi mÃ¼kemmel (addCycle, updateCycle, removeCycle)</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-star text-yellow-400 mt-1 shrink-0"></i>
                            <span>Drag & drop sÄ±ralama (Sortable.js) kullanÄ±cÄ± dostu</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-star text-yellow-400 mt-1 shrink-0"></i>
                            <span>Ã‡oklu dil desteÄŸi (multiLangInputs) tam entegre</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-star text-yellow-400 mt-1 shrink-0"></i>
                            <span>Alpine.js ile reactive form state management</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-star text-yellow-400 mt-1 shrink-0"></i>
                            <span>Validation rules iyi tanÄ±mlanmÄ±ÅŸ (lines 131-144)</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-star text-yellow-400 mt-1 shrink-0"></i>
                            <span>GÃ¶rsel olarak modern ve profesyonel (Tabler.io + Bootstrap)</span>
                        </li>
                    </ul>
                </div>

                <div class="bg-red-900/20 border border-red-700 rounded-lg p-4">
                    <h4 class="font-semibold mb-3 flex items-center gap-2">
                        <i class="fas fa-exclamation-triangle text-red-400"></i>
                        Eksiklikler
                    </h4>
                    <ul class="space-y-2 text-sm text-slate-200">
                        <li class="flex items-start gap-2">
                            <i class="fas fa-times-circle text-red-400 mt-1 shrink-0"></i>
                            <span><strong>KRÄ°TÄ°K:</strong> Cycle ekleme/dÃ¼zenleme formunda "Fiyat Tipi" (price_type) seÃ§eneÄŸi yok</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-times-circle text-red-400 mt-1 shrink-0"></i>
                            <span>addCycle() ve updateCycle() metodlarÄ± price_type parametresini iÅŸlemiyor (lines 149-224)</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-times-circle text-red-400 mt-1 shrink-0"></i>
                            <span>Blade view'da (lines 286-301, 420-454) price_type iÃ§in input yok</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-times-circle text-red-400 mt-1 shrink-0"></i>
                            <span>Fiyat giriÅŸi yanÄ±nda "KDV Dahil mi?" checkbox'Ä± yok</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-times-circle text-red-400 mt-1 shrink-0"></i>
                            <span>Alpine.js newCycle objesinde price_type field'Ä± eksik (line 709-718)</span>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="bg-blue-900/20 border border-blue-700 rounded-lg p-4">
                <h4 class="font-semibold mb-3 flex items-center gap-2">
                    <i class="fas fa-wrench text-blue-400"></i>
                    Ã–nerilen DeÄŸiÅŸiklikler
                </h4>
                <div class="space-y-3 text-sm text-slate-200">
                    <div class="flex items-start gap-2">
                        <span class="px-2 py-1 bg-blue-600 rounded text-xs font-semibold shrink-0">1</span>
                        <div>
                            <strong>Blade view'a price_type seÃ§imi ekle:</strong>
                            <div class="code-block rounded mt-2 p-3 font-mono text-xs">
&lt;div class="col-md-4"&gt;<br>
&nbsp;&nbsp;&lt;label class="form-label"&gt;Fiyat Tipi&lt;/label&gt;<br>
&nbsp;&nbsp;&lt;select class="form-select" x-model="editData.price_type"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;option value="without_tax"&gt;KDV HariÃ§&lt;/option&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;option value="with_tax"&gt;KDV Dahil&lt;/option&gt;<br>
&nbsp;&nbsp;&lt;/select&gt;<br>
&lt;/div&gt;
                            </div>
                        </div>
                    </div>
                    <div class="flex items-start gap-2">
                        <span class="px-2 py-1 bg-blue-600 rounded text-xs font-semibold shrink-0">2</span>
                        <div>
                            <strong>Alpine.js newCycle objesine price_type ekle:</strong>
                            <div class="code-block rounded mt-2 p-3 font-mono text-xs">
newCycle: {<br>
&nbsp;&nbsp;label_tr: '',<br>
&nbsp;&nbsp;price: '',<br>
&nbsp;&nbsp;price_type: 'without_tax', // Default: KDV hariÃ§<br>
&nbsp;&nbsp;...<br>
}
                            </div>
                        </div>
                    </div>
                    <div class="flex items-start gap-2">
                        <span class="px-2 py-1 bg-blue-600 rounded text-xs font-semibold shrink-0">3</span>
                        <div>
                            <strong>addCycle() metodunda price_type kaydet:</strong>
                            <div class="code-block rounded mt-2 p-3 font-mono text-xs">
$this->cycles[$cycleKey] = [<br>
&nbsp;&nbsp;'price' => (float) ($cycleData['price'] ?? 0),<br>
&nbsp;&nbsp;'price_type' => $cycleData['price_type'] ?? 'without_tax',<br>
&nbsp;&nbsp;...<br>
];
                            </div>
                        </div>
                    </div>
                    <div class="flex items-start gap-2">
                        <span class="px-2 py-1 bg-blue-600 rounded text-xs font-semibold shrink-0">4</span>
                        <div>
                            <strong>UX Ä°yileÅŸtirmesi:</strong> Fiyat tipi seÃ§imine gÃ¶re dinamik hint gÃ¶ster ("Bu fiyat KDV hariÃ§tir, checkout'ta KDV eklenecektir" gibi)
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 2.2 Frontend Subscription Plans -->
    <div class="bg-slate-800/50 rounded-xl p-6 mb-6">
        <h3 class="text-xl font-semibold mb-4 flex items-center gap-2">
            <i class="fas fa-desktop text-purple-400"></i>
            2.2. Frontend Subscription Plans
        </h3>

        <div class="space-y-4">
            <div class="code-block rounded-lg p-4">
                <div class="text-sm text-slate-400 mb-2">ğŸ“ Dosya KonumlarÄ±</div>
                <div class="space-y-2 font-mono text-sm">
                    <div class="text-green-400">âœ“ Modules/Subscription/App/Http/Livewire/Front/SubscriptionPlansComponent.php</div>
                    <div class="text-green-400">âœ“ Modules/Subscription/resources/views/livewire/front/subscription-plans.blade.php</div>
                </div>
            </div>

            <div class="grid md:grid-cols-2 gap-4">
                <div class="bg-green-900/20 border border-green-700 rounded-lg p-4">
                    <h4 class="font-semibold mb-3 flex items-center gap-2">
                        <i class="fas fa-check-circle text-green-400"></i>
                        GÃ¼Ã§lÃ¼ YÃ¶nler
                    </h4>
                    <ul class="space-y-2 text-sm text-slate-200">
                        <li class="flex items-start gap-2">
                            <i class="fas fa-paint-brush text-purple-400 mt-1 shrink-0"></i>
                            <span>Modern, premium tasarÄ±m (glass card, animated orbs, gradient effects)</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-paint-brush text-purple-400 mt-1 shrink-0"></i>
                            <span>Responsive design - mobil, tablet, desktop uyumlu</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-magic text-blue-400 mt-1 shrink-0"></i>
                            <span>Alpine.js ile cycle switching dinamik ve smooth</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-shopping-cart text-green-400 mt-1 shrink-0"></i>
                            <span>addToCart() metodu SubscriptionCartBridge kullanÄ±yor (Shop pattern)</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-shield-alt text-yellow-400 mt-1 shrink-0"></i>
                            <span>Trial plan kontrolÃ¼ ve Ã¶zel handling var (startTrial metodu)</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-user text-cyan-400 mt-1 shrink-0"></i>
                            <span>User state kontrolÃ¼ (premium, trial, guest) iyi yÃ¶netilmiÅŸ</span>
                        </li>
                    </ul>
                </div>

                <div class="bg-yellow-900/20 border border-yellow-700 rounded-lg p-4">
                    <h4 class="font-semibold mb-3 flex items-center gap-2">
                        <i class="fas fa-exclamation-circle text-yellow-400"></i>
                        Ä°yileÅŸtirme AlanlarÄ±
                    </h4>
                    <ul class="space-y-2 text-sm text-slate-200">
                        <li class="flex items-start gap-2">
                            <i class="fas fa-tag text-red-400 mt-1 shrink-0"></i>
                            <span><strong>Fiyat gÃ¶sterimi statik:</strong> Blade view'da fiyat her zaman "â‚º{{ price }} + KDV" formatÄ±nda (dinamik deÄŸil)</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-tag text-red-400 mt-1 shrink-0"></i>
                            <span>Model'den price_type bilgisi Ã§ekilmiyor</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-tag text-red-400 mt-1 shrink-0"></i>
                            <span>KDV dahil senaryosunda "â‚º600 (KDV Dahil)" yerine yanlÄ±ÅŸ "â‚º600 + KDV" gÃ¶sterilebilir</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-calculator text-yellow-400 mt-1 shrink-0"></i>
                            <span>Compare price (Ã¼stÃ¼ Ã§izili fiyat) varsa, onun da price_type'a gÃ¶re gÃ¶sterilmesi gerekir</span>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="bg-purple-900/20 border border-purple-700 rounded-lg p-4">
                <h4 class="font-semibold mb-3 flex items-center gap-2">
                    <i class="fas fa-code text-purple-400"></i>
                    Ã–nerilen Kod DeÄŸiÅŸiklikleri
                </h4>
                <div class="space-y-3 text-sm text-slate-200">
                    <div class="flex items-start gap-2">
                        <span class="px-2 py-1 bg-purple-600 rounded text-xs font-semibold shrink-0">PHP</span>
                        <div class="flex-1">
                            <strong>SubscriptionPlansComponent.php - cycle data'ya price_type ekle:</strong>
                            <div class="code-block rounded mt-2 p-3 font-mono text-xs overflow-x-auto">
// mount() veya render() iÃ§inde plan loop'unda:<br>
foreach ($plans as $plan) {<br>
&nbsp;&nbsp;$cycles = $plan->getSortedCycles();<br>
&nbsp;&nbsp;foreach ($cycles as $key => $cycle) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;$cycle['price_type'] = $plan->getCyclePriceType($key);<br>
&nbsp;&nbsp;&nbsp;&nbsp;$cycle['price_with_tax'] = $plan->getCyclePriceWithTax($key);<br>
&nbsp;&nbsp;}<br>
}
                            </div>
                        </div>
                    </div>
                    <div class="flex items-start gap-2">
                        <span class="px-2 py-1 bg-purple-600 rounded text-xs font-semibold shrink-0">BLADE</span>
                        <div class="flex-1">
                            <strong>subscription-plans.blade.php - dinamik fiyat gÃ¶sterimi:</strong>
                            <div class="code-block rounded mt-2 p-3 font-mono text-xs overflow-x-auto">
@php<br>
&nbsp;&nbsp;$cycle = $plan->getSortedCycles()[$cycleKey] ?? null;<br>
&nbsp;&nbsp;$priceType = $plan->getCyclePriceType($cycleKey);<br>
&nbsp;&nbsp;$basePrice = $plan->getCycleBasePrice($cycleKey);<br>
&nbsp;&nbsp;$priceWithTax = $plan->getCyclePriceWithTax($cycleKey);<br>
@endphp<br>
<br>
@if($priceType === 'with_tax')<br>
&nbsp;&nbsp;&lt;div&gt;â‚º{{ number_format($cycle['price'], 2) }} &lt;span class="text-xs"&gt;(KDV Dahil)&lt;/span&gt;&lt;/div&gt;<br>
@else<br>
&nbsp;&nbsp;&lt;div&gt;â‚º{{ number_format($cycle['price'], 2) }} + KDV&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div class="text-xs"&gt;Toplam: â‚º{{ number_format($priceWithTax, 2) }}&lt;/div&gt;<br>
@endif
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 2.3 Checkout Ä°ncelemesi -->
    <div class="bg-slate-800/50 rounded-xl p-6 mb-6">
        <h3 class="text-xl font-semibold mb-4 flex items-center gap-2">
            <i class="fas fa-shopping-cart text-green-400"></i>
            2.3. Checkout Ä°ncelemesi
        </h3>

        <div class="space-y-4">
            <div class="code-block rounded-lg p-4">
                <div class="text-sm text-slate-400 mb-2">ğŸ“ Dosya Konumu</div>
                <div class="font-mono text-sm text-green-400">
                    âœ“ Modules/Cart/resources/views/livewire/front/checkout-page.blade.php
                </div>
            </div>

            <div class="bg-blue-900/20 border border-blue-700 rounded-lg p-4">
                <h4 class="font-semibold mb-3 flex items-center gap-2">
                    <i class="fas fa-info-circle text-blue-400"></i>
                    Durum
                </h4>
                <ul class="space-y-2 text-sm text-slate-200">
                    <li class="flex items-start gap-2">
                        <i class="fas fa-check text-green-400 mt-1 shrink-0"></i>
                        <span>Checkout sayfasÄ± CartItem model'inin verilerini kullanÄ±yor</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <i class="fas fa-check text-green-400 mt-1 shrink-0"></i>
                        <span>CartItem otomatik olarak KDV hesabÄ± yapÄ±yor (recalculate metodu)</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <i class="fas fa-check text-green-400 mt-1 shrink-0"></i>
                        <span>SubscriptionCartBridge dÃ¼zeltildi - artÄ±k doÄŸru base_price (KDV hariÃ§) gÃ¶nderiyor</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <i class="fas fa-check text-green-400 mt-1 shrink-0"></i>
                        <span>Cart totals doÄŸru hesaplanÄ±yor (subtotal, tax_amount, total)</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <i class="fas fa-lightbulb text-yellow-400 mt-1 shrink-0"></i>
                        <span><strong>Not:</strong> Checkout sayfasÄ± zaten doÄŸru Ã§alÄ±ÅŸÄ±yor Ã§Ã¼nkÃ¼ CartService ve CartItem modeli KDV hariÃ§ fiyat (base_price) bekliyor. Bridge'i dÃ¼zelttikten sonra sorun kalmadÄ±.</span>
                    </li>
                </ul>
            </div>

            <div class="bg-green-900/20 border border-green-700 rounded-lg p-4">
                <h4 class="font-semibold mb-3 flex items-center gap-2">
                    <i class="fas fa-thumbs-up text-green-400"></i>
                    Ä°yi Taraflar
                </h4>
                <ul class="space-y-2 text-sm text-slate-200">
                    <li class="flex items-start gap-2">
                        <i class="fas fa-code text-blue-400 mt-1 shrink-0"></i>
                        <span>Alpine.js ile modern, reactive form state management</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <i class="fas fa-mobile-alt text-purple-400 mt-1 shrink-0"></i>
                        <span>Responsive tasarÄ±m - mobile-first approach</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <i class="fas fa-shield-alt text-green-400 mt-1 shrink-0"></i>
                        <span>Fatura profili, adres yÃ¶netimi, Ã¶deme metodu seÃ§imi iyi entegre</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <i class="fas fa-sync-alt text-cyan-400 mt-1 shrink-0"></i>
                        <span>syncToLivewire() ile form data Livewire component'ine temiz ÅŸekilde aktarÄ±lÄ±yor</span>
                    </li>
                </ul>
            </div>

            <div class="bg-yellow-900/20 border border-yellow-700 rounded-lg p-4">
                <h4 class="font-semibold mb-3 flex items-center gap-2">
                    <i class="fas fa-clipboard-check text-yellow-400"></i>
                    Test Edilmesi Gerekenler
                </h4>
                <ul class="space-y-2 text-sm text-slate-200">
                    <li class="flex items-start gap-2">
                        <span class="px-2 py-1 bg-yellow-600 rounded text-xs font-semibold shrink-0">1</span>
                        <span>KDV hariÃ§ plan (600 TL) sepete eklendiÄŸinde: Subtotal 600, VAT 120, Total 720 gÃ¶rmeli</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span class="px-2 py-1 bg-yellow-600 rounded text-xs font-semibold shrink-0">2</span>
                        <span>KDV dahil plan (720 TL) sepete eklendiÄŸinde: Subtotal 600, VAT 120, Total 720 gÃ¶rmeli</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span class="px-2 py-1 bg-yellow-600 rounded text-xs font-semibold shrink-0">3</span>
                        <span>Her iki senaryoda da Ã¶deme gateway'ine giden tutar doÄŸru olmalÄ±</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span class="px-2 py-1 bg-yellow-600 rounded text-xs font-semibold shrink-0">4</span>
                        <span>PayTR/Banka Havalesi seÃ§imine gÃ¶re toplam tutar deÄŸiÅŸmemeli (gateway fee ayrÄ± ise o eklenmeli)</span>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <!-- 2.4 Database Ä°ncelemesi -->
    <div class="bg-slate-800/50 rounded-xl p-6 mb-6">
        <h3 class="text-xl font-semibold mb-4 flex items-center gap-2">
            <i class="fas fa-database text-yellow-400"></i>
            2.4. Database Ä°ncelemesi
        </h3>

        <div class="space-y-4">
            <div class="code-block rounded-lg p-4">
                <div class="text-sm text-slate-400 mb-2">ğŸ“ Migration DosyasÄ±</div>
                <div class="font-mono text-sm text-green-400">
                    âœ“ Modules/Subscription/database/migrations/tenant/2025_11_23_000001_create_subscription_plans_table.php
                </div>
            </div>

            <div class="bg-slate-900/50 rounded-lg p-4">
                <h4 class="font-semibold mb-3 flex items-center gap-2">
                    <i class="fas fa-table text-blue-400"></i>
                    Tablo YapÄ±sÄ±: subscription_plans
                </h4>
                <div class="code-block rounded p-4 font-mono text-xs overflow-x-auto">
<span class="text-blue-400">subscription_plan_id</span> <span class="text-slate-400">(BIGINT, PK)</span><br>
<span class="text-green-400">title</span> <span class="text-slate-400">(JSON)</span> - Ã‡oklu dil desteÄŸi âœ“<br>
<span class="text-green-400">slug</span> <span class="text-slate-400">(VARCHAR, UNIQUE)</span> - URL friendly identifier âœ“<br>
<span class="text-green-400">description</span> <span class="text-slate-400">(JSON)</span> - Ã‡oklu dil aÃ§Ä±klama âœ“<br>
<span class="text-green-400">features</span> <span class="text-slate-400">(JSON)</span> - Ã–zellikler listesi âœ“<br>
<span class="text-green-400">billing_cycles</span> <span class="text-slate-400">(JSON)</span> - Dinamik fiyat dÃ¶ngÃ¼leri âœ“<br>
<span class="text-green-400">currency</span> <span class="text-slate-400">(VARCHAR, DEFAULT 'TRY')</span> âœ“<br>
<span class="text-green-400">tax_rate</span> <span class="text-slate-400">(DECIMAL(5,2), DEFAULT 20.00)</span> âœ“<br>
<span class="text-green-400">price_display_mode</span> <span class="text-slate-400">(ENUM: show|hide|request)</span> âœ“<br>
<span class="text-green-400">trial_days</span> <span class="text-slate-400">(INT, DEFAULT 0)</span> âœ“<br>
<span class="text-green-400">is_trial</span> <span class="text-slate-400">(BOOLEAN)</span> âœ“<br>
<span class="text-green-400">device_limit</span> <span class="text-slate-400">(INT, DEFAULT 1)</span> âœ“<br>
<span class="text-green-400">sort_order</span> <span class="text-slate-400">(INT)</span> âœ“<br>
<span class="text-green-400">is_featured</span> <span class="text-slate-400">(BOOLEAN)</span> âœ“<br>
<span class="text-green-400">is_active</span> <span class="text-slate-400">(BOOLEAN)</span> âœ“<br>
<span class="text-green-400">is_public</span> <span class="text-slate-400">(BOOLEAN)</span> âœ“<br>
<span class="text-red-400">default_price_type</span> <span class="text-slate-400">(ENUM: with_tax|without_tax) - <strong>EKSÄ°K!</strong></span><br>
<span class="text-green-400">created_at, updated_at, deleted_at</span> âœ“
                </div>
            </div>

            <div class="bg-purple-900/20 border border-purple-700 rounded-lg p-4">
                <h4 class="font-semibold mb-3 flex items-center gap-2">
                    <i class="fas fa-code-branch text-purple-400"></i>
                    billing_cycles JSON YapÄ±sÄ±
                </h4>
                <div class="code-block rounded p-4 font-mono text-xs overflow-x-auto">
{<br>
&nbsp;&nbsp;"monthly": {<br>
&nbsp;&nbsp;&nbsp;&nbsp;"label": { "tr": "AylÄ±k", "en": "Monthly" },<br>
&nbsp;&nbsp;&nbsp;&nbsp;"price": 600.00,<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-red-400">"price_type": "without_tax", // EKSÄ°K!</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;"compare_price": 720.00,<br>
&nbsp;&nbsp;&nbsp;&nbsp;"duration_days": 30,<br>
&nbsp;&nbsp;&nbsp;&nbsp;"trial_days": null,<br>
&nbsp;&nbsp;&nbsp;&nbsp;"badge": { "text": "PopÃ¼ler", "color": "primary" },<br>
&nbsp;&nbsp;&nbsp;&nbsp;"promo_text": { "tr": "2 ay bedava!", "en": null },<br>
&nbsp;&nbsp;&nbsp;&nbsp;"sort_order": 1<br>
&nbsp;&nbsp;},<br>
&nbsp;&nbsp;"yearly": { ... }<br>
}
                </div>
            </div>

            <div class="bg-red-900/20 border border-red-700 rounded-lg p-4">
                <h4 class="font-semibold mb-3 flex items-center gap-2">
                    <i class="fas fa-exclamation-triangle text-red-400"></i>
                    Eksik Alanlar
                </h4>
                <ul class="space-y-2 text-sm text-slate-200">
                    <li class="flex items-start gap-2">
                        <span class="px-2 py-1 bg-red-600 rounded text-xs font-semibold shrink-0">1</span>
                        <div>
                            <strong>default_price_type</strong> (plan seviyesinde) - Opsiyonel ama Ã¶nerilir
                            <div class="text-xs text-slate-400 mt-1">TÃ¼m cycle'lar aynÄ± tip kullanÄ±yorsa tek yerden yÃ¶netilebilir</div>
                        </div>
                    </li>
                    <li class="flex items-start gap-2">
                        <span class="px-2 py-1 bg-red-600 rounded text-xs font-semibold shrink-0">2</span>
                        <div>
                            <strong>price_type</strong> (cycle seviyesinde billing_cycles JSON iÃ§inde) - ZORUNLU!
                            <div class="text-xs text-slate-400 mt-1">Her cycle iÃ§in ayrÄ± ayrÄ± tanÄ±mlanabilir (flexibility)</div>
                        </div>
                    </li>
                </ul>
            </div>

            <div class="bg-blue-900/20 border border-blue-700 rounded-lg p-4">
                <h4 class="font-semibold mb-3 flex items-center gap-2">
                    <i class="fas fa-database text-blue-400"></i>
                    Migration Ã–nerisi (Opsiyonel)
                </h4>
                <div class="code-block rounded p-4 font-mono text-xs overflow-x-auto">
<span class="text-slate-400">// Modules/Subscription/database/migrations/tenant/2025_01_11_add_default_price_type.php</span><br>
<br>
Schema::table('subscription_plans', function (Blueprint $table) {<br>
&nbsp;&nbsp;$table->enum('default_price_type', ['with_tax', 'without_tax'])<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->default('without_tax')<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->after('tax_rate')<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->comment('VarsayÄ±lan fiyat tipi (cycle override edebilir)');<br>
});<br>
<br>
<span class="text-slate-400">// NOT: Cycle bazÄ±nda price_type zaten billing_cycles JSON iÃ§inde saklanÄ±r</span><br>
<span class="text-slate-400">// Migration gerekmiyor - sadece admin form gÃ¼ncellemesi yeterli</span>
                </div>
            </div>
        </div>
    </div>

    <!-- 2.5 SubscriptionCartBridge -->
    <div class="bg-slate-800/50 rounded-xl p-6">
        <h3 class="text-xl font-semibold mb-4 flex items-center gap-2">
            <i class="fas fa-exchange-alt text-cyan-400"></i>
            2.5. SubscriptionCartBridge Ä°ncelemesi
        </h3>

        <div class="space-y-4">
            <div class="code-block rounded-lg p-4">
                <div class="text-sm text-slate-400 mb-2">ğŸ“ Dosya Konumu</div>
                <div class="font-mono text-sm text-green-400">
                    âœ“ Modules/Subscription/App/Services/SubscriptionCartBridge.php
                </div>
            </div>

            <div class="bg-green-900/20 border border-green-700 rounded-lg p-4">
                <h4 class="font-semibold mb-3 flex items-center gap-2">
                    <i class="fas fa-check-circle text-green-400"></i>
                    DÃ¼zeltilen Kod (Lines 98-143)
                </h4>
                <div class="code-block rounded p-4 font-mono text-xs overflow-x-auto">
<span class="text-green-400">// ESKÄ° KOD (HATA):</span><br>
$priceWithTax = $cycle['price'] ?? 0;<br>
$priceWithoutTax = $priceWithTax / (1 + ($taxRate / 100)); <span class="text-red-400">// YANLIÅ!</span><br>
<br>
<span class="text-green-400">// YENÄ° KOD (DOÄRU):</span><br>
$cycleKey = $cycle['key'] ?? null;<br>
$basePrice = $plan->getCycleBasePrice($cycleKey); <span class="text-green-400">// Model accessor</span><br>
$priceType = $plan->getCyclePriceType($cycleKey); <span class="text-green-400">// with_tax / without_tax</span><br>
<br>
return [<br>
&nbsp;&nbsp;'unit_price' => $basePrice, <span class="text-green-400">// KDV hariÃ§ (Cart iÃ§in)</span><br>
&nbsp;&nbsp;'tax_rate' => $taxRate,<br>
&nbsp;&nbsp;...<br>
];
                </div>
            </div>

            <div class="grid md:grid-cols-2 gap-4">
                <div class="bg-blue-900/20 border border-blue-700 rounded-lg p-4">
                    <h4 class="font-semibold mb-3 flex items-center gap-2">
                        <i class="fas fa-lightbulb text-blue-400"></i>
                        NasÄ±l Ã‡alÄ±ÅŸÄ±yor?
                    </h4>
                    <ol class="space-y-2 text-sm text-slate-200">
                        <li class="flex items-start gap-2">
                            <span class="px-2 py-1 bg-blue-600 rounded text-xs font-semibold shrink-0">1</span>
                            <span>Model'den <strong>getCycleBasePrice()</strong> accessor Ã§aÄŸrÄ±lÄ±r</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="px-2 py-1 bg-blue-600 rounded text-xs font-semibold shrink-0">2</span>
                            <span>Accessor price_type kontrol eder: with_tax ise KDV ayrÄ±ÅŸtÄ±rÄ±r, without_tax ise direkt dÃ¶ner</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="px-2 py-1 bg-blue-600 rounded text-xs font-semibold shrink-0">3</span>
                            <span>Cart'a KDV hariÃ§ fiyat (base_price) gÃ¶nderilir</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="px-2 py-1 bg-blue-600 rounded text-xs font-semibold shrink-0">4</span>
                            <span>CartItem otomatik KDV hesabÄ± yapar (recalculate)</span>
                        </li>
                    </ol>
                </div>

                <div class="bg-purple-900/20 border border-purple-700 rounded-lg p-4">
                    <h4 class="font-semibold mb-3 flex items-center gap-2">
                        <i class="fas fa-shield-check text-purple-400"></i>
                        AvantajlarÄ±
                    </h4>
                    <ul class="space-y-2 text-sm text-slate-200">
                        <li class="flex items-start gap-2">
                            <i class="fas fa-check text-green-400 mt-1 shrink-0"></i>
                            <span>Shop module pattern'i ile tutarlÄ±</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-check text-green-400 mt-1 shrink-0"></i>
                            <span>Tek kaynak (Model) - mantÄ±k merkezileÅŸtirilmiÅŸ</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-check text-green-400 mt-1 shrink-0"></i>
                            <span>Flexible - her cycle ayrÄ± price_type olabilir</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-check text-green-400 mt-1 shrink-0"></i>
                            <span>Test edilebilir - accessor'larÄ± unit test etmek kolay</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- SECTION 3: SORUNLAR VE Ã‡Ã–ZÃœMLER -->
<div class="section-card rounded-2xl p-8 mb-8">
    <div class="flex items-center gap-3 mb-6">
        <div class="w-12 h-12 rounded-xl bg-red-600 flex items-center justify-center">
            <i class="fas fa-bug text-xl"></i>
        </div>
        <h2 class="text-2xl font-bold">ğŸ› Tespit Edilen Sorunlar ve Ã‡Ã¶zÃ¼mleri</h2>
    </div>

    <div class="space-y-4">
        <!-- Sorun 1 -->
        <div class="bg-slate-800/50 rounded-xl overflow-hidden">
            <div class="bg-red-600 px-6 py-3 flex items-center gap-3">
                <span class="px-3 py-1 bg-white text-red-600 rounded font-bold text-sm">SORUN #1</span>
                <h3 class="font-semibold">Admin Panel - price_type SeÃ§im EksikliÄŸi</h3>
            </div>
            <div class="p-6 space-y-4">
                <div class="bg-red-900/20 border border-red-700 rounded-lg p-4">
                    <h4 class="font-semibold mb-2 flex items-center gap-2">
                        <i class="fas fa-exclamation-triangle text-red-400"></i>
                        Sorun AÃ§Ä±klamasÄ±
                    </h4>
                    <p class="text-slate-200 text-sm">
                        Cycle ekleme/dÃ¼zenleme formunda "Bu fiyat KDV dahil mi, hariÃ§ mi?" seÃ§eneÄŸi yok. Admin kullanÄ±cÄ± fiyat girerken bu bilgiyi belirtemiyor.
                    </p>
                </div>
                <div class="bg-green-900/20 border border-green-700 rounded-lg p-4">
                    <h4 class="font-semibold mb-2 flex items-center gap-2">
                        <i class="fas fa-wrench text-green-400"></i>
                        Ã‡Ã¶zÃ¼m
                    </h4>
                    <ul class="space-y-2 text-sm text-slate-200">
                        <li class="flex items-start gap-2">
                            <span class="px-2 py-1 bg-green-600 rounded text-xs font-semibold shrink-0">1</span>
                            <span>Blade view'a select input ekle (FiyatlandÄ±rma bÃ¶lÃ¼mÃ¼nde, price input'unun yanÄ±na)</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="px-2 py-1 bg-green-600 rounded text-xs font-semibold shrink-0">2</span>
                            <span>Alpine.js newCycle objesine price_type field'Ä± ekle (default: 'without_tax')</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="px-2 py-1 bg-green-600 rounded text-xs font-semibold shrink-0">3</span>
                            <span>addCycle() ve updateCycle() metodlarÄ±nda price_type'Ä± cycle array'ine kaydet</span>
                        </li>
                    </ul>
                </div>
                <div class="bg-blue-900/20 border border-blue-700 rounded-lg p-4">
                    <h4 class="font-semibold mb-2 flex items-center gap-2">
                        <i class="fas fa-fire text-blue-400"></i>
                        Ã–ncelik
                    </h4>
                    <span class="px-3 py-1 bg-red-600 rounded-lg text-sm font-semibold">ğŸ”¥ YÃœKSEK</span>
                    <span class="text-sm text-slate-300 ml-3">Bu olmadan flexible fiyatlandÄ±rma sistemi Ã§alÄ±ÅŸmaz</span>
                </div>
            </div>
        </div>

        <!-- Sorun 2 -->
        <div class="bg-slate-800/50 rounded-xl overflow-hidden">
            <div class="bg-yellow-600 px-6 py-3 flex items-center gap-3">
                <span class="px-3 py-1 bg-white text-yellow-600 rounded font-bold text-sm">SORUN #2</span>
                <h3 class="font-semibold">Frontend - Statik Fiyat GÃ¶sterimi</h3>
            </div>
            <div class="p-6 space-y-4">
                <div class="bg-yellow-900/20 border border-yellow-700 rounded-lg p-4">
                    <h4 class="font-semibold mb-2 flex items-center gap-2">
                        <i class="fas fa-exclamation-triangle text-yellow-400"></i>
                        Sorun AÃ§Ä±klamasÄ±
                    </h4>
                    <p class="text-slate-200 text-sm">
                        subscription-plans.blade.php'de fiyat gÃ¶sterimi her zaman "â‚º600 + KDV" formatÄ±nda. EÄŸer fiyat zaten KDV dahil ise yanlÄ±ÅŸ bilgi gÃ¶steriliyor.
                    </p>
                </div>
                <div class="bg-green-900/20 border border-green-700 rounded-lg p-4">
                    <h4 class="font-semibold mb-2 flex items-center gap-2">
                        <i class="fas fa-wrench text-green-400"></i>
                        Ã‡Ã¶zÃ¼m
                    </h4>
                    <ul class="space-y-2 text-sm text-slate-200">
                        <li class="flex items-start gap-2">
                            <span class="px-2 py-1 bg-green-600 rounded text-xs font-semibold shrink-0">1</span>
                            <span>Model'den getCyclePriceType() accessor kullan</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="px-2 py-1 bg-green-600 rounded text-xs font-semibold shrink-0">2</span>
                            <span>@if($priceType === 'with_tax') ile koÅŸullu gÃ¶sterim yap</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="px-2 py-1 bg-green-600 rounded text-xs font-semibold shrink-0">3</span>
                            <span>with_tax: "â‚º600 (KDV Dahil)", without_tax: "â‚º600 + KDV" formatÄ± kullan</span>
                        </li>
                    </ul>
                </div>
                <div class="bg-blue-900/20 border border-blue-700 rounded-lg p-4">
                    <h4 class="font-semibold mb-2 flex items-center gap-2">
                        <i class="fas fa-fire text-blue-400"></i>
                        Ã–ncelik
                    </h4>
                    <span class="px-3 py-1 bg-yellow-600 rounded-lg text-sm font-semibold">âš ï¸ ORTA</span>
                    <span class="text-sm text-slate-300 ml-3">KullanÄ±cÄ± deneyimi iÃ§in Ã¶nemli ama sistem Ã§alÄ±ÅŸÄ±yor</span>
                </div>
            </div>
        </div>

        <!-- Sorun 3 -->
        <div class="bg-slate-800/50 rounded-xl overflow-hidden">
            <div class="bg-blue-600 px-6 py-3 flex items-center gap-3">
                <span class="px-3 py-1 bg-white text-blue-600 rounded font-bold text-sm">SORUN #3</span>
                <h3 class="font-semibold">Database - default_price_type AlanÄ± Yok (Opsiyonel)</h3>
            </div>
            <div class="p-6 space-y-4">
                <div class="bg-blue-900/20 border border-blue-700 rounded-lg p-4">
                    <h4 class="font-semibold mb-2 flex items-center gap-2">
                        <i class="fas fa-info-circle text-blue-400"></i>
                        Sorun AÃ§Ä±klamasÄ±
                    </h4>
                    <p class="text-slate-200 text-sm">
                        subscription_plans tablosunda plan-level default_price_type field'Ä± yok. Her cycle iÃ§in ayrÄ± ayrÄ± price_type tanÄ±mlanmasÄ± gerekiyor (billing_cycles JSON iÃ§inde).
                    </p>
                </div>
                <div class="bg-green-900/20 border border-green-700 rounded-lg p-4">
                    <h4 class="font-semibold mb-2 flex items-center gap-2">
                        <i class="fas fa-wrench text-green-400"></i>
                        Ã‡Ã¶zÃ¼m (Ä°ki SeÃ§enek)
                    </h4>
                    <div class="space-y-3 text-sm text-slate-200">
                        <div class="bg-slate-900/50 rounded p-3">
                            <strong class="text-purple-400">SeÃ§enek A (Ã–nerilen - Daha Flexible):</strong>
                            <p class="mt-2">Migration OLUÅTURMA. Sadece cycle bazÄ±nda price_type kullan (billing_cycles JSON iÃ§inde). Daha esnek, her cycle ayrÄ± tip olabilir.</p>
                        </div>
                        <div class="bg-slate-900/50 rounded p-3">
                            <strong class="text-blue-400">SeÃ§enek B (Opsiyonel - Daha Kolay YÃ¶netim):</strong>
                            <p class="mt-2">Migration oluÅŸtur, default_price_type field ekle. TÃ¼m cycle'lar aynÄ± tip kullanÄ±yorsa tek yerden yÃ¶netilir. Cycle bazÄ±nda override edilebilir.</p>
                        </div>
                    </div>
                </div>
                <div class="bg-blue-900/20 border border-blue-700 rounded-lg p-4">
                    <h4 class="font-semibold mb-2 flex items-center gap-2">
                        <i class="fas fa-fire text-blue-400"></i>
                        Ã–ncelik
                    </h4>
                    <span class="px-3 py-1 bg-slate-600 rounded-lg text-sm font-semibold">ğŸ’¡ DÃœÅÃœK (Opsiyonel)</span>
                    <span class="text-sm text-slate-300 ml-3">Cycle bazÄ±nda price_type yeterli</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- SECTION 4: YAPILANLAR -->
<div class="section-card rounded-2xl p-8 mb-8">
    <div class="flex items-center gap-3 mb-6">
        <div class="w-12 h-12 rounded-xl bg-green-600 flex items-center justify-center">
            <i class="fas fa-tasks text-xl"></i>
        </div>
        <h2 class="text-2xl font-bold">âœ… YapÄ±lacaklar Listesi (Ã–ncelik SÄ±ralÄ±)</h2>
    </div>

    <div class="space-y-4">
        <!-- HIGH PRIORITY -->
        <div class="bg-red-900/20 border-2 border-red-600 rounded-xl p-6">
            <div class="flex items-center gap-3 mb-4">
                <span class="px-3 py-1 bg-red-600 rounded-lg font-semibold">ğŸ”¥ YÃœKSEK Ã–NCELÄ°K</span>
                <h3 class="text-xl font-semibold">Kritik DÃ¼zeltmeler</h3>
            </div>
            <div class="space-y-3">
                <div class="flex items-start gap-3 bg-slate-800/50 rounded-lg p-4">
                    <div class="w-8 h-8 rounded-lg bg-red-600 flex items-center justify-center shrink-0 font-bold">1</div>
                    <div class="flex-1">
                        <h4 class="font-semibold mb-2">Admin Panel: Cycle Form'a price_type SeÃ§imi Ekle</h4>
                        <ul class="space-y-1 text-sm text-slate-300">
                            <li>â€¢ subscription-plan-manage-component.blade.php - Line ~420-454 arasÄ± (FiyatlandÄ±rma bÃ¶lÃ¼mÃ¼)</li>
                            <li>â€¢ Select input ekle: &lt;option value="without_tax"&gt;KDV HariÃ§&lt;/option&gt;</li>
                            <li>â€¢ Alpine.js newCycle objesi: price_type: 'without_tax' ekle</li>
                            <li>â€¢ SubscriptionPlanManageComponent.php - addCycle() ve updateCycle() metodlarÄ± gÃ¼ncelle</li>
                        </ul>
                    </div>
                </div>

                <div class="flex items-start gap-3 bg-slate-800/50 rounded-lg p-4">
                    <div class="w-8 h-8 rounded-lg bg-red-600 flex items-center justify-center shrink-0 font-bold">2</div>
                    <div class="flex-1">
                        <h4 class="font-semibold mb-2">Frontend: Dinamik Fiyat GÃ¶sterimi</h4>
                        <ul class="space-y-1 text-sm text-slate-300">
                            <li>â€¢ subscription-plans.blade.php - Fiyat gÃ¶sterim bloÄŸunu gÃ¼ncelle</li>
                            <li>â€¢ @if($priceType === 'with_tax') ile koÅŸullu render</li>
                            <li>â€¢ with_tax: "â‚º600 (KDV Dahil)"</li>
                            <li>â€¢ without_tax: "â‚º600 + KDV (Toplam: â‚º720)"</li>
                        </ul>
                    </div>
                </div>

                <div class="flex items-start gap-3 bg-slate-800/50 rounded-lg p-4">
                    <div class="w-8 h-8 rounded-lg bg-red-600 flex items-center justify-center shrink-0 font-bold">3</div>
                    <div class="flex-1">
                        <h4 class="font-semibold mb-2">Test: KDV Hesaplama KontrolÃ¼</h4>
                        <ul class="space-y-1 text-sm text-slate-300">
                            <li>â€¢ Test 1: KDV hariÃ§ plan (600 TL) â†’ Checkout'ta Subtotal 600, VAT 120, Total 720</li>
                            <li>â€¢ Test 2: KDV dahil plan (720 TL) â†’ Checkout'ta Subtotal 600, VAT 120, Total 720</li>
                            <li>â€¢ Test 3: Plan sayfasÄ±nda doÄŸru fiyat gÃ¶sterimi</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- MEDIUM PRIORITY -->
        <div class="bg-yellow-900/20 border-2 border-yellow-600 rounded-xl p-6">
            <div class="flex items-center gap-3 mb-4">
                <span class="px-3 py-1 bg-yellow-600 rounded-lg font-semibold">âš ï¸ ORTA Ã–NCELÄ°K</span>
                <h3 class="text-xl font-semibold">Ä°yileÅŸtirmeler</h3>
            </div>
            <div class="space-y-3">
                <div class="flex items-start gap-3 bg-slate-800/50 rounded-lg p-4">
                    <div class="w-8 h-8 rounded-lg bg-yellow-600 flex items-center justify-center shrink-0 font-bold">4</div>
                    <div class="flex-1">
                        <h4 class="font-semibold mb-2">UX Ä°yileÅŸtirmesi: Dinamik Hint MesajlarÄ±</h4>
                        <ul class="space-y-1 text-sm text-slate-300">
                            <li>â€¢ Admin panelde price_type seÃ§imine gÃ¶re hint gÃ¶ster</li>
                            <li>â€¢ without_tax: "Bu fiyat KDV hariÃ§tir. Checkout'ta %20 KDV eklenecektir."</li>
                            <li>â€¢ with_tax: "Bu fiyat KDV dahildir. Checkout'ta KDV ayrÄ±ÅŸtÄ±rÄ±lacaktÄ±r."</li>
                        </ul>
                    </div>
                </div>

                <div class="flex items-start gap-3 bg-slate-800/50 rounded-lg p-4">
                    <div class="w-8 h-8 rounded-lg bg-yellow-600 flex items-center justify-center shrink-0 font-bold">5</div>
                    <div class="flex-1">
                        <h4 class="font-semibold mb-2">Compare Price (ÃœstÃ¼ Ã‡izili Fiyat) iÃ§in price_type DesteÄŸi</h4>
                        <ul class="space-y-1 text-sm text-slate-300">
                            <li>â€¢ Compare price de price_type'a gÃ¶re gÃ¶sterilmeli</li>
                            <li>â€¢ with_tax: "â‚º720 (KDV Dahil)"</li>
                            <li>â€¢ without_tax: "â‚º600 + KDV"</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- LOW PRIORITY -->
        <div class="bg-blue-900/20 border-2 border-blue-600 rounded-xl p-6">
            <div class="flex items-center gap-3 mb-4">
                <span class="px-3 py-1 bg-blue-600 rounded-lg font-semibold">ğŸ’¡ DÃœÅÃœK Ã–NCELÄ°K (Opsiyonel)</span>
                <h3 class="text-xl font-semibold">Gelecek Ä°yileÅŸtirmeler</h3>
            </div>
            <div class="space-y-3">
                <div class="flex items-start gap-3 bg-slate-800/50 rounded-lg p-4">
                    <div class="w-8 h-8 rounded-lg bg-blue-600 flex items-center justify-center shrink-0 font-bold">6</div>
                    <div class="flex-1">
                        <h4 class="font-semibold mb-2">Migration: default_price_type Field Ekle (Plan Seviyesi)</h4>
                        <ul class="space-y-1 text-sm text-slate-300">
                            <li>â€¢ Sadece tÃ¼m cycle'lar aynÄ± tip kullanÄ±yorsa gerekli</li>
                            <li>â€¢ Cycle bazÄ±nda override edilebilir</li>
                            <li>â€¢ Åu an cycle bazÄ±nda yeterli - ATLANA BÄ°LÄ°R</li>
                        </ul>
                    </div>
                </div>

                <div class="flex items-start gap-3 bg-slate-800/50 rounded-lg p-4">
                    <div class="w-8 h-8 rounded-lg bg-blue-600 flex items-center justify-center shrink-0 font-bold">7</div>
                    <div class="flex-1">
                        <h4 class="font-semibold mb-2">Admin Panel: Bulk price_type GÃ¼ncelleme</h4>
                        <ul class="space-y-1 text-sm text-slate-300">
                            <li>â€¢ Mevcut tÃ¼m cycle'larÄ±n price_type'Ä±nÄ± toplu deÄŸiÅŸtirme</li>
                            <li>â€¢ Modal aÃ§Ä±lÄ±r: "TÃ¼m cycle'larÄ± without_tax olarak iÅŸaretle"</li>
                            <li>â€¢ Veri migration senaryosu iÃ§in faydalÄ±</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Footer -->
<footer class="border-t border-white/10 bg-black/20 py-6 mt-12">
    <div class="container mx-auto px-6">
        <div class="flex items-center justify-between">
            <div class="flex items-center gap-2 text-slate-400 text-sm">
                <i class="fas fa-robot"></i>
                <span>Claude AI ile oluÅŸturuldu</span>
                <span class="mx-2">â€¢</span>
                <span>Muzibu Subscription ModÃ¼lÃ¼</span>
            </div>
            <div class="text-slate-400 text-sm">
                <i class="fas fa-calendar-alt mr-2"></i>
                11 Ocak 2025
            </div>
        </div>
    </div>
</footer>

</div>

</body>
</html>