<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Permission KurallarÄ±: Root YASAK, tuufi.com_ ZORUNLU</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #e2e8f0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            line-height: 1.7;
            padding: 40px 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            margin-bottom: 50px;
            padding-bottom: 30px;
            border-bottom: 2px solid #334155;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #60a5fa, #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .meta {
            color: #94a3b8;
            font-size: 0.95rem;
        }

        section {
            margin-bottom: 50px;
        }

        h2 {
            font-size: 1.8rem;
            margin-bottom: 25px;
            color: #60a5fa;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        h3 {
            font-size: 1.4rem;
            margin: 30px 0 15px 0;
            color: #93c5fd;
        }

        .danger-box {
            background: rgba(220, 38, 38, 0.15);
            border: 2px solid #dc2626;
            padding: 25px;
            margin-bottom: 20px;
            border-radius: 12px;
        }

        .danger-box h3 {
            color: #fca5a5;
            margin-top: 0;
            margin-bottom: 15px;
        }

        .success-box {
            background: rgba(16, 185, 129, 0.1);
            border-left: 4px solid #10b981;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
        }

        .success-box h3 {
            color: #6ee7b7;
            margin-top: 0;
            margin-bottom: 15px;
        }

        .warning-box {
            background: rgba(245, 158, 11, 0.1);
            border-left: 4px solid #f59e0b;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .code-block {
            background: #1e293b;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
            margin: 15px 0;
            border: 1px solid #334155;
        }

        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 30px 0;
        }

        .comparison-item {
            background: rgba(30, 41, 59, 0.5);
            padding: 20px;
            border-radius: 12px;
        }

        .comparison-item.wrong {
            border-left: 4px solid #dc2626;
        }

        .comparison-item.correct {
            border-left: 4px solid #10b981;
        }

        .step-box {
            background: rgba(59, 130, 246, 0.1);
            border-left: 4px solid #3b82f6;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .step-box h4 {
            color: #93c5fd;
            margin-bottom: 10px;
        }

        footer {
            margin-top: 60px;
            padding-top: 30px;
            border-top: 1px solid #334155;
            color: #64748b;
            font-size: 0.9rem;
            text-align: center;
        }

        @media (max-width: 768px) {
            .comparison {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ” Permission KurallarÄ±: Root YASAK!</h1>
            <div class="meta">
                ğŸ“… Tarih: 2025-11-18 |
                ğŸ¯ AmaÃ§: Permission hatalarÄ±nÄ± Ã¶nlemek |
                âš ï¸ KRÄ°TÄ°K: Root kullanÄ±mÄ± site Ã§Ã¶ktÃ¼rÃ¼r!
            </div>
        </header>

        <section>
            <h2>ğŸ”´ KRÄ°TÄ°K KURAL: Root ASLA Kullanma!</h2>

            <div class="danger-box">
                <h3>âŒ ROOT KULLANIMI YASAK!</h3>
                <p style="color: #fca5a5; margin-bottom: 15px; font-size: 1.1rem; font-weight: bold;">
                    Dosya oluÅŸtururken ASLA root kullanÄ±cÄ±sÄ± olarak iÅŸlem yapma!
                </p>

                <div class="code-block">
<span style="color: #fca5a5; font-weight: bold;">âŒ YANLIÅ (Site Ã§Ã¶ker!):</span>
# Root kullanÄ±cÄ±sÄ± olarak dosya oluÅŸturma
touch /path/to/file.php
echo "content" > /path/to/file.php

<span style="color: #fca5a5;">SonuÃ§:</span>
- Owner: root:root â†’ Nginx okuyamaz!
- Permission: 644 bile olsa â†’ Nginx/PHP-FPM eriÅŸemez!
- Site: 500 Internal Server Error!
                </div>
            </div>

            <div class="success-box">
                <h3>âœ… DOÄRU: tuufi.com_ KullanÄ±cÄ±sÄ± Ä°le Ä°ÅŸlem Yap!</h3>
                <p style="color: #6ee7b7; margin-bottom: 15px; font-size: 1.1rem; font-weight: bold;">
                    TÃœM dosya iÅŸlemleri tuufi.com_ kullanÄ±cÄ±sÄ± ile yapÄ±lmalÄ±!
                </p>

                <div class="code-block">
<span style="color: #6ee7b7; font-weight: bold;">âœ… DOÄRU:</span>
# tuufi.com_ kullanÄ±cÄ±sÄ± olarak iÅŸlem yap
sudo -u tuufi.com_ touch /path/to/file.php
sudo -u tuufi.com_ bash -c 'echo "content" > /path/to/file.php'

<span style="color: #6ee7b7;">SonuÃ§:</span>
- Owner: tuufi.com_:psaserv â†’ Nginx okuyabilir!
- Permission: Otomatik doÄŸru â†’ PHP-FPM Ã§alÄ±ÅŸÄ±r!
- Site: Ã‡alÄ±ÅŸÄ±r! âœ…
                </div>
            </div>
        </section>

        <section>
            <h2>âš ï¸ Neden Root KullanÄ±mÄ± Tehlikeli?</h2>

            <div class="warning-box">
                <h4 style="color: #fbbf24; margin-bottom: 15px;">Problem 1: Ownership HatasÄ±</h4>
                <p style="color: #cbd5e1;">Root ile oluÅŸturulan dosyalar <code>root:root</code> owner'Ä±na sahip olur. Nginx ve PHP-FPM bu dosyalarÄ± okuyamaz!</p>

                <div class="code-block">
# Root ile dosya oluÅŸtur
touch /var/www/vhosts/tuufi.com/httpdocs/test.php

# Owner kontrolÃ¼
ls -la /var/www/vhosts/tuufi.com/httpdocs/test.php
<span style="color: #fca5a5;">-rw-r--r-- 1 root root 0 Nov 18 14:30 test.php</span>

# Nginx Ã§alÄ±ÅŸÄ±r mÄ±?
<span style="color: #fca5a5;">âŒ HAYIR! 403 Forbidden veya 500 Error!</span>
                </div>
            </div>

            <div class="warning-box">
                <h4 style="color: #fbbf24; margin-bottom: 15px;">Problem 2: Permission Cascade</h4>
                <p style="color: #cbd5e1;">Root ile klasÃ¶r oluÅŸturursan, iÃ§indeki TÃœM dosyalar root:root olur!</p>

                <div class="code-block">
# Root ile klasÃ¶r oluÅŸtur
mkdir -p /var/www/vhosts/tuufi.com/httpdocs/public/readme/2025/11/18/test/

# Ä°Ã§ine dosya oluÅŸtur
touch /var/www/vhosts/tuufi.com/httpdocs/public/readme/2025/11/18/test/index.html

# SONUÃ‡: TÃœM DOSYALAR ROOT:ROOT!
ls -la /var/www/vhosts/tuufi.com/httpdocs/public/readme/2025/11/18/test/
<span style="color: #fca5a5;">drwxr-xr-x 2 root root ... test/
-rw-r--r-- 1 root root ... index.html</span>
                </div>
            </div>

            <div class="warning-box">
                <h4 style="color: #fbbf24; margin-bottom: 15px;">Problem 3: GÃ¼venlik Riski</h4>
                <p style="color: #cbd5e1;">Root ile yazÄ±lan dosyalar, sadece root tarafÄ±ndan deÄŸiÅŸtirilebilir. Bu da deployment ve gÃ¼ncelleme sorunlarÄ±na yol aÃ§ar!</p>
            </div>
        </section>

        <section>
            <h2>âœ… DoÄŸru Permission Workflow</h2>

            <div class="step-box">
                <h4>AdÄ±m 1: ASLA Root Kullanma!</h4>
                <div class="code-block">
<span style="color: #fca5a5;">âŒ YAPMA:</span>
mkdir /path/to/directory
touch /path/to/file.php

<span style="color: #6ee7b7;">âœ… YAP:</span>
sudo -u tuufi.com_ mkdir /path/to/directory
sudo -u tuufi.com_ touch /path/to/file.php
                </div>
            </div>

            <div class="step-box">
                <h4>AdÄ±m 2: Claude Write/Edit Tool KullandÄ±ysan â†’ chown/chmod Gerekli!</h4>
                <p style="color: #cbd5e1; margin-bottom: 15px;">
                    Claude'un Write/Edit tool'u root olarak Ã§alÄ±ÅŸtÄ±ÄŸÄ± iÃ§in, oluÅŸturduÄŸu dosyalar root:root olur. MUTLAKA dÃ¼zelt!
                </p>
                <div class="code-block">
# 1. Owner deÄŸiÅŸtir (ZORUNLU!)
sudo chown tuufi.com_:psaserv /path/to/file.php

# 2. Permission dÃ¼zelt (ZORUNLU!)
sudo chmod 644 /path/to/file.php  # Dosyalar iÃ§in

# 3. KlasÃ¶r ise
sudo chmod 755 /path/to/directory/

# 4. Test et
curl -I https://ixtif.com/path/to/file.php
<span style="color: #6ee7b7;"># Beklenen: HTTP/2 200</span>
                </div>
            </div>

            <div class="step-box">
                <h4>AdÄ±m 3: Toplu DÃ¼zeltme (KlasÃ¶r Ä°Ã§indeki TÃ¼m Dosyalar)</h4>
                <div class="code-block">
# TÃ¼m klasÃ¶rÃ¼ dÃ¼zelt
sudo chown -R tuufi.com_:psaserv /path/to/directory/

# DosyalarÄ± 644 yap
sudo find /path/to/directory/ -type f -exec chmod 644 {} \;

# KlasÃ¶rleri 755 yap
sudo find /path/to/directory/ -type d -exec chmod 755 {} \;
                </div>
            </div>
        </section>

        <section>
            <h2>ğŸ“‹ KarÅŸÄ±laÅŸtÄ±rma Tablosu</h2>

            <div class="comparison">
                <div class="comparison-item wrong">
                    <h4 style="color: #fca5a5; margin-bottom: 15px;">âŒ Root KullanÄ±mÄ± (YANLIÅ)</h4>
                    <div class="code-block">
# Dosya oluÅŸtur
mkdir -p public/readme/2025/11/18/test/
touch public/readme/2025/11/18/test/index.html

# Owner
ls -la public/readme/2025/11/18/test/
<span style="color: #fca5a5;">root:root</span>

# SonuÃ§
<span style="color: #fca5a5;">âŒ 500 Error
âŒ Nginx okuyamaz
âŒ Site Ã§Ã¶ker</span>
                    </div>
                </div>

                <div class="comparison-item correct">
                    <h4 style="color: #6ee7b7; margin-bottom: 15px;">âœ… tuufi.com_ KullanÄ±mÄ± (DOÄRU)</h4>
                    <div class="code-block">
# Dosya oluÅŸtur
sudo -u tuufi.com_ mkdir -p public/readme/2025/11/18/test/
sudo -u tuufi.com_ touch public/readme/2025/11/18/test/index.html

# Owner
ls -la public/readme/2025/11/18/test/
<span style="color: #6ee7b7;">tuufi.com_:psaserv</span>

# SonuÃ§
<span style="color: #6ee7b7;">âœ… 200 OK
âœ… Nginx okur
âœ… Site Ã§alÄ±ÅŸÄ±r</span>
                    </div>
                </div>
            </div>
        </section>

        <section>
            <h2>ğŸ› ï¸ Pratik Ã–rnekler</h2>

            <div class="step-box">
                <h4>Ã–rnek 1: HTML Rapor OluÅŸturma</h4>
                <div class="code-block">
<span style="color: #fca5a5;">âŒ YANLIÅ (Root):</span>
mkdir -p public/readme/2025/11/18/blog-analiz/v1/
echo "content" > public/readme/2025/11/18/blog-analiz/v1/index.html

<span style="color: #6ee7b7;">âœ… DOÄRU (tuufi.com_):</span>
sudo -u tuufi.com_ mkdir -p public/readme/2025/11/18/blog-analiz/v1/
sudo -u tuufi.com_ bash -c 'echo "content" > public/readme/2025/11/18/blog-analiz/v1/index.html'

<span style="color: #93c5fd;">VEYA (Claude Write tool kullandÄ±ysan):</span>
# Write tool ile oluÅŸtur (root:root olur)
# Sonra dÃ¼zelt:
sudo chown tuufi.com_:psaserv public/readme/2025/11/18/blog-analiz/v1/index.html
sudo chmod 644 public/readme/2025/11/18/blog-analiz/v1/index.html
                </div>
            </div>

            <div class="step-box">
                <h4>Ã–rnek 2: MD TODO DosyasÄ± OluÅŸturma</h4>
                <div class="code-block">
<span style="color: #fca5a5;">âŒ YANLIÅ (Root):</span>
mkdir -p readme/claude-docs/todo/2025/11/18/
touch readme/claude-docs/todo/2025/11/18/todo-14-30-payment.md

<span style="color: #6ee7b7;">âœ… DOÄRU (tuufi.com_):</span>
sudo -u tuufi.com_ mkdir -p readme/claude-docs/todo/2025/11/18/
sudo -u tuufi.com_ touch readme/claude-docs/todo/2025/11/18/todo-14-30-payment.md

<span style="color: #93c5fd;">VEYA (Claude Write tool kullandÄ±ysan):</span>
sudo chown tuufi.com_:psaserv readme/claude-docs/todo/2025/11/18/todo-14-30-payment.md
sudo chmod 644 readme/claude-docs/todo/2025/11/18/todo-14-30-payment.md
                </div>
            </div>

            <div class="step-box">
                <h4>Ã–rnek 3: Blade DosyasÄ± OluÅŸturma</h4>
                <div class="code-block">
<span style="color: #6ee7b7;">âœ… DOÄRU Workflow:</span>
# 1. Claude Write tool ile dosya oluÅŸtur
# (resources/views/components/blog/author.blade.php)

# 2. Permission dÃ¼zelt (ZORUNLU!)
sudo chown tuufi.com_:psaserv resources/views/components/blog/author.blade.php
sudo chmod 644 resources/views/components/blog/author.blade.php

# 3. OPcache reset (PHP dosyalarÄ± iÃ§in)
curl -s -k https://ixtif.com/opcache-reset.php > /dev/null

# 4. Test et
curl -I https://ixtif.com/blog/test-post
<span style="color: #6ee7b7;"># Beklenen: HTTP/2 200</span>
                </div>
            </div>
        </section>

        <section>
            <h2>ğŸ¯ Ã–zet Kurallar</h2>

            <div class="success-box">
                <h3>âœ… ZORUNLU KURALLAR</h3>
                <ul style="margin-left: 25px; color: #cbd5e1; line-height: 2;">
                    <li><strong>ASLA root kullanma!</strong> â†’ TÃ¼m iÅŸlemler tuufi.com_ ile</li>
                    <li><strong>Claude Write/Edit tool kullandÄ±ysan</strong> â†’ chown + chmod yap!</li>
                    <li><strong>Her dosya oluÅŸturduktan sonra</strong> â†’ Permission kontrol et!</li>
                    <li><strong>Owner:</strong> tuufi.com_:psaserv (ZORUNLU!)</li>
                    <li><strong>Permission:</strong> 644 (dosya), 755 (klasÃ¶r)</li>
                    <li><strong>Test et:</strong> curl -I ile 200 OK kontrolÃ¼</li>
                </ul>
            </div>

            <div class="danger-box">
                <h3>âŒ YASAK Ä°ÅLEMLER</h3>
                <ul style="margin-left: 25px; color: #fca5a5; line-height: 2;">
                    <li>Root olarak dosya oluÅŸturma</li>
                    <li>Root olarak klasÃ¶r oluÅŸturma</li>
                    <li>root:root ownership bÄ±rakma</li>
                    <li>Permission dÃ¼zeltmeyi unutma</li>
                    <li>Test etmeden devam etme</li>
                </ul>
            </div>
        </section>

        <footer>
            ğŸ¤– Claude AI tarafÄ±ndan oluÅŸturuldu - 2025-11-18
            <br>
            âš ï¸ KRÄ°TÄ°K: Root ASLA kullanma! Her zaman tuufi.com_ kullanÄ±cÄ±sÄ± ile Ã§alÄ±ÅŸ!
        </footer>
    </div>
</body>
</html>
