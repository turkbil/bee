<?php

namespace Modules\AI\Database\Seeders;

use Illuminate\Database\Seeder;
use Modules\AI\app\Models\AIProfileQuestion;
use App\Helpers\TenantHelpers;

class AIProfileQuestionsBaseSeeder extends Seeder
{
    /**
     * AI PROFƒ∞L SORULARI - TEMEL SORULAR (PART 1)
     * 
     * T√ºm sekt√∂rler i√ßin ortak temel sorular
     * Step 1-6: Sekt√∂r se√ßimi, temel bilgiler, marka detaylarƒ±, kurucu hikayesi, ba≈üarƒ± hikayeleri, AI davranƒ±≈ü kurallarƒ±
     */
    public function run(): void
    {
        // Sadece central veritabanƒ±nda √ßalƒ±≈üƒ±r
        if (!TenantHelpers::isCentral()) {
            return;
        }
        
        echo "üöÄ AI Profile Questions - TEMEL SORULAR (Part 1/2) Y√ºkleniyor...\n";
        
        // √ñnce mevcut sorularƒ± temizle
        AIProfileQuestion::truncate();
        
        // ADIM 1: Sekt√∂r Se√ßimi (√ñnce sekt√∂r belirleyelim)
        $this->createSectorSelectionQuestion();
        
        // ADIM 2: Temel Bilgiler (ƒ∞sim, ≈üehir, olmazsa olmaz)
        $this->createBasicInfoQuestions();
        
        // ADIM 3: Marka Detaylarƒ± (≈ûubele≈üme, b√ºy√ºkl√ºk, vb)
        $this->createBrandDetailsQuestions();
        
        // ADIM 4: Kurucu Bilgileri (ƒ∞zin sistemi ile)
        $this->createFounderPermissionQuestion();
        
        // ADIM 5: Ba≈üarƒ± Hikayeleri (T√ºm sekt√∂rler i√ßin ortak)
        $this->createSuccessStoryQuestions();
        
        // ADIM 6: Yapay Zeka Davranƒ±≈ü Kurallarƒ± (T√ºm sekt√∂rler i√ßin ortak)
        $this->createAIBehaviorQuestions();
        
        echo "\nüéØ Temel sorular tamamlandƒ±! (Part 1/2)\n";
    }
    
    /**
     * ADIM 1: Sekt√∂r Se√ßimi Sorusu
     */
    private function createSectorSelectionQuestion(): void
    {
        AIProfileQuestion::create([
            'id' => 1,
            'step' => 1,
            'question_key' => 'sector_selection',
            'question_text' => 'Hangi sekt√∂rde faaliyet g√∂steriyorsunuz?',
            'help_text' => 'L√ºtfen ana sekt√∂r√ºn√ºz√º se√ßin. Bu se√ßim sonraki sorularƒ± belirleyecektir.',
            'input_type' => 'sector_select',
            'is_required' => true,
            'sort_order' => 10,
            'is_active' => true
        ]);
        
        echo "‚úÖ Sekt√∂r se√ßimi sorusu eklendi\n";
    }
    
    /**
     * ADIM 2: Temel Bilgiler - Olmazsa olmaz
     */
    private function createBasicInfoQuestions(): void
    {
        $questions = [
            [
                'id' => 101,
                'step' => 2,
                'question_key' => 'brand_name',
                'question_text' => 'Marka/Firma Adƒ±',
                'help_text' => 'Resmi firma adƒ±nƒ±zƒ± yazƒ±n',
                'input_type' => 'text',
                'is_required' => true,
                'sort_order' => 10
            ],
            [
                'id' => 102,
                'step' => 2,
                'question_key' => 'city',
                'question_text' => 'Hangi ≈üehirdesiniz?',
                'help_text' => 'Ana faaliyet ≈üehrinizi belirtin',
                'input_type' => 'text',
                'is_required' => true,
                'sort_order' => 20
            ],
            [
                'id' => 103,
                'step' => 2,
                'question_key' => 'main_service',
                'question_text' => 'Ana hizmetiniz/√ºr√ºn√ºn√ºz nedir?',
                'help_text' => 'Temel olarak ne yapƒ±yorsunuz? (√∂rn: Web tasarƒ±mƒ±, Di≈ü tedavisi, Online satƒ±≈ü)',
                'input_type' => 'textarea',
                'is_required' => true,
                'sort_order' => 30
            ],
            [
                'id' => 104,
                'step' => 2,
                'question_key' => 'experience_years',
                'question_text' => 'Ka√ß yƒ±ldƒ±r bu i≈üi yapƒ±yorsunuz?',
                'help_text' => 'Sekt√∂rdeki deneyim s√ºrenizi belirtin',
                'input_type' => 'select',
                'options' => json_encode([
                    '1-3 yƒ±l',
                    '4-7 yƒ±l', 
                    '8-15 yƒ±l',
                    '15+ yƒ±l'
                ]),
                'is_required' => true,
                'sort_order' => 40
            ]
        ];
        
        foreach ($questions as $question) {
            $question['is_active'] = true;
            AIProfileQuestion::create($question);
        }
        
        echo "‚úÖ Temel bilgi sorularƒ± eklendi (4 soru)\n";
    }
    
    /**
     * ADIM 3: Marka Detaylarƒ±
     */
    private function createBrandDetailsQuestions(): void
    {
        $questions = [
            [
                'id' => 201,
                'step' => 3,
                'question_key' => 'business_size',
                'question_text' => 'ƒ∞≈ületme b√ºy√ºkl√ºƒü√ºn√ºz?',
                'help_text' => '√áalƒ±≈üan sayƒ±sƒ±na g√∂re i≈ületme b√ºy√ºkl√ºƒü√ºn√ºz√º belirtin',
                'input_type' => 'select',
                'options' => json_encode([
                    'Sadece ben (tek ki≈üi)',
                    '2-5 ki≈üi (k√º√ß√ºk ekip)',
                    '6-20 ki≈üi (orta i≈ületme)',
                    '21-50 ki≈üi (b√ºy√ºk i≈ületme)',
                    '50+ ki≈üi (kurumsal)'
                ]),
                'is_required' => true,
                'sort_order' => 10
            ],
            [
                'id' => 202,
                'step' => 3,
                'question_key' => 'target_audience',
                'question_text' => 'Ana m√º≈üteri kitleniz kimler?',
                'help_text' => '√ñncelikli hedef m√º≈üterilerinizi se√ßin (√ßoklu se√ßim)',
                'input_type' => 'checkbox',
                'options' => json_encode([
                    'Bireysel m√º≈üteriler (B2C)',
                    'K√º√ß√ºk i≈ületmeler',
                    'Orta √∂l√ßekli ≈üirketler',
                    'B√ºy√ºk korporasyonlar',
                    'Kamu kurumlarƒ±',
                    'Yabancƒ± m√º≈üteriler'
                ]),
                'is_required' => true,
                'sort_order' => 20
            ],
            [
                'id' => 203,
                'step' => 3,
                'question_key' => 'service_area',
                'question_text' => 'Hizmet alanƒ±nƒ±z?',
                'help_text' => 'Hangi coƒürafi alanda hizmet veriyorsunuz?',
                'input_type' => 'select',
                'options' => json_encode([
                    'Sadece kendi ≈üehrim',
                    'Birka√ß ≈üehir (b√∂lgesel)',
                    'T√ºrkiye geneli',
                    'Uluslararasƒ±',
                    'Online (lokasyon baƒüƒ±msƒ±z)'
                ]),
                'is_required' => true,
                'sort_order' => 30
            ],
            [
                'id' => 204,
                'step' => 3,
                'question_key' => 'brand_voice',
                'question_text' => 'Marka ki≈üiliƒüiniz nasƒ±l olmalƒ±?',
                'help_text' => 'AI asistanƒ±nƒ±zƒ±n nasƒ±l konu≈ümasƒ±nƒ± istiyorsunuz?',
                'input_type' => 'checkbox',
                'options' => json_encode([
                    'Uzman ve g√ºvenilir',
                    'Samimi ve yakƒ±n',
                    'Profesyonel ve ciddi',
                    'Yenilik√ßi ve modern',
                    'Prestijli ve l√ºks',
                    'Hƒ±zlƒ± ve dinamik'
                ]),
                'is_required' => true,
                'sort_order' => 40
            ]
        ];
        
        foreach ($questions as $question) {
            $question['is_active'] = true;
            AIProfileQuestion::create($question);
        }
        
        echo "‚úÖ Marka detaylarƒ± sorularƒ± eklendi (4 soru)\n";
    }
    
    /**
     * ADIM 4: Kurucu Bilgileri ƒ∞zin Sorusu
     */
    private function createFounderPermissionQuestion(): void
    {
        AIProfileQuestion::create([
            'id' => 301,
            'step' => 4,
            'question_key' => 'founder_permission',
            'question_text' => 'Kurucu hikayenizi AI ile payla≈ümak ister misiniz?',
            'help_text' => 'Ki≈üisel hikayeniz marka g√ºvenilirliƒüini artƒ±rƒ±r. Payla≈ümak tamamen isteƒüe baƒülƒ±dƒ±r.',
            'input_type' => 'radio',
            'options' => json_encode([
                'Evet, hikayemi payla≈ümak istiyorum',
                'Hayƒ±r, sadece i≈ületme bilgileri yeterli'
            ]),
            'is_required' => true,
            'sort_order' => 10,
            'is_active' => true
        ]);
        
        // Eƒüer izin verilirse a√ßƒ±lacak sorular (conditional)
        $founderQuestions = [
            [
                'id' => 302,
                'step' => 4,
                'question_key' => 'founder_story',
                'question_text' => 'Nasƒ±l ba≈üladƒ±nƒ±z? Kurulu≈ü hikayeniz',
                'help_text' => 'Bu i≈üe nasƒ±l ba≈üladƒ±ƒüƒ±nƒ±zƒ±, motivasyonunuzu kƒ±saca anlatƒ±n',
                'input_type' => 'textarea',
                'is_required' => false,
                'sort_order' => 20,
                'depends_on' => 'founder_permission',
                'show_if' => json_encode(['Evet, hikayemi payla≈ümak istiyorum'])
            ],
            [
                'id' => 303,
                'step' => 4,
                'question_key' => 'biggest_challenge',
                'question_text' => 'En b√ºy√ºk zorluƒüunuz neydi ve nasƒ±l a≈ütƒ±nƒ±z?',
                'help_text' => 'ƒ∞≈üinizde kar≈üƒ±la≈ütƒ±ƒüƒ±nƒ±z √∂nemli bir zorluƒüu ve √ß√∂z√ºm√ºn√ºz√º payla≈üƒ±n',
                'input_type' => 'textarea',
                'is_required' => false,
                'sort_order' => 30,
                'depends_on' => 'founder_permission',
                'show_if' => json_encode(['Evet, hikayemi payla≈ümak istiyorum'])
            ]
        ];
        
        foreach ($founderQuestions as $question) {
            $question['is_active'] = true;
            AIProfileQuestion::create($question);
        }
        
        echo "‚úÖ Kurucu bilgileri sorularƒ± eklendi (3 soru)\n";
    }
    
    /**
     * ADIM 5: Ba≈üarƒ± Hikayeleri
     */
    private function createSuccessStoryQuestions(): void
    {
        $questions = [
            [
                'id' => 401,
                'step' => 5,
                'question_key' => 'success_story',
                'question_text' => 'En gurur duyduƒüunuz ba≈üarƒ± hikayen',
                'help_text' => 'Bir m√º≈üteri ile ya≈üadƒ±ƒüƒ±nƒ±z pozitif deneyimi payla≈üƒ±n',
                'input_type' => 'textarea',
                'is_required' => false,
                'sort_order' => 10
            ],
            [
                'id' => 402,
                'step' => 5,
                'question_key' => 'customer_testimonial',
                'question_text' => 'Bir m√º≈üteri g√∂r√º≈ü√º (varsa)',
                'help_text' => 'Size yapƒ±lan olumlu bir yorum veya referans',
                'input_type' => 'textarea',
                'is_required' => false,
                'sort_order' => 20
            ],
            [
                'id' => 403,
                'step' => 5,
                'question_key' => 'competitive_advantage',
                'question_text' => 'Rakiplerinizden farkƒ±nƒ±z nedir?',
                'help_text' => 'Sizi √∂zel kƒ±lan, m√º≈üterilerin sizi tercih etme sebebi',
                'input_type' => 'checkbox',
                'options' => json_encode([
                    'En uygun fiyat',
                    '√úst√ºn kalite',
                    'Hƒ±z ve verimlilik',
                    'Ki≈üiselle≈ütirilmi≈ü hizmet',
                    'Uzmanlƒ±k ve deneyim',
                    'G√ºvenilirlik',
                    '24/7 destek',
                    'Yaratƒ±cƒ± √ß√∂z√ºmler'
                ]),
                'is_required' => true,
                'sort_order' => 30
            ]
        ];
        
        foreach ($questions as $question) {
            $question['is_active'] = true;
            AIProfileQuestion::create($question);
        }
        
        echo "‚úÖ Ba≈üarƒ± hikayeleri sorularƒ± eklendi (3 soru)\n";
    }
    
    /**
     * ADIM 6: AI Davranƒ±≈ü Kurallarƒ±
     */
    private function createAIBehaviorQuestions(): void
    {
        $questions = [
            [
                'id' => 501,
                'step' => 6,
                'question_key' => 'communication_style',
                'question_text' => 'M√º≈üterilerle nasƒ±l ileti≈üim kurmalƒ±?',
                'help_text' => 'AI asistanƒ±nƒ±zƒ±n ileti≈üim tarzƒ±nƒ± belirleyin',
                'input_type' => 'radio',
                'options' => json_encode([
                    'Sen diye hitap et (samimi)',
                    'Siz diye hitap et (saygƒ±lƒ±)',
                    'Profesyonel ama sƒ±cak',
                    '√áok resmi ve ciddi'
                ]),
                'is_required' => true,
                'sort_order' => 10
            ],
            [
                'id' => 502,
                'step' => 6,
                'question_key' => 'response_style',
                'question_text' => 'Yanƒ±tlar nasƒ±l olmalƒ±?',
                'help_text' => 'AI asistanƒ±nƒ±zƒ±n yanƒ±t verme ≈üeklini se√ßin',
                'input_type' => 'checkbox',
                'options' => json_encode([
                    'Kƒ±sa ve √∂z',
                    'Detaylƒ± a√ßƒ±klamalar',
                    '√ñrneklerle destekli',
                    'Sorular sorarak anlayƒ±≈ülƒ±',
                    'Harekete ge√ßirici',
                    'Sabƒ±rlƒ± ve anlayƒ±≈ülƒ±'
                ]),
                'is_required' => true,
                'sort_order' => 20
            ],
            [
                'id' => 503,
                'step' => 6,
                'question_key' => 'forbidden_topics',
                'question_text' => 'Hangi konularda konu≈ümamalƒ±?',
                'help_text' => 'AI asistanƒ±nƒ±zƒ±n deƒüinmemesini istediƒüiniz konular',
                'input_type' => 'checkbox',
                'options' => json_encode([
                    'Rakip firmalarƒ± √∂vme',
                    'Fiyat indirimi teklif etme',
                    'Garanti veremeyeceƒüi s√∂zler',
                    'Ki≈üisel bilgi talep etme',
                    'Politik konular',
                    'Sekt√∂r dƒ±≈üƒ± tavsiyelerde bulunma'
                ]),
                'is_required' => false,
                'sort_order' => 30
            ]
        ];
        
        foreach ($questions as $question) {
            $question['is_active'] = true;
            AIProfileQuestion::create($question);
        }
        
        echo "‚úÖ AI davranƒ±≈ü kurallarƒ± sorularƒ± eklendi (3 soru)\n";
    }
}