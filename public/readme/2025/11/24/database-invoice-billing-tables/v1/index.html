<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fatura & √ñdeme Sistemi - Veritabanƒ± Analizi</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #e2e8f0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            line-height: 1.7;
            padding: 40px 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            margin-bottom: 50px;
            padding-bottom: 30px;
            border-bottom: 2px solid #334155;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #60a5fa, #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .meta {
            color: #94a3b8;
            font-size: 0.95rem;
        }

        section {
            margin-bottom: 50px;
        }

        h2 {
            font-size: 1.8rem;
            margin-bottom: 25px;
            color: #60a5fa;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .subsection {
            margin-bottom: 30px;
        }

        .subsection h3 {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #93c5fd;
            border-left: 4px solid #3b82f6;
            padding-left: 15px;
        }

        .table-wrapper {
            overflow-x: auto;
            margin-bottom: 30px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: rgba(30, 41, 59, 0.6);
            border: 1px solid #334155;
            border-radius: 8px;
            overflow: hidden;
        }

        th {
            background: rgba(59, 130, 246, 0.15);
            padding: 15px;
            text-align: left;
            font-weight: 600;
            color: #93c5fd;
            border-bottom: 2px solid #334155;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid #334155;
            color: #cbd5e1;
        }

        tr:hover {
            background: rgba(59, 130, 246, 0.1);
        }

        .column-type {
            color: #fbbf24;
            font-weight: 500;
            font-family: 'Courier New', monospace;
        }

        .column-name {
            color: #93c5fd;
            font-family: 'Courier New', monospace;
            font-weight: 500;
        }

        .fk {
            color: #f87171;
            font-size: 0.9rem;
            font-style: italic;
        }

        .primary-key {
            background: rgba(249, 115, 22, 0.1);
            color: #fb923c;
        }

        .location {
            background: rgba(34, 197, 94, 0.1);
            color: #86efac;
            padding: 12px;
            border-radius: 6px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .database-location {
            color: #a78bfa;
            font-weight: 500;
        }

        .note {
            background: rgba(96, 165, 250, 0.1);
            padding: 15px;
            border-left: 4px solid #3b82f6;
            margin: 15px 0;
            border-radius: 6px;
            color: #cbd5e1;
        }

        .highlight-row {
            background: rgba(168, 85, 247, 0.15) !important;
        }

        .relationship-diagram {
            background: rgba(30, 41, 59, 0.5);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 1px solid #334155;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            line-height: 1.8;
            overflow-x: auto;
        }

        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-right: 8px;
        }

        .badge-central {
            background: #dc2626;
            color: white;
        }

        .badge-tenant {
            background: #2563eb;
            color: white;
        }

        .badge-both {
            background: #7c3aed;
            color: white;
        }

        footer {
            margin-top: 60px;
            padding-top: 30px;
            border-top: 1px solid #334155;
            color: #64748b;
            font-size: 0.9rem;
            text-align: center;
        }

        .box-container {
            background: rgba(30, 41, 59, 0.5);
            padding: 25px;
            margin-bottom: 20px;
            border-radius: 12px;
            border-left: 4px solid #3b82f6;
            backdrop-filter: blur(10px);
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(30, 41, 59, 0.6);
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #334155;
            text-align: center;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: #60a5fa;
        }

        .stat-label {
            color: #94a3b8;
            font-size: 0.95rem;
            margin-top: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üí∞ Fatura & √ñdeme Sistemi</h1>
            <h1 style="font-size: 1.5rem; background: none; -webkit-text-fill-color: unset; color: #93c5fd; margin-top: 10px;">Veritabanƒ± Tablolarƒ± Analizi</h1>
            <div class="meta">
                üìÖ Tarih: 2025-11-24 10:30 |
                üéØ Mod√ºller: Payment, Cart, Shop |
                üë§ Talep: Fatura/Billing tablolarƒ± taramasƒ±
            </div>
        </header>

        <section>
            <h2>üìä √ñzet ƒ∞statistikler</h2>
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-number">11</div>
                    <div class="stat-label">Toplam Tablo</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">3</div>
                    <div class="stat-label">Mod√ºl</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">2</div>
                    <div class="stat-label">Veritabanƒ± Seviyesi</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">92+</div>
                    <div class="stat-label">Kolon</div>
                </div>
            </div>
        </section>

        <section>
            <h2>üèóÔ∏è Sistem Mimarisi</h2>
            <div class="box-container">
                <p><strong>√ñdeme Sistemi Mimarisi:</strong></p>
                <p style="margin-top: 12px; color: #cbd5e1;">Sistem <span class="badge badge-both">Multi-Tenant</span> ve <span class="badge badge-both">Polymorphic</span> ili≈ükiler kullanƒ±r.</p>
                <p style="margin-top: 12px; color: #cbd5e1;">Her tenant kendi √∂deme verilerini saklar. √ñdeme tablosu, herhangi bir modelden (ShopOrder, Subscription, vb.) √∂deme alabilir.</p>
            </div>
        </section>

        <!-- PAYMENT MODULE -->
        <section>
            <h2>üí≥ Mod√ºl 1: Payment (√ñdeme)</h2>

            <div class="subsection">
                <h3>üìç Konum</h3>
                <div class="location">
                    /Modules/Payment/database/migrations/
                    <br>/Modules/Payment/database/migrations/tenant/
                </div>
            </div>

            <!-- payment_methods -->
            <div class="subsection">
                <h3>1Ô∏è‚É£ payment_methods (√ñdeme Y√∂ntemleri)</h3>
                <span class="badge badge-both">Central + Tenant</span>
                <div class="location">Central: database/migrations/<br>Tenant: database/migrations/tenant/</div>

                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Kolon Adƒ±</th>
                                <th>T√ºr</th>
                                <th>A√ßƒ±klama</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="primary-key">
                                <td class="column-name">payment_method_id</td>
                                <td class="column-type">id (big int)</td>
                                <td>Birincil anahtar</td>
                            </tr>
                            <tr>
                                <td class="column-name">title</td>
                                <td class="column-type">json</td>
                                <td>{"tr":"Kredi Kartƒ±","en":"Credit Card"}</td>
                            </tr>
                            <tr>
                                <td class="column-name">slug</td>
                                <td class="column-type">string unique</td>
                                <td>paytr-credit-card</td>
                            </tr>
                            <tr>
                                <td class="column-name">description</td>
                                <td class="column-type">json nullable</td>
                                <td>√ñdeme y√∂ntemi a√ßƒ±klamasƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">gateway</td>
                                <td class="column-type">enum</td>
                                <td>paytr, stripe, iyzico, paypal, manual</td>
                            </tr>
                            <tr>
                                <td class="column-name">gateway_mode</td>
                                <td class="column-type">enum</td>
                                <td>test | live</td>
                            </tr>
                            <tr>
                                <td class="column-name">gateway_config</td>
                                <td class="column-type">json nullable</td>
                                <td>API keys, merchant IDs (JSON)</td>
                            </tr>
                            <tr>
                                <td class="column-name">supports_purchase</td>
                                <td class="column-type">boolean</td>
                                <td>Satƒ±≈ü √∂demeleri desteklenir</td>
                            </tr>
                            <tr>
                                <td class="column-name">supports_subscription</td>
                                <td class="column-type">boolean</td>
                                <td>Abonelik √∂demeleri desteklenir</td>
                            </tr>
                            <tr>
                                <td class="column-name">supports_donation</td>
                                <td class="column-type">boolean</td>
                                <td>Baƒüƒ±≈ü √∂demeleri desteklenir</td>
                            </tr>
                            <tr>
                                <td class="column-name">fixed_fee</td>
                                <td class="column-type">decimal(10,2)</td>
                                <td>Sabit √ºcret</td>
                            </tr>
                            <tr>
                                <td class="column-name">percentage_fee</td>
                                <td class="column-type">decimal(5,2)</td>
                                <td>Y√ºzde √ºcret (%)</td>
                            </tr>
                            <tr>
                                <td class="column-name">min_amount</td>
                                <td class="column-type">decimal(10,2) nullable</td>
                                <td>Minimum √∂deme tutarƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">max_amount</td>
                                <td class="column-type">decimal(14,2) nullable</td>
                                <td>Maksimum √∂deme tutarƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">supports_installment</td>
                                <td class="column-type">boolean</td>
                                <td>Taksit desteƒüi</td>
                            </tr>
                            <tr>
                                <td class="column-name">max_installments</td>
                                <td class="column-type">integer</td>
                                <td>Maksimum taksit sayƒ±sƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">installment_options</td>
                                <td class="column-type">json nullable</td>
                                <td>Taksit se√ßenekleri</td>
                            </tr>
                            <tr>
                                <td class="column-name">supported_currencies</td>
                                <td class="column-type">json</td>
                                <td>["TRY","USD","EUR"]</td>
                            </tr>
                            <tr>
                                <td class="column-name">icon</td>
                                <td class="column-type">string nullable</td>
                                <td>ƒ∞kon (FontAwesome)</td>
                            </tr>
                            <tr>
                                <td class="column-name">logo_url</td>
                                <td class="column-type">string nullable</td>
                                <td>Logo URL</td>
                            </tr>
                            <tr>
                                <td class="column-name">sort_order</td>
                                <td class="column-type">integer</td>
                                <td>Sƒ±ralama √∂nceliƒüi</td>
                            </tr>
                            <tr>
                                <td class="column-name">is_active</td>
                                <td class="column-type">boolean</td>
                                <td>Aktif/Pasif</td>
                            </tr>
                            <tr>
                                <td class="column-name">requires_verification</td>
                                <td class="column-type">boolean</td>
                                <td>Doƒürulama gerekli mi</td>
                            </tr>
                            <tr>
                                <td class="column-name">created_at, updated_at</td>
                                <td class="column-type">timestamp</td>
                                <td>Zaman damgalarƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">deleted_at</td>
                                <td class="column-type">timestamp nullable</td>
                                <td>Soft delete (silinme tarihi)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="note">
                    <strong>√ñnemli:</strong> Bu tablo PayTR, Stripe, ƒ∞yzico, PayPal gibi t√ºm √∂deme gateway'lerinin y√∂netilmesine izin verir. Her tenant kendi √∂deme y√∂ntemlerini √∂zelle≈ütirebilir.
                </div>
            </div>

            <!-- payments -->
            <div class="subsection">
                <h3>2Ô∏è‚É£ payments (√ñdeme ƒ∞≈ülemleri)</h3>
                <span class="badge badge-both">Central + Tenant</span>
                <div class="location">Central: database/migrations/<br>Tenant: database/migrations/tenant/</div>

                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Kolon Adƒ±</th>
                                <th>T√ºr</th>
                                <th>A√ßƒ±klama</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="primary-key">
                                <td class="column-name">payment_id</td>
                                <td class="column-type">id (big int)</td>
                                <td>Birincil anahtar</td>
                            </tr>
                            <tr>
                                <td class="column-name">payable_id</td>
                                <td class="column-type">unsigned big int</td>
                                <td><span class="fk">Polymorphic: ShopOrder, Subscription, vb.</span></td>
                            </tr>
                            <tr>
                                <td class="column-name">payable_type</td>
                                <td class="column-type">string</td>
                                <td><span class="fk">Model sƒ±nƒ±fƒ± (Modules\Shop\App\Models\ShopOrder)</span></td>
                            </tr>
                            <tr>
                                <td class="column-name">payment_method_id</td>
                                <td class="column-type">big int nullable</td>
                                <td><span class="fk">FK ‚Üí payment_methods</span></td>
                            </tr>
                            <tr>
                                <td class="column-name">payment_number</td>
                                <td class="column-type">string unique</td>
                                <td>PAY-2024-00001</td>
                            </tr>
                            <tr>
                                <td class="column-name">payment_type</td>
                                <td class="column-type">enum</td>
                                <td>purchase, subscription, donation, refund, deposit</td>
                            </tr>
                            <tr>
                                <td class="column-name">amount</td>
                                <td class="column-type">decimal(12,2)</td>
                                <td>√ñdeme tutarƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">currency</td>
                                <td class="column-type">string(3)</td>
                                <td>TRY, USD, EUR</td>
                            </tr>
                            <tr>
                                <td class="column-name">exchange_rate</td>
                                <td class="column-type">decimal(10,4)</td>
                                <td>D√∂viz kuru</td>
                            </tr>
                            <tr>
                                <td class="column-name">amount_in_base_currency</td>
                                <td class="column-type">decimal(12,2)</td>
                                <td>Base para biriminde tutar (TRY)</td>
                            </tr>
                            <tr>
                                <td class="column-name">status</td>
                                <td class="column-type">enum</td>
                                <td>pending, processing, completed, failed, cancelled, refunded</td>
                            </tr>
                            <tr>
                                <td class="column-name">gateway</td>
                                <td class="column-type">enum</td>
                                <td>paytr, stripe, iyzico, paypal, manual</td>
                            </tr>
                            <tr>
                                <td class="column-name">gateway_transaction_id</td>
                                <td class="column-type">string nullable</td>
                                <td>Gateway merchant_oid</td>
                            </tr>
                            <tr>
                                <td class="column-name">gateway_payment_id</td>
                                <td class="column-type">string nullable</td>
                                <td>Gateway token/payment ID</td>
                            </tr>
                            <tr>
                                <td class="column-name">gateway_response</td>
                                <td class="column-type">json nullable</td>
                                <td>T√ºm gateway response (audit trail)</td>
                            </tr>
                            <tr>
                                <td class="column-name">card_brand</td>
                                <td class="column-type">string nullable</td>
                                <td>Visa, Mastercard, Amex</td>
                            </tr>
                            <tr>
                                <td class="column-name">card_last_four</td>
                                <td class="column-type">string(4) nullable</td>
                                <td>Son 4 hanesi (masked)</td>
                            </tr>
                            <tr>
                                <td class="column-name">card_holder_name</td>
                                <td class="column-type">string nullable</td>
                                <td>Kart sahibi adƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">installment_count</td>
                                <td class="column-type">integer</td>
                                <td>Taksit sayƒ±sƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">installment_fee</td>
                                <td class="column-type">decimal(8,2)</td>
                                <td>Taksit √ºcreti</td>
                            </tr>
                            <tr>
                                <td class="column-name">refund_for_payment_id</td>
                                <td class="column-type">big int nullable</td>
                                <td><span class="fk">Self-referencing FK (geri √∂deme i√ßin)</span></td>
                            </tr>
                            <tr>
                                <td class="column-name">refund_reason</td>
                                <td class="column-type">text nullable</td>
                                <td>ƒ∞ade sebebi</td>
                            </tr>
                            <tr>
                                <td class="column-name">is_verified</td>
                                <td class="column-type">boolean</td>
                                <td>Doƒürulama durumu</td>
                            </tr>
                            <tr>
                                <td class="column-name">verified_by_user_id</td>
                                <td class="column-type">big int nullable</td>
                                <td>Doƒürulayan admin kullanƒ±cƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">verified_at</td>
                                <td class="column-type">timestamp nullable</td>
                                <td>Doƒürulama tarihi</td>
                            </tr>
                            <tr>
                                <td class="column-name">paid_at</td>
                                <td class="column-type">timestamp nullable</td>
                                <td>√ñdeme tarihi</td>
                            </tr>
                            <tr>
                                <td class="column-name">failed_at</td>
                                <td class="column-type">timestamp nullable</td>
                                <td>Ba≈üarƒ±sƒ±zlƒ±k tarihi</td>
                            </tr>
                            <tr>
                                <td class="column-name">refunded_at</td>
                                <td class="column-type">timestamp nullable</td>
                                <td>ƒ∞ade tarihi</td>
                            </tr>
                            <tr>
                                <td class="column-name">notes</td>
                                <td class="column-type">text nullable</td>
                                <td>Notlar</td>
                            </tr>
                            <tr>
                                <td class="column-name">metadata</td>
                                <td class="column-type">json nullable</td>
                                <td>Ek veriler</td>
                            </tr>
                            <tr>
                                <td class="column-name">ip_address</td>
                                <td class="column-type">string(45) nullable</td>
                                <td>M√º≈üteri IP adresi</td>
                            </tr>
                            <tr>
                                <td class="column-name">user_agent</td>
                                <td class="column-type">text nullable</td>
                                <td>Tarayƒ±cƒ± bilgisi</td>
                            </tr>
                            <tr>
                                <td class="column-name">created_at, updated_at</td>
                                <td class="column-type">timestamp</td>
                                <td>Zaman damgalarƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">deleted_at</td>
                                <td class="column-type">timestamp nullable</td>
                                <td>Soft delete</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="note">
                    <strong>Polymorphic Tasarƒ±m:</strong> ShopOrder, Subscription, Reservation gibi herhangi bir model i√ßin √∂deme kaydƒ± tutulabilir. payable_type ve payable_id kombinasyonu hangi modelden √∂deme aldƒ±ƒüƒ±nƒ± belirler.
                </div>
            </div>

            <!-- bank_accounts -->
            <div class="subsection">
                <h3>3Ô∏è‚É£ bank_accounts (Banka Hesaplarƒ±)</h3>
                <span class="badge badge-tenant">Tenant Only</span>
                <div class="location">Tenant: database/migrations/tenant/</div>

                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Kolon Adƒ±</th>
                                <th>T√ºr</th>
                                <th>A√ßƒ±klama</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="primary-key">
                                <td class="column-name">bank_account_id</td>
                                <td class="column-type">id (big int)</td>
                                <td>Birincil anahtar</td>
                            </tr>
                            <tr>
                                <td class="column-name">bank_name</td>
                                <td class="column-type">string(100)</td>
                                <td>Ziraat Bankasƒ±, Garanti BBVA, vb.</td>
                            </tr>
                            <tr>
                                <td class="column-name">branch_name</td>
                                <td class="column-type">string(100) nullable</td>
                                <td>≈ûube adƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">branch_code</td>
                                <td class="column-type">string(20) nullable</td>
                                <td>≈ûube kodu</td>
                            </tr>
                            <tr>
                                <td class="column-name">account_holder_name</td>
                                <td class="column-type">string(150)</td>
                                <td>Hesap sahibi adƒ± (firma adƒ±)</td>
                            </tr>
                            <tr>
                                <td class="column-name">account_number</td>
                                <td class="column-type">string(50) nullable</td>
                                <td>Hesap numarasƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">iban</td>
                                <td class="column-type">string(34)</td>
                                <td>IBAN (TR i√ßin 26 haneli, max 34)</td>
                            </tr>
                            <tr>
                                <td class="column-name">swift_code</td>
                                <td class="column-type">string(11) nullable</td>
                                <td>BIC/SWIFT kodu (uluslararasƒ± transferler)</td>
                            </tr>
                            <tr>
                                <td class="column-name">currency</td>
                                <td class="column-type">enum</td>
                                <td>TRY, USD, EUR, GBP, RUB</td>
                            </tr>
                            <tr>
                                <td class="column-name">is_active</td>
                                <td class="column-type">boolean</td>
                                <td>Aktif/Pasif</td>
                            </tr>
                            <tr>
                                <td class="column-name">sort_order</td>
                                <td class="column-type">unsigned int</td>
                                <td>G√∂sterim sƒ±rasƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">description</td>
                                <td class="column-type">text nullable</td>
                                <td>M√º≈üteriye g√∂sterilecek a√ßƒ±klama</td>
                            </tr>
                            <tr>
                                <td class="column-name">created_at, updated_at</td>
                                <td class="column-type">timestamp</td>
                                <td>Zaman damgalarƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">deleted_at</td>
                                <td class="column-type">timestamp nullable</td>
                                <td>Soft delete</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="note">
                    <strong>Havale/EFT √ñdemeleri ƒ∞√ßin:</strong> Her tenant havale/EFT ile √∂deme kabul edebilmek i√ßin kendi banka hesaplarƒ±nƒ± y√∂netir.
                </div>
            </div>
        </section>

        <!-- CART MODULE -->
        <section>
            <h2>üõí Mod√ºl 2: Cart (Sepet & Sipari≈üler)</h2>

            <div class="subsection">
                <h3>üìç Konum</h3>
                <div class="location">
                    Central: /Modules/Cart/database/migrations/
                    <br>Tenant: /Modules/Cart/database/migrations/tenant/
                </div>
            </div>

            <!-- cart_orders -->
            <div class="subsection">
                <h3>4Ô∏è‚É£ cart_orders (Sipari≈üler)</h3>
                <span class="badge badge-both">Central + Tenant</span>
                <div class="location">Central: 2025_11_24_000001_create_orders_table.php<br>Tenant: tenant/2025_11_24_000001_create_orders_table.php</div>

                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Kolon Adƒ±</th>
                                <th>T√ºr</th>
                                <th>A√ßƒ±klama</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="primary-key">
                                <td class="column-name">order_id</td>
                                <td class="column-type">id (big int)</td>
                                <td>Birincil anahtar</td>
                            </tr>
                            <tr>
                                <td class="column-name">order_number</td>
                                <td class="column-type">string unique</td>
                                <td>ORD-2024-00001</td>
                            </tr>
                            <tr>
                                <td class="column-name">user_id</td>
                                <td class="column-type">big int nullable</td>
                                <td><span class="fk">FK ‚Üí users</span></td>
                            </tr>
                            <tr>
                                <td class="column-name">order_type</td>
                                <td class="column-type">enum</td>
                                <td>sale, subscription, service, digital</td>
                            </tr>
                            <tr>
                                <td class="column-name">order_source</td>
                                <td class="column-type">enum</td>
                                <td>web, admin, mobile, api</td>
                            </tr>
                            <tr>
                                <td class="column-name">status</td>
                                <td class="column-type">enum</td>
                                <td>pending, confirmed, processing, ready, shipped, delivered, completed, cancelled, refunded</td>
                            </tr>
                            <tr>
                                <td class="column-name">subtotal</td>
                                <td class="column-type">decimal(14,2)</td>
                                <td>Ara toplam (indirim hari√ß)</td>
                            </tr>
                            <tr>
                                <td class="column-name">discount_amount</td>
                                <td class="column-type">decimal(12,2)</td>
                                <td>ƒ∞ndirim tutarƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">tax_amount</td>
                                <td class="column-type">decimal(12,2)</td>
                                <td>Vergi tutarƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">shipping_cost</td>
                                <td class="column-type">decimal(10,2)</td>
                                <td>Kargo √ºcreti</td>
                            </tr>
                            <tr>
                                <td class="column-name">total_amount</td>
                                <td class="column-type">decimal(14,2)</td>
                                <td>Toplam tutar</td>
                            </tr>
                            <tr>
                                <td class="column-name">currency</td>
                                <td class="column-type">string(3)</td>
                                <td>TRY (varsayƒ±lan)</td>
                            </tr>
                            <tr>
                                <td class="column-name">payment_status</td>
                                <td class="column-type">enum</td>
                                <td>pending, partially_paid, paid, refunded, failed</td>
                            </tr>
                            <tr>
                                <td class="column-name">paid_amount</td>
                                <td class="column-type">decimal(12,2)</td>
                                <td>√ñdenen tutar</td>
                            </tr>
                            <tr>
                                <td class="column-name">requires_shipping</td>
                                <td class="column-type">boolean</td>
                                <td>Kargo gerekli mi</td>
                            </tr>
                            <tr>
                                <td class="column-name">tracking_number</td>
                                <td class="column-type">string nullable</td>
                                <td>Kargo takip numarasƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">shipped_at</td>
                                <td class="column-type">timestamp nullable</td>
                                <td>Kargoya verilme tarihi</td>
                            </tr>
                            <tr>
                                <td class="column-name">delivered_at</td>
                                <td class="column-type">timestamp nullable</td>
                                <td>Teslim tarihi</td>
                            </tr>
                            <tr>
                                <td class="column-name">coupon_code</td>
                                <td class="column-type">string nullable</td>
                                <td>Kullanƒ±lan kupon</td>
                            </tr>
                            <tr>
                                <td class="column-name">coupon_discount</td>
                                <td class="column-type">decimal(12,2)</td>
                                <td>Kupon indirimi</td>
                            </tr>
                            <tr>
                                <td class="column-name">customer_name</td>
                                <td class="column-type">string nullable</td>
                                <td>M√º≈üteri adƒ± (snapshot)</td>
                            </tr>
                            <tr>
                                <td class="column-name">customer_email</td>
                                <td class="column-type">string</td>
                                <td>M√º≈üteri e-posta</td>
                            </tr>
                            <tr>
                                <td class="column-name">customer_phone</td>
                                <td class="column-type">string nullable</td>
                                <td>M√º≈üteri telefon</td>
                            </tr>
                            <tr>
                                <td class="column-name">customer_company</td>
                                <td class="column-type">string nullable</td>
                                <td>M√º≈üteri ≈üirketi</td>
                            </tr>
                            <tr>
                                <td class="column-name">customer_tax_office</td>
                                <td class="column-type">string nullable</td>
                                <td>Vergi dairesi</td>
                            </tr>
                            <tr>
                                <td class="column-name">customer_tax_number</td>
                                <td class="column-type">string nullable</td>
                                <td>Vergi/TC Kimlik numarasƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">billing_address</td>
                                <td class="column-type">json nullable</td>
                                <td>Fatura adresi (snapshot)</td>
                            </tr>
                            <tr>
                                <td class="column-name">shipping_address</td>
                                <td class="column-type">json nullable</td>
                                <td>Teslimat adresi (snapshot)</td>
                            </tr>
                            <tr>
                                <td class="column-name">agreed_terms</td>
                                <td class="column-type">boolean</td>
                                <td>≈ûartlarƒ± kabul etti</td>
                            </tr>
                            <tr>
                                <td class="column-name">agreed_privacy</td>
                                <td class="column-type">boolean</td>
                                <td>Gizlilik politikasƒ±nƒ± kabul etti</td>
                            </tr>
                            <tr>
                                <td class="column-name">agreed_marketing</td>
                                <td class="column-type">boolean</td>
                                <td>Pazarlama e-postalarƒ±nƒ± kabul etti</td>
                            </tr>
                            <tr>
                                <td class="column-name">customer_notes</td>
                                <td class="column-type">text nullable</td>
                                <td>M√º≈üteri notlarƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">admin_notes</td>
                                <td class="column-type">text nullable</td>
                                <td>Admin notlarƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">metadata</td>
                                <td class="column-type">json nullable</td>
                                <td>Ek veriler</td>
                            </tr>
                            <tr>
                                <td class="column-name">ip_address</td>
                                <td class="column-type">string(45) nullable</td>
                                <td>M√º≈üteri IP adresi</td>
                            </tr>
                            <tr>
                                <td class="column-name">user_agent</td>
                                <td class="column-type">text nullable</td>
                                <td>Tarayƒ±cƒ± bilgisi</td>
                            </tr>
                            <tr>
                                <td class="column-name">confirmed_at</td>
                                <td class="column-type">timestamp nullable</td>
                                <td>Onaylanma tarihi</td>
                            </tr>
                            <tr>
                                <td class="column-name">completed_at</td>
                                <td class="column-type">timestamp nullable</td>
                                <td>Tamamlanma tarihi</td>
                            </tr>
                            <tr>
                                <td class="column-name">cancelled_at</td>
                                <td class="column-type">timestamp nullable</td>
                                <td>ƒ∞ptal tarihi</td>
                            </tr>
                            <tr>
                                <td class="column-name">created_at, updated_at</td>
                                <td class="column-type">timestamp</td>
                                <td>Zaman damgalarƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">deleted_at</td>
                                <td class="column-type">timestamp nullable</td>
                                <td>Soft delete</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- cart_order_items -->
            <div class="subsection">
                <h3>5Ô∏è‚É£ cart_order_items (Sipari≈ü √úr√ºnleri)</h3>
                <span class="badge badge-both">Central + Tenant</span>
                <div class="location">Central: 2025_11_24_000002_create_order_items_table.php<br>Tenant: tenant/2025_11_24_000002_create_order_items_table.php</div>

                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Kolon Adƒ±</th>
                                <th>T√ºr</th>
                                <th>A√ßƒ±klama</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="primary-key">
                                <td class="column-name">order_item_id</td>
                                <td class="column-type">id (big int)</td>
                                <td>Birincil anahtar</td>
                            </tr>
                            <tr>
                                <td class="column-name">order_id</td>
                                <td class="column-type">big int</td>
                                <td><span class="fk">FK ‚Üí cart_orders (cascade)</span></td>
                            </tr>
                            <tr>
                                <td class="column-name">orderable_id</td>
                                <td class="column-type">unsigned big int</td>
                                <td><span class="fk">Polymorphic: ShopProduct, vb.</span></td>
                            </tr>
                            <tr>
                                <td class="column-name">orderable_type</td>
                                <td class="column-type">string</td>
                                <td><span class="fk">Model sƒ±nƒ±fƒ± (Modules\Shop\App\Models\ShopProduct)</span></td>
                            </tr>
                            <tr>
                                <td class="column-name">item_title</td>
                                <td class="column-type">string</td>
                                <td>√úr√ºn adƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">item_sku</td>
                                <td class="column-type">string nullable</td>
                                <td>√úr√ºn SKU</td>
                            </tr>
                            <tr>
                                <td class="column-name">item_image</td>
                                <td class="column-type">string nullable</td>
                                <td>√úr√ºn g√∂rseli URL</td>
                            </tr>
                            <tr>
                                <td class="column-name">item_description</td>
                                <td class="column-type">text nullable</td>
                                <td>√úr√ºn a√ßƒ±klamasƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">quantity</td>
                                <td class="column-type">integer</td>
                                <td>Adet</td>
                            </tr>
                            <tr>
                                <td class="column-name">unit_price</td>
                                <td class="column-type">decimal(12,2)</td>
                                <td>Birim fiyat (indirim √∂ncesi)</td>
                            </tr>
                            <tr>
                                <td class="column-name">discount_amount</td>
                                <td class="column-type">decimal(12,2)</td>
                                <td>Birim ba≈üƒ±na indirim tutarƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">tax_rate</td>
                                <td class="column-type">decimal(5,2)</td>
                                <td>Vergi oranƒ± (%)</td>
                            </tr>
                            <tr>
                                <td class="column-name">tax_amount</td>
                                <td class="column-type">decimal(12,2)</td>
                                <td>Vergi tutarƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">subtotal</td>
                                <td class="column-type">decimal(12,2)</td>
                                <td>Ara toplam (quantity √ó unit_price)</td>
                            </tr>
                            <tr>
                                <td class="column-name">total</td>
                                <td class="column-type">decimal(12,2)</td>
                                <td>Satƒ±r toplamƒ± (subtotal + tax)</td>
                            </tr>
                            <tr>
                                <td class="column-name">original_currency</td>
                                <td class="column-type">string(3) nullable</td>
                                <td>Orijinal para birimi</td>
                            </tr>
                            <tr>
                                <td class="column-name">original_price</td>
                                <td class="column-type">decimal(12,2) nullable</td>
                                <td>Orijinal fiyat (d√∂viz √ßevrilmeden)</td>
                            </tr>
                            <tr>
                                <td class="column-name">conversion_rate</td>
                                <td class="column-type">decimal(10,4)</td>
                                <td>D√∂viz √ßevrim oranƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">status</td>
                                <td class="column-type">enum</td>
                                <td>pending, confirmed, shipped, delivered, cancelled, refunded</td>
                            </tr>
                            <tr>
                                <td class="column-name">is_digital</td>
                                <td class="column-type">boolean</td>
                                <td>Dijital √ºr√ºn m√º</td>
                            </tr>
                            <tr>
                                <td class="column-name">download_url</td>
                                <td class="column-type">string nullable</td>
                                <td>ƒ∞ndirme URL'si (dijital √ºr√ºnler)</td>
                            </tr>
                            <tr>
                                <td class="column-name">download_count</td>
                                <td class="column-type">integer</td>
                                <td>ƒ∞ndirme sayƒ±sƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">download_expires_at</td>
                                <td class="column-type">timestamp nullable</td>
                                <td>ƒ∞ndirme sona erme tarihi</td>
                            </tr>
                            <tr>
                                <td class="column-name">options</td>
                                <td class="column-type">json nullable</td>
                                <td>Varyant se√ßenekleri (renk, beden, vb.)</td>
                            </tr>
                            <tr>
                                <td class="column-name">metadata</td>
                                <td class="column-type">json nullable</td>
                                <td>Ek veriler</td>
                            </tr>
                            <tr>
                                <td class="column-name">created_at, updated_at</td>
                                <td class="column-type">timestamp</td>
                                <td>Zaman damgalarƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">deleted_at</td>
                                <td class="column-type">timestamp nullable</td>
                                <td>Soft delete</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- cart_addresses -->
            <div class="subsection">
                <h3>6Ô∏è‚É£ cart_addresses (M√º≈üteri Adresleri)</h3>
                <span class="badge badge-both">Central + Tenant</span>
                <div class="location">Central: 2025_11_24_000003_create_addresses_table.php<br>Tenant: tenant/2025_11_24_000003_create_addresses_table.php</div>

                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Kolon Adƒ±</th>
                                <th>T√ºr</th>
                                <th>A√ßƒ±klama</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="primary-key">
                                <td class="column-name">address_id</td>
                                <td class="column-type">id (big int)</td>
                                <td>Birincil anahtar</td>
                            </tr>
                            <tr>
                                <td class="column-name">user_id</td>
                                <td class="column-type">big int</td>
                                <td><span class="fk">FK ‚Üí users (cascade)</span></td>
                            </tr>
                            <tr>
                                <td class="column-name">address_type</td>
                                <td class="column-type">enum</td>
                                <td>billing, shipping, both</td>
                            </tr>
                            <tr>
                                <td class="column-name">title</td>
                                <td class="column-type">string nullable</td>
                                <td>Adres ba≈ülƒ±ƒüƒ± (Ev, ƒ∞≈ü, vb.)</td>
                            </tr>
                            <tr>
                                <td class="column-name">first_name</td>
                                <td class="column-type">string</td>
                                <td>Ad</td>
                            </tr>
                            <tr>
                                <td class="column-name">last_name</td>
                                <td class="column-type">string</td>
                                <td>Soyad</td>
                            </tr>
                            <tr>
                                <td class="column-name">company_name</td>
                                <td class="column-type">string nullable</td>
                                <td>≈ûirket adƒ± (B2B)</td>
                            </tr>
                            <tr>
                                <td class="column-name">tax_office</td>
                                <td class="column-type">string nullable</td>
                                <td>Vergi dairesi (B2B faturalar i√ßin)</td>
                            </tr>
                            <tr>
                                <td class="column-name">tax_number</td>
                                <td class="column-type">string nullable</td>
                                <td>Vergi numarasƒ± / TC Kimlik</td>
                            </tr>
                            <tr>
                                <td class="column-name">phone</td>
                                <td class="column-type">string</td>
                                <td>Telefon numarasƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">email</td>
                                <td class="column-type">string nullable</td>
                                <td>E-posta adresi</td>
                            </tr>
                            <tr>
                                <td class="column-name">address_line_1</td>
                                <td class="column-type">text</td>
                                <td>Adres (sokak, bina no)</td>
                            </tr>
                            <tr>
                                <td class="column-name">address_line_2</td>
                                <td class="column-type">text nullable</td>
                                <td>Adres 2 (daire no, vb.)</td>
                            </tr>
                            <tr>
                                <td class="column-name">neighborhood</td>
                                <td class="column-type">string nullable</td>
                                <td>Mahalle</td>
                            </tr>
                            <tr>
                                <td class="column-name">district</td>
                                <td class="column-type">string</td>
                                <td>ƒ∞l√ße</td>
                            </tr>
                            <tr>
                                <td class="column-name">city</td>
                                <td class="column-type">string</td>
                                <td>≈ûehir/ƒ∞l</td>
                            </tr>
                            <tr>
                                <td class="column-name">postal_code</td>
                                <td class="column-type">string(10) nullable</td>
                                <td>Posta kodu</td>
                            </tr>
                            <tr>
                                <td class="column-name">country_code</td>
                                <td class="column-type">string(2)</td>
                                <td>√úlke kodu (ISO 3166-1: TR, US, DE)</td>
                            </tr>
                            <tr>
                                <td class="column-name">is_default_billing</td>
                                <td class="column-type">boolean</td>
                                <td>Varsayƒ±lan fatura adresi</td>
                            </tr>
                            <tr>
                                <td class="column-name">is_default_shipping</td>
                                <td class="column-type">boolean</td>
                                <td>Varsayƒ±lan teslimat adresi</td>
                            </tr>
                            <tr>
                                <td class="column-name">delivery_notes</td>
                                <td class="column-type">text nullable</td>
                                <td>Teslimat notlarƒ± (kapƒ±cƒ±ya s√∂yleyin, vb.)</td>
                            </tr>
                            <tr>
                                <td class="column-name">metadata</td>
                                <td class="column-type">json nullable</td>
                                <td>Ek veriler</td>
                            </tr>
                            <tr>
                                <td class="column-name">created_at, updated_at</td>
                                <td class="column-type">timestamp</td>
                                <td>Zaman damgalarƒ±</td>
                            </tr>
                            <tr>
                                <td class="column-name">deleted_at</td>
                                <td class="column-type">timestamp nullable</td>
                                <td>Soft delete</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="note">
                    <strong>A√ßƒ±klama:</strong> Kullanƒ±cƒ±larƒ±n fatura ve teslimat adreslerini √∂nceden kaydetmelerine ve sipari≈ülerde se√ßmelerine izin verir.
                </div>
            </div>
        </section>

        <!-- SHOP MODULE -->
        <section>
            <h2>üè™ Mod√ºl 3: Shop (E-Ticaret)</h2>

            <div class="subsection">
                <h3>üìç Konum</h3>
                <div class="location">
                    Tenant: /Modules/Shop/database/migrations/tenant/
                </div>
            </div>

            <div class="subsection">
                <h3>7Ô∏è‚É£ shop_orders (Sipari≈üler)</h3>
                <span class="badge badge-tenant">Tenant Only</span>
                <div class="location">Tenant: 017_create_shop_orders_table.php</div>
                <div class="note">
                    <strong>A√ßƒ±klama:</strong> Shop mod√ºl√º, Cart mod√ºl√ºne benzer ≈üekilde kendi orders tablosuna sahiptir. Yapƒ± neredeyse aynƒ± olsa da, Shop mod√ºl√º daha eski tasarƒ±mƒ± kullanƒ±r. Yeni projeler Cart mod√ºl√ºn√º tercih etmelidir.
                </div>
            </div>

            <div class="subsection">
                <h3>8Ô∏è‚É£ shop_order_items (Sipari≈ü √úr√ºnleri)</h3>
                <span class="badge badge-tenant">Tenant Only</span>
                <div class="location">Tenant: 018_create_shop_order_items_table.php</div>
                <div class="note">
                    <strong>A√ßƒ±klama:</strong> Shop mod√ºl√º sipari≈ülerin √ºr√ºnlerini saklar. Polymorphic ili≈üki yerine doƒürudan product_id kullanƒ±r.
                </div>
            </div>

            <div class="subsection">
                <h3>9Ô∏è‚É£ shop_order_addresses (Sipari≈ü Adresleri)</h3>
                <span class="badge badge-tenant">Tenant Only</span>
                <div class="location">Tenant: 019_create_shop_order_addresses_table.php</div>
                <div class="note">
                    <strong>A√ßƒ±klama:</strong> Sipari≈ü anƒ±nda fatura ve teslimat adreslerinin snapshot'ƒ± saklanƒ±r. Deƒüi≈üim durumunda tarihsel verileri korur.
                </div>
            </div>

            <div class="subsection">
                <h3>üîü shop_customer_addresses (M√º≈üteri Adresleri)</h3>
                <span class="badge badge-tenant">Tenant Only</span>
                <div class="location">Tenant: 013_create_shop_customer_addresses_table.php</div>
                <div class="note">
                    <strong>A√ßƒ±klama:</strong> Shop m√º≈üterilerinin kayƒ±tlƒ± adreslerini y√∂netir. Cart mod√ºl√º User bazlƒ± adresler kullanƒ±rken, Shop mod√ºl√º Customer bazlƒ± adresler kullanƒ±r (√∂dev Shop m√º≈üteri sistemi).
                </div>
            </div>
        </section>

        <!-- RELATIONSHIPS -->
        <section>
            <h2>üîó ƒ∞li≈ükiler Diyagramƒ±</h2>

            <div class="subsection">
                <h3>√ñdeme Akƒ±≈üƒ±</h3>
                <div class="relationship-diagram">
cart_orders (order_id)
  ‚Üì (polymorphic: payable)
payments (payable_id, payable_type)
  ‚Üì (payment_method_id)
payment_methods (payment_method_id)

√ñrnek:
- payment.payable_type = "Modules\Cart\App\Models\Order"
- payment.payable_id = 123
‚Üí Order #123'√ºn √∂demesini temsil eder
                </div>
            </div>

            <div class="subsection">
                <h3>Sipari≈ü Mimarisi</h3>
                <div class="relationship-diagram">
cart_orders (order_id)
  ‚îú‚îÄ cart_order_items (order_id)
  ‚îÇ   ‚îú‚îÄ orderable_type = "Modules\Shop\App\Models\ShopProduct"
  ‚îÇ   ‚îî‚îÄ orderable_id = 789
  ‚îÇ
  ‚îî‚îÄ M√º≈üteri Bilgileri (JSON)
     ‚îú‚îÄ billing_address (JSON snapshot)
     ‚îî‚îÄ shipping_address (JSON snapshot)

Alternativ (Shop):
shop_orders (order_id)
  ‚îú‚îÄ shop_order_items (order_id)
  ‚îÇ   ‚îî‚îÄ product_id (doƒürudan FK)
  ‚îÇ
  ‚îú‚îÄ shop_order_addresses
  ‚îÇ   ‚îú‚îÄ address_type = 'billing'
  ‚îÇ   ‚îî‚îÄ address_type = 'shipping'
  ‚îÇ
  ‚îî‚îÄ shop_customer_addresses
     ‚îî‚îÄ customer_id (m√º≈üteri se√ßimi)
                </div>
            </div>

            <div class="subsection">
                <h3>Adres Y√∂netimi</h3>
                <div class="relationship-diagram">
users (user_id)
  ‚îî‚îÄ cart_addresses (user_id)
     ‚îî‚îÄ address_type: billing | shipping | both

Alternativ (Shop):
shop_customers (customer_id)
  ‚îî‚îÄ shop_customer_addresses (customer_id)
     ‚îî‚îÄ address_type: billing | shipping | both

shop_orders (order_id)
  ‚îî‚îÄ shop_order_addresses (order_id)
     ‚îî‚îÄ address_type: billing | shipping
     ‚îî‚îÄ snapshot (snapshot at order time)
                </div>
            </div>
        </section>

        <!-- DATABASE LOCATIONS -->
        <section>
            <h2>üìÇ Veritabanƒ± Konumlarƒ±</h2>

            <div class="subsection">
                <h3>Central Database (tuufi_db)</h3>
                <div class="box-container">
                    <strong>Tablolar:</strong>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>payment_methods (global √∂deme y√∂ntemleri)</li>
                        <li>payments (global √∂deme kaydƒ±)</li>
                        <li>cart_orders (global sipari≈üler)</li>
                        <li>cart_order_items (global sipari≈ü √ºr√ºnleri)</li>
                        <li>cart_addresses (global adresler)</li>
                    </ul>
                </div>
            </div>

            <div class="subsection">
                <h3>Tenant Database (tenant_X_db)</h3>
                <div class="box-container">
                    <strong>Tablolar:</strong>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>payment_methods (tenant-specific)</li>
                        <li>payments (tenant-specific)</li>
                        <li>bank_accounts (havale/EFT hesaplarƒ±)</li>
                        <li>cart_orders (tenant sipari≈üleri)</li>
                        <li>cart_order_items (tenant sipari≈ü √ºr√ºnleri)</li>
                        <li>cart_addresses (tenant adresler)</li>
                        <li>shop_orders (eski Shop sipari≈üleri)</li>
                        <li>shop_order_items (eski Shop sipari≈ü √ºr√ºnleri)</li>
                        <li>shop_order_addresses (eski Shop adresler)</li>
                        <li>shop_customer_addresses (eski Shop m√º≈üteri adresleri)</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- KEY INSIGHTS -->
        <section>
            <h2>üí° √ñnemli Bulgular</h2>

            <div class="box-container">
                <h3 style="color: #93c5fd;">1. Polymorphic Tasarƒ±m</h3>
                <p style="margin-top: 10px;">Payments tablosu polymorphic morph kullanarak herhangi bir modelden (ShopOrder, Subscription, vb.) √∂deme alabilir. Bu, √∂deme sistemini genel ve esnek kƒ±lmaktadƒ±r.</p>
            </div>

            <div class="box-container">
                <h3 style="color: #93c5fd;">2. Snapshot Mimarisi</h3>
                <p style="margin-top: 10px;">Sipari≈üin tarihsel verilerini korumak i√ßin JSON snapshot'lar kullanƒ±lƒ±r (billing_address, shipping_address, √ºr√ºn snapshot'larƒ±). Bu, sipari≈ü alƒ±ndƒ±ktan sonra √ºr√ºn/fiyat deƒüi≈üirse bile orijinal verileri saklar.</p>
            </div>

            <div class="box-container">
                <h3 style="color: #93c5fd;">3. Dual Mod√ºller</h3>
                <p style="margin-top: 10px;">Hem Shop hem de Cart mod√ºllerinde benzer order/address tablolarƒ± vardƒ±r. Eski projeler Shop kullanƒ±rken, yeni projeler Cart mod√ºl√ºn√º tercih etmelidir. Uzun vadede Cart mod√ºl√º standart olacaktƒ±r.</p>
            </div>

            <div class="box-container">
                <h3 style="color: #93c5fd;">4. Multi-Tenant Yapƒ±</h3>
                <p style="margin-top: 10px;">Payment tablolarƒ± Central ve Tenant olmak √ºzere iki yerde tanƒ±mlanƒ±r. Her tenant kendi payment_methods ve payments verilerine sahiptir. Bank_accounts ve diƒüer tenant-specific veriler sadece Tenant database'inde bulunur.</p>
            </div>

            <div class="box-container">
                <h3 style="color: #93c5fd;">5. Havale/EFT Sistemi</h3>
                <p style="margin-top: 10px;">bank_accounts tablosu ile her tenant havale/EFT √∂deme kabul edebilir. M√º≈üteriler sipari≈ülerinde banka hesaplarƒ± se√ßerek manuel √∂deme yapar (admin onayƒ± sonrasƒ±nda).</p>
            </div>

            <div class="box-container">
                <h3 style="color: #93c5fd;">6. ƒ∞ndirim & Vergi Y√∂netimi</h3>
                <p style="margin-top: 10px;">Her sipari≈ü ve √ºr√ºn satƒ±rƒ±nda discount_amount, tax_amount, tax_rate tutulur. Bu, karma≈üƒ±k vergi ve indirim hesaplamalarƒ±nƒ± destekler.</p>
            </div>

            <div class="box-container">
                <h3 style="color: #93c5fd;">7. Soft Delete Kullanƒ±mƒ±</h3>
                <p style="margin-top: 10px;">T√ºm ana tablolar soft delete (deleted_at) destekler. Veriler fiziksel olarak silinmez, sadece i≈üaretlenir. Denetim ve veri kurtarma i√ßin yararlƒ±dƒ±r.</p>
            </div>

            <div class="box-container">
                <h3 style="color: #93c5fd;">8. Refund (ƒ∞ade) Sistemi</h3>
                <p style="margin-top: 10px;">payments tablosundaki refund_for_payment_id kullanarak self-referencing ili≈üki ile geri √∂deme zincirleri olu≈üturulabilir. Aynƒ± sipari≈ü i√ßin kƒ±smi iadeler de m√ºmk√ºnd√ºr.</p>
            </div>
        </section>

        <!-- QUERIES & EXAMPLES -->
        <section>
            <h2>üìã Faydalƒ± Sorgular</h2>

            <div class="subsection">
                <h3>1. Beklemede Olan √ñdemeler</h3>
                <div class="relationship-diagram" style="background: rgba(239, 68, 68, 0.1); border-left: 4px solid #dc2626;">
SELECT *
FROM payments
WHERE status = 'pending'
AND created_at >= DATE_SUB(NOW(), INTERVAL 7 DAY)
ORDER BY created_at DESC;
                </div>
            </div>

            <div class="subsection">
                <h3>2. Tamamlanmayan Sipari≈üler</h3>
                <div class="relationship-diagram" style="background: rgba(239, 68, 68, 0.1); border-left: 4px solid #dc2626;">
SELECT
  co.*,
  COUNT(coi.order_item_id) as item_count,
  SUM(coi.total) as items_total
FROM cart_orders co
LEFT JOIN cart_order_items coi ON co.order_id = coi.order_id
WHERE co.status IN ('pending', 'processing')
AND co.payment_status != 'paid'
GROUP BY co.order_id
ORDER BY co.created_at DESC;
                </div>
            </div>

            <div class="subsection">
                <h3>3. M√º≈üteri √ñdeme Ge√ßmi≈üi</h3>
                <div class="relationship-diagram" style="background: rgba(239, 68, 68, 0.1); border-left: 4px solid #dc2626;">
SELECT
  p.*,
  pm.title,
  co.order_number,
  co.total_amount
FROM payments p
LEFT JOIN payment_methods pm ON p.payment_method_id = pm.payment_method_id
LEFT JOIN cart_orders co ON p.payable_type = 'Modules\Cart\App\Models\Order'
  AND p.payable_id = co.order_id
WHERE p.payable_type = 'Modules\Cart\App\Models\Order'
  AND co.user_id = ?
ORDER BY p.created_at DESC;
                </div>
            </div>

            <div class="subsection">
                <h3>4. Havale Bekleme Sipari≈üleri</h3>
                <div class="relationship-diagram" style="background: rgba(239, 68, 68, 0.1); border-left: 4px solid #dc2626;">
SELECT co.* FROM cart_orders co
WHERE co.payment_status = 'pending'
AND JSON_EXTRACT(co.billing_address, '$.payment_method') = 'bank_transfer'
ORDER BY co.created_at DESC;
                </div>
            </div>
        </section>

        <!-- MIGRATION FILES -->
        <section>
            <h2>üìÅ Migration Dosyalarƒ± √ñzet</h2>

            <div class="box-container">
                <strong>Payment Module (Central):</strong>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>/Modules/Payment/database/migrations/2025_11_09_001_create_payment_methods_table.php</li>
                    <li>/Modules/Payment/database/migrations/2025_11_09_002_create_payments_table.php</li>
                    <li>/Modules/Payment/database/migrations/2025_11_12_010000_create_payment_gateway_settings.php (Settings)</li>
                </ul>
            </div>

            <div class="box-container">
                <strong>Payment Module (Tenant):</strong>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>/Modules/Payment/database/migrations/tenant/2025_11_09_001_create_payment_methods_table.php</li>
                    <li>/Modules/Payment/database/migrations/tenant/2025_11_09_002_create_payments_table.php</li>
                    <li>/Modules/Payment/database/migrations/tenant/2025_11_12_020000_create_bank_accounts_table.php</li>
                </ul>
            </div>

            <div class="box-container">
                <strong>Cart Module (Central):</strong>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>/Modules/Cart/database/migrations/2025_11_24_000001_create_orders_table.php</li>
                    <li>/Modules/Cart/database/migrations/2025_11_24_000002_create_order_items_table.php</li>
                    <li>/Modules/Cart/database/migrations/2025_11_24_000003_create_addresses_table.php</li>
                </ul>
            </div>

            <div class="box-container">
                <strong>Cart Module (Tenant):</strong>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>/Modules/Cart/database/migrations/tenant/2025_11_24_000001_create_orders_table.php</li>
                    <li>/Modules/Cart/database/migrations/tenant/2025_11_24_000002_create_order_items_table.php</li>
                    <li>/Modules/Cart/database/migrations/tenant/2025_11_24_000003_create_addresses_table.php</li>
                </ul>
            </div>

            <div class="box-container">
                <strong>Shop Module (Tenant Only):</strong>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>/Modules/Shop/database/migrations/tenant/017_create_shop_orders_table.php</li>
                    <li>/Modules/Shop/database/migrations/tenant/018_create_shop_order_items_table.php</li>
                    <li>/Modules/Shop/database/migrations/tenant/019_create_shop_order_addresses_table.php</li>
                    <li>/Modules/Shop/database/migrations/tenant/013_create_shop_customer_addresses_table.php</li>
                </ul>
            </div>
        </section>

        <footer>
            ü§ñ Claude AI tarafƒ±ndan otomatik olarak olu≈üturuldu | üìä Veritabanƒ± Analizi Raporu
        </footer>
    </div>
</body>
</html>
