# 🧠 AI BAĞLAMSAL ZEKA SİSTEMİ (Contextual Intelligence)

**Tarih:** 14 Ekim 2025
**Versiyon:** 3.0
**Önceki:** "Asla Hayır Deme" (v2.0)
**Yeni:** Bağlamsal İhtiyaç Analizi + Dinamik Soru

---

## 🎯 SİSTEM AMACI

AI artık **kelime aramıyor**, **ihtiyacı anlıyor**!

### Önceki Sistem (v2.0):
```
Kullanıcı: "şantiye transpaleti"
AI: "transpalet" kelimesini ara → Tüm transpaletleri listele
```

### Yeni Sistem (v3.0):
```
Kullanıcı: "şantiye transpaleti"
AI: ŞANTİYE analizi yap:
    - Sektör: İnşaat (ağır sanayi)
    - Çalışma ortamı: Dış mekan, zorlu zemin
    - Yük tipi: Ağır malzeme (2-3 ton+)
    → YÜKSEK KAPASİTELİ + DAYANIKLI modelleri öner
```

---

## 🏗️ BAĞLAMSAL SEKTÖR ANALİZİ

### 3 Sektör Kategorisi

#### 1️⃣ AĞIR SANAYİ (Yüksek Performans)
**Sektörler:**
- Şantiye, inşaat
- Demir-çelik fabrikası
- Madencilik
- Çimento fabrikası
- Ağır sanayi tesisleri

**İhtiyaç Profili:**
- ✅ Tonaj: 2-3 ton+
- ✅ Çalışma ortamı: Dış mekan, zorlu zemin
- ✅ Dayanıklılık: Maksimum
- ✅ Özellik: Güçlü tekerlek, weatherproof

**AI Önerisi:**
→ En güçlü ve yüksek kapasiteli modeller

---

#### 2️⃣ ORTA DÜZEY LOJİSTİK (Dengeli)
**Sektörler:**
- Depo yönetimi
- Lojistik merkezi
- Fabrika (hafif sanayi)
- Market zinciri
- E-ticaret fulfillment

**İhtiyaç Profili:**
- ✅ Tonaj: 1.5-2 ton
- ✅ Çalışma ortamı: İç mekan, düz zemin
- ✅ Dayanıklılık: Orta
- ✅ Özellik: Hızlı manevra, verimlilik

**AI Önerisi:**
→ Dengeli performans ve ekonomi modelleri

---

#### 3️⃣ HAFIF PERAKENDİ/HİZMET (Ekonomik)
**Sektörler:**
- Su dağıtım şirketi
- Gıda marketi
- Küçük depo
- Perakende mağaza
- Ofis/kafe

**İhtiyaç Profili:**
- ✅ Tonaj: 1-1.5 ton
- ✅ Çalışma ortamı: İç mekan, temiz zemin
- ✅ Dayanıklılık: Standart
- ✅ Özellik: Kompakt, kolay kullanım

**AI Önerisi:**
→ Hafif ve ekonomik modeller

---

## 🤔 DİNAMİK SORU SİSTEMİ

### Sabit Sorular YOK! ❌

**Eski Sistem:**
```
Her zaman aynı sorular:
"Hangi kapasite?"
"İç mekan mı dış mekan mı?"
```

**Yeni Sistem:**
```
Muhabbete göre dinamik:
Eksik bilgiyi belirle → Sadece ONU sor
```

---

### Soru Öncelik Sırası

#### 1️⃣ Sektör Eksikse:
```
Kullanıcı: "Transpalet arıyorum"
AI: "Hangi sektörde kullanacaksınız? (örn: inşaat, depo, market)"
```

#### 2️⃣ Tonaj Eksikse:
```
Kullanıcı: "Şantiye için transpalet"
AI: "Genellikle ne kadar ağırlıkta yük taşıyacaksınız?"
```

#### 3️⃣ Mekan Eksikse:
```
Kullanıcı: "2 ton transpalet"
AI: "İç mekan mı dış mekan mı kullanacaksınız?"
```

#### 4️⃣ Yeterli Bilgi Varsa:
```
Kullanıcı: "Şantiyede 2 ton yük için"
AI: DİREKT ÜRÜN ÖNER! (soru sorma)
```

---

## 📊 ÖRNEK SENARYOLAR

### Senaryo 1: Şantiye Transpaleti

```
Kullanıcı: "şantiye için transpalet arıyorum"

❌ YANLIŞ (Eski):
"'Şantiye transpaleti' bulamadım, tüm transpaletleri göstereyim"

✅ DOĞRU (Yeni):
AI Analiz:
  - Sektör: İnşaat (ağır sanayi)
  - Yük: Ağır malzeme (muhtemelen 2-3 ton+)
  - Ortam: Dış mekan, zorlu zemin
  - Dayanıklılık: Maksimum gerekli

AI Yanıt:
"Şantiye kullanımı için dayanıklı ve güçlü transpalet modellerimiz:

- [EPT20 ET Transpalet](url)
  → Neden uygun: 2 ton kapasite, dış mekan uyumlu, ağır yük taşıma

- [F4 Transpalet](url)
  → Neden uygun: Endüstriyel dayanıklılık, zorlu zemin uyumu

- [WPL202 Transpalet](url)
  → Neden uygun: Yüksek kapasite, şantiye koşullarına dayanıklı

Genellikle ne kadar ağırlıkta yük taşıyacaksınız?"
```

---

### Senaryo 2: Su Dağıtım Şirketi

```
Kullanıcı: "su dağıtım şirketi için transpalet"

AI Analiz:
  - Sektör: Perakende/hizmet (hafif)
  - Yük: Su damacanaları (orta ağırlık, 1-1.5 ton)
  - Ortam: İç mekan, düz zemin
  - Dayanıklılık: Standart yeterli

AI Yanıt:
"Su dağıtım işletmeleri için uygun transpalet modellerimiz:

- [EPL153 Transpalet](url)
  → Neden uygun: 1.5 ton kapasite, kompakt, iç mekan kullanımı

- [F2 Transpalet](url)
  → Neden uygun: Kolay manevra, ekonomik, düz zemin için ideal

- [RPL201 Transpalet](url)
  → Neden uygun: Orta kapasite, hafif kullanım için tasarlanmış

Kaç adet damacana aynı anda taşıyorsunuz?"
```

---

### Senaryo 3: Dinamik Soru Akışı

```
Kullanıcı: "transpalet"

AI: "Hangi sektörde kullanacaksınız?"
    (sektör eksik → dinamik soru)

---

Kullanıcı: "şantiye"

AI: (BİRLEŞTİR: şantiye için transpalet)
    "Genellikle ne kadar ağırlıkta yük taşıyacaksınız?"
    (tonaj eksik → dinamik soru)

---

Kullanıcı: "2 ton civarı"

AI: (BİRLEŞTİR: şantiye için 2 ton transpalet)
    → YETERLİ BİLGİ VAR!
    → DİREKT ÜRÜN ÖNERİSİ YAP

    "Şantiye kullanımı için 2 ton kapasiteli modellerimiz:
     - [EPT20 ET](url) - Ağır yük, dış mekan
     - [F4](url) - Endüstriyel dayanıklılık

     Telefon numaranızı alabilir miyim?"
```

---

## 🔍 KELIME ARAMADAN VAZGEÇ!

### Eski Mantık (❌):
```
"Şantiye transpaleti" → KELİME ARA
→ "şantiye" kelimesi ürünlerde yok
→ "Bulamadım"
```

### Yeni Mantık (✅):
```
"Şantiye transpaleti" → İHTİYACI ANLA
→ Şantiye = Ağır sanayi
→ Ağır sanayi = Yüksek tonaj + Dayanıklılık
→ UYGUN ÖZELLİKLERE SAHIP ürünleri öner
```

---

## 🎯 TEKNİK DETAYLAR

### AI Prompt Değişiklikleri

**Dosya:** [PublicAIController.php:1058-1127](Modules/AI/app/Http/Controllers/Api/PublicAIController.php#L1058-L1127)

**Eklenen Kurallar:**
```php
// KATMAN 2: Kelime aramadan vazgeç
"⚠️ ÖNEMLİ: 'Şantiye transpaleti' kelimesini ARAMA!
Bunun yerine ŞANTIYE İHTİYACINI ANLA!"

// KATMAN 3: Sektörel analiz
"🏗️ AĞIR SANAYİ → 2-3 ton+, güçlü, dış mekan"
"📦 ORTA LOJİSTİK → 1.5-2 ton, dengeli"
"🏪 HAFIF PERAKENDİ → 1-1.5 ton, ekonomik"

// Dinamik soru
"SABİT SORULAR YOK! Muhabbete göre dinamik sor!"
"1️⃣ Sektör eksikse → Sektör sor"
"2️⃣ Tonaj eksikse → Tonaj sor"
"3️⃣ Mekan eksikse → Mekan sor"
"4️⃣ Yeterli bilgi varsa → SORU SORMA, öner!"
```

---

## 📈 CONVERSATION MEMORY

AI son **20 mesajı** hatırlıyor:

```php
$conversationHistory = $conversation->messages()
    ->orderBy('created_at', 'desc')
    ->limit(20)
    ->get()
```

**Kullanım:**
- Kısa cevapları birleştir (1-5 kelime)
- Aynı soruyu 2. kez sorma
- Daha önce verilen bilgileri tekrar isteme

---

## ✅ BAŞARI KRİTERLERİ

| Özellik | Eski (v2.0) | Yeni (v3.0) |
|---------|-------------|-------------|
| Kelime arama | ✅ Var | ❌ Yok |
| Bağlamsal analiz | ❌ Yok | ✅ Var |
| Sektör algılama | ❌ Yok | ✅ 3 kategori |
| Dinamik soru | ❌ Sabit | ✅ Akışa göre |
| İhtiyaç tahmini | ❌ Yok | ✅ Var |

---

## 🧪 TEST CHECKLIST

### Test 1: Şantiye
```bash
Input: "şantiye transpaleti"
Expected: Ağır sanayi analizi + Yüksek tonaj önerileri
```

### Test 2: Su Satıcısı
```bash
Input: "su dağıtım için transpalet"
Expected: Hafif perakende analizi + Ekonomik öneriler
```

### Test 3: Dinamik Soru
```bash
Input: "transpalet" → "şantiye" → "2 ton"
Expected: Sırayla sektör, tonaj soruları + Son mesajda ürün önerisi
```

### Test 4: Yeterli Bilgi
```bash
Input: "şantiye için 2 ton dış mekan transpalet"
Expected: DİREKT ürün önerisi (soru yok!)
```

---

## 📊 KARŞILAŞTIRMA

### Senaryo: "Şantiye transpaleti arıyorum"

#### Eski Sistem (v2.0):
```
1. "transpalet" kelimesini ara
2. TÜM transpaletleri listele (30 adet)
3. "Hangi kapasite?" diye sor
```

#### Yeni Sistem (v3.0):
```
1. "Şantiye" → Ağır sanayi analizi yap
2. İhtiyaç: 2-3 ton+, dayanıklı, dış mekan
3. SADECE UYGUN modelleri öner (5-7 adet)
4. "Ne kadar ağırlıkta yük taşıyacaksınız?" diye sor
```

**Sonuç:**
- ✅ Daha akıllı öneri
- ✅ Daha az seçenek (ilgisiz yok)
- ✅ Daha iyi soru (bağlamsal)

---

## 🚀 DEPLOYMENT STATUS

```bash
✅ Bağlamsal analiz - DEPLOYED
✅ Sektör kategorileri - DEPLOYED
✅ Dinamik soru sistemi - DEPLOYED
✅ Conversation memory - ACTIVE (20 mesaj)
✅ Telegram bildirim - ACTIVE
```

---

**Sistem production'da aktif ve test edilmeye hazır!** 🚀

**Next Steps:**
- Gerçek kullanıcı testleri
- Sektör kategorileri genişletme
- Ürün özellik mapping optimize etme

---

**Hazırlayan:** Claude AI
**Tarih:** 14 Ekim 2025
**Versiyon:** 3.0 (Contextual Intelligence)
