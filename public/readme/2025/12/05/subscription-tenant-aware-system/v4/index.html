<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subscription Settings - FINAL (v4)</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-slate-900 via-emerald-900 to-slate-900 text-slate-100 min-h-screen">
    <div class="max-w-6xl mx-auto px-6 py-12">
        <!-- Header -->
        <header class="mb-16 pb-8 border-b-2 border-emerald-500">
            <div class="flex items-center gap-4 mb-4">
                <h1 class="text-5xl font-bold bg-gradient-to-r from-emerald-400 via-green-400 to-blue-400 bg-clip-text text-transparent">
                    âœ… Subscription Settings
                </h1>
                <span class="px-4 py-2 bg-gradient-to-r from-emerald-600 to-green-600 text-white font-bold rounded-full animate-pulse">
                    FINAL v4
                </span>
            </div>
            <p class="text-slate-300 text-xl">Minimal & Basit - Sadece 2 Ayar</p>
            <div class="mt-4 flex gap-4 text-sm text-slate-400">
                <span>ğŸ“… 2025-12-05</span>
                <span>ğŸ¯ Mevcut auth_ AyarlarÄ± KullanÄ±lacak</span>
                <span>âœ… 30 Saniye Hardcode</span>
            </div>
        </header>

        <!-- Ã–NCEKÄ° VERSÄ°YONLAR -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-yellow-400">ğŸ“œ Versiyon GeÃ§miÅŸi</h2>
            
            <div class="space-y-4">
                <div class="bg-red-900/20 border border-red-700/50 rounded-lg p-6">
                    <p class="text-red-400 font-bold mb-2">âŒ v1: YanlÄ±ÅŸ analiz (tenants.data Ã¶nerildi)</p>
                    <p class="text-slate-400 text-sm">SettingsManagement Ã§alÄ±ÅŸma mantÄ±ÄŸÄ± anlaÅŸÄ±lmamÄ±ÅŸtÄ±</p>
                </div>

                <div class="bg-yellow-900/20 border border-yellow-700/50 rounded-lg p-6">
                    <p class="text-yellow-400 font-bold mb-2">âš ï¸ v2: SettingsManagement anlaÅŸÄ±ldÄ± ama...</p>
                    <p class="text-slate-400 text-sm">Sadece 1 ayar (subscription_enabled) Ã¶nerilmiÅŸti</p>
                </div>

                <div class="bg-orange-900/20 border border-orange-700/50 rounded-lg p-6">
                    <p class="text-orange-400 font-bold mb-2">ğŸ“‹ v3: 8 ayar Ã¶nerildi</p>
                    <p class="text-slate-400 text-sm">Ã‡ok fazla! Payment gateway, test mode, grace period... Gereksiz karmaÅŸÄ±k</p>
                </div>

                <div class="bg-green-900/20 border border-green-700/50 rounded-lg p-6">
                    <p class="text-green-400 font-bold mb-2">âœ… v4: FINAL (Bu versiyon)</p>
                    <p class="text-slate-400 text-sm">Sadece 2 ayar + 30 saniye hardcode = Basit & Temiz!</p>
                </div>
            </div>
        </section>

        <!-- FINAL AYARLAR -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-emerald-400">âœ… FINAL AYARLAR (2 Adet)</h2>
            
            <div class="space-y-8">
                <!-- Ayar 1 -->
                <div class="bg-gradient-to-r from-emerald-900/40 to-green-900/40 border-2 border-emerald-500 rounded-xl p-8">
                    <div class="flex items-start gap-4 mb-6">
                        <span class="w-12 h-12 bg-emerald-600 text-white rounded-full flex items-center justify-center font-bold text-xl flex-shrink-0">1</span>
                        <div class="flex-1">
                            <h3 class="text-3xl font-bold text-emerald-400 mb-3">auth_subscription</h3>
                            <p class="text-slate-300 text-lg">Ãœcretli Ãœyelik Sistemi (Ana Anahtar)</p>
                        </div>
                    </div>

                    <div class="grid md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-slate-900/50 rounded-lg p-4">
                            <p class="text-xs text-slate-400 mb-2">Setting ID</p>
                            <p class="text-white font-bold">211</p>
                        </div>
                        <div class="bg-slate-900/50 rounded-lg p-4">
                            <p class="text-xs text-slate-400 mb-2">Type</p>
                            <p class="text-white font-bold">select</p>
                        </div>
                        <div class="bg-slate-900/50 rounded-lg p-4">
                            <p class="text-xs text-slate-400 mb-2">Values</p>
                            <p class="text-white font-bold">0 / 1</p>
                        </div>
                        <div class="bg-slate-900/50 rounded-lg p-4">
                            <p class="text-xs text-slate-400 mb-2">Muzibu</p>
                            <p class="text-green-400 font-bold">1 (AKTÄ°F)</p>
                        </div>
                    </div>

                    <div class="bg-slate-900/50 rounded-lg p-6">
                        <h4 class="text-white font-bold mb-4">ğŸ“‹ Ne Yapar?</h4>
                        <ul class="space-y-3 text-slate-300">
                            <li class="flex items-start gap-3">
                                <span class="text-emerald-400 text-xl">âœ…</span>
                                <span><strong>1 (AÃ§Ä±k):</strong> Subscription modÃ¼lÃ¼ aktif, trial otomatik baÅŸlar, premium kontrolleri Ã§alÄ±ÅŸÄ±r</span>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="text-red-400 text-xl">âŒ</span>
                                <span><strong>0 (KapalÄ±):</strong> Subscription modÃ¼lÃ¼ tamamen kapalÄ±, herkes sÄ±nÄ±rsÄ±z kullanÄ±r</span>
                            </li>
                        </ul>
                    </div>

                    <div class="mt-4 bg-blue-900/30 rounded-lg p-4 border border-blue-700/50">
                        <p class="text-blue-400 font-bold mb-2">ğŸ’¡ Ã–nemli:</p>
                        <p class="text-slate-300">Bu ayar 1 ise â†’ Trial da otomatik aktif! AyrÄ± trial_enabled ayarÄ± YOK!</p>
                    </div>
                </div>

                <!-- Ayar 2 -->
                <div class="bg-gradient-to-r from-blue-900/40 to-cyan-900/40 border-2 border-blue-500 rounded-xl p-8">
                    <div class="flex items-start gap-4 mb-6">
                        <span class="w-12 h-12 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold text-xl flex-shrink-0">2</span>
                        <div class="flex-1">
                            <h3 class="text-3xl font-bold text-blue-400 mb-3">auth_device_limit</h3>
                            <p class="text-slate-300 text-lg">Cihaz Limit KontrolÃ¼</p>
                        </div>
                    </div>

                    <div class="grid md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-slate-900/50 rounded-lg p-4">
                            <p class="text-xs text-slate-400 mb-2">Setting ID</p>
                            <p class="text-white font-bold">212</p>
                        </div>
                        <div class="bg-slate-900/50 rounded-lg p-4">
                            <p class="text-xs text-slate-400 mb-2">Type</p>
                            <p class="text-white font-bold">number</p>
                        </div>
                        <div class="bg-slate-900/50 rounded-lg p-4">
                            <p class="text-xs text-slate-400 mb-2">Default</p>
                            <p class="text-white font-bold">1</p>
                        </div>
                        <div class="bg-slate-900/50 rounded-lg p-4">
                            <p class="text-xs text-slate-400 mb-2">Ã–nerilen</p>
                            <p class="text-yellow-400 font-bold">1-3 arasÄ±</p>
                        </div>
                    </div>

                    <div class="bg-slate-900/50 rounded-lg p-6">
                        <h4 class="text-white font-bold mb-4">ğŸ“‹ Ne Yapar?</h4>
                        <ul class="space-y-3 text-slate-300">
                            <li class="flex items-start gap-3">
                                <span class="text-blue-400 text-xl">ğŸ“±</span>
                                <span><strong>Global Setting:</strong> TÃ¼m planlar iÃ§in geÃ§erli (trial da, premium da)</span>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="text-purple-400 text-xl">ğŸ”¢</span>
                                <span><strong>Plan Override:</strong> Plan'da device_limit field varsa o Ã¶nceliklidir</span>
                            </li>
                        </ul>
                    </div>

                    <div class="mt-4 bg-yellow-900/30 rounded-lg p-4 border border-yellow-700/50">
                        <p class="text-yellow-400 font-bold mb-2">ğŸ’¡ MantÄ±k:</p>
                        <p class="text-slate-300">Plan'da device_limit yoksa â†’ auth_device_limit kullanÄ±lÄ±r (fallback)</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- HARDCODE DEÄERLER -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-purple-400">ğŸ”§ Hardcode DeÄŸerler (Settings'e GÄ°RMEYEN)</h2>
            
            <div class="space-y-6">
                <!-- 30 Saniye -->
                <div class="bg-gradient-to-r from-purple-900/30 to-pink-900/30 border border-purple-700/50 rounded-xl p-8">
                    <div class="flex items-start gap-4">
                        <span class="text-4xl">ğŸµ</span>
                        <div class="flex-1">
                            <h3 class="text-2xl font-bold text-purple-400 mb-3">30 Saniye Preview</h3>
                            <p class="text-slate-300 mb-4">Abonelik yoksa/biterse mÃ¼zik 30 saniye Ã§alÄ±ÅŸÄ±r</p>
                            
                            <div class="bg-slate-900/50 rounded-lg p-4 font-mono text-sm text-green-400">
// Sabit deÄŸer - Kod iÃ§inde<br>
const PREVIEW_DURATION = 30; // saniye<br>
<br>
// Veya<br>
config('subscription.preview_duration', 30);
                            </div>

                            <div class="mt-4 bg-green-900/30 rounded-lg p-4 border border-green-700/50">
                                <p class="text-green-400 font-bold mb-2">âœ… Neden Hardcode?</p>
                                <p class="text-slate-300 text-sm">Bu deÄŸer deÄŸiÅŸmeyecek, ayar olarak yÃ¶netmeye gerek yok, karmaÅŸÄ±klÄ±k yaratÄ±r</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Trial 7 GÃ¼n -->
                <div class="bg-gradient-to-r from-blue-900/30 to-cyan-900/30 border border-blue-700/50 rounded-xl p-8">
                    <div class="flex items-start gap-4">
                        <span class="text-4xl">â±ï¸</span>
                        <div class="flex-1">
                            <h3 class="text-2xl font-bold text-blue-400 mb-3">7 GÃ¼n Trial</h3>
                            <p class="text-slate-300 mb-4">Trial sÃ¼resi â†’ Trial plan'Ä±n cycle'Ä±ndan alÄ±nÄ±r</p>
                            
                            <div class="bg-slate-900/50 rounded-lg p-4 font-mono text-sm text-blue-400">
// Trial plan'dan al<br>
$trialPlan = SubscriptionPlan::where('is_trial', true)->first();<br>
$days = $trialPlan->billing_cycles['7-gunluk']['duration_days'];
                            </div>

                            <div class="mt-4 bg-yellow-900/30 rounded-lg p-4 border border-yellow-700/50">
                                <p class="text-yellow-400 font-bold mb-2">ğŸ’¡ Neden Settings'e GÄ°RMEZ?</p>
                                <p class="text-slate-300 text-sm">Plan zaten bu bilgiyi tutuyor, duplicate etmeye gerek yok (DRY prensibi)</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Auto Start -->
                <div class="bg-gradient-to-r from-green-900/30 to-emerald-900/30 border border-green-700/50 rounded-xl p-8">
                    <div class="flex items-start gap-4">
                        <span class="text-4xl">ğŸš€</span>
                        <div class="flex-1">
                            <h3 class="text-2xl font-bold text-green-400 mb-3">Trial Otomatik BaÅŸlar</h3>
                            <p class="text-slate-300 mb-4">KayÄ±t â†’ Trial subscription oluÅŸtur (ULTIMATE PLAN kararÄ±)</p>
                            
                            <div class="bg-slate-900/50 rounded-lg p-4 font-mono text-sm text-green-400">
// KayÄ±t sonrasÄ±<br>
if (setting('auth_subscription')) {<br>
  &nbsp;&nbsp;SubscriptionService::createTrialForUser($user);<br>
}
                            </div>

                            <div class="mt-4 bg-green-900/30 rounded-lg p-4 border border-green-700/50">
                                <p class="text-green-400 font-bold mb-2">âœ… Neden Hardcode?</p>
                                <p class="text-slate-300 text-sm">ULTIMATE PLAN kararÄ±: Friction azalt, conversion artÄ±r â†’ Otomatik baÅŸlamalÄ±!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- KULLANIM -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-cyan-400">ğŸ’» Kod KullanÄ±mÄ±</h2>
            
            <div class="space-y-6">
                <!-- Route Guard -->
                <div class="bg-slate-800/50 rounded-xl p-8 border border-cyan-700/50">
                    <h3 class="text-xl font-bold text-cyan-400 mb-4">Route Guard</h3>
                    
                    <div class="bg-slate-900 rounded-lg p-4 font-mono text-sm text-green-400">
// Subscription route'larÄ±<br>
Route::prefix('admin/subscription')->group(function () {<br>
  &nbsp;&nbsp;Route::middleware(function ($request, $next) {<br>
  &nbsp;&nbsp;&nbsp;&nbsp;if (!setting('auth_subscription')) {<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;abort(404);<br>
  &nbsp;&nbsp;&nbsp;&nbsp;}<br>
  &nbsp;&nbsp;&nbsp;&nbsp;return $next($request);<br>
  &nbsp;&nbsp;})->group(function () {<br>
  &nbsp;&nbsp;&nbsp;&nbsp;// Routes...<br>
  &nbsp;&nbsp;});<br>
});
                    </div>
                </div>

                <!-- Menu Guard -->
                <div class="bg-slate-800/50 rounded-xl p-8 border border-purple-700/50">
                    <h3 class="text-xl font-bold text-purple-400 mb-4">Menu Guard</h3>
                    
                    <div class="bg-slate-900 rounded-lg p-4 font-mono text-sm text-purple-400">
// Admin sidebar<br>
@if(setting('auth_subscription'))<br>
  &nbsp;&nbsp;&lt;li&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&lt;a href="/admin/subscription"&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;i class="fas fa-crown"&gt;&lt;/i&gt; Abonelikler<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&lt;/a&gt;<br>
  &nbsp;&nbsp;&lt;/li&gt;<br>
@endif
                    </div>
                </div>

                <!-- Service -->
                <div class="bg-slate-800/50 rounded-xl p-8 border border-blue-700/50">
                    <h3 class="text-xl font-bold text-blue-400 mb-4">Service KontrolÃ¼</h3>
                    
                    <div class="bg-slate-900 rounded-lg p-4 font-mono text-sm text-blue-400">
public function canStreamFullSong(User $user): bool<br>
{<br>
  &nbsp;&nbsp;// Subscription kapalÄ±ysa herkes dinler<br>
  &nbsp;&nbsp;if (!setting('auth_subscription')) {<br>
  &nbsp;&nbsp;&nbsp;&nbsp;return true;<br>
  &nbsp;&nbsp;}<br>
  <br>
  &nbsp;&nbsp;// AÃ§Ä±ksa subscription kontrolÃ¼<br>
  &nbsp;&nbsp;return $user->hasActiveSubscription();<br>
}<br>
<br>
public function getPreviewDuration(): int<br>
{<br>
  &nbsp;&nbsp;return 30; // Hardcode<br>
}
                    </div>
                </div>
            </div>
        </section>

        <!-- Ã–ZET -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-emerald-400">ğŸ“Š Ã–ZET</h2>
            
            <div class="grid md:grid-cols-2 gap-6">
                <div class="bg-green-900/20 border border-green-800/50 rounded-lg p-6">
                    <h3 class="text-lg font-bold mb-4 text-green-400">âœ… Settings (2 Adet)</h3>
                    <ul class="space-y-2 text-sm text-slate-300">
                        <li>1. <strong>auth_subscription</strong> (0/1)</li>
                        <li>2. <strong>auth_device_limit</strong> (number)</li>
                    </ul>
                </div>

                <div class="bg-purple-900/20 border border-purple-800/50 rounded-lg p-6">
                    <h3 class="text-lg font-bold mb-4 text-purple-400">ğŸ”§ Hardcode (3 Adet)</h3>
                    <ul class="space-y-2 text-sm text-slate-300">
                        <li>1. <strong>30 saniye</strong> preview</li>
                        <li>2. <strong>7 gÃ¼n</strong> trial (plan'dan)</li>
                        <li>3. <strong>Otomatik</strong> trial baÅŸlatma</li>
                    </ul>
                </div>
            </div>

            <div class="mt-6 bg-gradient-to-r from-emerald-900/40 to-green-900/40 border-2 border-emerald-500 rounded-xl p-8">
                <h3 class="text-2xl font-bold text-emerald-400 mb-4">ğŸ¯ SonuÃ§</h3>
                <ul class="space-y-3 text-slate-300">
                    <li class="flex items-start gap-3">
                        <span class="text-emerald-400 text-xl">âœ…</span>
                        <span><strong>Basit:</strong> Sadece 2 ayar, karmaÅŸÄ±k deÄŸil</span>
                    </li>
                    <li class="flex items-start gap-3">
                        <span class="text-emerald-400 text-xl">âœ…</span>
                        <span><strong>Minimal:</strong> Gereksiz ayarlar yok (payment, test mode, grace period...)</span>
                    </li>
                    <li class="flex items-start gap-3">
                        <span class="text-emerald-400 text-xl">âœ…</span>
                        <span><strong>Tenant-Aware:</strong> Her tenant kendi ayarÄ±nÄ± yÃ¶netir</span>
                    </li>
                    <li class="flex items-start gap-3">
                        <span class="text-emerald-400 text-xl">âœ…</span>
                        <span><strong>Mevcut Sistem:</strong> Yeni ayar oluÅŸturmaya gerek yok, auth_ prefix'li ayarlar kullanÄ±lacak</span>
                    </li>
                </ul>
            </div>
        </section>

        <!-- Footer -->
        <footer class="mt-20 pt-8 border-t border-slate-700 text-center text-slate-500 text-sm">
            <p>ğŸ¤– Claude AI - Tailwind CSS</p>
            <p class="mt-2">Tarih: 2025-12-05 | Versiyon: v4 FINAL</p>
            <p class="mt-2 text-xs">v1 â†’ v2 â†’ v3 (8 ayar) â†’ v4 (2 ayar + hardcode) âœ…</p>
        </footer>
    </div>
</body>
</html>
