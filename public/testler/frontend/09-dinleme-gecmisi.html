<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frontend 09: Dinleme GeÃ§miÅŸi - Muzibu Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: { extend: { colors: { slate: { 850: '#1a202e', 950: '#0f1419' } } } }
        }
    </script>
    <style>
        @media print {
            .no-print { display: none; }
            input[type="checkbox"] { -webkit-appearance: checkbox; appearance: checkbox; }
        }
    </style>
</head>
<body class="bg-slate-950 text-slate-200 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-5xl">

        <div class="mb-8">
            <div class="flex items-center justify-between mb-4">
                <a href="../index.html" class="text-emerald-400 hover:text-emerald-300 no-print">â† Geri</a>
                <button onclick="window.print()" class="bg-slate-800 hover:bg-slate-700 px-4 py-2 rounded text-sm no-print">ğŸ–¨ï¸ YazdÄ±r</button>
            </div>
            <h1 class="text-3xl font-bold text-emerald-400 mb-2">Frontend 09: Dinleme GeÃ§miÅŸi</h1>
            <p class="text-slate-400">Listening history, recent plays, statistics, timeline</p>

            <div class="mt-4 bg-slate-900 rounded-lg p-4">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-sm font-semibold">Ä°lerleme</span>
                    <span class="text-sm" id="progress-text">0 / 8</span>
                </div>
                <div class="w-full bg-slate-800 rounded-full h-3">
                    <div id="progress-bar" class="bg-emerald-500 h-3 rounded-full transition-all duration-300" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <div class="space-y-6">

            <!-- GeÃ§miÅŸ GÃ¶rÃ¼nÃ¼mÃ¼ -->
            <div class="bg-slate-900 border border-slate-700 rounded-lg p-6">
                <h2 class="text-xl font-bold text-emerald-300 mb-4">ğŸ“œ Dinleme GeÃ§miÅŸi GÃ¶rÃ¼nÃ¼mÃ¼</h2>
                <div class="space-y-4">

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="history-page-access">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">Sayfa EriÅŸimi</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ URL: /listening-history veya /gecmis<br>
                                â–¸ Sidebar veya profile menÃ¼sÃ¼nde "Dinleme GeÃ§miÅŸi" linki olmalÄ±<br>
                                â–¸ Login gerekli: Guest kullanÄ±cÄ±lar login sayfasÄ±na yÃ¶nlendirilmeli<br>
                                â–¸ Sayfa baÅŸlÄ±ÄŸÄ±: "Dinleme GeÃ§miÅŸim"
                            </div>
                        </div>
                    </label>

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="history-list-view">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">Liste GÃ¶rÃ¼nÃ¼mÃ¼</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ ÅarkÄ±lar chronological sÄ±rayla listelenmiÅŸ (en yeni en Ã¼stte)<br>
                                â–¸ Her item: Kapak, ÅŸarkÄ± adÄ±, sanatÃ§Ä±, dinlenme tarihi/saati<br>
                                â–¸ "X dakika/saat/gÃ¼n Ã¶nce" formatÄ±nda relative time<br>
                                â–¸ Pagination: 50 item/sayfa<br>
                                â–¸ Infinite scroll (isteÄŸe baÄŸlÄ±)
                            </div>
                        </div>
                    </label>

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="history-grouped">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">GruplandÄ±rÄ±lmÄ±ÅŸ GÃ¶rÃ¼nÃ¼m</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ Tarih bazlÄ± gruplama: "BugÃ¼n", "DÃ¼n", "Bu Hafta", "Bu Ay", "Daha Eski"<br>
                                â–¸ Her grup baÅŸlÄ±ÄŸÄ± sticky header olmalÄ± (scroll'da sabit kalsÄ±n)<br>
                                â–¸ Grup baÅŸlÄ±klarÄ±nda toplam dinleme sayÄ±sÄ± gÃ¶sterilmeli<br>
                                â–¸ KullanÄ±cÄ± toggle ile flat/grouped view seÃ§ebilmeli
                            </div>
                        </div>
                    </label>

                </div>
            </div>

            <!-- Filtreleme & Arama -->
            <div class="bg-slate-900 border border-slate-700 rounded-lg p-6">
                <h2 class="text-xl font-bold text-emerald-300 mb-4">ğŸ” Filtreleme & Arama</h2>
                <div class="space-y-4">

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="history-search">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">Arama</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ Search bar: ÅarkÄ± adÄ±, sanatÃ§Ä± adÄ± ile arama<br>
                                â–¸ Real-time filtreleme (typing yaparken anÄ±nda sonuÃ§)<br>
                                â–¸ "Arama sonucu bulunamadÄ±" placeholder<br>
                                â–¸ Clear search butonu (X ikonu)
                            </div>
                        </div>
                    </label>

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="history-date-filter">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">Tarih Filtresi</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ Date range picker: BaÅŸlangÄ±Ã§ - BitiÅŸ tarihi seÃ§imi<br>
                                â–¸ Preset seÃ§enekler: Son 7 gÃ¼n, Son 30 gÃ¼n, Son 3 ay, TÃ¼m zamanlar<br>
                                â–¸ Filtreleme anÄ±nda uygulanmalÄ± (reload yok)<br>
                                â–¸ URL query string'e eklenmeli (bookmark edilebilsin)
                            </div>
                        </div>
                    </label>

                </div>
            </div>

            <!-- Ä°statistikler -->
            <div class="bg-slate-900 border border-slate-700 rounded-lg p-6">
                <h2 class="text-xl font-bold text-emerald-300 mb-4">ğŸ“Š Ä°statistikler</h2>
                <div class="space-y-4">

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="history-stats-overview">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">Genel Ä°statistikler</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ Sayfa Ã¼stÃ¼nde stats kartlarÄ±: Toplam dinlenme, toplam sÃ¼re, toplam ÅŸarkÄ±<br>
                                â–¸ Bu ay/bu hafta/bugÃ¼n breakdown'u<br>
                                â–¸ Ortalama gÃ¼nlÃ¼k dinleme sÃ¼resi<br>
                                â–¸ Animasyonlu counter (sayÄ±lar artarak gÃ¶sterilsin)
                            </div>
                        </div>
                    </label>

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="history-top-songs">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">En Ã‡ok Dinlenenler</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ "En Ã‡ok DinlediÄŸiniz ÅarkÄ±lar" bÃ¶lÃ¼mÃ¼ (top 10)<br>
                                â–¸ Her ÅŸarkÄ±da: Play count badge, kapak, isim, sanatÃ§Ä±<br>
                                â–¸ TÄ±klanabilir (ÅŸarkÄ± detay veya direkt Ã§al)<br>
                                â–¸ Period seÃ§imi: Bu hafta, bu ay, tÃ¼m zamanlar
                            </div>
                        </div>
                    </label>

                </div>
            </div>

            <!-- Ä°ÅŸlemler -->
            <div class="bg-slate-900 border border-slate-700 rounded-lg p-6">
                <h2 class="text-xl font-bold text-emerald-300 mb-4">âš™ï¸ Ä°ÅŸlemler</h2>
                <div class="space-y-4">

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="history-replay">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">Tekrar Oynatma</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ Her ÅŸarkÄ± kartÄ±nda "Tekrar Ã‡al" butonu olmalÄ±<br>
                                â–¸ TÄ±klandÄ±ÄŸÄ±nda ÅŸarkÄ± queue'ya eklenip baÅŸlatÄ±lmalÄ±<br>
                                â–¸ ÅarkÄ± zaten queue'daysa "Zaten sÄ±rada" toast gÃ¶ster<br>
                                â–¸ Batch play: Bir gÃ¼nÃ¼/haftayÄ± toplu Ã§al seÃ§eneÄŸi
                            </div>
                        </div>
                    </label>

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="history-clear">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">GeÃ§miÅŸi Temizle</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ "GeÃ§miÅŸi Temizle" butonu (ayarlar/Ã¼st menÃ¼de)<br>
                                â–¸ Onay modal'Ä±: "TÃ¼m dinleme geÃ§miÅŸi silinecek!"<br>
                                â–¸ SeÃ§enek: TÃ¼mÃ¼nÃ¼ sil / Belirli tarih aralÄ±ÄŸÄ±nÄ± sil<br>
                                â–¸ Ä°ÅŸlem sonrasÄ±: Toast "âœ… GeÃ§miÅŸ temizlendi" + liste boÅŸ placeholder
                            </div>
                        </div>
                    </label>

                </div>
            </div>

        </div>

        <div class="mt-8 flex gap-4 no-print">
            <button onclick="resetProgress()" class="bg-red-600 hover:bg-red-500 px-6 py-3 rounded-lg text-white font-semibold">
                ğŸ”„ Ä°lerlemeyi SÄ±fÄ±rla
            </button>
            <button onclick="markAllComplete()" class="bg-emerald-600 hover:bg-emerald-500 px-6 py-3 rounded-lg text-white font-semibold">
                âœ… TÃ¼mÃ¼nÃ¼ Tamamla
            </button>
        </div>

        <div class="mt-12 text-center text-slate-500 text-sm border-t border-slate-800 pt-6">
            <p>ğŸµ Muzibu.com.tr - Dinleme GeÃ§miÅŸi Test Checklist</p>
        </div>

    </div>

    <script>
        const STORAGE_KEY = 'muzibu_test_frontend_09_history';
        const TOTAL_TESTS = 8;

        function loadProgress() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (saved) {
                const data = JSON.parse(saved);
                document.querySelectorAll('.test-checkbox').forEach(checkbox => {
                    const testId = checkbox.dataset.test;
                    if (data[testId]) checkbox.checked = true;
                });
            }
            updateProgress();
        }

        function saveProgress() {
            const data = {};
            document.querySelectorAll('.test-checkbox').forEach(checkbox => {
                data[checkbox.dataset.test] = checkbox.checked;
            });
            localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
            updateProgress();
        }

        function updateProgress() {
            const checked = document.querySelectorAll('.test-checkbox:checked').length;
            const percentage = Math.round((checked / TOTAL_TESTS) * 100);
            document.getElementById('progress-bar').style.width = percentage + '%';
            document.getElementById('progress-text').textContent = `${checked} / ${TOTAL_TESTS}`;
        }

        function resetProgress() {
            if (!confirm('âš ï¸ TÃ¼m iÅŸaretlemeler silinecek! Emin misiniz?')) return;
            localStorage.removeItem(STORAGE_KEY);
            document.querySelectorAll('.test-checkbox').forEach(cb => cb.checked = false);
            updateProgress();
        }

        function markAllComplete() {
            document.querySelectorAll('.test-checkbox').forEach(cb => cb.checked = true);
            saveProgress();
        }

        document.querySelectorAll('.test-checkbox').forEach(checkbox => {
            checkbox.addEventListener('change', saveProgress);
        });

        loadProgress();
    </script>
</body>
</html>
