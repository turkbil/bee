<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Muzibu VeritabanÄ± Temizleme - Gereksiz Kolonlar Analizi</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-slate-100 min-h-screen">
    <div class="max-w-7xl mx-auto px-4 py-12">
        <!-- Header -->
        <header class="mb-16 pb-8 border-b border-slate-700">
            <h1 class="text-5xl font-bold mb-4 bg-gradient-to-r from-red-400 to-orange-400 bg-clip-text text-transparent">
                ğŸ—‘ï¸ Muzibu Database Cleanup
            </h1>
            <div class="text-slate-300 text-xl">
                Gereksiz Kolonlar & Yedekli Ä°ndexler Analizi
            </div>
            <div class="mt-4 flex gap-4 text-sm text-slate-500">
                <span>ğŸ“… 6 AralÄ±k 2025</span>
                <span>ğŸ¯ Tenant: muzibu.com.tr (tenant_muzibu_1528d0)</span>
                <span>ğŸ“Š 113 aktif ÅŸarkÄ±</span>
            </div>
        </header>

        <!-- Executive Summary -->
        <section class="mb-16">
            <div class="bg-gradient-to-r from-red-600 to-orange-600 rounded-2xl p-8 mb-8">
                <h2 class="text-3xl font-bold mb-4 text-white">âš ï¸ Ã–zet Durum</h2>
                <div class="grid md:grid-cols-3 gap-6">
                    <div class="bg-white/10 backdrop-blur rounded-lg p-6">
                        <div class="text-4xl font-bold text-white mb-2">6</div>
                        <div class="text-white/80">Gereksiz Kolon</div>
                    </div>
                    <div class="bg-white/10 backdrop-blur rounded-lg p-6">
                        <div class="text-4xl font-bold text-white mb-2">15+</div>
                        <div class="text-white/80">Gereksiz Index</div>
                    </div>
                    <div class="bg-white/10 backdrop-blur rounded-lg p-6">
                        <div class="text-4xl font-bold text-white mb-2">~25%</div>
                        <div class="text-white/80">Performans ArtÄ±ÅŸÄ± Beklentisi</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tablo: muzibu_songs -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-blue-400">ğŸ“Š muzibu_songs Tablosu</h2>

            <!-- Gereksiz Kolonlar -->
            <div class="bg-slate-800/50 border-l-4 border-red-500 rounded-lg p-8 mb-6">
                <h3 class="text-2xl font-bold text-red-300 mb-6">ğŸ”´ Gereksiz Kolonlar</h3>

                <div class="space-y-6">
                    <!-- 1. bitrate -->
                    <div class="bg-slate-900/50 rounded-lg p-6">
                        <div class="flex items-start justify-between mb-4">
                            <div>
                                <h4 class="text-xl font-bold text-red-300">1. bitrate</h4>
                                <div class="text-slate-400 text-sm mt-1">int(10) unsigned | NULL</div>
                            </div>
                            <span class="px-4 py-2 bg-red-600 text-white text-sm rounded-full font-bold">UNUSED</span>
                        </div>
                        <div class="space-y-3 text-slate-300">
                            <p><span class="text-yellow-300 font-semibold">Durum:</span> 113 ÅŸarkÄ±nÄ±n HÄ°Ã‡BÄ°RÄ°NDE bitrate verisi yok (NULL)</p>
                            <p><span class="text-yellow-300 font-semibold">KullanÄ±m:</span> Sadece ConvertToHLSJob iÃ§inde fallback deÄŸer olarak kullanÄ±lÄ±yor (varsayÄ±lan: 256 kbps)</p>
                            <p><span class="text-yellow-300 font-semibold">extractMetadata() Metodu:</span> Bitrate Ã§Ä±karma kodu var ama hiÃ§ Ã§alÄ±ÅŸtÄ±rÄ±lmamÄ±ÅŸ</p>
                            <p class="text-green-400 font-semibold">âœ… Ã–neri: Silinebilir - ConvertToHLSJob iÃ§inde sabit 256 kbps kullanÄ±labilir</p>
                        </div>
                    </div>

                    <!-- 2. metadata -->
                    <div class="bg-slate-900/50 rounded-lg p-6">
                        <div class="flex items-start justify-between mb-4">
                            <div>
                                <h4 class="text-xl font-bold text-red-300">2. metadata</h4>
                                <div class="text-slate-400 text-sm mt-1">longtext (JSON) | NULL</div>
                            </div>
                            <span class="px-4 py-2 bg-red-600 text-white text-sm rounded-full font-bold">UNUSED</span>
                        </div>
                        <div class="space-y-3 text-slate-300">
                            <p><span class="text-yellow-300 font-semibold">Durum:</span> 113 ÅŸarkÄ±nÄ±n HÄ°Ã‡BÄ°RÄ°NDE metadata yok (NULL)</p>
                            <p><span class="text-yellow-300 font-semibold">AmaÃ§:</span> sample_rate, channels, channel_mode, filesize, mime_type bilgilerini saklamak iÃ§in planlanmÄ±ÅŸ</p>
                            <p><span class="text-yellow-300 font-semibold">extractMetadata() Metodu:</span> Kodu hazÄ±r ama hiÃ§ Ã§alÄ±ÅŸtÄ±rÄ±lmamÄ±ÅŸ</p>
                            <p class="text-green-400 font-semibold">âœ… Ã–neri: Silinebilir - KullanÄ±lmÄ±yor ve kullanÄ±lmasÄ± da planlanmÄ±yor</p>
                        </div>
                    </div>

                    <!-- 3. encryption_key -->
                    <div class="bg-slate-900/50 rounded-lg p-6">
                        <div class="flex items-start justify-between mb-4">
                            <div>
                                <h4 class="text-xl font-bold text-orange-300">3. encryption_key</h4>
                                <div class="text-slate-400 text-sm mt-1">varchar(32) | NULL</div>
                            </div>
                            <span class="px-4 py-2 bg-orange-600 text-white text-sm rounded-full font-bold">NULL</span>
                        </div>
                        <div class="space-y-3 text-slate-300">
                            <p><span class="text-yellow-300 font-semibold">Durum:</span> 205 ÅŸarkÄ±nÄ±n TÃœMÃœnde NULL (boÅŸ)</p>
                            <p><span class="text-yellow-300 font-semibold">AmaÃ§:</span> HLS AES-128 encryption key saklamak iÃ§in oluÅŸturulmuÅŸ</p>
                            <p><span class="text-yellow-300 font-semibold">encryption_iv:</span> Dolu (her ÅŸarkÄ± iÃ§in benzersiz IV), ama key yok!</p>
                            <p class="text-red-400 font-semibold">ğŸš¨ Sistem TasarÄ±m HatasÄ±: IV var, KEY yok - Åifreleme Ã§alÄ±ÅŸmÄ±yor!</p>
                            <p class="text-amber-400 font-semibold">âš ï¸ SeÃ§enek 1: Encryption sistemini dÃ¼zelt (key Ã¼ret ve sakla)</p>
                            <p class="text-green-400 font-semibold">âœ… SeÃ§enek 2: Encryption tamamen kaldÄ±rÄ±lacaksa â†’ encryption_key SÄ°LÄ°NEBÄ°LÄ°R</p>
                        </div>
                    </div>

                    <!-- 4. encryption_iv -->
                    <div class="bg-slate-900/50 rounded-lg p-6">
                        <div class="flex items-start justify-between mb-4">
                            <div>
                                <h4 class="text-xl font-bold text-orange-300">4. encryption_iv</h4>
                                <div class="text-slate-400 text-sm mt-1">varchar(32) | NULL</div>
                            </div>
                            <span class="px-4 py-2 bg-yellow-600 text-white text-sm rounded-full font-bold">PARTIAL</span>
                        </div>
                        <div class="space-y-3 text-slate-300">
                            <p><span class="text-yellow-300 font-semibold">Durum:</span> 205 ÅŸarkÄ±da DOLU (her ÅŸarkÄ± iÃ§in benzersiz IV)</p>
                            <p><span class="text-yellow-300 font-semibold">Sorun:</span> encryption_key NULL olduÄŸu iÃ§in encryption Ã§alÄ±ÅŸmÄ±yor!</p>
                            <p class="text-red-400 font-semibold">ğŸš¨ YarÄ±da BÄ±rakÄ±lmÄ±ÅŸ Sistem: IV var, KEY yok!</p>
                            <p class="text-amber-400 font-semibold">âš ï¸ SeÃ§enek 1: Encryption sistemini tamamla (key ekle)</p>
                            <p class="text-green-400 font-semibold">âœ… SeÃ§enek 2: Encryption kaldÄ±rÄ±lacaksa â†’ encryption_iv SÄ°LÄ°NEBÄ°LÄ°R</p>
                        </div>
                    </div>

                    <!-- 5. is_encrypted -->
                    <div class="bg-slate-900/50 rounded-lg p-6">
                        <div class="flex items-start justify-between mb-4">
                            <div>
                                <h4 class="text-xl font-bold text-orange-300">5. is_encrypted</h4>
                                <div class="text-slate-400 text-sm mt-1">tinyint(1) | DEFAULT 0</div>
                            </div>
                            <span class="px-4 py-2 bg-yellow-600 text-white text-sm rounded-full font-bold">MISLEADING</span>
                        </div>
                        <div class="space-y-3 text-slate-300">
                            <p><span class="text-yellow-300 font-semibold">Durum:</span> 205 ÅŸarkÄ±nÄ±n HEPSÄ° <code class="bg-slate-700 px-2 py-1 rounded">is_encrypted = 1</code></p>
                            <p><span class="text-yellow-300 font-semibold">GerÃ§ek:</span> encryption_key NULL olduÄŸu iÃ§in ASLINDA ENCRYPTÄ°ON YOK!</p>
                            <p class="text-red-400 font-semibold">ğŸš¨ YanÄ±ltÄ±cÄ± Flag: Encrypted diyor ama ÅŸifrelenmiÅŸ deÄŸil!</p>
                            <p class="text-amber-400 font-semibold">âš ï¸ SeÃ§enek 1: Encryption sistemini dÃ¼zelt (is_encrypted = 0 yap veya gerÃ§ekten ÅŸifrele)</p>
                            <p class="text-green-400 font-semibold">âœ… SeÃ§enek 2: Encryption kaldÄ±rÄ±lacaksa â†’ is_encrypted SÄ°LÄ°NEBÄ°LÄ°R</p>
                        </div>
                    </div>

                    <!-- 6. hls_converted_at -->
                    <div class="bg-slate-900/50 rounded-lg p-6">
                        <div class="flex items-start justify-between mb-4">
                            <div>
                                <h4 class="text-xl font-bold text-yellow-300">6. hls_converted_at</h4>
                                <div class="text-slate-400 text-sm mt-1">timestamp | NULL</div>
                            </div>
                            <span class="px-4 py-2 bg-yellow-600 text-white text-sm rounded-full font-bold">OPTIONAL</span>
                        </div>
                        <div class="space-y-3 text-slate-300">
                            <p><span class="text-yellow-300 font-semibold">Durum:</span> 205 ÅŸarkÄ±nÄ±n HÄ°Ã‡BÄ°RÄ°NDE timestamp yok (NULL)</p>
                            <p><span class="text-yellow-300 font-semibold">AmaÃ§:</span> HLS conversion zamanÄ±nÄ± saklamak (audit log)</p>
                            <p><span class="text-yellow-300 font-semibold">hls_converted Flag:</span> Conversion durumunu gÃ¶steriyor (1 = converted)</p>
                            <p class="text-blue-400 font-semibold">ğŸ’¡ Ä°kisi de aynÄ± iÅŸi yapÄ±yor: hls_converted (boolean) yeterli</p>
                            <p class="text-green-400 font-semibold">âœ… Ã–neri: Timestamp gerekli deÄŸilse SÄ°LÄ°NEBÄ°LÄ°R - hls_converted yeterli</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Gereksiz Ä°ndexler -->
            <div class="bg-slate-800/50 border-l-4 border-yellow-500 rounded-lg p-8 mb-6">
                <h3 class="text-2xl font-bold text-yellow-300 mb-6">âš ï¸ Gereksiz & Yedekli Ä°ndexler</h3>

                <div class="space-y-4">
                    <div class="bg-slate-900/50 rounded-lg p-6">
                        <h4 class="text-lg font-bold text-yellow-300 mb-4">Index Ä°kilemi: Tekli vs Composite</h4>
                        <div class="space-y-3 text-slate-300 text-sm">
                            <p class="font-semibold text-white mb-2">ğŸ“Š Mevcut Durum:</p>
                            <ul class="list-disc list-inside space-y-2 ml-4">
                                <li><code class="bg-slate-700 px-2 py-1 rounded">is_active</code> (tekli) + <code class="bg-slate-700 px-2 py-1 rounded">is_active, deleted_at</code> (composite)</li>
                                <li><code class="bg-slate-700 px-2 py-1 rounded">is_featured</code> (tekli) + <code class="bg-slate-700 px-2 py-1 rounded">is_featured, is_active, deleted_at</code> (composite)</li>
                                <li><code class="bg-slate-700 px-2 py-1 rounded">play_count</code> (tekli) + <code class="bg-slate-700 px-2 py-1 rounded">play_count, is_active, deleted_at</code> (composite)</li>
                                <li><code class="bg-slate-700 px-2 py-1 rounded">album_id</code> (tekli) + <code class="bg-slate-700 px-2 py-1 rounded">album_id, is_active, deleted_at</code> (composite)</li>
                                <li><code class="bg-slate-700 px-2 py-1 rounded">genre_id</code> (tekli) + <code class="bg-slate-700 px-2 py-1 rounded">genre_id, is_active, deleted_at</code> (composite)</li>
                                <li><code class="bg-slate-700 px-2 py-1 rounded">created_at</code> (tekli) + <code class="bg-slate-700 px-2 py-1 rounded">is_active, deleted_at, created_at</code> (composite)</li>
                                <li><code class="bg-slate-700 px-2 py-1 rounded">updated_at</code> (tekli) - HÄ°Ã‡ KULLANILMIYOR!</li>
                                <li><code class="bg-slate-700 px-2 py-1 rounded">deleted_at</code> (tekli) + birÃ§ok composite iÃ§inde</li>
                                <li><code class="bg-slate-700 px-2 py-1 rounded">duration</code> (tekli) - HÄ°Ã‡ KULLANILMIYOR!</li>
                                <li><code class="bg-slate-700 px-2 py-1 rounded">hls_converted</code> (tekli) - HÄ°Ã‡ KULLANILMIYOR!</li>
                            </ul>

                            <p class="font-semibold text-white mt-6 mb-2">ğŸ” Analiz:</p>
                            <div class="bg-blue-900/30 border border-blue-500/30 rounded p-4 mb-4">
                                <p class="text-blue-300 font-semibold mb-2">âœ… Composite indexler YETER! (leftmost prefix rule)</p>
                                <p class="text-slate-300">MySQL/MariaDB composite index sola hizalÄ± prefix kuralÄ± ile Ã§alÄ±ÅŸÄ±r.</p>
                                <p class="text-slate-300 mt-2">Ã–rnek: <code class="bg-slate-700 px-2 py-1 rounded">INDEX(is_active, deleted_at, created_at)</code></p>
                                <p class="text-slate-300 mt-1">Bu index ÅŸu sorgularÄ± karÅŸÄ±lar:</p>
                                <ul class="list-disc list-inside ml-4 mt-2 text-slate-400">
                                    <li>WHERE is_active = 1</li>
                                    <li>WHERE is_active = 1 AND deleted_at IS NULL</li>
                                    <li>WHERE is_active = 1 AND deleted_at IS NULL AND created_at &gt; X</li>
                                </ul>
                                <p class="text-green-300 mt-3">âœ Tekli <code class="bg-slate-700 px-2 py-1 rounded">is_active</code> index GEREKSIZ!</p>
                            </div>

                            <p class="font-semibold text-red-400 mt-6 mb-2">ğŸ—‘ï¸ Silinebilecek Tekli Ä°ndexler:</p>
                            <ul class="list-disc list-inside space-y-1 ml-4">
                                <li><code class="bg-slate-700 px-2 py-1 rounded">is_active</code> â†’ Composite iÃ§inde var</li>
                                <li><code class="bg-slate-700 px-2 py-1 rounded">is_featured</code> â†’ Composite iÃ§inde var</li>
                                <li><code class="bg-slate-700 px-2 py-1 rounded">play_count</code> â†’ Composite iÃ§inde var</li>
                                <li><code class="bg-slate-700 px-2 py-1 rounded">deleted_at</code> â†’ Soft delete index (Laravel otomatik), composite iÃ§inde var</li>
                                <li><code class="bg-slate-700 px-2 py-1 rounded">created_at</code> â†’ Composite iÃ§inde var</li>
                                <li><code class="bg-slate-700 px-2 py-1 rounded">updated_at</code> â†’ HÄ°Ã‡ KULLANILMIYOR</li>
                                <li><code class="bg-slate-700 px-2 py-1 rounded">duration</code> â†’ HÄ°Ã‡ KULLANILMIYOR</li>
                                <li><code class="bg-slate-700 px-2 py-1 rounded">hls_converted</code> â†’ HÄ°Ã‡ KULLANILMIYOR</li>
                            </ul>

                            <p class="font-semibold text-yellow-400 mt-6 mb-2">âš ï¸ DÄ°KKAT: album_id & genre_id</p>
                            <div class="bg-yellow-900/20 border border-yellow-500/30 rounded p-4">
                                <p class="text-yellow-300">Foreign key constraint nedeniyle otomatik index oluÅŸturulmuÅŸ olabilir.</p>
                                <p class="text-slate-300 mt-2">Composite index zaten var:</p>
                                <ul class="list-disc list-inside ml-4 mt-1 text-slate-400">
                                    <li><code class="bg-slate-700 px-2 py-1 rounded">album_id, is_active, deleted_at</code></li>
                                    <li><code class="bg-slate-700 px-2 py-1 rounded">genre_id, is_active, deleted_at</code></li>
                                </ul>
                                <p class="text-green-300 mt-3">âœ… Tekli index silinebilir (composite yeterli)</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-slate-900/50 rounded-lg p-6">
                        <h4 class="text-lg font-bold text-yellow-300 mb-4">ğŸ”¢ Toplam Gereksiz Index SayÄ±sÄ±</h4>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="bg-red-900/20 border border-red-500/30 rounded p-4">
                                <div class="text-3xl font-bold text-red-300 mb-2">8-10</div>
                                <div class="text-slate-300 text-sm">Tekli index (composite tarafÄ±ndan karÅŸÄ±lanÄ±yor)</div>
                            </div>
                            <div class="bg-orange-900/20 border border-orange-500/30 rounded p-4">
                                <div class="text-3xl font-bold text-orange-300 mb-2">3-5</div>
                                <div class="text-slate-300 text-sm">HiÃ§ kullanÄ±lmayan index</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Korunacak Alanlar -->
            <div class="bg-slate-800/50 border-l-4 border-green-500 rounded-lg p-8">
                <h3 class="text-2xl font-bold text-green-300 mb-6">âœ… KorunmasÄ± Gereken Alanlar</h3>

                <div class="grid md:grid-cols-2 gap-4">
                    <div class="bg-slate-900/50 rounded-lg p-4">
                        <h4 class="font-bold text-green-300 mb-2">Core Fields</h4>
                        <ul class="list-disc list-inside text-slate-300 text-sm space-y-1">
                            <li>song_id (PK)</li>
                            <li>album_id, genre_id (FK)</li>
                            <li>title, slug, lyrics (JSON)</li>
                            <li>duration (gerekli)</li>
                            <li>file_path (original MP3)</li>
                        </ul>
                    </div>
                    <div class="bg-slate-900/50 rounded-lg p-4">
                        <h4 class="font-bold text-green-300 mb-2">HLS & Features</h4>
                        <ul class="list-disc list-inside text-slate-300 text-sm space-y-1">
                            <li>hls_path (HLS playlist)</li>
                            <li>hls_converted (conversion flag)</li>
                            <li>media_id (cover image)</li>
                            <li>is_featured, is_active</li>
                            <li>play_count</li>
                        </ul>
                    </div>
                    <div class="bg-slate-900/50 rounded-lg p-4">
                        <h4 class="font-bold text-green-300 mb-2">Timestamps</h4>
                        <ul class="list-disc list-inside text-slate-300 text-sm space-y-1">
                            <li>created_at</li>
                            <li>updated_at</li>
                            <li>deleted_at (soft delete)</li>
                        </ul>
                    </div>
                    <div class="bg-slate-900/50 rounded-lg p-4">
                        <h4 class="font-bold text-green-300 mb-2">Search Indexes</h4>
                        <ul class="list-disc list-inside text-slate-300 text-sm space-y-1">
                            <li>title_tr_lower (virtual)</li>
                            <li>title_en_lower (virtual)</li>
                            <li>title_ar_lower (virtual)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- DiÄŸer Tablolar -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-purple-400">ğŸ“Š DiÄŸer Muzibu TablolarÄ±</h2>

            <div class="grid md:grid-cols-2 gap-6">
                <!-- Albums -->
                <div class="bg-slate-800/50 rounded-lg p-6 border border-slate-700">
                    <h3 class="text-xl font-bold mb-4 text-purple-300">muzibu_albums</h3>
                    <div class="space-y-2 text-sm">
                        <p class="text-green-400">âœ… Temiz tablo - gereksiz kolon yok</p>
                        <p class="text-slate-300">â€¢ 13 kolon (tÃ¼mÃ¼ kullanÄ±lÄ±yor)</p>
                        <p class="text-slate-300">â€¢ Virtual columns: title_tr/en/ar_lower</p>
                    </div>
                </div>

                <!-- Artists -->
                <div class="bg-slate-800/50 rounded-lg p-6 border border-slate-700">
                    <h3 class="text-xl font-bold mb-4 text-purple-300">muzibu_artists</h3>
                    <div class="space-y-2 text-sm">
                        <p class="text-green-400">âœ… Temiz tablo - gereksiz kolon yok</p>
                        <p class="text-slate-300">â€¢ 12 kolon (tÃ¼mÃ¼ kullanÄ±lÄ±yor)</p>
                        <p class="text-slate-300">â€¢ Virtual columns: title_tr/en/ar_lower</p>
                    </div>
                </div>

                <!-- Genres -->
                <div class="bg-slate-800/50 rounded-lg p-6 border border-slate-700">
                    <h3 class="text-xl font-bold mb-4 text-purple-300">muzibu_genres</h3>
                    <div class="space-y-2 text-sm">
                        <p class="text-green-400">âœ… Temiz tablo - gereksiz kolon yok</p>
                        <p class="text-slate-300">â€¢ 12 kolon (tÃ¼mÃ¼ kullanÄ±lÄ±yor)</p>
                        <p class="text-slate-300">â€¢ Virtual columns: title_tr/en/ar_lower</p>
                    </div>
                </div>

                <!-- Sectors -->
                <div class="bg-slate-800/50 rounded-lg p-6 border border-slate-700">
                    <h3 class="text-xl font-bold mb-4 text-purple-300">muzibu_sectors</h3>
                    <div class="space-y-2 text-sm">
                        <p class="text-green-400">âœ… Temiz tablo - gereksiz kolon yok</p>
                        <p class="text-slate-300">â€¢ 9 kolon (tÃ¼mÃ¼ kullanÄ±lÄ±yor)</p>
                        <p class="text-slate-300">â€¢ Description eklendi (2025-11-10)</p>
                    </div>
                </div>

                <!-- Playlists -->
                <div class="bg-slate-800/50 rounded-lg p-6 border border-slate-700">
                    <h3 class="text-xl font-bold mb-4 text-purple-300">muzibu_playlists</h3>
                    <div class="space-y-2 text-sm">
                        <p class="text-green-400">âœ… Temiz tablo - gereksiz kolon yok</p>
                        <p class="text-slate-300">â€¢ 13 kolon (tÃ¼mÃ¼ kullanÄ±lÄ±yor)</p>
                        <p class="text-slate-300">â€¢ is_system, is_public, is_radio flags</p>
                    </div>
                </div>

                <!-- Radios -->
                <div class="bg-slate-800/50 rounded-lg p-6 border border-slate-700">
                    <h3 class="text-xl font-bold mb-4 text-purple-300">muzibu_radios</h3>
                    <div class="space-y-2 text-sm">
                        <p class="text-green-400">âœ… Temiz tablo - gereksiz kolon yok</p>
                        <p class="text-slate-300">â€¢ 8 kolon (tÃ¼mÃ¼ kullanÄ±lÄ±yor)</p>
                        <p class="text-slate-300">â€¢ Minimal yapÄ± (title, slug, media_id)</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Ã–neriler -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-green-400">âœ… Temizleme Ã–nerileri</h2>

            <div class="space-y-6">
                <!-- Ã–ncelik 1: Kolonlar -->
                <div class="bg-slate-800/50 border-l-4 border-green-500 rounded-lg p-6">
                    <div class="flex items-start gap-4">
                        <div class="bg-green-500 text-white font-bold rounded-full w-10 h-10 flex items-center justify-center flex-shrink-0">1</div>
                        <div>
                            <h3 class="text-xl font-bold text-green-300 mb-2">
                                Gereksiz KolonlarÄ± Sil
                                <span class="ml-3 px-3 py-1 bg-red-600 text-white text-xs rounded-full">YÃ¼ksek Ã–ncelik</span>
                            </h3>
                            <div class="space-y-2 text-slate-300">
                                <p><span class="text-yellow-300 font-semibold">Kesin Silinecekler:</span></p>
                                <ul class="list-disc list-inside ml-4 text-sm">
                                    <li><code class="bg-slate-700 px-2 py-1 rounded">bitrate</code> - NULL (hiÃ§ kullanÄ±lmamÄ±ÅŸ)</li>
                                    <li><code class="bg-slate-700 px-2 py-1 rounded">metadata</code> - NULL (hiÃ§ kullanÄ±lmamÄ±ÅŸ)</li>
                                </ul>
                                <p class="mt-4"><span class="text-yellow-300 font-semibold">ÅartlÄ± Silinecekler (Encryption):</span></p>
                                <ul class="list-disc list-inside ml-4 text-sm">
                                    <li><code class="bg-slate-700 px-2 py-1 rounded">encryption_key</code> - NULL (sistem yarÄ±da bÄ±rakÄ±lmÄ±ÅŸ)</li>
                                    <li><code class="bg-slate-700 px-2 py-1 rounded">encryption_iv</code> - Dolu ama key olmadan iÅŸlevsiz</li>
                                    <li><code class="bg-slate-700 px-2 py-1 rounded">is_encrypted</code> - YanÄ±ltÄ±cÄ± (gerÃ§ekte encrypt yok)</li>
                                </ul>
                                <p class="mt-4"><span class="text-yellow-300 font-semibold">Ä°steÄŸe BaÄŸlÄ±:</span></p>
                                <ul class="list-disc list-inside ml-4 text-sm">
                                    <li><code class="bg-slate-700 px-2 py-1 rounded">hls_converted_at</code> - Timestamp gerekliyse koru</li>
                                </ul>
                                <p class="mt-4 text-green-400 font-semibold">Beklenen KazanÃ§: ~20% tablo boyutu azalmasÄ±</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ã–ncelik 2: Ä°ndexler -->
                <div class="bg-slate-800/50 border-l-4 border-yellow-500 rounded-lg p-6">
                    <div class="flex items-start gap-4">
                        <div class="bg-yellow-500 text-white font-bold rounded-full w-10 h-10 flex items-center justify-center flex-shrink-0">2</div>
                        <div>
                            <h3 class="text-xl font-bold text-yellow-300 mb-2">
                                Yedekli Ä°ndexleri Sil
                                <span class="ml-3 px-3 py-1 bg-yellow-600 text-white text-xs rounded-full">Orta Ã–ncelik</span>
                            </h3>
                            <div class="space-y-2 text-slate-300">
                                <p><span class="text-yellow-300 font-semibold">Composite tarafÄ±ndan karÅŸÄ±lanan tekli indexler:</span></p>
                                <ul class="list-disc list-inside ml-4 text-sm">
                                    <li><code class="bg-slate-700 px-2 py-1 rounded">is_active</code></li>
                                    <li><code class="bg-slate-700 px-2 py-1 rounded">is_featured</code></li>
                                    <li><code class="bg-slate-700 px-2 py-1 rounded">play_count</code></li>
                                    <li><code class="bg-slate-700 px-2 py-1 rounded">created_at</code></li>
                                    <li><code class="bg-slate-700 px-2 py-1 rounded">deleted_at</code></li>
                                </ul>
                                <p class="mt-4"><span class="text-yellow-300 font-semibold">HiÃ§ kullanÄ±lmayan indexler:</span></p>
                                <ul class="list-disc list-inside ml-4 text-sm">
                                    <li><code class="bg-slate-700 px-2 py-1 rounded">updated_at</code></li>
                                    <li><code class="bg-slate-700 px-2 py-1 rounded">duration</code></li>
                                    <li><code class="bg-slate-700 px-2 py-1 rounded">hls_converted</code></li>
                                </ul>
                                <p class="mt-4 text-green-400 font-semibold">Beklenen KazanÃ§: ~15% index boyutu azalmasÄ±, INSERT/UPDATE hÄ±zlanmasÄ±</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ã–ncelik 3: Encryption KararÄ± -->
                <div class="bg-slate-800/50 border-l-4 border-blue-500 rounded-lg p-6">
                    <div class="flex items-start gap-4">
                        <div class="bg-blue-500 text-white font-bold rounded-full w-10 h-10 flex items-center justify-center flex-shrink-0">3</div>
                        <div>
                            <h3 class="text-xl font-bold text-blue-300 mb-2">
                                Encryption Sistemini DÃ¼zelt veya KaldÄ±r
                                <span class="ml-3 px-3 py-1 bg-blue-600 text-white text-xs rounded-full">Strateji KararÄ±</span>
                            </h3>
                            <div class="space-y-3 text-slate-300">
                                <p class="text-red-400 font-semibold">ğŸš¨ Mevcut Durum: YarÄ±da bÄ±rakÄ±lmÄ±ÅŸ encryption sistemi!</p>
                                <p class="mt-3"><span class="text-yellow-300 font-semibold">SeÃ§enek A - Encryption Sistemini Tamamla:</span></p>
                                <ul class="list-disc list-inside ml-4 text-sm">
                                    <li>Her ÅŸarkÄ± iÃ§in encryption_key Ã¼ret</li>
                                    <li>HLS chunk'larÄ± gerÃ§ekten ÅŸifrele (AES-128)</li>
                                    <li>Key dosyalarÄ±nÄ± gÃ¼venli konumda sakla</li>
                                    <li>Token-based key delivery API'si oluÅŸtur</li>
                                </ul>
                                <p class="mt-3"><span class="text-yellow-300 font-semibold">SeÃ§enek B - Encryption Sistemini KaldÄ±r:</span></p>
                                <ul class="list-disc list-inside ml-4 text-sm">
                                    <li>encryption_key, encryption_iv, is_encrypted kolonlarÄ±nÄ± sil</li>
                                    <li>ConvertToHLSJob iÃ§inden encryption kodunu kaldÄ±r</li>
                                    <li>HLS chunk'larÄ±nÄ± plain (ÅŸifresiz) oluÅŸtur</li>
                                    <li>Token-based URL yeterli koruma saÄŸlÄ±yor</li>
                                </ul>
                                <p class="mt-3 text-blue-400 font-semibold">ğŸ’¡ Ã–neri: SeÃ§enek B (KaldÄ±r)</p>
                                <p class="text-sm text-slate-400">Token-based chunk URL sistemi zaten Ã§alÄ±ÅŸÄ±yor ve yeterli koruma saÄŸlÄ±yor. Encryption ek karmaÅŸÄ±klÄ±k yaratÄ±yor.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Performans Etkisi -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-orange-400">âš¡ Beklenen Performans Ä°yileÅŸtirmeleri</h2>

            <div class="grid md:grid-cols-3 gap-6">
                <div class="bg-gradient-to-br from-green-900/40 to-green-800/40 border border-green-500/30 rounded-lg p-6">
                    <div class="text-4xl font-bold text-green-300 mb-2">~25%</div>
                    <div class="text-slate-300 text-sm mb-4">Tablo Boyutu AzalmasÄ±</div>
                    <p class="text-xs text-slate-400">6 kolon + gereksiz indexler kaldÄ±rÄ±lÄ±nca</p>
                </div>

                <div class="bg-gradient-to-br from-blue-900/40 to-blue-800/40 border border-blue-500/30 rounded-lg p-6">
                    <div class="text-4xl font-bold text-blue-300 mb-2">~15%</div>
                    <div class="text-slate-300 text-sm mb-4">INSERT HÄ±zlanmasÄ±</div>
                    <p class="text-xs text-slate-400">Her INSERT'ta 8-10 index gÃ¼ncellenmeyecek</p>
                </div>

                <div class="bg-gradient-to-br from-purple-900/40 to-purple-800/40 border border-purple-500/30 rounded-lg p-6">
                    <div class="text-4xl font-bold text-purple-300 mb-2">~10%</div>
                    <div class="text-slate-300 text-sm mb-4">SELECT HÄ±zlanmasÄ±</div>
                    <p class="text-xs text-slate-400">Query planner daha az index deÄŸerlendirecek</p>
                </div>
            </div>

            <div class="mt-8 bg-blue-900/20 border border-blue-500/30 rounded-lg p-6">
                <h3 class="text-lg font-bold text-blue-300 mb-3">ğŸ’¡ Index Optimizasyonu MantÄ±ÄŸÄ±</h3>
                <div class="space-y-2 text-sm text-slate-300">
                    <p><span class="text-yellow-300 font-semibold">Leftmost Prefix Rule:</span> Composite index sola hizalÄ± prefix kuralÄ± ile Ã§alÄ±ÅŸÄ±r.</p>
                    <p class="mt-2"><code class="bg-slate-700 px-2 py-1 rounded">INDEX(A, B, C)</code> bu sorgularÄ± karÅŸÄ±lar:</p>
                    <ul class="list-disc list-inside ml-4 mt-1">
                        <li>WHERE A</li>
                        <li>WHERE A AND B</li>
                        <li>WHERE A AND B AND C</li>
                    </ul>
                    <p class="mt-3 text-green-300">âœ Tekli <code class="bg-slate-700 px-2 py-1 rounded">INDEX(A)</code> GEREKSIZ!</p>
                    <p class="mt-3"><span class="text-yellow-300 font-semibold">Composite Index AvantajlarÄ±:</span></p>
                    <ul class="list-disc list-inside ml-4 mt-1">
                        <li>Daha az index = Daha az disk kullanÄ±mÄ±</li>
                        <li>Daha az index = Daha hÄ±zlÄ± INSERT/UPDATE/DELETE</li>
                        <li>Query planner daha hÄ±zlÄ± karar verir</li>
                        <li>Index maintenance maliyeti azalÄ±r</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Risk Analizi -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-red-400">âš ï¸ Risk Analizi</h2>

            <div class="space-y-4">
                <div class="bg-green-900/20 border border-green-500/30 rounded-lg p-6">
                    <h3 class="text-lg font-bold text-green-300 mb-3">âœ… DÃ¼ÅŸÃ¼k Riskli</h3>
                    <ul class="list-disc list-inside text-slate-300 text-sm space-y-1">
                        <li><code class="bg-slate-700 px-2 py-1 rounded">bitrate</code> - HiÃ§ kullanÄ±lmÄ±yor (NULL)</li>
                        <li><code class="bg-slate-700 px-2 py-1 rounded">metadata</code> - HiÃ§ kullanÄ±lmÄ±yor (NULL)</li>
                        <li>Tekli indexler - Composite karÅŸÄ±lÄ±yor</li>
                    </ul>
                </div>

                <div class="bg-yellow-900/20 border border-yellow-500/30 rounded-lg p-6">
                    <h3 class="text-lg font-bold text-yellow-300 mb-3">âš ï¸ Orta Riskli</h3>
                    <ul class="list-disc list-inside text-slate-300 text-sm space-y-1">
                        <li><code class="bg-slate-700 px-2 py-1 rounded">hls_converted_at</code> - Audit log ise gerekli olabilir</li>
                        <li>Foreign key indexleri - Constraint kontrol edilmeli</li>
                    </ul>
                </div>

                <div class="bg-red-900/20 border border-red-500/30 rounded-lg p-6">
                    <h3 class="text-lg font-bold text-red-300 mb-3">ğŸš¨ YÃ¼ksek Riskli (Strateji KararÄ± Gerekli)</h3>
                    <ul class="list-disc list-inside text-slate-300 text-sm space-y-1">
                        <li>Encryption sistemi - Tamamlanacak mÄ±, kaldÄ±rÄ±lacak mÄ±?</li>
                        <li><code class="bg-slate-700 px-2 py-1 rounded">encryption_key</code>, <code class="bg-slate-700 px-2 py-1 rounded">encryption_iv</code>, <code class="bg-slate-700 px-2 py-1 rounded">is_encrypted</code></li>
                        <li>Karar vermeden silme!</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- SonuÃ§ -->
        <section class="mb-16">
            <div class="bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-8">
                <h2 class="text-3xl font-bold mb-4 text-white">ğŸ¯ SonuÃ§ & Ã–neri</h2>
                <div class="space-y-3 text-white/90">
                    <p class="text-lg">âœ… <strong>muzibu_songs</strong> tablosunda 6 gereksiz kolon ve 8-10 yedekli index tespit edildi</p>
                    <p class="text-lg">âœ… DiÄŸer Muzibu tablolarÄ± <strong>temiz</strong> durumda</p>
                    <p class="text-lg">âš¡ Temizleme sonrasÄ± beklenen performans artÄ±ÅŸÄ±: <strong>~25%</strong></p>
                    <p class="text-lg">ğŸš¨ Encryption sistemine <strong>strateji kararÄ±</strong> gerekli (Tamamla veya KaldÄ±r)</p>
                    <p class="text-lg font-bold mt-4">ğŸ’¡ Ã–ncelikli adÄ±m: <span class="text-yellow-300">bitrate & metadata kolonlarÄ±nÄ± sil</span></p>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="mt-20 pt-8 border-t border-slate-700 text-center text-slate-500 text-sm">
            <p>ğŸ¤– Claude AI tarafÄ±ndan oluÅŸturuldu - Tailwind CSS</p>
            <p class="mt-2">ğŸ“Š Analiz: tenant_muzibu_1528d0 (113 aktif ÅŸarkÄ±)</p>
        </footer>
    </div>
</body>
</html>
