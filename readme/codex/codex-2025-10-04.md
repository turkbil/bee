# Announcement â€“ Page â€“ Portfolio Master Pattern Raporu

HazÄ±rlayan: Codex â€¢ Tarih: 04.10.2025

---

## 1. YÃ¶netiÅŸim Ã–zeti
- ÃœÃ§ modÃ¼l de repository â†’ service â†’ Livewire zinciriyle ilerliyor; AI iÃ§erik Ã¼retimi, SEO sekmesi ve medya yÃ¶neticisi aynÄ± bileÅŸenleri paylaÅŸÄ±yor.
- Page modÃ¼lÃ¼ â€œgeliÅŸmiÅŸâ€ varyant (homepage mantÄ±ÄŸÄ± + CSS/JS editÃ¶rÃ¼); Announcement medya/duyuru senaryolarÄ±nÄ±, Portfolio ise kategori bazlÄ± vitrin akÄ±ÅŸlarÄ±nÄ± hedefliyor.
- Portfolioâ€™daki iliÅŸki ve servis dÃ¶nÃ¼ÅŸ bugâ€™larÄ± Ã§Ã¶zÃ¼lmeden bu patternâ€™i Ã§oÄŸaltmak riskli; ana referans dosyasÄ± olarak Page + Announcement ikilisi tercih edilmeli.

---

## 2. ModÃ¼l FotoÄŸrafÄ±

| ModÃ¼l | YÃ¶netim Formu | Medya & Tema | SEO / Slug DavranÄ±ÅŸÄ± | Ã–ne Ã‡Ä±kan Nokta |
|-------|----------------|---------------|----------------------|-----------------|
| **Page** | Ä°Ã§erik + AI + CSS/JS sekmeleri, homepage toggle, gÃ¼venlikli sanitizer | Opsiyonel medya; iÃ§erik iÃ§i gÃ¶rseller | Locale-aware slug, canonical redirect, homepage yÃ¶nlendirmesi | â€œAna patternâ€ ÅŸablonu; tÃ¼m varyantlar iÃ§in en gÃ¼venli temel |
| **Announcement** | Ä°Ã§erik + AI + medya + SEO; sade `is_active` akÄ±ÅŸÄ± | `featured_image` + `gallery`, otomatik medya tetikleme | Locale-aware slug + fallback; API uÃ§larÄ±yla uyumlu | Medya aÄŸÄ±rlÄ±klÄ± iÃ§erik modÃ¼lleri iÃ§in hazÄ±r blueprint |
| **Portfolio** | Ä°Ã§erik + AI + medya + kategori seÃ§imi (bugâ€™lÄ±) | `featured_image` + `gallery`, drag-drop | Locale-aware slug; kategori bazlÄ± routing | Kategori hiyerarÅŸisi gÃ¼Ã§lÃ¼ fakat bugâ€™lar nedeniyle stabil deÄŸil |

---

## 3. GÃ¼Ã§lÃ¼ Noktalar
1. **Tekil Kod KalÄ±plarÄ±** â€“ Slug Ã¼retimi, SEO fallbackâ€™leri, cache temizliÄŸi service katmanÄ±na alÄ±nmÄ±ÅŸ; yeni modÃ¼llerde tekrar kullanÄ±labilir.
2. **BirleÅŸik Admin Deneyimi** â€“ Dil switcher, tab sistemi, toast/AI eventleri aynÄ± ÅŸekilde Ã§alÄ±ÅŸÄ±yor; kullanÄ±cÄ± eÄŸitimi kolay.
3. **Tema & SEO Entegrasyonu** â€“ Front controllerâ€™lar tema fallback, canonical redirect ve locale fallbackâ€™leri kapsÄ±yor.

---

## 4. Kritik Riskler

| ID | BaÅŸlÄ±k | Risk | Etki | Konum | YapÄ±lmasÄ± Gereken |
|----|--------|------|------|-------|-------------------|
| **K1** | Kategori iliÅŸkisi persist edilmiyor | YÃ¼ksek | PortfÃ¶y kayÄ±tlarÄ± kategorisiz kalÄ±yor, listeler bozuluyor | `Modules/Portfolio/app/Http/Livewire/Admin/PortfolioManageComponent.php:216, 423` | Form yÃ¼kleme + kaydetme aÅŸamasÄ±nda `inputs['category_id']` â†’ `portfolio_category_id` eÅŸlemesini yapÄ±n, mevcut veriyi migrate edin. |
| **K2** | Servisâ€“bileÅŸen dÃ¶nÃ¼ÅŸ uyumsuzluÄŸu | YÃ¼ksek | Kategori CRUD Livewireâ€™da hata veriyor | `PortfolioCategoryComponent.php:197`, `PortfolioCategoryService.php:60`, `PortfolioCategoryManageComponent.php:257` | Servis cevaplarÄ±nÄ± tek tip DTO/array haline getirin veya bileÅŸenleri modele gÃ¶re revize edin. |
| **K3** | YanlÄ±ÅŸ enum baÄŸÄ±mlÄ±lÄ±ÄŸÄ± | Orta | Portfolio Page modÃ¼lÃ¼ne baÄŸÄ±mlÄ±; olasÄ± enum deÄŸiÅŸikliÄŸinde kÄ±rÄ±lÄ±r | `Modules/Portfolio/app/Repositories/PortfolioCategoryRepository.php:14` | Portfolio modÃ¼lÃ¼ iÃ§in ayrÄ± `CacheStrategy` enumâ€™u kullanÄ±n. |
| **K4** | Kategori listesi her renderâ€™da sorgulanÄ±yor | DÃ¼ÅŸÃ¼k | BÃ¼yÃ¼k kataloglarda gereksiz DB yÃ¼kÃ¼ oluÅŸur | `Modules/Portfolio/resources/views/admin/livewire/portfolio-manage-component.blade.php:45` | Kategori listesini Livewire tarafÄ±nda cacheâ€™leyin veya eager load + memoization uygulayÄ±n. |

> **Not:** K1 ve K2 Ã§Ã¶zÃ¼lmeden bu pattern baÅŸka modÃ¼llere kopyalanmamalÄ±dÄ±r; aynÄ± hatalar zincirleme Ã¼retilecektir.

---

## 5. Ã–nerilen Yol HaritasÄ±
1. **Portfolio YÃ¶netim Formunu Onarmak**
   - `inputs['category_id']` okumasÄ±nÄ± `mount()` ve `loadPageData()` iÃ§inde set edin.
   - `save()` iÃ§erisinde `portfolio_category_id` alanÄ±nÄ± aÃ§Ä±kÃ§a doldurun.
   - CanlÄ± veriyi SQL scriptâ€™iyle gÃ¼ncelleyip eski kayÄ±tlarÄ± kategoriyle eÅŸleÅŸtirin.
2. **Kategori Servis SÃ¶zleÅŸmesini NetleÅŸtirmek**
   - `PortfolioCategoryService` tÃ¼m CRUD metodlarÄ±ndan tutarlÄ± bir response (Ã¶r. DTO) dÃ¶ndÃ¼rsÃ¼n.
   - Livewire bileÅŸenleri yalnÄ±zca bu sÃ¶zleÅŸmeye gÃ¶re Ã§alÄ±ÅŸsÄ±n; UI hatalarÄ± ortadan kalksÄ±n.
3. **CacheStrategyâ€™yi Dekuple Etmek**
   - Repositoryâ€™de Page enumâ€™una olan baÄŸÄ±mlÄ±lÄ±ÄŸÄ± kaldÄ±rÄ±n; portfÃ¶ye Ã¶zel enum kullanÄ±n.
   - Bu adÄ±m yeni modÃ¼llerin baÄŸÄ±msÄ±zlÄ±ÄŸÄ±nÄ± garantiler.
4. **Admin Patternâ€™ini Belgelerle Desteklemek**
   - Page modÃ¼lÃ¼nden alÄ±nan checklistâ€™i (slug, SEO, medya, AI) reposun READMEâ€™sine ekleyin.
   - Yeni modÃ¼l geliÅŸtirmeye baÅŸlayacak ekipler iÃ§in referans dÃ¶kÃ¼man hazÄ±rlayÄ±n.

---

## 6. Sonraki AdÄ±mlar
- ğŸš§ **K1 + K2 dÃ¼zeltmesi** iÃ§in mini sprint planlayÄ±n; tamamlanmadan yeni modÃ¼l Ã¼retimi ertelenmeli.
- âœ… Page & Announcement kodlarÄ± â€œgolden sourceâ€ olarak etiketlenip referans gÃ¶sterilsin.
- ğŸ“„ Bu raporun bulunduÄŸu dosya (`README/codex/codex-2025-10-04.md`) dÃ¼zenli aralÄ±klarla gÃ¼ncellensin; yeni keÅŸifler eklensin.

Kibarca Ã¶zetlemek gerekirse: Page + Announcement ikilisi Ã¶rnek alÄ±nmaya hazÄ±r; Portfolioâ€™nun bugâ€™larÄ± giderildiÄŸinde Ã¼Ã§lÃ¼ set saÄŸlam bir master pattern oluÅŸturacak.
