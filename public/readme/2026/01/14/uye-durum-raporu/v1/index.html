<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Muzibu √úye Durum Raporu</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-900 text-slate-100 min-h-screen p-8">
    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <div class="bg-gradient-to-r from-blue-600 to-cyan-600 rounded-lg p-6 mb-8 shadow-xl">
            <h1 class="text-3xl font-bold mb-2">üìä Muzibu √úye Durum Raporu</h1>
            <p class="text-blue-100">Detaylƒ± √ºyelik analizi ‚Ä¢ 14 Ocak 2026</p>
        </div>

        <!-- √ñzet ƒ∞statistikler -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <div class="bg-slate-800 rounded-lg p-6 border border-green-500">
                <div class="text-4xl mb-2">‚úÖ</div>
                <div class="text-2xl font-bold text-green-400">403 Aktif √úye</div>
                <div class="text-slate-400 text-sm">√ñdeme yapan kullanƒ±cƒ±lar</div>
            </div>
            <div class="bg-slate-800 rounded-lg p-6 border border-yellow-500">
                <div class="text-4xl mb-2">‚è∞</div>
                <div class="text-2xl font-bold text-yellow-400">1,166 S√ºresi Dolmu≈ü</div>
                <div class="text-slate-400 text-sm">Yenileme bekleyen</div>
            </div>
            <div class="bg-slate-800 rounded-lg p-6 border border-blue-500">
                <div class="text-4xl mb-2">üìà</div>
                <div class="text-2xl font-bold text-blue-400">1,569 Toplam</div>
                <div class="text-slate-400 text-sm">Kayƒ±tlƒ± kullanƒ±cƒ±</div>
            </div>
        </div>

        <!-- Kategoriler -->
        <div class="space-y-4">

            <!-- Yƒ±llƒ±k Aktif -->
            <div class="bg-slate-800 rounded-lg overflow-hidden">
                <div class="bg-green-900/30 border-l-4 border-green-500 p-4 cursor-pointer hover:bg-green-900/40 transition" onclick="toggleTable('yillik-aktif')">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-lg font-bold text-green-400">üü¢ Premium Yƒ±llƒ±k - Aktif (234)</h3>
                            <p class="text-sm text-slate-400">4,000 TL/yƒ±l ‚Ä¢ Aktif √ºyelikler</p>
                        </div>
                        <div class="flex gap-2">
                            <a href="yillik-aktif.json" download onclick="event.stopPropagation()" class="bg-green-600 hover:bg-green-700 px-3 py-1 rounded text-sm">JSON</a>
                            <span id="icon-yillik-aktif" class="text-2xl">‚ñº</span>
                        </div>
                    </div>
                </div>
                <div id="table-yillik-aktif" class="hidden overflow-x-auto">
                    <div class="p-4 bg-slate-900/50">
                        <div class="text-sm text-slate-400 mb-2">Y√ºkleniyor...</div>
                    </div>
                </div>
            </div>

            <!-- Aylƒ±k Aktif -->
            <div class="bg-slate-800 rounded-lg overflow-hidden">
                <div class="bg-green-900/30 border-l-4 border-green-500 p-4 cursor-pointer hover:bg-green-900/40 transition" onclick="toggleTable('aylik-aktif')">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-lg font-bold text-green-400">üü¢ Premium Aylƒ±k - Aktif (89)</h3>
                            <p class="text-sm text-slate-400">600 TL/ay ‚Ä¢ Aktif √ºyelikler</p>
                        </div>
                        <div class="flex gap-2">
                            <a href="aylik-aktif.json" download onclick="event.stopPropagation()" class="bg-green-600 hover:bg-green-700 px-3 py-1 rounded text-sm">JSON</a>
                            <span id="icon-aylik-aktif" class="text-2xl">‚ñº</span>
                        </div>
                    </div>
                </div>
                <div id="table-aylik-aktif" class="hidden overflow-x-auto">
                    <div class="p-4 bg-slate-900/50">
                        <div class="text-sm text-slate-400 mb-2">Y√ºkleniyor...</div>
                    </div>
                </div>
            </div>

            <!-- Deneme Aktif -->
            <div class="bg-slate-800 rounded-lg overflow-hidden">
                <div class="bg-blue-900/30 border-l-4 border-blue-500 p-4 cursor-pointer hover:bg-blue-900/40 transition" onclick="toggleTable('deneme-aktif')">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-lg font-bold text-blue-400">üîµ √úcretsiz Deneme - Aktif (80)</h3>
                            <p class="text-sm text-slate-400">0 TL ‚Ä¢ Aktif deneme √ºyelikleri</p>
                        </div>
                        <div class="flex gap-2">
                            <a href="deneme-aktif.json" download onclick="event.stopPropagation()" class="bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded text-sm">JSON</a>
                            <span id="icon-deneme-aktif" class="text-2xl">‚ñº</span>
                        </div>
                    </div>
                </div>
                <div id="table-deneme-aktif" class="hidden overflow-x-auto">
                    <div class="p-4 bg-slate-900/50">
                        <div class="text-sm text-slate-400 mb-2">Y√ºkleniyor...</div>
                    </div>
                </div>
            </div>

            <!-- √úyelik Biten -->
            <div class="bg-slate-800 rounded-lg overflow-hidden">
                <div class="bg-orange-900/30 border-l-4 border-orange-500 p-4 cursor-pointer hover:bg-orange-900/40 transition" onclick="toggleTable('uyelik-biten')">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-lg font-bold text-orange-400">üü† Premium √úyeliƒüi Biten (51)</h3>
                            <p class="text-sm text-slate-400">Aylƒ±k + Yƒ±llƒ±k ‚Ä¢ S√ºresi dolmu≈ü √ºyelikler</p>
                        </div>
                        <div class="flex gap-2">
                            <a href="uyelik-biten.json" download onclick="event.stopPropagation()" class="bg-orange-600 hover:bg-orange-700 px-3 py-1 rounded text-sm">JSON</a>
                            <span id="icon-uyelik-biten" class="text-2xl">‚ñº</span>
                        </div>
                    </div>
                </div>
                <div id="table-uyelik-biten" class="hidden overflow-x-auto">
                    <div class="p-4 bg-slate-900/50">
                        <div class="text-sm text-slate-400 mb-2">Y√ºkleniyor...</div>
                    </div>
                </div>
            </div>

            <!-- Deneme Biten -->
            <div class="bg-slate-800 rounded-lg overflow-hidden">
                <div class="bg-red-900/30 border-l-4 border-red-500 p-4 cursor-pointer hover:bg-red-900/40 transition" onclick="toggleTable('deneme-biten')">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-lg font-bold text-red-400">üî¥ Deneme S√ºresi Biten (1,115)</h3>
                            <p class="text-sm text-slate-400">Deneme s√ºresi dolmu≈ü kullanƒ±cƒ±lar</p>
                        </div>
                        <div class="flex gap-2">
                            <a href="deneme-biten.json" download onclick="event.stopPropagation()" class="bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-sm">JSON</a>
                            <span id="icon-deneme-biten" class="text-2xl">‚ñº</span>
                        </div>
                    </div>
                </div>
                <div id="table-deneme-biten" class="hidden overflow-x-auto">
                    <div class="p-4 bg-slate-900/50">
                        <div class="text-sm text-slate-400 mb-2">Y√ºkleniyor...</div>
                    </div>
                </div>
            </div>

        </div>

        <!-- Footer -->
        <div class="text-center text-slate-500 text-sm mt-8 pb-4">
            14 Ocak 2026 ‚Ä¢ Muzibu.com.tr
        </div>
    </div>

    <script>
        const loadedTables = {};

        async function toggleTable(category) {
            const tableDiv = document.getElementById(`table-${category}`);
            const icon = document.getElementById(`icon-${category}`);

            if (tableDiv.classList.contains('hidden')) {
                // A√ß
                tableDiv.classList.remove('hidden');
                icon.textContent = '‚ñ≤';

                // ƒ∞lk a√ßƒ±lƒ±≈üta y√ºkle
                if (!loadedTables[category]) {
                    await loadTableData(category);
                    loadedTables[category] = true;
                }
            } else {
                // Kapat
                tableDiv.classList.add('hidden');
                icon.textContent = '‚ñº';
            }
        }

        async function loadTableData(category) {
            const tableDiv = document.getElementById(`table-${category}`);

            try {
                const response = await fetch(`${category}.json`);
                const data = await response.json();

                if (!data || data.length === 0) {
                    tableDiv.innerHTML = '<div class="p-4 text-slate-400">Veri bulunamadƒ±</div>';
                    return;
                }

                // Tablo olu≈ütur
                let html = `
                    <div class="p-4">
                        <div class="mb-2 text-sm text-slate-400">Toplam ${data.length} kayƒ±t</div>
                        <table class="w-full text-sm">
                            <thead class="bg-slate-700 sticky top-0">
                                <tr>
                                    <th class="p-2 text-left">ID</th>
                                    <th class="p-2 text-left">Ad Soyad</th>
                                    <th class="p-2 text-left">Email</th>
                                    <th class="p-2 text-left">Plan</th>
                                    <th class="p-2 text-right">Fiyat</th>
                                    <th class="p-2 text-left">Biti≈ü</th>
                                    <th class="p-2 text-right">Kalan G√ºn</th>
                                    <th class="p-2 text-left">Durum</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-700">
                `;

                data.forEach((row, index) => {
                    const bgClass = index % 2 === 0 ? 'bg-slate-800/50' : 'bg-slate-900/50';
                    const fullName = `${row.name || ''} ${row.surname || ''}`.trim();
                    const daysText = row.days_remaining !== undefined
                        ? `<span class="text-green-400">${row.days_remaining} g√ºn</span>`
                        : row.days_since_expired !== undefined
                        ? `<span class="text-red-400">-${row.days_since_expired} g√ºn</span>`
                        : '-';

                    const statusBadge = row.status === 'active'
                        ? '<span class="px-2 py-1 bg-green-600 rounded text-xs">Aktif</span>'
                        : '<span class="px-2 py-1 bg-red-600 rounded text-xs">Dolmu≈ü</span>';

                    html += `
                        <tr class="${bgClass} hover:bg-slate-700/70">
                            <td class="p-2">${row.user_id}</td>
                            <td class="p-2">${fullName || '-'}</td>
                            <td class="p-2 text-cyan-400">${row.email || '-'}</td>
                            <td class="p-2">${row.subscription_plan || '-'}</td>
                            <td class="p-2 text-right">${row.price ? row.price.toLocaleString('tr-TR') + ' TL' : '-'}</td>
                            <td class="p-2 text-xs">${row.expires_at || '-'}</td>
                            <td class="p-2 text-right">${daysText}</td>
                            <td class="p-2">${statusBadge}</td>
                        </tr>
                    `;
                });

                html += `
                            </tbody>
                        </table>
                    </div>
                `;

                tableDiv.innerHTML = html;

            } catch (error) {
                tableDiv.innerHTML = `<div class="p-4 text-red-400">Hata: ${error.message}</div>`;
            }
        }
    </script>
</body>
</html>
