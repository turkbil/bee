<div x-show="chat?.hasConversation" x-transition:enter="transition-all ease-out duration-400" x-transition:enter-start="opacity-0 translate-y-4" x-transition:enter-end="opacity-100 translate-y-0" x-transition:leave="transition-all ease-in duration-300" x-transition:leave-start="opacity-100 translate-y-0" x-transition:leave-end="opacity-0 translate-y-4" data-ai-chat-messages="" class="flex-1 overflow-y-auto px-6 py-4 space-y-4 bg-gray-50 dark:bg-gray-900">
            
            <template x-for="(msg, index) in (chat?.messages || [])" :key="index">
                <div :class="{
                        'flex justify-end': msg.role === 'user',
                        'flex justify-start': msg.role !== 'user'
                    }">
                    <div :class="{
                            'bg-gradient-to-br from-blue-500 to-blue-600 dark:from-blue-600 dark:to-blue-700': msg.role === 'user',
                            'bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700': msg.role === 'assistant',
                            'bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-300 dark:border-yellow-700': msg.role === 'system',
                            'bg-red-50 dark:bg-red-900/20 border border-red-300 dark:border-red-700': msg.isError
                        }" class="max-w-[80%] rounded-2xl px-4 py-3 shadow-sm">
                        <div :class="{
                                'text-white [&amp;_*]:!text-white': msg.role === 'user',
                                'text-gray-800 dark:text-white dark:[&amp;_*]:!text-white': msg.role === 'assistant',
                                'text-yellow-800 dark:text-white dark:[&amp;_*]:!text-white': msg.role === 'system',
                                'text-red-800 dark:text-white dark:[&amp;_*]:!text-white': msg.isError
                            }" :data-role="msg.role" class="text-sm prose prose-sm max-w-none dark:prose-invert ai-floating-message-content" x-html="window.aiChatRenderMarkdown(msg.content)"></div>
                        <p :class="{
                                'text-white opacity-80': msg.role === 'user',
                                'text-gray-500 dark:text-gray-400': msg.role === 'assistant',
                                'text-yellow-700 dark:text-yellow-300': msg.role === 'system',
                                'text-red-700 dark:text-red-300': msg.isError
                            }" class="text-xs mt-1" x-text="new Date(msg.created_at).toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit' })"></p>
                    </div>
                </div>
            </template><div :class="{
                        'flex justify-end': msg.role === 'user',
                        'flex justify-start': msg.role !== 'user'
                    }" class="flex justify-end">
                    <div :class="{
                            'bg-gradient-to-br from-blue-500 to-blue-600 dark:from-blue-600 dark:to-blue-700': msg.role === 'user',
                            'bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700': msg.role === 'assistant',
                            'bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-300 dark:border-yellow-700': msg.role === 'system',
                            'bg-red-50 dark:bg-red-900/20 border border-red-300 dark:border-red-700': msg.isError
                        }" class="max-w-[80%] rounded-2xl px-4 py-3 shadow-sm bg-gradient-to-br from-blue-500 to-blue-600 dark:from-blue-600 dark:to-blue-700">
                        <div :class="{
                                'text-white [&amp;_*]:!text-white': msg.role === 'user',
                                'text-gray-800 dark:text-white dark:[&amp;_*]:!text-white': msg.role === 'assistant',
                                'text-yellow-800 dark:text-white dark:[&amp;_*]:!text-white': msg.role === 'system',
                                'text-red-800 dark:text-white dark:[&amp;_*]:!text-white': msg.isError
                            }" :data-role="msg.role" class="text-sm prose prose-sm max-w-none dark:prose-invert ai-floating-message-content text-white [&amp;_*]:!text-white" x-html="window.aiChatRenderMarkdown(msg.content)" data-role="user"><p class="mb-3 text-gray-800 dark:text-gray-200 leading-relaxed">merhaba en iyi ürünleriniz nedir</p></div>
                        <p :class="{
                                'text-white opacity-80': msg.role === 'user',
                                'text-gray-500 dark:text-gray-400': msg.role === 'assistant',
                                'text-yellow-700 dark:text-yellow-300': msg.role === 'system',
                                'text-red-700 dark:text-red-300': msg.isError
                            }" class="text-xs mt-1 text-white opacity-80" x-text="new Date(msg.created_at).toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit' })">06:19</p>
                    </div>
                </div><div :class="{
                        'flex justify-end': msg.role === 'user',
                        'flex justify-start': msg.role !== 'user'
                    }" class="flex justify-start">
                    <div :class="{
                            'bg-gradient-to-br from-blue-500 to-blue-600 dark:from-blue-600 dark:to-blue-700': msg.role === 'user',
                            'bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700': msg.role === 'assistant',
                            'bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-300 dark:border-yellow-700': msg.role === 'system',
                            'bg-red-50 dark:bg-red-900/20 border border-red-300 dark:border-red-700': msg.isError
                        }" class="max-w-[80%] rounded-2xl px-4 py-3 shadow-sm bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700">
                        <div :class="{
                                'text-white [&amp;_*]:!text-white': msg.role === 'user',
                                'text-gray-800 dark:text-white dark:[&amp;_*]:!text-white': msg.role === 'assistant',
                                'text-yellow-800 dark:text-white dark:[&amp;_*]:!text-white': msg.role === 'system',
                                'text-red-800 dark:text-white dark:[&amp;_*]:!text-white': msg.isError
                            }" :data-role="msg.role" class="text-sm prose prose-sm max-w-none dark:prose-invert ai-floating-message-content text-gray-800 dark:text-white dark:[&amp;_*]:!text-white" x-html="window.aiChatRenderMarkdown(msg.content)" data-role="assistant"><p class="mb-3 text-gray-800 dark:text-gray-200 leading-relaxed">Merhaba! Size nasıl yardımcı olabilirim? 😊</p></div>
                        <p :class="{
                                'text-white opacity-80': msg.role === 'user',
                                'text-gray-500 dark:text-gray-400': msg.role === 'assistant',
                                'text-yellow-700 dark:text-yellow-300': msg.role === 'system',
                                'text-red-700 dark:text-red-300': msg.isError
                            }" class="text-xs mt-1 text-gray-500 dark:text-gray-400" x-text="new Date(msg.created_at).toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit' })">06:20</p>
                    </div>
                </div><div :class="{
                        'flex justify-end': msg.role === 'user',
                        'flex justify-start': msg.role !== 'user'
                    }" class="flex justify-end">
                    <div :class="{
                            'bg-gradient-to-br from-blue-500 to-blue-600 dark:from-blue-600 dark:to-blue-700': msg.role === 'user',
                            'bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700': msg.role === 'assistant',
                            'bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-300 dark:border-yellow-700': msg.role === 'system',
                            'bg-red-50 dark:bg-red-900/20 border border-red-300 dark:border-red-700': msg.isError
                        }" class="max-w-[80%] rounded-2xl px-4 py-3 shadow-sm bg-gradient-to-br from-blue-500 to-blue-600 dark:from-blue-600 dark:to-blue-700">
                        <div :class="{
                                'text-white [&amp;_*]:!text-white': msg.role === 'user',
                                'text-gray-800 dark:text-white dark:[&amp;_*]:!text-white': msg.role === 'assistant',
                                'text-yellow-800 dark:text-white dark:[&amp;_*]:!text-white': msg.role === 'system',
                                'text-red-800 dark:text-white dark:[&amp;_*]:!text-white': msg.isError
                            }" :data-role="msg.role" class="text-sm prose prose-sm max-w-none dark:prose-invert ai-floating-message-content text-white [&amp;_*]:!text-white" x-html="window.aiChatRenderMarkdown(msg.content)" data-role="user"><p class="mb-3 text-gray-800 dark:text-gray-200 leading-relaxed">en iyi ürünleriniz nedir</p></div>
                        <p :class="{
                                'text-white opacity-80': msg.role === 'user',
                                'text-gray-500 dark:text-gray-400': msg.role === 'assistant',
                                'text-yellow-700 dark:text-yellow-300': msg.role === 'system',
                                'text-red-700 dark:text-red-300': msg.isError
                            }" class="text-xs mt-1 text-white opacity-80" x-text="new Date(msg.created_at).toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit' })">06:20</p>
                    </div>
                </div><div :class="{
                        'flex justify-end': msg.role === 'user',
                        'flex justify-start': msg.role !== 'user'
                    }" class="flex justify-start">
                    <div :class="{
                            'bg-gradient-to-br from-blue-500 to-blue-600 dark:from-blue-600 dark:to-blue-700': msg.role === 'user',
                            'bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700': msg.role === 'assistant',
                            'bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-300 dark:border-yellow-700': msg.role === 'system',
                            'bg-red-50 dark:bg-red-900/20 border border-red-300 dark:border-red-700': msg.isError
                        }" class="max-w-[80%] rounded-2xl px-4 py-3 shadow-sm bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700">
                        <div :class="{
                                'text-white [&amp;_*]:!text-white': msg.role === 'user',
                                'text-gray-800 dark:text-white dark:[&amp;_*]:!text-white': msg.role === 'assistant',
                                'text-yellow-800 dark:text-white dark:[&amp;_*]:!text-white': msg.role === 'system',
                                'text-red-800 dark:text-white dark:[&amp;_*]:!text-white': msg.isError
                            }" :data-role="msg.role" class="text-sm prose prose-sm max-w-none dark:prose-invert ai-floating-message-content text-gray-800 dark:text-white dark:[&amp;_*]:!text-white" x-html="window.aiChatRenderMarkdown(msg.content)" data-role="assistant">Tabii, size en uygun ürünleri önererek yardımcı olabilirim! 😊 Hangi kategoride bir ürün arıyorsunuz?<ul class="space-y-0.5 my-1 list-none">
<li class="text-gray-800 dark:text-gray-200 leading-snug">Transpalet</li>
<li class="text-gray-800 dark:text-gray-200 leading-snug">Forklift</li>
<li class="text-gray-800 dark:text-gray-200 leading-snug">İstif Makinesi Hangi özelliklere ihtiyacınız var? (Kapasite, kullanım alanı gibi)</li>
</ul></div>
                        <p :class="{
                                'text-white opacity-80': msg.role === 'user',
                                'text-gray-500 dark:text-gray-400': msg.role === 'assistant',
                                'text-yellow-700 dark:text-yellow-300': msg.role === 'system',
                                'text-red-700 dark:text-red-300': msg.isError
                            }" class="text-xs mt-1 text-gray-500 dark:text-gray-400" x-text="new Date(msg.created_at).toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit' })">06:20</p>
                    </div>
                </div><div :class="{
                        'flex justify-end': msg.role === 'user',
                        'flex justify-start': msg.role !== 'user'
                    }" class="flex justify-end">
                    <div :class="{
                            'bg-gradient-to-br from-blue-500 to-blue-600 dark:from-blue-600 dark:to-blue-700': msg.role === 'user',
                            'bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700': msg.role === 'assistant',
                            'bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-300 dark:border-yellow-700': msg.role === 'system',
                            'bg-red-50 dark:bg-red-900/20 border border-red-300 dark:border-red-700': msg.isError
                        }" class="max-w-[80%] rounded-2xl px-4 py-3 shadow-sm bg-gradient-to-br from-blue-500 to-blue-600 dark:from-blue-600 dark:to-blue-700">
                        <div :class="{
                                'text-white [&amp;_*]:!text-white': msg.role === 'user',
                                'text-gray-800 dark:text-white dark:[&amp;_*]:!text-white': msg.role === 'assistant',
                                'text-yellow-800 dark:text-white dark:[&amp;_*]:!text-white': msg.role === 'system',
                                'text-red-800 dark:text-white dark:[&amp;_*]:!text-white': msg.isError
                            }" :data-role="msg.role" class="text-sm prose prose-sm max-w-none dark:prose-invert ai-floating-message-content text-white [&amp;_*]:!text-white" x-html="window.aiChatRenderMarkdown(msg.content)" data-role="user"><p class="mb-3 text-gray-800 dark:text-gray-200 leading-relaxed">transpalet</p></div>
                        <p :class="{
                                'text-white opacity-80': msg.role === 'user',
                                'text-gray-500 dark:text-gray-400': msg.role === 'assistant',
                                'text-yellow-700 dark:text-yellow-300': msg.role === 'system',
                                'text-red-700 dark:text-red-300': msg.isError
                            }" class="text-xs mt-1 text-white opacity-80" x-text="new Date(msg.created_at).toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit' })">06:20</p>
                    </div>
                </div><div :class="{
                        'flex justify-end': msg.role === 'user',
                        'flex justify-start': msg.role !== 'user'
                    }" class="flex justify-start">
                    <div :class="{
                            'bg-gradient-to-br from-blue-500 to-blue-600 dark:from-blue-600 dark:to-blue-700': msg.role === 'user',
                            'bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700': msg.role === 'assistant',
                            'bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-300 dark:border-yellow-700': msg.role === 'system',
                            'bg-red-50 dark:bg-red-900/20 border border-red-300 dark:border-red-700': msg.isError
                        }" class="max-w-[80%] rounded-2xl px-4 py-3 shadow-sm bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700">
                        <div :class="{
                                'text-white [&amp;_*]:!text-white': msg.role === 'user',
                                'text-gray-800 dark:text-white dark:[&amp;_*]:!text-white': msg.role === 'assistant',
                                'text-yellow-800 dark:text-white dark:[&amp;_*]:!text-white': msg.role === 'system',
                                'text-red-800 dark:text-white dark:[&amp;_*]:!text-white': msg.isError
                            }" :data-role="msg.role" class="text-sm prose prose-sm max-w-none dark:prose-invert ai-floating-message-content text-gray-800 dark:text-white dark:[&amp;_*]:!text-white" x-html="window.aiChatRenderMarkdown(msg.content)" data-role="assistant">Tabii, transpalet seçeneklerimizi göstereyim: 😊 ⭐ <a href="/shop/ixtif-epl153-15-ton-li-ion-elektrikli-transpalet" target="_blank" rel="noopener noreferrer" class="ai-product-link"><strong class="font-bold text-gray-900 dark:text-white">İXTİF EPL153</strong></a><ul class="space-y-0.5 my-1 list-none"><a href="/shop/ixtif-epl153-15-ton-li-ion-elektrikli-transpalet" target="_blank" rel="noopener noreferrer" class="ai-product-link"><strong class="font-bold text-gray-900 dark:text-white">
</strong></a><li class="text-gray-800 dark:text-gray-200 leading-snug"><a href="/shop/ixtif-epl153-15-ton-li-ion-elektrikli-transpalet" target="_blank" rel="noopener noreferrer" class="ai-product-link"><strong class="font-bold text-gray-900 dark:text-white">1.5 Ton Li-Ion Elektrikli Transpalet</strong></a></li>
<li class="text-gray-800 dark:text-gray-200 leading-snug">150 kg kapasiteli</li>
<li class="text-gray-800 dark:text-gray-200 leading-snug">24V 20Ah çıkarılabilir Li-Ion batarya</li>
<li class="text-gray-800 dark:text-gray-200 leading-snug">600 mm yük merkezi ile kompakt gövde ⭐ <a href="/shop/ixtif-epl154-15-ton-li-ion-palet-transpaleti" target="_blank" rel="noopener noreferrer" class="ai-product-link"><strong class="font-bold text-gray-900 dark:text-white">İXTİF EPL154</strong></a></li><a href="/shop/ixtif-epl154-15-ton-li-ion-palet-transpaleti" target="_blank" rel="noopener noreferrer" class="ai-product-link"><strong class="font-bold text-gray-900 dark:text-white">
</strong></a><li class="text-gray-800 dark:text-gray-200 leading-snug"><a href="/shop/ixtif-epl154-15-ton-li-ion-palet-transpaleti" target="_blank" rel="noopener noreferrer" class="ai-product-link"><strong class="font-bold text-gray-900 dark:text-white">1.5 Ton Li-Ion Palet Transpaleti</strong></a></li>
<li class="text-gray-800 dark:text-gray-200 leading-snug">1.5 ton kapasiteli</li>
<li class="text-gray-800 dark:text-gray-200 leading-snug">24V-30Ah çıkarılabilir Li-Ion batarya</li>
<li class="text-gray-800 dark:text-gray-200 leading-snug">160 kg servis ağırlığı ve entegre şarj cihazı ⭐ <a href="/shop/ixtif-ept20-15et2h-685-mm-genis-palet-catali-115-mm" target="_blank" rel="noopener noreferrer" class="ai-product-link"><strong class="font-bold text-gray-900 dark:text-white">İXTİF EPT20-15ET2H</strong></a></li><a href="/shop/ixtif-ept20-15et2h-685-mm-genis-palet-catali-115-mm" target="_blank" rel="noopener noreferrer" class="ai-product-link"><strong class="font-bold text-gray-900 dark:text-white">
</strong></a><li class="text-gray-800 dark:text-gray-200 leading-snug"><a href="/shop/ixtif-ept20-15et2h-685-mm-genis-palet-catali-115-mm" target="_blank" rel="noopener noreferrer" class="ai-product-link"><strong class="font-bold text-gray-900 dark:text-white">685 mm Geniş Palet Çatalı (115 mm)</strong></a></li>
<li class="text-gray-800 dark:text-gray-200 leading-snug">685 mm çatallar, 100×120 paletlerde yanal denge sağlar</li>
<li class="text-gray-800 dark:text-gray-200 leading-snug">115 mm uzunlukla ağır yüklerde stabilite Bu ürünler hakkında daha fazla bilgi almak veya fiyat teklifi için iletişime geçmek isterseniz, yardımcı olabilirim! Hangi özellikleri arıyorsunuz?</li>
</ul></div>
                        <p :class="{
                                'text-white opacity-80': msg.role === 'user',
                                'text-gray-500 dark:text-gray-400': msg.role === 'assistant',
                                'text-yellow-700 dark:text-yellow-300': msg.role === 'system',
                                'text-red-700 dark:text-red-300': msg.isError
                            }" class="text-xs mt-1 text-gray-500 dark:text-gray-400" x-text="new Date(msg.created_at).toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit' })">06:20</p>
                    </div>
                </div>

            
            <div x-show="chat?.isTyping" class="flex justify-start" style="display: none;">
                <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl px-4 py-3 shadow-sm">
                    <div class="flex gap-1">
                        <span class="w-2 h-2 bg-gray-400 dark:bg-gray-500 rounded-full animate-bounce" style="animation-delay: 0ms"></span>
                        <span class="w-2 h-2 bg-gray-400 dark:bg-gray-500 rounded-full animate-bounce" style="animation-delay: 150ms"></span>
                        <span class="w-2 h-2 bg-gray-400 dark:bg-gray-500 rounded-full animate-bounce" style="animation-delay: 300ms"></span>
                    </div>
                </div>
            </div>
        </div>