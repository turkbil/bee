<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trial Sistemi - Tam YÃ¶netim KÄ±lavuzu</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #e2e8f0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            line-height: 1.7;
            padding: 40px 20px;
        }
        .container { max-width: 1000px; margin: 0 auto; }
        
        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 30px;
            text-align: center;
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .section {
            background: rgba(30, 41, 59, 0.5);
            padding: 30px;
            border-radius: 16px;
            margin-bottom: 30px;
            border-left: 5px solid #3b82f6;
        }
        
        h2 {
            font-size: 1.6rem;
            color: #60a5fa;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        h3 {
            font-size: 1.3rem;
            color: #fbbf24;
            margin: 25px 0 15px 0;
        }
        
        .step-box {
            background: rgba(15, 23, 42, 0.6);
            padding: 20px;
            border-radius: 12px;
            margin: 15px 0;
            border-left: 4px solid #10b981;
        }
        
        .step-box h4 {
            color: #10b981;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .info-box {
            background: rgba(59, 130, 246, 0.15);
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            border-left: 4px solid #3b82f6;
        }
        
        .warning-box {
            background: rgba(251, 191, 36, 0.15);
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            border-left: 4px solid #fbbf24;
        }
        
        .warning-box strong { color: #fbbf24; }
        
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .comp-card {
            background: rgba(15, 23, 42, 0.8);
            padding: 20px;
            border-radius: 12px;
            border-top: 3px solid;
        }
        
        .comp-card.option1 { border-color: #f59e0b; }
        .comp-card.option2 { border-color: #10b981; }
        
        .comp-card h4 {
            margin-bottom: 15px;
            font-size: 1.2rem;
        }
        
        ul { padding-left: 25px; margin: 15px 0; }
        li { margin: 10px 0; color: #cbd5e1; }
        
        .winner {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(16, 185, 129, 0.1));
            padding: 20px;
            border-radius: 12px;
            border: 3px solid #10b981;
            text-align: center;
            margin: 20px 0;
        }
        
        .winner h4 {
            color: #10b981;
            font-size: 1.3rem;
            margin-bottom: 10px;
        }
        
        .flow {
            background: rgba(15, 23, 42, 0.6);
            padding: 15px 20px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 3px solid #3b82f6;
        }
        
        .flow strong { color: #60a5fa; display: block; margin-bottom: 5px; }
        
        code {
            background: rgba(15, 23, 42, 0.8);
            padding: 2px 8px;
            border-radius: 4px;
            color: #fbbf24;
            font-family: 'Monaco', monospace;
            font-size: 0.9rem;
        }
        
        footer {
            text-align: center;
            margin-top: 50px;
            color: #64748b;
            font-size: 0.85rem;
        }
        
        @media (max-width: 768px) {
            h1 { font-size: 1.8rem; }
            .comparison { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ Trial Sistemi - Tam YÃ¶netim KÄ±lavuzu</h1>

        <!-- Soru 1: Trial PlanÄ±nÄ± Kim OluÅŸturacak? -->
        <div class="section">
            <h2>â“ Trial PlanÄ±nÄ± Kim OluÅŸturacak?</h2>
            
            <div class="step-box">
                <h4>Cevap: Admin Panelden Manuel OluÅŸturulacak</h4>
                <p>Trial planÄ± <strong>normal bir subscription plan gibi</strong> admin panelden oluÅŸturulacak, ama Ã¶zel Ã¶zellikleri olacak:</p>
            </div>

            <h3>ğŸ“‹ Trial PlanÄ± NasÄ±l OluÅŸturulacak?</h3>

            <div class="flow">
                <strong>1. Admin Panel â†’ Subscription Plans â†’ Yeni Plan Ekle</strong>
                <p>Normal plan ekleme ekranÄ±nÄ± kullanacaksÄ±n.</p>
            </div>

            <div class="flow">
                <strong>2. Plan Bilgileri:</strong>
                <ul>
                    <li><strong>Plan AdÄ±:</strong> "Trial" (veya "Deneme ÃœyeliÄŸi")</li>
                    <li><strong>Slug:</strong> <code>trial</code> (Ã–NEMLÄ°: Sistem bu slug'Ä± kullanacak!)</li>
                    <li><strong>AÃ§Ä±klama:</strong> "7 gÃ¼n Ã¼cretsiz deneme"</li>
                    <li><strong>Fiyat:</strong> â‚º0.00</li>
                    <li><strong>Para Birimi:</strong> TRY</li>
                </ul>
            </div>

            <div class="flow">
                <strong>3. Cycle Ekle (SADECE 1 TANE!):</strong>
                <ul>
                    <li><strong>Cycle AdÄ±:</strong> "7 GÃ¼nlÃ¼k Trial"</li>
                    <li><strong>SÃ¼re:</strong> 7 gÃ¼n</li>
                    <li><strong>Fiyat:</strong> â‚º0.00</li>
                    <li><strong>NOT:</strong> Trial planÄ±nda sadece TEK cycle olmalÄ±!</li>
                </ul>
            </div>

            <div class="warning-box">
                <strong>âš ï¸ Ã–NEMLÄ°:</strong>
                <ul>
                    <li>Trial planÄ±nÄ±n slug'Ä± <code>trial</code> olmalÄ± (sistem bu slug ile bulacak)</li>
                    <li>Sadece 1 cycle olmalÄ± (Ã§oklu cycle mantÄ±ksÄ±z)</li>
                    <li>Fiyat â‚º0.00 olmalÄ±</li>
                    <li>Plan aktif olmalÄ± (<code>is_active = true</code>)</li>
                </ul>
            </div>
        </div>

        <!-- Soru 2: Trial SÃ¼resi Nereden Gelecek? -->
        <div class="section">
            <h2>â° Trial SÃ¼resi Nereden Gelecek?</h2>

            <div class="comparison">
                <div class="comp-card option1">
                    <h4 style="color: #f59e0b;">YaklaÅŸÄ±m 1: Setting'den</h4>
                    <p style="margin-bottom: 15px;">Setting tablosunda <code>trial_days</code> field'i:</p>
                    <p style="color: #10b981; margin-bottom: 10px;"><strong>âœ… ArtÄ±larÄ±:</strong></p>
                    <ul>
                        <li>Tek yerden yÃ¶netim</li>
                        <li>Kolay deÄŸiÅŸtirme</li>
                    </ul>
                    <p style="color: #ef4444; margin-top: 15px;"><strong>âŒ Eksileri:</strong></p>
                    <ul>
                        <li>Trial plan ile senkronizasyon sorunu</li>
                        <li>Ä°ki yerde deÄŸiÅŸtirmek gerek (plan + setting)</li>
                        <li>KarmaÅŸÄ±k</li>
                    </ul>
                </div>

                <div class="comp-card option2">
                    <h4 style="color: #10b981;">YaklaÅŸÄ±m 2: Trial PlanÄ±ndan</h4>
                    <p style="margin-bottom: 15px;">Trial planÄ±nÄ±n cycle sÃ¼resini kullan:</p>
                    <p style="color: #10b981; margin-bottom: 10px;"><strong>âœ… ArtÄ±larÄ±:</strong></p>
                    <ul>
                        <li>Tek kaynak gerÃ§eÄŸi (plan)</li>
                        <li>Senkronizasyon yok</li>
                        <li>Basit ve temiz</li>
                        <li>Plan sÃ¼resini deÄŸiÅŸtirdin â†’ Trial deÄŸiÅŸti</li>
                    </ul>
                    <p style="color: #ef4444; margin-top: 15px;"><strong>âŒ Eksileri:</strong></p>
                    <ul>
                        <li>Yok (En iyi yaklaÅŸÄ±m)</li>
                    </ul>
                </div>
            </div>

            <div class="winner">
                <h4>âœ… Ã–NERÄ°LEN: YaklaÅŸÄ±m 2 (Plan SÃ¼resinden)</h4>
                <p style="color: #cbd5e1; margin-top: 10px;">
                    Sistem trial planÄ±nÄ± bulacak (<code>slug = 'trial'</code>) ve o planÄ±n cycle sÃ¼resini kullanacak. 
                    Bu sayede tek yerden yÃ¶netim saÄŸlanÄ±r.
                </p>
            </div>

            <div class="info-box">
                <strong style="color: #60a5fa; display: block; margin-bottom: 10px;">ğŸ’¡ NasÄ±l Ã‡alÄ±ÅŸacak?</strong>
                <div class="flow" style="background: none; padding: 0; border: none;">
                    <p>1. KullanÄ±cÄ± kayÄ±t olur</p>
                    <p>2. Sistem trial planÄ±nÄ± bulur: <code>SubscriptionPlan::where('slug', 'trial')-&gt;first()</code></p>
                    <p>3. O planÄ±n ilk (ve tek) cycle'Ä±nÄ± alÄ±r</p>
                    <p>4. Cycle sÃ¼resini kullanarak subscription oluÅŸturur (Ã¶rn: 7 gÃ¼n)</p>
                </div>
            </div>
        </div>

        <!-- Soru 3: Otomatik Atama -->
        <div class="section">
            <h2>ğŸ¤– KayÄ±t Olunca Trial Otomatik NasÄ±l Atanacak?</h2>

            <h3>ğŸ“ MantÄ±k:</h3>

            <div class="step-box">
                <h4>AdÄ±m 1: KullanÄ±cÄ± KayÄ±t Olur</h4>
                <p>Normal kayÄ±t iÅŸlemi (email, ÅŸifre vb.)</p>
            </div>

            <div class="step-box">
                <h4>AdÄ±m 2: Sistem Kontrol Eder</h4>
                <p>KullanÄ±cÄ± daha Ã¶nce trial kullandÄ± mÄ±?</p>
                <ul>
                    <li><code>user.has_used_trial == true</code> â†’ Trial verme!</li>
                    <li><code>user.has_used_trial == false</code> â†’ Trial ver!</li>
                </ul>
            </div>

            <div class="step-box">
                <h4>AdÄ±m 3: Trial Subscription OluÅŸtur</h4>
                <p>Otomatik olarak yeni subscription kaydÄ±:</p>
                <ul>
                    <li><code>plan_id</code> = Trial planÄ±nÄ±n ID'si</li>
                    <li><code>status</code> = <code>active</code></li>
                    <li><code>starts_at</code> = Åimdi</li>
                    <li><code>ends_at</code> = 7 gÃ¼n sonra (plan cycle sÃ¼resinden)</li>
                    <li><code>price_per_cycle</code> = â‚º0.00</li>
                </ul>
            </div>

            <div class="step-box">
                <h4>AdÄ±m 4: has_used_trial Ä°ÅŸaretle</h4>
                <p>KullanÄ±cÄ±nÄ±n <code>has_used_trial</code> field'Ä±nÄ± <code>true</code> yap. ArtÄ±k bir daha trial alamaz!</p>
            </div>

            <div class="warning-box">
                <strong>âš ï¸ Kritik:</strong>
                <ul>
                    <li><code>has_used_trial</code> bir defa <code>true</code> oldu mu, bir daha <code>false</code> olmaz!</li>
                    <li>KullanÄ±cÄ± subscription'Ä± silse bile trial alamaz</li>
                    <li>Bu field <strong>users</strong> tablosunda olmalÄ± (yeni migration gerekli)</li>
                </ul>
            </div>
        </div>

        <!-- Soru 4: Trial Durumunu NasÄ±l AnlayacaÄŸÄ±z? -->
        <div class="section">
            <h2>ğŸ‘€ Trial Durumunu NasÄ±l GÃ¶receÄŸiz?</h2>

            <h3>1ï¸âƒ£ Admin Panel - Subscriptions Listesi</h3>
            <div class="info-box">
                <p><strong>Subscriptions tablosunda</strong> trial subscription'larÄ± gÃ¶receksin:</p>
                <ul>
                    <li><strong>Plan:</strong> "Trial" (plan adÄ± gÃ¶sterilecek)</li>
                    <li><strong>Status:</strong> "Active" veya "Expired"</li>
                    <li><strong>BitiÅŸ Tarihi:</strong> "2025-12-11 23:59:59"</li>
                    <li><strong>Fiyat:</strong> â‚º0.00</li>
                </ul>
            </div>

            <h3>2ï¸âƒ£ User Detail SayfasÄ±</h3>
            <div class="info-box">
                <p><strong>KullanÄ±cÄ± detay sayfasÄ±nda</strong> badge gÃ¶sterilecek:</p>
                <ul>
                    <li>Trial aktifse: <span style="background: #10b981; padding: 4px 12px; border-radius: 12px; color: white; font-size: 0.85rem;">ğŸ Trial Aktif (5 gÃ¼n kaldÄ±)</span></li>
                    <li>Trial bittiyse: <span style="background: #6b7280; padding: 4px 12px; border-radius: 12px; color: white; font-size: 0.85rem;">Trial KullanÄ±ldÄ±</span></li>
                    <li>Trial kullanmadÄ±ysa: <span style="background: #3b82f6; padding: 4px 12px; border-radius: 12px; color: white; font-size: 0.85rem;">Trial KullanÄ±labilir</span></li>
                </ul>
            </div>

            <h3>3ï¸âƒ£ Database Sorgusu</h3>
            <div class="info-box">
                <p><strong>SQL ile trial subscription'larÄ±nÄ± bulma:</strong></p>
                <pre style="background: rgba(15, 23, 42, 0.8); padding: 15px; border-radius: 8px; overflow-x: auto; color: #e5e7eb; margin-top: 10px;">SELECT s.*, sp.title 
FROM subscriptions s
JOIN subscription_plans sp ON s.plan_id = sp.subscription_plan_id
WHERE sp.slug = 'trial'
AND s.status = 'active';</pre>
            </div>
        </div>

        <!-- Soru 5: Trial SÃ¼resini DeÄŸiÅŸtirmek -->
        <div class="section">
            <h2>ğŸ”§ Trial SÃ¼resini NasÄ±l DeÄŸiÅŸtireceÄŸiz?</h2>

            <div class="step-box">
                <h4>YÃ¶ntem: Trial PlanÄ±nÄ±n Cycle SÃ¼resini GÃ¼ncelle</h4>
                <p>Admin panel â†’ Subscription Plans â†’ "Trial" planÄ±nÄ± dÃ¼zenle:</p>
            </div>

            <div class="flow">
                <strong>Åu An: 7 GÃ¼nlÃ¼k Trial</strong>
                <p>Cycle: "7 GÃ¼nlÃ¼k Trial" â†’ SÃ¼re: 7 gÃ¼n</p>
            </div>

            <div style="text-align: center; font-size: 2rem; margin: 20px 0; color: #fbbf24;">â†“</div>

            <div class="flow">
                <strong>DeÄŸiÅŸtir: 14 GÃ¼nlÃ¼k Trial</strong>
                <p>Cycle sÃ¼resini dÃ¼zenle: 7 â†’ 14 gÃ¼n</p>
            </div>

            <div style="text-align: center; font-size: 2rem; margin: 20px 0; color: #fbbf24;">â†“</div>

            <div class="flow">
                <strong>SonuÃ§:</strong>
                <p>Yeni kayÄ±t olan kullanÄ±cÄ±lar <strong>14 gÃ¼nlÃ¼k</strong> trial alacak!</p>
            </div>

            <div class="warning-box">
                <strong>âš ï¸ Not:</strong>
                <ul>
                    <li>SÃ¼re deÄŸiÅŸikliÄŸi <strong>sadece yeni kullanÄ±cÄ±lar</strong> iÃ§in geÃ§erli</li>
                    <li>Mevcut aktif trial'lar etkilenmez</li>
                    <li>Ã–rnek: Ahmet'in 7 gÃ¼nlÃ¼k trial'Ä± devam eder, yeni Mehmet 14 gÃ¼n alÄ±r</li>
                </ul>
            </div>
        </div>

        <!-- Ã–zet -->
        <div class="section">
            <h2>ğŸ“‹ Ã–zet - TÃ¼m SÃ¼reÃ§</h2>

            <div class="flow">
                <strong>1. Admin Ä°lk Kurulum (Bir Kere):</strong>
                <ul>
                    <li>Trial planÄ± oluÅŸtur (slug: <code>trial</code>, fiyat: â‚º0.00, sÃ¼re: 7 gÃ¼n)</li>
                    <li><code>has_used_trial</code> field'ini users tablosuna ekle (migration)</li>
                </ul>
            </div>

            <div class="flow">
                <strong>2. KullanÄ±cÄ± KayÄ±t Olunca (Otomatik):</strong>
                <ul>
                    <li>Sistem <code>has_used_trial</code> kontrol eder</li>
                    <li>False ise â†’ Trial subscription oluÅŸturur</li>
                    <li><code>has_used_trial = true</code> iÅŸaretler</li>
                    <li>KullanÄ±cÄ±ya "7 gÃ¼n trial baÅŸladÄ±" mesajÄ± gÃ¶sterir</li>
                </ul>
            </div>

            <div class="flow">
                <strong>3. Trial Aktifken:</strong>
                <ul>
                    <li>KullanÄ±cÄ± premium Ã¶zelliklere eriÅŸir (sÄ±nÄ±rsÄ±z dinleme)</li>
                    <li><code>user-&gt;isPremium()</code> â†’ <code>true</code> dÃ¶ner</li>
                    <li>Admin panelde trial subscription gÃ¶rÃ¼nÃ¼r</li>
                </ul>
            </div>

            <div class="flow">
                <strong>4. Trial Bitince (Otomatik):</strong>
                <ul>
                    <li>GÃ¼nlÃ¼k cron job Ã§alÄ±ÅŸÄ±r</li>
                    <li>BugÃ¼n biten trial'larÄ± bulur</li>
                    <li><code>status = expired</code> yapar</li>
                    <li>KullanÄ±cÄ± normal Ã¼ye olur (30 saniye limit)</li>
                </ul>
            </div>

            <div class="flow">
                <strong>5. Trial SÃ¼resini DeÄŸiÅŸtirmek (Ä°steÄŸe BaÄŸlÄ±):</strong>
                <ul>
                    <li>Admin panel â†’ Trial planÄ± â†’ Cycle sÃ¼resini gÃ¼ncelle</li>
                    <li>7 gÃ¼n â†’ 14 gÃ¼n gibi</li>
                    <li>Yeni kullanÄ±cÄ±lar yeni sÃ¼reyi alÄ±r</li>
                </ul>
            </div>
        </div>

        <footer>
            ğŸ¤– Claude AI | ğŸ“… 2025-12-04 | ğŸ Trial Sistemi YÃ¶netim KÄ±lavuzu
        </footer>
    </div>
</body>
</html>
