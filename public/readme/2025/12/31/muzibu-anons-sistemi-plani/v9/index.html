<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Muzibu Corporate Spots - Final Plan v9</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body class="bg-slate-900 text-gray-100 min-h-screen">

    <!-- Header -->
    <header class="bg-gradient-to-r from-emerald-900/50 to-teal-900/50 border-b border-emerald-800/30">
        <div class="max-w-7xl mx-auto px-6 py-6">
            <div class="flex items-center gap-3 mb-2">
                <span class="px-3 py-1 bg-emerald-600 text-white text-xs font-bold rounded-full">
                    <i class="fas fa-check mr-1"></i>FINAL v9
                </span>
                <span class="text-gray-400 text-sm">31 Aralik 2025</span>
            </div>
            <h1 class="text-2xl md:text-3xl font-bold text-white">
                <i class="fas fa-bullhorn text-emerald-400 mr-2"></i>
                Muzibu Corporate Spots Sistemi
            </h1>
            <p class="text-emerald-200/70 mt-1">Kurumsal hesaplar icin sarki arasi sesli spot yayin sistemi</p>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="bg-slate-800/80 border-b border-slate-700 sticky top-0 z-50 backdrop-blur-sm overflow-x-auto">
        <div class="max-w-7xl mx-auto px-6 py-2 flex gap-2 text-sm">
            <a href="#ozet" class="px-3 py-1.5 rounded bg-emerald-600/20 text-emerald-300">Ozet</a>
            <a href="#veritabani" class="px-3 py-1.5 rounded text-gray-300 hover:bg-slate-700">Veritabani</a>
            <a href="#dosya" class="px-3 py-1.5 rounded text-gray-300 hover:bg-slate-700">Dosya Yukleme</a>
            <a href="#akis" class="px-3 py-1.5 rounded text-gray-300 hover:bg-slate-700">Akis</a>
            <a href="#kurumsal" class="px-3 py-1.5 rounded text-gray-300 hover:bg-slate-700">Kurumsal Panel</a>
            <a href="#player" class="px-3 py-1.5 rounded text-gray-300 hover:bg-slate-700">Player</a>
            <a href="#api" class="px-3 py-1.5 rounded text-gray-300 hover:bg-slate-700">API</a>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-6 py-8 space-y-12">

        <!-- ==================== OZET ==================== -->
        <section id="ozet">
            <h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-3">
                <span class="w-10 h-10 bg-emerald-600 rounded-lg flex items-center justify-center">
                    <i class="fas fa-list"></i>
                </span>
                Sistem Ozeti
            </h2>

            <div class="grid md:grid-cols-4 gap-4 mb-6">
                <div class="bg-emerald-900/30 border border-emerald-700/50 rounded-xl p-5 text-center">
                    <p class="text-4xl font-bold text-emerald-400">2</p>
                    <p class="text-gray-400 text-sm mt-1">Yeni Tablo</p>
                </div>
                <div class="bg-orange-900/30 border border-orange-700/50 rounded-xl p-5 text-center">
                    <p class="text-4xl font-bold text-orange-400">+4</p>
                    <p class="text-gray-400 text-sm mt-1">Kolon</p>
                </div>
                <div class="bg-blue-900/30 border border-blue-700/50 rounded-xl p-5 text-center">
                    <p class="text-3xl font-bold text-blue-400">Media</p>
                    <p class="text-gray-400 text-sm mt-1">Library</p>
                </div>
                <div class="bg-purple-900/30 border border-purple-700/50 rounded-xl p-5 text-center">
                    <p class="text-3xl font-bold text-purple-400">song_plays</p>
                    <p class="text-gray-400 text-sm mt-1">Kopyasi</p>
                </div>
            </div>

            <!-- Tum Kararlar -->
            <div class="bg-slate-800/50 border border-slate-700 rounded-xl p-5">
                <h3 class="font-semibold text-white mb-4">Tum Kararlar</h3>
                <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-3">
                    <div class="bg-slate-900 rounded-lg p-3 flex items-center gap-3">
                        <i class="fas fa-forward text-green-400"></i>
                        <span class="text-gray-300 text-sm">Spot atlanabilir</span>
                    </div>
                    <div class="bg-slate-900 rounded-lg p-3 flex items-center gap-3">
                        <i class="fas fa-building text-yellow-400"></i>
                        <span class="text-gray-300 text-sm">Corporate yukler</span>
                    </div>
                    <div class="bg-slate-900 rounded-lg p-3 flex items-center gap-3">
                        <i class="fas fa-archive text-purple-400"></i>
                        <span class="text-gray-300 text-sm">Silme yok, arsiv</span>
                    </div>
                    <div class="bg-slate-900 rounded-lg p-3 flex items-center gap-3">
                        <i class="fas fa-bolt text-yellow-400"></i>
                        <span class="text-gray-300 text-sm">localStorage sayac</span>
                    </div>
                    <div class="bg-slate-900 rounded-lg p-3 flex items-center gap-3">
                        <i class="fas fa-file text-orange-400"></i>
                        <span class="text-gray-300 text-sm">Max 30 MB</span>
                    </div>
                    <div class="bg-slate-900 rounded-lg p-3 flex items-center gap-3">
                        <i class="fas fa-music text-pink-400"></i>
                        <span class="text-gray-300 text-sm">30 sn = 1 sarki</span>
                    </div>
                    <div class="bg-slate-900 rounded-lg p-3 flex items-center gap-3">
                        <i class="fas fa-photo-film text-blue-400"></i>
                        <span class="text-gray-300 text-sm">MediaLibrary</span>
                    </div>
                    <div class="bg-slate-900 rounded-lg p-3 flex items-center gap-3">
                        <i class="fas fa-file-audio text-cyan-400"></i>
                        <span class="text-gray-300 text-sm">Tum formatlar</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== VERiTABANI ==================== -->
        <section id="veritabani">
            <h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-3">
                <span class="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center">
                    <i class="fas fa-database"></i>
                </span>
                Veritabani (2 Tablo + 4 Kolon)
            </h2>

            <div class="space-y-6">
                <!-- Tablo 1: Spots -->
                <div class="bg-emerald-900/20 border border-emerald-700/50 rounded-xl p-5">
                    <h3 class="font-semibold text-emerald-400 mb-3 flex items-center gap-2">
                        <span class="w-8 h-8 bg-emerald-600 rounded-full flex items-center justify-center text-white text-sm font-bold">1</span>
                        muzibu_corporate_spots
                    </h3>

                    <div class="overflow-x-auto">
                        <table class="w-full text-sm">
                            <thead>
                                <tr class="text-left text-gray-400 border-b border-slate-700">
                                    <th class="pb-2 pr-4">Kolon</th>
                                    <th class="pb-2 pr-4">Tip</th>
                                    <th class="pb-2">Aciklama</th>
                                </tr>
                            </thead>
                            <tbody class="text-gray-300">
                                <tr class="border-b border-slate-800">
                                    <td class="py-2 font-mono text-emerald-400">id</td>
                                    <td>BIGINT PK</td>
                                    <td></td>
                                </tr>
                                <tr class="border-b border-slate-800 bg-yellow-900/20">
                                    <td class="py-2 font-mono text-yellow-400">corporate_account_id</td>
                                    <td>BIGINT FK</td>
                                    <td>Hangi corporate'a ait</td>
                                </tr>
                                <tr class="border-b border-slate-800">
                                    <td class="py-2 font-mono text-emerald-400">title</td>
                                    <td>VARCHAR(255)</td>
                                    <td>Spot basligi</td>
                                </tr>
                                <tr class="border-b border-slate-800">
                                    <td class="py-2 font-mono text-emerald-400">slug</td>
                                    <td>VARCHAR(255)</td>
                                    <td>URL-friendly isim</td>
                                </tr>
                                <tr class="border-b border-slate-800">
                                    <td class="py-2 font-mono text-emerald-400">duration</td>
                                    <td>INT</td>
                                    <td>Sure (saniye)</td>
                                </tr>
                                <tr class="border-b border-slate-800 bg-blue-900/20">
                                    <td class="py-2 font-mono text-blue-400">starts_at</td>
                                    <td>TIMESTAMP NULL</td>
                                    <td>Baslangic (NULL = her zaman)</td>
                                </tr>
                                <tr class="border-b border-slate-800 bg-blue-900/20">
                                    <td class="py-2 font-mono text-blue-400">ends_at</td>
                                    <td>TIMESTAMP NULL</td>
                                    <td>Bitis (NULL = suresiz)</td>
                                </tr>
                                <tr class="border-b border-slate-800 bg-purple-900/20">
                                    <td class="py-2 font-mono text-purple-400">position</td>
                                    <td>INT DEFAULT 0</td>
                                    <td>Siralama</td>
                                </tr>
                                <tr class="border-b border-slate-800 bg-green-900/20">
                                    <td class="py-2 font-mono text-green-400">is_enabled</td>
                                    <td>BOOLEAN DEFAULT TRUE</td>
                                    <td>Aktif mi?</td>
                                </tr>
                                <tr class="border-b border-slate-800 bg-orange-900/20">
                                    <td class="py-2 font-mono text-orange-400">is_archived</td>
                                    <td>BOOLEAN DEFAULT FALSE</td>
                                    <td>Arsivlendi mi?</td>
                                </tr>
                                <tr>
                                    <td class="py-2 font-mono text-emerald-400">timestamps</td>
                                    <td>TIMESTAMP</td>
                                    <td>created_at, updated_at</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="mt-4 bg-blue-900/20 border border-blue-700/50 rounded-lg p-3">
                        <p class="text-blue-300 text-sm">
                            <i class="fas fa-photo-film mr-2"></i>
                            <strong>Dosya:</strong> MediaLibrary ile iliskilendirilir. <code>spots->getFirstMedia('audio')</code>
                        </p>
                    </div>
                </div>

                <!-- Tablo 2: Plays (song_plays kopyasi) -->
                <div class="bg-cyan-900/20 border border-cyan-700/50 rounded-xl p-5">
                    <h3 class="font-semibold text-cyan-400 mb-3 flex items-center gap-2">
                        <span class="w-8 h-8 bg-cyan-600 rounded-full flex items-center justify-center text-white text-sm font-bold">2</span>
                        muzibu_corporate_spot_plays
                        <span class="text-gray-500 text-xs font-normal ml-2">(song_plays kopyasi)</span>
                    </h3>

                    <div class="overflow-x-auto">
                        <table class="w-full text-sm">
                            <thead>
                                <tr class="text-left text-gray-400 border-b border-slate-700">
                                    <th class="pb-2 pr-4">Kolon</th>
                                    <th class="pb-2 pr-4">Tip</th>
                                    <th class="pb-2">Aciklama</th>
                                </tr>
                            </thead>
                            <tbody class="text-gray-300">
                                <tr class="border-b border-slate-800">
                                    <td class="py-2 font-mono text-cyan-400">id</td>
                                    <td>BIGINT PK</td>
                                    <td></td>
                                </tr>
                                <tr class="border-b border-slate-800">
                                    <td class="py-2 font-mono text-cyan-400">spot_id</td>
                                    <td>BIGINT FK</td>
                                    <td>Hangi spot</td>
                                </tr>
                                <tr class="border-b border-slate-800">
                                    <td class="py-2 font-mono text-cyan-400">corporate_account_id</td>
                                    <td>BIGINT FK</td>
                                    <td>Hangi sube</td>
                                </tr>
                                <tr class="border-b border-slate-800">
                                    <td class="py-2 font-mono text-cyan-400">user_id</td>
                                    <td>BIGINT FK NULL</td>
                                    <td>Kim dinledi</td>
                                </tr>
                                <tr class="border-b border-slate-800">
                                    <td class="py-2 font-mono text-cyan-400">ip_address</td>
                                    <td>VARCHAR(45) NULL</td>
                                    <td>IP adresi</td>
                                </tr>
                                <tr class="border-b border-slate-800">
                                    <td class="py-2 font-mono text-cyan-400">user_agent</td>
                                    <td>VARCHAR(255) NULL</td>
                                    <td>Tarayici bilgisi</td>
                                </tr>
                                <tr class="border-b border-slate-800">
                                    <td class="py-2 font-mono text-cyan-400">device_type</td>
                                    <td>VARCHAR(255) NULL</td>
                                    <td>mobile / desktop</td>
                                </tr>
                                <tr class="border-b border-slate-800">
                                    <td class="py-2 font-mono text-cyan-400">browser</td>
                                    <td>VARCHAR(50) NULL</td>
                                    <td>Chrome, Safari, etc.</td>
                                </tr>
                                <tr class="border-b border-slate-800">
                                    <td class="py-2 font-mono text-cyan-400">platform</td>
                                    <td>VARCHAR(50) NULL</td>
                                    <td>Windows, iOS, Android</td>
                                </tr>
                                <tr class="border-b border-slate-800">
                                    <td class="py-2 font-mono text-cyan-400">listened_duration</td>
                                    <td>INT UNSIGNED NULL</td>
                                    <td>Kac saniye dinledi</td>
                                </tr>
                                <tr class="border-b border-slate-800 bg-red-900/20">
                                    <td class="py-2 font-mono text-red-400">was_skipped</td>
                                    <td>BOOLEAN DEFAULT FALSE</td>
                                    <td>Atlandi mi?</td>
                                </tr>
                                <tr class="border-b border-slate-800">
                                    <td class="py-2 font-mono text-cyan-400">created_at</td>
                                    <td>TIMESTAMP</td>
                                    <td>Basladi</td>
                                </tr>
                                <tr class="border-b border-slate-800">
                                    <td class="py-2 font-mono text-cyan-400">updated_at</td>
                                    <td>TIMESTAMP</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td class="py-2 font-mono text-cyan-400">ended_at</td>
                                    <td>TIMESTAMP NULL</td>
                                    <td>Bitti</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="mt-4 bg-slate-900 rounded-lg p-3 font-mono text-xs text-gray-400">
                        INDEX (spot_id, created_at)<br>
                        INDEX (corporate_account_id, created_at)<br>
                        INDEX (user_id)<br>
                        INDEX (ip_address)<br>
                        INDEX (device_type)
                    </div>
                </div>

                <!-- Kolon Ekleme -->
                <div class="bg-orange-900/20 border border-orange-700/50 rounded-xl p-5">
                    <h3 class="font-semibold text-orange-400 mb-3 flex items-center gap-2">
                        <i class="fas fa-pen"></i>
                        GUNCELLEME: muzibu_corporate_accounts (+4 kolon)
                    </h3>

                    <div class="bg-slate-900 rounded-lg p-4 font-mono text-sm">
                        <pre class="text-gray-300"><code>spot_enabled BOOLEAN DEFAULT TRUE       -- Ana sube: Sistem acik mi?
spot_songs_between INT DEFAULT 10       -- Ana sube: Kac sarkida bir?
spot_current_index INT DEFAULT 0        -- Rotation index
spot_is_paused BOOLEAN DEFAULT FALSE    -- Her sube: Durduruldu mu?</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== DOSYA YUKLEME ==================== -->
        <section id="dosya">
            <h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-3">
                <span class="w-10 h-10 bg-purple-600 rounded-lg flex items-center justify-center">
                    <i class="fas fa-cloud-arrow-up"></i>
                </span>
                Dosya Yukleme
            </h2>

            <div class="space-y-6">
                <!-- MediaLibrary -->
                <div class="bg-purple-900/20 border border-purple-700/50 rounded-xl p-5">
                    <h3 class="font-semibold text-purple-400 mb-4 flex items-center gap-2">
                        <i class="fas fa-photo-film"></i>
                        Spatie MediaLibrary Kullanimi
                    </h3>

                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="text-white font-medium mb-3">Model Ayarlari</h4>
                            <div class="bg-slate-900 rounded-lg p-4 font-mono text-sm">
                                <pre class="text-gray-300"><code>class CorporateSpot extends Model
    implements HasMedia
{
    use InteractsWithMedia;

    public function registerMediaCollections(): void
    {
        $this->addMediaCollection('audio')
            ->singleFile()
            ->acceptsMimeTypes([
                'audio/mpeg',      // MP3
                'audio/wav',       // WAV
                'audio/ogg',       // OGG
                'audio/aac',       // AAC
                'audio/mp4',       // M4A
            ]);
    }
}</code></pre>
                            </div>
                        </div>

                        <div>
                            <h4 class="text-white font-medium mb-3">Yukleme Islemi</h4>
                            <div class="bg-slate-900 rounded-lg p-4 font-mono text-sm">
                                <pre class="text-gray-300"><code>// Yukleme
$spot->addMediaFromRequest('audio')
    ->usingFileName(Str::slug($title) . '.mp3')
    ->toMediaCollection('audio');

// Okuma
$url = $spot->getFirstMediaUrl('audio');
$path = $spot->getFirstMediaPath('audio');

// Duration almak
$media = $spot->getFirstMedia('audio');
$duration = $media->getCustomProperty('duration');</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Dosya Detaylari -->
                <div class="bg-slate-800/50 border border-slate-700 rounded-xl p-5">
                    <h3 class="font-semibold text-white mb-4">Dosya Ozellikleri</h3>

                    <div class="grid md:grid-cols-3 gap-4">
                        <div class="bg-slate-900 rounded-lg p-4">
                            <div class="flex items-center gap-3 mb-3">
                                <i class="fas fa-weight-hanging text-orange-400 text-xl"></i>
                                <span class="text-white font-medium">Max Boyut</span>
                            </div>
                            <p class="text-3xl font-bold text-orange-400">30 MB</p>
                        </div>

                        <div class="bg-slate-900 rounded-lg p-4">
                            <div class="flex items-center gap-3 mb-3">
                                <i class="fas fa-file-audio text-blue-400 text-xl"></i>
                                <span class="text-white font-medium">Formatlar</span>
                            </div>
                            <p class="text-gray-300 text-sm">MP3, WAV, OGG, AAC, M4A</p>
                            <p class="text-gray-500 text-xs mt-1">(Tum ses formatlari)</p>
                        </div>

                        <div class="bg-slate-900 rounded-lg p-4">
                            <div class="flex items-center gap-3 mb-3">
                                <i class="fas fa-tag text-green-400 text-xl"></i>
                                <span class="text-white font-medium">Isimlendirme</span>
                            </div>
                            <p class="text-gray-300 text-sm">Orijinal ismin slug'i</p>
                            <p class="text-gray-500 text-xs mt-1">yilbasi-kampanyasi.mp3</p>
                        </div>
                    </div>
                </div>

                <!-- Depolama Yolu -->
                <div class="bg-slate-800/50 border border-slate-700 rounded-xl p-5">
                    <h3 class="font-semibold text-white mb-4">Depolama Yolu</h3>

                    <div class="bg-slate-900 rounded-lg p-4 font-mono text-sm text-gray-300">
                        <p class="text-gray-500 mb-2">// MediaLibrary varsayilan yolu:</p>
                        <p>storage/app/public/media/{media_id}/{slug}.mp3</p>
                        <p class="text-gray-500 mt-3 mb-2">// Ornek:</p>
                        <p>storage/app/public/media/1234/yilbasi-kampanyasi.mp3</p>
                        <p class="text-gray-500 mt-3 mb-2">// Public URL:</p>
                        <p>https://muzibu.com/storage/media/1234/yilbasi-kampanyasi.mp3</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== AKIS ==================== -->
        <section id="akis">
            <h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-3">
                <span class="w-10 h-10 bg-indigo-600 rounded-lg flex items-center justify-center">
                    <i class="fas fa-sitemap"></i>
                </span>
                Sistem Akisi
            </h2>

            <div class="bg-slate-800/50 border border-slate-700 rounded-xl p-6">
                <div class="bg-slate-900 rounded-lg p-6">
                    <div class="flex flex-col gap-4">
                        <div class="flex items-center gap-4">
                            <div class="w-10 h-10 bg-yellow-600 rounded-full flex items-center justify-center font-bold shrink-0">1</div>
                            <div class="flex-1 bg-yellow-900/20 border border-yellow-700/50 rounded-lg p-4">
                                <h5 class="text-yellow-400 font-medium">Corporate Spot Yukler</h5>
                                <p class="text-gray-400 text-sm mt-1">Ses dosyasi (MediaLibrary) + baslik + tarih + sira</p>
                            </div>
                        </div>

                        <div class="flex justify-center"><i class="fas fa-arrow-down text-gray-600"></i></div>

                        <div class="flex items-center gap-4">
                            <div class="w-10 h-10 bg-green-600 rounded-full flex items-center justify-center font-bold shrink-0">2</div>
                            <div class="flex-1 bg-green-900/20 border border-green-700/50 rounded-lg p-4">
                                <h5 class="text-green-400 font-medium">Sube Kontrol Eder</h5>
                                <p class="text-gray-400 text-sm mt-1">Durdur/devam (spot_is_paused)</p>
                            </div>
                        </div>

                        <div class="flex justify-center"><i class="fas fa-arrow-down text-gray-600"></i></div>

                        <div class="flex items-center gap-4">
                            <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center font-bold shrink-0">3</div>
                            <div class="flex-1 bg-blue-900/20 border border-blue-700/50 rounded-lg p-4">
                                <h5 class="text-blue-400 font-medium">Player 30 sn Sayar</h5>
                                <p class="text-gray-400 text-sm mt-1">localStorage ile sayac tutar (performans)</p>
                            </div>
                        </div>

                        <div class="flex justify-center"><i class="fas fa-arrow-down text-gray-600"></i></div>

                        <div class="flex items-center gap-4">
                            <div class="w-10 h-10 bg-purple-600 rounded-full flex items-center justify-center font-bold shrink-0">4</div>
                            <div class="flex-1 bg-purple-900/20 border border-purple-700/50 rounded-lg p-4">
                                <h5 class="text-purple-400 font-medium">10 Sarkida Spot Calar</h5>
                                <p class="text-gray-400 text-sm mt-1">Siradaki spot calar, kullanici atlayabilir</p>
                            </div>
                        </div>

                        <div class="flex justify-center"><i class="fas fa-arrow-down text-gray-600"></i></div>

                        <div class="flex items-center gap-4">
                            <div class="w-10 h-10 bg-cyan-600 rounded-full flex items-center justify-center font-bold shrink-0">5</div>
                            <div class="flex-1 bg-cyan-900/20 border border-cyan-700/50 rounded-lg p-4">
                                <h5 class="text-cyan-400 font-medium">Dinlenme Loglanir</h5>
                                <p class="text-gray-400 text-sm mt-1">spot_plays tablosuna (song_plays gibi) detayli kayit</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Calma Kosulu -->
            <div class="mt-6 bg-emerald-900/20 border border-emerald-700/50 rounded-xl p-5">
                <h4 class="font-semibold text-emerald-400 mb-4">
                    <i class="fas fa-play mr-2"></i>
                    Spot Calmasi Icin Kosullar
                </h4>

                <div class="bg-slate-900 rounded-lg p-4 font-mono text-sm">
                    <pre class="text-gray-300"><code>SELECT s.*, m.file_name, m.disk
FROM muzibu_corporate_spots s
LEFT JOIN media m ON m.model_id = s.id
    AND m.model_type = 'CorporateSpot'
    AND m.collection_name = 'audio'
WHERE s.corporate_account_id = :main_corporate_id
  AND s.is_enabled = TRUE
  AND s.is_archived = FALSE
  AND (s.starts_at IS NULL OR s.starts_at <= NOW())
  AND (s.ends_at IS NULL OR s.ends_at >= NOW())
ORDER BY s.position ASC</code></pre>
                </div>
            </div>
        </section>

        <!-- ==================== KURUMSAL PANEL ==================== -->
        <section id="kurumsal">
            <h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-3">
                <span class="w-10 h-10 bg-yellow-600 rounded-lg flex items-center justify-center">
                    <i class="fas fa-building"></i>
                </span>
                Kurumsal Panel
            </h2>

            <div class="space-y-6">
                <!-- Spot Yukleme Formu -->
                <div class="bg-slate-800/50 border border-slate-700 rounded-xl p-5">
                    <h4 class="font-semibold text-white mb-4">Spot Yukleme</h4>

                    <div class="bg-slate-900 rounded-xl p-5">
                        <div class="grid md:grid-cols-2 gap-6">
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-gray-400 text-sm mb-2">Spot Basligi *</label>
                                    <input type="text" placeholder="Orn: Yilbasi Kampanyasi"
                                           class="w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white">
                                    <p class="text-gray-600 text-xs mt-1">Dosya adi: yilbasi-kampanyasi.mp3</p>
                                </div>

                                <div>
                                    <label class="block text-gray-400 text-sm mb-2">Ses Dosyasi *</label>
                                    <div class="border-2 border-dashed border-slate-700 rounded-lg p-6 text-center cursor-pointer hover:border-purple-500">
                                        <i class="fas fa-cloud-arrow-up text-3xl text-gray-500 mb-2"></i>
                                        <p class="text-gray-400 text-sm">Dosyayi surukle veya tikla</p>
                                        <p class="text-gray-600 text-xs mt-1">Max 30 MB • MP3, WAV, OGG, AAC, M4A</p>
                                    </div>
                                </div>

                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-gray-400 text-sm mb-2">Baslangic</label>
                                        <input type="datetime-local"
                                               class="w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-white text-sm">
                                    </div>
                                    <div>
                                        <label class="block text-gray-400 text-sm mb-2">Bitis</label>
                                        <input type="datetime-local"
                                               class="w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-white text-sm">
                                    </div>
                                </div>

                                <button class="px-5 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700">
                                    <i class="fas fa-cloud-arrow-up mr-2"></i>Yukle
                                </button>
                            </div>

                            <div>
                                <label class="block text-gray-400 text-sm mb-2">Onizleme</label>
                                <div class="bg-slate-800 rounded-xl p-4 h-full flex flex-col justify-center">
                                    <div class="flex items-center gap-4 mb-4">
                                        <div class="w-14 h-14 bg-purple-900 rounded-lg flex items-center justify-center">
                                            <i class="fas fa-bullhorn text-xl text-purple-400"></i>
                                        </div>
                                        <div>
                                            <p class="text-white font-medium">Yilbasi Kampanyasi</p>
                                            <p class="text-gray-500 text-sm">yilbasi-kampanyasi.mp3</p>
                                        </div>
                                    </div>

                                    <div class="bg-slate-900 rounded-lg p-3">
                                        <div class="flex items-center gap-3">
                                            <button class="w-10 h-10 bg-purple-600 rounded-full flex items-center justify-center">
                                                <i class="fas fa-play text-white"></i>
                                            </button>
                                            <div class="flex-1">
                                                <div class="bg-slate-700 rounded-full h-2">
                                                    <div class="bg-purple-500 h-2 rounded-full" style="width: 0%"></div>
                                                </div>
                                                <div class="flex justify-between text-xs text-gray-500 mt-1">
                                                    <span>0:00</span>
                                                    <span>0:45</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Spot Listesi -->
                <div class="bg-slate-800/50 border border-slate-700 rounded-xl p-5">
                    <h4 class="font-semibold text-white mb-4">Spotlariniz</h4>

                    <div class="space-y-3">
                        <div class="bg-slate-900 rounded-lg p-4">
                            <div class="flex items-center gap-4">
                                <i class="fas fa-grip-vertical text-gray-600 cursor-move"></i>
                                <span class="w-6 h-6 bg-yellow-600 rounded-full flex items-center justify-center text-xs">1</span>
                                <div class="w-10 h-10 bg-purple-900/50 rounded flex items-center justify-center">
                                    <i class="fas fa-bullhorn text-purple-400"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="text-white font-medium">Yilbasi Kampanyasi</p>
                                    <p class="text-gray-500 text-xs">0:45 • 1.2 MB • yilbasi-kampanyasi.mp3</p>
                                </div>
                                <div class="flex items-center gap-3">
                                    <div class="text-right">
                                        <p class="text-green-400 text-xs">25 Ara - 05 Oca</p>
                                        <p class="text-gray-500 text-xs">152 dinlenme • 12 atlama</p>
                                    </div>
                                    <button class="px-3 py-1 bg-green-600/20 text-green-400 text-xs rounded">Aktif</button>
                                    <button class="p-1.5 text-gray-400 hover:text-white"><i class="fas fa-chart-bar"></i></button>
                                    <button class="p-1.5 text-gray-400 hover:text-white"><i class="fas fa-pen"></i></button>
                                    <button class="p-1.5 text-gray-400 hover:text-orange-400"><i class="fas fa-archive"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== PLAYER ==================== -->
        <section id="player">
            <h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-3">
                <span class="w-10 h-10 bg-pink-600 rounded-lg flex items-center justify-center">
                    <i class="fas fa-play"></i>
                </span>
                Player & 30 Saniye Kurali
            </h2>

            <div class="space-y-6">
                <!-- Player UI -->
                <div class="bg-slate-800/50 border border-slate-700 rounded-xl p-5">
                    <h4 class="font-semibold text-white mb-4">Spot Calarken</h4>

                    <div class="bg-gradient-to-r from-indigo-900 to-purple-900 rounded-xl p-4 border-2 border-indigo-500 max-w-md">
                        <div class="flex items-center gap-4">
                            <div class="w-16 h-16 bg-indigo-600 rounded-lg flex items-center justify-center">
                                <i class="fas fa-bullhorn text-2xl animate-pulse"></i>
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center gap-2 mb-1">
                                    <span class="px-2 py-0.5 bg-yellow-500 text-black text-xs font-bold rounded">SPOT</span>
                                    <button class="px-2 py-0.5 bg-slate-700 text-gray-300 text-xs rounded hover:bg-slate-600">
                                        <i class="fas fa-forward mr-1"></i>Atla
                                    </button>
                                </div>
                                <p class="text-white font-medium">Yilbasi Kampanyasi</p>
                                <div class="mt-2 flex items-center gap-2">
                                    <div class="flex-1 bg-indigo-800 rounded-full h-1">
                                        <div class="bg-yellow-400 h-1 rounded-full" style="width: 60%"></div>
                                    </div>
                                    <span class="text-indigo-300 text-xs">0:27</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 30 sn kurali -->
                <div class="bg-slate-800/50 border border-slate-700 rounded-xl p-5">
                    <h4 class="font-semibold text-white mb-4">30 Saniye Kurali & Loglama</h4>

                    <div class="bg-slate-900 rounded-lg p-4 font-mono text-sm">
                        <pre class="text-gray-300"><code>// Sarki 30 sn dinlenince sayac artar
function onSongTimeUpdate(currentTime) {
    if (currentTime >= 30 && !this.songCounted) {
        this.songCounted = true;
        let count = parseInt(localStorage.getItem('spot_count') || '0');
        count++;

        if (count >= this.spotSongsBetween) {
            this.playNextSpot();
            localStorage.setItem('spot_count', '0');
        } else {
            localStorage.setItem('spot_count', count.toString());
        }
    }
}

// Spot bitince veya atlaninca - DETAYLI LOG
async function logSpotPlay(spot, wasSkipped, listenedDuration) {
    await fetch('/api/spot/played', {
        method: 'POST',
        body: JSON.stringify({
            spot_id: spot.id,
            was_skipped: wasSkipped,
            listened_duration: listenedDuration,
            // Backend otomatik ekler:
            // user_id, ip_address, user_agent,
            // device_type, browser, platform
        })
    });
}</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== API ==================== -->
        <section id="api">
            <h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-3">
                <span class="w-10 h-10 bg-indigo-600 rounded-lg flex items-center justify-center">
                    <i class="fas fa-plug"></i>
                </span>
                API Endpoints
            </h2>

            <div class="bg-slate-800/50 border border-slate-700 rounded-xl p-6 font-mono text-sm space-y-4">
                <div>
                    <p class="text-yellow-400 font-bold mb-2 font-sans">Corporate</p>
                    <div class="bg-slate-900 rounded-lg p-3 space-y-1">
                        <div><span class="text-green-400">GET</span> /api/corporate/spot-settings</div>
                        <div><span class="text-yellow-400">PUT</span> /api/corporate/spot-settings</div>
                        <div><span class="text-green-400">GET</span> /api/corporate/spots</div>
                        <div><span class="text-blue-400">POST</span> /api/corporate/spots <span class="text-gray-500">← MediaLibrary upload</span></div>
                        <div><span class="text-yellow-400">PUT</span> /api/corporate/spots/{id}</div>
                        <div><span class="text-purple-400">POST</span> /api/corporate/spots/reorder</div>
                        <div><span class="text-orange-400">POST</span> /api/corporate/spots/{id}/archive</div>
                        <div><span class="text-blue-400">POST</span> /api/corporate/spots/{id}/unarchive</div>
                        <div><span class="text-green-400">GET</span> /api/corporate/spots/{id}/stats</div>
                    </div>
                </div>

                <div>
                    <p class="text-green-400 font-bold mb-2 font-sans">Sube</p>
                    <div class="bg-slate-900 rounded-lg p-3 space-y-1">
                        <div><span class="text-blue-400">POST</span> /api/branch/spots/pause</div>
                        <div><span class="text-blue-400">POST</span> /api/branch/spots/resume</div>
                    </div>
                </div>

                <div>
                    <p class="text-purple-400 font-bold mb-2 font-sans">Player</p>
                    <div class="bg-slate-900 rounded-lg p-3 space-y-1">
                        <div><span class="text-green-400">GET</span> /api/spot/init</div>
                        <div><span class="text-green-400">GET</span> /api/spot/next</div>
                        <div><span class="text-blue-400">POST</span> /api/spot/played <span class="text-gray-500">← Detayli log (song_plays gibi)</span></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== GELISTIRME ==================== -->
        <section>
            <h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-3">
                <span class="w-10 h-10 bg-teal-600 rounded-lg flex items-center justify-center">
                    <i class="fas fa-list-check"></i>
                </span>
                Gelistirme Sirasi
            </h2>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                <div class="bg-slate-800 rounded-lg p-4 border-l-4 border-blue-500">
                    <span class="w-7 h-7 bg-blue-600 rounded-full inline-flex items-center justify-center font-bold text-sm mr-2">1</span>
                    <span class="text-white font-medium">Veritabani</span>
                    <p class="text-gray-400 text-sm mt-1">2 migration + 2 model + MediaLibrary</p>
                </div>
                <div class="bg-slate-800 rounded-lg p-4 border-l-4 border-yellow-500">
                    <span class="w-7 h-7 bg-yellow-600 rounded-full inline-flex items-center justify-center font-bold text-sm mr-2">2</span>
                    <span class="text-white font-medium">Kurumsal Panel</span>
                    <p class="text-gray-400 text-sm mt-1">CRUD + upload + istatistik</p>
                </div>
                <div class="bg-slate-800 rounded-lg p-4 border-l-4 border-green-500">
                    <span class="w-7 h-7 bg-green-600 rounded-full inline-flex items-center justify-center font-bold text-sm mr-2">3</span>
                    <span class="text-white font-medium">Sube Widget</span>
                    <p class="text-gray-400 text-sm mt-1">Durdur/devam</p>
                </div>
                <div class="bg-slate-800 rounded-lg p-4 border-l-4 border-purple-500">
                    <span class="w-7 h-7 bg-purple-600 rounded-full inline-flex items-center justify-center font-bold text-sm mr-2">4</span>
                    <span class="text-white font-medium">Player JS</span>
                    <p class="text-gray-400 text-sm mt-1">30 sn kurali + spot calar + loglama</p>
                </div>
                <div class="bg-slate-800 rounded-lg p-4 border-l-4 border-cyan-500">
                    <span class="w-7 h-7 bg-cyan-600 rounded-full inline-flex items-center justify-center font-bold text-sm mr-2">5</span>
                    <span class="text-white font-medium">Test</span>
                    <p class="text-gray-400 text-sm mt-1">Migration + build + test</p>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-slate-800/30 border-t border-slate-700 mt-12 py-6">
        <div class="max-w-7xl mx-auto px-6 text-center text-gray-500 text-sm">
            <p>
                <i class="fas fa-robot mr-2"></i>
                Claude AI • 31 Aralik 2025 • Final v9
            </p>
        </div>
    </footer>

</body>
</html>
