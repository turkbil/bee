<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Genre-Playlist Sistem Değişikliği - Planlama</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        slate: {
                            850: '#1a2332',
                            950: '#0f1419'
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-slate-950 text-slate-100 min-h-screen">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12">

        <!-- Header -->
        <header class="mb-8 sm:mb-12">
            <div class="flex items-center gap-3 mb-4">
                <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-blue-900/30 text-blue-300 border border-blue-800">
                    <i class="fas fa-clipboard-list mr-2"></i>
                    Planlama
                </span>
                <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-purple-900/30 text-purple-300 border border-purple-800">
                    <i class="fas fa-calendar mr-2"></i>
                    6 Ocak 2026
                </span>
            </div>
            <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold mb-4 bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent">
                Genre-Playlist Sistem Değişikliği
            </h1>
            <p class="text-lg sm:text-xl text-slate-400">
                Müzik türleri (genres) sayfalarında playlist gösterimi ve Sector pattern'ine geçiş planlaması
            </p>
        </header>

        <!-- Basit Anlatım -->
        <div class="bg-gradient-to-br from-green-900/20 to-emerald-900/20 border border-green-800/50 rounded-lg p-6 mb-6">
            <h3 class="text-2xl font-bold text-green-300 mb-4 flex items-center gap-2">
                <i class="fas fa-comment-dots"></i>
                Basit Anlatım (Herkes İçin)
            </h3>

            <div class="space-y-4 text-slate-200">
                <p class="text-lg leading-relaxed">
                    <strong>Şu anki durum:</strong> Kullanıcı bir müzik türüne (mesela "Rock") tıkladığında,
                    o türdeki tüm şarkılar liste halinde gösteriliyor. Ancak bu çok uzun ve karışık bir liste oluyor.
                </p>

                <p class="text-lg leading-relaxed">
                    <strong>Yeni sistem:</strong> Artık müzik türlerine playlist atayabiliyoruz. Kullanıcı bir türe
                    tıkladığında, o türle ilgili hazırlanmış playlistleri görecek. Bu, sektörler sayfasındaki
                    sisteme benziyor (mesela "Alışveriş Merkezi" sektörüne tıklayınca içindeki playlistler gösteriliyor).
                </p>

                <p class="text-lg leading-relaxed">
                    <strong>Playlist'e tıklayınca ne olacak?</strong> Bilgisayarda preview modda (ön izleme) açılacak.
                    Kullanıcı playlist detaylarını görecek, şarkıları görecek ve hemen çalmaya başlayabilecek.
                </p>

                <p class="text-lg leading-relaxed bg-blue-900/20 border border-blue-800/50 rounded-lg p-4">
                    <i class="fas fa-lightbulb text-yellow-400 mr-2"></i>
                    <strong>Özetle:</strong> "Rock müziği dinlemek istiyorum" diyen kullanıcı → Rock türüne tıklıyor →
                    "Rock Klasikleri", "Modern Rock", "Türkçe Rock" gibi hazır playlistleri görüyor → Beğendiğine
                    tıklıyor → Hemen dinlemeye başlıyor.
                </p>

                <p class="text-lg leading-relaxed">
                    <strong>Demo/Test için:</strong> Sistemde henüz genre-playlist atamaları olmadığı için,
                    rastgele playlistleri türlere atayacağız. Böylece sistem çalışır hale gelecek ve test edilebilecek.
                </p>
            </div>
        </div>

        <!-- Teknik Detaylar -->
        <div class="bg-gradient-to-br from-blue-900/20 to-cyan-900/20 border border-blue-800/50 rounded-lg p-6 mb-6">
            <h3 class="text-2xl font-bold text-blue-300 mb-4 flex items-center gap-2">
                <i class="fas fa-code"></i>
                Teknik Detaylar (Geliştiriciler İçin)
            </h3>

            <div class="space-y-6">
                <!-- Mevcut Sistem -->
                <div>
                    <h4 class="text-xl font-semibold text-cyan-300 mb-3 flex items-center gap-2">
                        <i class="fas fa-database"></i>
                        Mevcut Sistem Analizi
                    </h4>
                    <div class="bg-slate-900/50 rounded-lg p-4 space-y-2 text-sm">
                        <p><strong class="text-blue-400">Database İlişkisi:</strong> Playlist model'inde zaten genres() ilişkisi mevcut (playlistables tablosu üzerinden polymorphic many-to-many)</p>
                        <p><strong class="text-blue-400">Tablo:</strong> muzibu_playlistables (playlistable_type = 'genre', playlistable_id = genre_id)</p>
                        <p><strong class="text-blue-400">Controller:</strong> GenreController::show() şu anda songs gösteriyor</p>
                        <p><strong class="text-blue-400">View:</strong> genres/show.blade.php şu anda song-simple-row component'lerini listeliyor</p>
                    </div>
                </div>

                <!-- Hedef Sistem -->
                <div>
                    <h4 class="text-xl font-semibold text-cyan-300 mb-3 flex items-center gap-2">
                        <i class="fas fa-bullseye"></i>
                        Hedef Sistem (Sector Pattern)
                    </h4>
                    <div class="bg-slate-900/50 rounded-lg p-4 space-y-2 text-sm">
                        <p><strong class="text-blue-400">Referans:</strong> SectorController::show() ve sectors/show.blade.php pattern'i kullanılacak</p>
                        <p><strong class="text-blue-400">Genre Model:</strong> HasPlaylistDistribution trait eklenecek (Sector gibi)</p>
                        <p><strong class="text-blue-400">Controller:</strong> $genre->playlists() ilişkisi ile playlist'ler çekilecek (aktif + şarkılı olanlar)</p>
                        <p><strong class="text-blue-400">View:</strong> playlist-card component'leri grid layout ile gösterilecek (:preview="true" prop'u ile)</p>
                    </div>
                </div>

                <!-- Etkilenecek Dosyalar -->
                <div>
                    <h4 class="text-xl font-semibold text-cyan-300 mb-3 flex items-center gap-2">
                        <i class="fas fa-file-code"></i>
                        Etkilenecek Dosyalar
                    </h4>
                    <div class="bg-slate-900/50 rounded-lg p-4">
                        <ul class="space-y-2 text-sm font-mono">
                            <li class="flex items-start gap-2">
                                <i class="fas fa-chevron-right text-green-400 mt-1"></i>
                                <span class="text-slate-300">Modules/Muzibu/app/Models/Genre.php</span>
                                <span class="text-blue-400 text-xs">(HasPlaylistDistribution trait ekle)</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <i class="fas fa-chevron-right text-green-400 mt-1"></i>
                                <span class="text-slate-300">Modules/Muzibu/app/Http/Controllers/Front/GenreController.php</span>
                                <span class="text-blue-400 text-xs">(show metodu - playlists çekimi)</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <i class="fas fa-chevron-right text-green-400 mt-1"></i>
                                <span class="text-slate-300">resources/views/themes/muzibu/genres/show.blade.php</span>
                                <span class="text-blue-400 text-xs">(playlist grid layout)</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <i class="fas fa-chevron-right text-yellow-400 mt-1"></i>
                                <span class="text-slate-300">resources/views/themes/muzibu/partials/genre-detail.blade.php</span>
                                <span class="text-yellow-400 text-xs">(API için partial - güncelleme gerekebilir)</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Kullanılacak Component -->
                <div>
                    <h4 class="text-xl font-semibold text-cyan-300 mb-3 flex items-center gap-2">
                        <i class="fas fa-puzzle-piece"></i>
                        Kullanılacak Component
                    </h4>
                    <div class="bg-slate-900/50 rounded-lg p-4">
                        <pre class="text-sm text-green-300"><code>&lt;x-muzibu.playlist-card :playlist="$playlist" :preview="true" /&gt;</code></pre>
                        <p class="text-slate-400 mt-2 text-sm">
                            <i class="fas fa-info-circle text-blue-400"></i>
                            :preview="true" prop'u sayesinde playlist'e tıklayınca PC'de preview modda açılır (mobilde normal açılır)
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Yapılacaklar -->
        <div class="bg-gradient-to-br from-purple-900/20 to-pink-900/20 border border-purple-800/50 rounded-lg p-6 mb-6">
            <h3 class="text-2xl font-bold text-purple-300 mb-4 flex items-center gap-2">
                <i class="fas fa-tasks"></i>
                Yapılacaklar (Adım Adım)
            </h3>

            <div class="space-y-4">
                <!-- Adım 1 -->
                <div class="bg-slate-900/50 rounded-lg p-4 border-l-4 border-green-500">
                    <div class="flex items-start gap-3">
                        <div class="flex-shrink-0 w-8 h-8 bg-green-600 rounded-full flex items-center justify-center font-bold">1</div>
                        <div class="flex-1">
                            <h4 class="font-semibold text-lg text-green-300 mb-2">Genre Model'e Trait Ekle</h4>
                            <p class="text-slate-300 mb-2">Genre.php dosyasına HasPlaylistDistribution trait'ini ekle (Sector model gibi)</p>
                            <div class="bg-slate-950/70 rounded p-3 text-sm font-mono">
                                <p class="text-blue-300">use Modules\Muzibu\App\Traits\HasPlaylistDistribution;</p>
                                <p class="text-green-300">use HasPlaylistDistribution;</p>
                            </div>
                            <p class="text-slate-400 mt-2 text-sm">
                                <i class="fas fa-check-circle text-green-400"></i>
                                Trait eklendikten sonra $genre->playlists() ilişkisi otomatik kullanılabilir hale gelir
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Adım 2 -->
                <div class="bg-slate-900/50 rounded-lg p-4 border-l-4 border-blue-500">
                    <div class="flex items-start gap-3">
                        <div class="flex-shrink-0 w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center font-bold">2</div>
                        <div class="flex-1">
                            <h4 class="font-semibold text-lg text-blue-300 mb-2">GenreController::show() Güncelle</h4>
                            <p class="text-slate-300 mb-2">SectorController::show() pattern'ini uygula:</p>
                            <ul class="space-y-1 text-sm text-slate-300 ml-4">
                                <li>• $songs yerine $playlists çek</li>
                                <li>• Aktif + şarkılı playlist'leri filtrele (whereHas('songs'))</li>
                                <li>• songs_count ve total_duration ekle (withCount, withSum)</li>
                                <li>• created_at desc sıralama (en yeni playlistler önce)</li>
                                <li>• apiShow() metodunu da güncelle (genre-detail partial için)</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Adım 3 -->
                <div class="bg-slate-900/50 rounded-lg p-4 border-l-4 border-purple-500">
                    <div class="flex items-start gap-3">
                        <div class="flex-shrink-0 w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center font-bold">3</div>
                        <div class="flex-1">
                            <h4 class="font-semibold text-lg text-purple-300 mb-2">Genre Show View Güncelle</h4>
                            <p class="text-slate-300 mb-2">sectors/show.blade.php pattern'ini uygula:</p>
                            <ul class="space-y-1 text-sm text-slate-300 ml-4">
                                <li>• Songs list kaldır → Playlist grid ekle</li>
                                <li>• Grid layout: grid-cols-2 sm:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5</li>
                                <li>• Component: &lt;x-muzibu.playlist-card :playlist="$playlist" :preview="true" /&gt;</li>
                                <li>• Playlist sayısı göster (header'da)</li>
                                <li>• Radios bölümü eklenebilir (eğer genre-radio ilişkisi varsa - opsiyonel)</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Adım 4 -->
                <div class="bg-slate-900/50 rounded-lg p-4 border-l-4 border-yellow-500">
                    <div class="flex items-start gap-3">
                        <div class="flex-shrink-0 w-8 h-8 bg-yellow-600 rounded-full flex items-center justify-center font-bold">4</div>
                        <div class="flex-1">
                            <h4 class="font-semibold text-lg text-yellow-300 mb-2">Genre Detail Partial Güncelle</h4>
                            <p class="text-slate-300 mb-2">API için genre-detail.blade.php partial'ını güncelle (SPA uyumluluğu için)</p>
                            <ul class="space-y-1 text-sm text-slate-300 ml-4">
                                <li>• Aynı değişiklikleri partial'a da uygula</li>
                                <li>• Songs yerine Playlists göster</li>
                                <li>• Preview mode aktif olmalı</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Adım 5 -->
                <div class="bg-slate-900/50 rounded-lg p-4 border-l-4 border-orange-500">
                    <div class="flex items-start gap-3">
                        <div class="flex-shrink-0 w-8 h-8 bg-orange-600 rounded-full flex items-center justify-center font-bold">5</div>
                        <div class="flex-1">
                            <h4 class="font-semibold text-lg text-orange-300 mb-2">Demo İçin Rastgele Playlist Atamaları</h4>
                            <p class="text-slate-300 mb-2">Test ve demo için rastgele playlistleri genre'lere ata:</p>
                            <ul class="space-y-1 text-sm text-slate-300 ml-4">
                                <li>• Aktif genre'leri çek (10-15 tane)</li>
                                <li>• Aktif playlistleri çek (50-100 tane)</li>
                                <li>• Her genre'ye 3-7 arası rastgele playlist ata</li>
                                <li>• Database: muzibu_playlistables tablosuna INSERT (playlistable_type = 'genre')</li>
                                <li>• Position değerleri: 0, 1, 2, 3... (sıralama için)</li>
                            </ul>
                            <div class="bg-slate-950/70 rounded p-3 mt-3 text-sm font-mono">
                                <p class="text-gray-400">// Örnek SQL</p>
                                <p class="text-green-300">INSERT INTO muzibu_playlistables</p>
                                <p class="text-green-300">(playlist_id, playlistable_type, playlistable_id, position)</p>
                                <p class="text-green-300">VALUES (123, 'genre', 5, 0)</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Adım 6 -->
                <div class="bg-slate-900/50 rounded-lg p-4 border-l-4 border-red-500">
                    <div class="flex items-start gap-3">
                        <div class="flex-shrink-0 w-8 h-8 bg-red-600 rounded-full flex items-center justify-center font-bold">6</div>
                        <div class="flex-1">
                            <h4 class="font-semibold text-lg text-red-300 mb-2">Test ve Cache Temizliği</h4>
                            <p class="text-slate-300 mb-2">Tüm değişiklikler sonrası test ve cache temizliği:</p>
                            <ul class="space-y-1 text-sm text-slate-300 ml-4">
                                <li>• php artisan view:clear</li>
                                <li>• php artisan responsecache:clear</li>
                                <li>• Browser'da genre detay sayfasını test et</li>
                                <li>• Playlist'e tıklayıp preview modun çalıştığını kontrol et</li>
                                <li>• Mobil responsive test</li>
                                <li>• API endpoint'lerini test et (SPA için)</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Riskler ve Dikkat Edilecekler -->
        <div class="bg-gradient-to-br from-red-900/20 to-orange-900/20 border border-red-800/50 rounded-lg p-6 mb-6">
            <h3 class="text-2xl font-bold text-red-300 mb-4 flex items-center gap-2">
                <i class="fas fa-exclamation-triangle"></i>
                Riskler ve Dikkat Edilecekler
            </h3>

            <div class="space-y-3">
                <div class="flex items-start gap-3 bg-slate-900/50 rounded-lg p-3">
                    <i class="fas fa-shield-alt text-yellow-400 mt-1"></i>
                    <div>
                        <p class="font-semibold text-yellow-300">Cache Problemi</p>
                        <p class="text-sm text-slate-300">View ve response cache'i mutlaka temizlenmeli, aksi halde eski songs listesi gösterilmeye devam eder</p>
                    </div>
                </div>

                <div class="flex items-start gap-3 bg-slate-900/50 rounded-lg p-3">
                    <i class="fas fa-mobile-alt text-blue-400 mt-1"></i>
                    <div>
                        <p class="font-semibold text-blue-300">Preview Mode</p>
                        <p class="text-sm text-slate-300">:preview="true" prop'u sadece PC'de preview açar, mobilde normal açılır (playlist-card component'inin mantığı)</p>
                    </div>
                </div>

                <div class="flex items-start gap-3 bg-slate-900/50 rounded-lg p-3">
                    <i class="fas fa-database text-green-400 mt-1"></i>
                    <div>
                        <p class="font-semibold text-green-300">Polymorphic Type</p>
                        <p class="text-sm text-slate-300">playlistable_type değeri 'genre' olmalı (küçük harf, tekil), 'Genre' veya 'genres' değil!</p>
                    </div>
                </div>

                <div class="flex items-start gap-3 bg-slate-900/50 rounded-lg p-3">
                    <i class="fas fa-filter text-purple-400 mt-1"></i>
                    <div>
                        <p class="font-semibold text-purple-300">Aktif + Şarkılı Playlist Filtresi</p>
                        <p class="text-sm text-slate-300">whereHas('songs') ile mutlaka filtrelenmeli, aksi halde boş playlistler gösterilir (kötü UX)</p>
                    </div>
                </div>

                <div class="flex items-start gap-3 bg-slate-900/50 rounded-lg p-3">
                    <i class="fas fa-random text-orange-400 mt-1"></i>
                    <div>
                        <p class="font-semibold text-orange-300">Rastgele Atama Tekrarı</p>
                        <p class="text-sm text-slate-300">Demo playlist atamaları yaparken UNIQUE constraint var, duplicate INSERT hatası alabilirsiniz (INSERT IGNORE kullanın)</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Beklenen Sonuç -->
        <div class="bg-gradient-to-br from-cyan-900/20 to-teal-900/20 border border-cyan-800/50 rounded-lg p-6 mb-6">
            <h3 class="text-2xl font-bold text-cyan-300 mb-4 flex items-center gap-2">
                <i class="fas fa-trophy"></i>
                Beklenen Sonuç
            </h3>

            <div class="space-y-4 text-slate-200">
                <div class="flex items-start gap-3">
                    <i class="fas fa-check-circle text-green-400 text-xl mt-1"></i>
                    <p>
                        <strong>Genre Sayfası:</strong> Kullanıcı bir türe (örn: "Rock") tıkladığında,
                        şarkılar yerine o türe ait playlistler grid layout ile gösterilir
                    </p>
                </div>

                <div class="flex items-start gap-3">
                    <i class="fas fa-check-circle text-green-400 text-xl mt-1"></i>
                    <p>
                        <strong>Preview Mode:</strong> PC'de playlist'e tıklayınca preview modda (overlay) açılır,
                        mobilde normal sayfa olarak açılır
                    </p>
                </div>

                <div class="flex items-start gap-3">
                    <i class="fas fa-check-circle text-green-400 text-xl mt-1"></i>
                    <p>
                        <strong>Tutarlı UX:</strong> Genre sayfası, Sector sayfası ile aynı görünüm ve davranışa sahip olur
                        (tek fark: radios bölümü olmayabilir)
                    </p>
                </div>

                <div class="flex items-start gap-3">
                    <i class="fas fa-check-circle text-green-400 text-xl mt-1"></i>
                    <p>
                        <strong>Demo Hazır:</strong> Rastgele playlist atamaları sayesinde sistem test edilebilir ve
                        kullanıcıya gösterilebilir hale gelir
                    </p>
                </div>

                <div class="flex items-start gap-3">
                    <i class="fas fa-check-circle text-green-400 text-xl mt-1"></i>
                    <p>
                        <strong>API Uyumluluğu:</strong> SPA sistemi için apiShow() endpoint'i de güncellenir,
                        genre-detail partial'ı playlist'leri gösterir
                    </p>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="mt-12 pt-6 border-t border-slate-800 text-center text-slate-500">
            <p class="flex items-center justify-center gap-2">
                <i class="fas fa-robot text-blue-400"></i>
                <span>Claude AI tarafından oluşturuldu</span>
            </p>
            <p class="text-sm mt-2">
                <i class="fas fa-calendar-alt"></i>
                6 Ocak 2026
            </p>
        </footer>

    </div>
</body>
</html>