<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Muzibu - Veri HiyerarÅŸisi ve Performans Analizi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body class="bg-slate-900 text-white min-h-screen">
    <div class="max-w-6xl mx-auto px-4 py-8">

        <!-- Header -->
        <header class="text-center mb-12">
            <div class="inline-flex items-center gap-2 bg-purple-600/20 border border-purple-500/30 rounded-full px-4 py-2 mb-4">
                <i class="fas fa-sitemap"></i>
                <span class="text-sm font-medium">Veri Mimarisi</span>
            </div>
            <h1 class="text-3xl font-bold mb-2">Veri HiyerarÅŸisi & Performans Analizi</h1>
            <p class="text-slate-400">Cihaz verileri nasÄ±l organize edilmeli + yeni alanlarÄ±n etkisi</p>
            <p class="text-xs text-slate-500 mt-2">29 AralÄ±k 2025 - v2</p>
        </header>

        <!-- BÃ–LÃœM 1: HiyerarÅŸi -->
        <div class="mb-12">
            <h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-3">
                <span class="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center">1</span>
                Veri HiyerarÅŸisi
            </h2>

            <!-- Basit AnlatÄ±m -->
            <div class="bg-green-900/20 border border-green-800 rounded-lg p-6 mb-6">
                <h3 class="text-lg font-semibold text-green-400 mb-4">
                    <i class="fas fa-user mr-2"></i>Basit AnlatÄ±m
                </h3>
                <p class="text-slate-300">
                    Cihaz bilgileri bir aÄŸaÃ§ gibi dÃ¼ÅŸÃ¼nÃ¼lebilir. En tepede "Mobil mi, MasaÃ¼stÃ¼ mÃ¼?" var.
                    Sonra "Hangi iÅŸletim sistemi?", en altta "Hangi tarayÄ±cÄ±?" sorularÄ± geliyor.
                </p>
            </div>

            <!-- HiyerarÅŸi AÄŸacÄ± -->
            <div class="bg-slate-800/50 border border-slate-700 rounded-lg p-6 mb-6">
                <h3 class="text-lg font-semibold text-white mb-6">
                    <i class="fas fa-sitemap mr-2 text-purple-400"></i>HiyerarÅŸi AÄŸacÄ±
                </h3>

                <div class="font-mono text-sm space-y-1 bg-slate-900 p-6 rounded-lg">
                    <div class="text-yellow-400">ğŸ“± device_type <span class="text-slate-500">(Cihaz Tipi)</span></div>
                    <div class="pl-4">â”œâ”€â”€ <span class="text-blue-400">desktop</span></div>
                    <div class="pl-8">â”‚   â””â”€â”€ ğŸ’» <span class="text-pink-400">platform</span> <span class="text-slate-500">(Ä°ÅŸletim Sistemi)</span></div>
                    <div class="pl-12">â”‚       â”œâ”€â”€ <span class="text-green-400">macOS</span></div>
                    <div class="pl-16">â”‚       â”‚   â””â”€â”€ ğŸŒ <span class="text-cyan-400">browser</span></div>
                    <div class="pl-20">â”‚       â”‚       â”œâ”€â”€ Chrome</div>
                    <div class="pl-20">â”‚       â”‚       â”œâ”€â”€ Safari</div>
                    <div class="pl-20">â”‚       â”‚       â””â”€â”€ Firefox</div>
                    <div class="pl-12">â”‚       â”œâ”€â”€ <span class="text-green-400">Windows</span></div>
                    <div class="pl-16">â”‚       â”‚   â””â”€â”€ ğŸŒ <span class="text-cyan-400">browser</span></div>
                    <div class="pl-20">â”‚       â”‚       â”œâ”€â”€ Chrome</div>
                    <div class="pl-20">â”‚       â”‚       â”œâ”€â”€ Edge</div>
                    <div class="pl-20">â”‚       â”‚       â””â”€â”€ Firefox</div>
                    <div class="pl-12">â”‚       â””â”€â”€ <span class="text-green-400">Linux</span></div>
                    <div class="pl-4">â”œâ”€â”€ <span class="text-blue-400">mobile</span></div>
                    <div class="pl-8">â”‚   â””â”€â”€ ğŸ’» <span class="text-pink-400">platform</span></div>
                    <div class="pl-12">â”‚       â”œâ”€â”€ <span class="text-green-400">iOS</span></div>
                    <div class="pl-16">â”‚       â”‚   â””â”€â”€ ğŸŒ <span class="text-cyan-400">browser</span></div>
                    <div class="pl-20">â”‚       â”‚       â”œâ”€â”€ Safari (WebKit)</div>
                    <div class="pl-20">â”‚       â”‚       â””â”€â”€ Chrome (WebKit)</div>
                    <div class="pl-12">â”‚       â””â”€â”€ <span class="text-green-400">Android</span></div>
                    <div class="pl-16">â”‚           â””â”€â”€ ğŸŒ <span class="text-cyan-400">browser</span></div>
                    <div class="pl-20">â”‚               â”œâ”€â”€ Chrome</div>
                    <div class="pl-20">â”‚               â””â”€â”€ Samsung Internet</div>
                    <div class="pl-4">â””â”€â”€ <span class="text-blue-400">tablet</span></div>
                    <div class="pl-8 text-slate-500">    â””â”€â”€ (aynÄ± yapÄ±)</div>
                </div>
            </div>

            <!-- AyrÄ± Boyutlar -->
            <div class="grid md:grid-cols-2 gap-6 mb-6">
                <div class="bg-orange-900/20 border border-orange-800 rounded-lg p-6">
                    <h4 class="font-semibold text-orange-400 mb-3">
                        <i class="fas fa-network-wired mr-2"></i>ip_address (AyrÄ± Boyut)
                    </h4>
                    <p class="text-sm text-slate-300 mb-3">
                        IP adresi hiyerarÅŸide deÄŸil, <strong>ayrÄ± bir boyut</strong>.
                        AynÄ± cihaz farklÄ± aÄŸlardan baÄŸlanabilir (ev, iÅŸ, mobil data).
                    </p>
                    <div class="text-xs bg-slate-900 p-3 rounded font-mono">
                        92.44.171.31 â†’ TÃ¼rkiye / Ä°stanbul / Vodafone
                    </div>
                </div>

                <div class="bg-purple-900/20 border border-purple-800 rounded-lg p-6">
                    <h4 class="font-semibold text-purple-400 mb-3">
                        <i class="fas fa-fingerprint mr-2"></i>user_agent (Ham Veri)
                    </h4>
                    <p class="text-sm text-slate-300 mb-3">
                        DiÄŸer tÃ¼m bilgiler user_agent'tan Ã§Ä±karÄ±lÄ±r.
                        Ham string olarak saklanÄ±r, gerekirse yeniden parse edilebilir.
                    </p>
                    <div class="text-xs bg-slate-900 p-3 rounded font-mono text-slate-400 break-all">
                        Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7)...
                    </div>
                </div>
            </div>

            <!-- Timeline iÃ§in Ã–nerilen Gruplama -->
            <div class="bg-blue-900/20 border border-blue-800 rounded-lg p-6">
                <h3 class="text-lg font-semibold text-blue-400 mb-4">
                    <i class="fas fa-chart-bar mr-2"></i>Timeline Ä°Ã§in Ã–nerilen Gruplama
                </h3>

                <p class="text-slate-300 mb-4">Abuse detection timeline'da Y ekseni ÅŸÃ¶yle olmalÄ±:</p>

                <div class="grid md:grid-cols-2 gap-4">
                    <div class="bg-slate-900 rounded-lg p-4">
                        <h5 class="text-sm font-medium text-slate-400 mb-3">Åu anki (Sadece Browser)</h5>
                        <div class="space-y-2 text-sm">
                            <div class="flex items-center gap-2"><i class="fab fa-chrome text-blue-400"></i> Chrome</div>
                            <div class="flex items-center gap-2"><i class="fab fa-safari text-cyan-400"></i> Safari</div>
                        </div>
                    </div>
                    <div class="bg-green-900/30 border border-green-700 rounded-lg p-4">
                        <h5 class="text-sm font-medium text-green-400 mb-3">Ã–nerilen (Device + Browser)</h5>
                        <div class="space-y-2 text-sm">
                            <div class="flex items-center gap-2"><i class="fas fa-desktop text-slate-400"></i><i class="fab fa-chrome text-blue-400"></i> Desktop Chrome</div>
                            <div class="flex items-center gap-2"><i class="fas fa-desktop text-slate-400"></i><i class="fab fa-safari text-cyan-400"></i> Desktop Safari</div>
                            <div class="flex items-center gap-2"><i class="fas fa-mobile-alt text-slate-400"></i><i class="fab fa-safari text-cyan-400"></i> Mobile Safari</div>
                            <div class="flex items-center gap-2"><i class="fas fa-mobile-alt text-slate-400"></i><i class="fab fa-chrome text-blue-400"></i> Mobile Chrome</div>
                        </div>
                    </div>
                </div>

                <div class="mt-4 p-3 bg-yellow-900/20 border border-yellow-800/50 rounded text-sm">
                    <i class="fas fa-lightbulb text-yellow-400 mr-2"></i>
                    <strong>Neden?</strong> AynÄ± kullanÄ±cÄ± hem telefondan hem bilgisayardan dinleyebilir.
                    Bu normal. Ama aynÄ± anda 2 farklÄ± masaÃ¼stÃ¼ tarayÄ±cÄ±dan dinlemek ÅŸÃ¼pheli.
                </div>
            </div>
        </div>

        <!-- BÃ–LÃœM 2: Performans -->
        <div class="mb-12">
            <h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-3">
                <span class="w-10 h-10 bg-red-600 rounded-lg flex items-center justify-center">2</span>
                Yeni AlanlarÄ±n Performans Etkisi
            </h2>

            <!-- Basit AnlatÄ±m -->
            <div class="bg-green-900/20 border border-green-800 rounded-lg p-6 mb-6">
                <h3 class="text-lg font-semibold text-green-400 mb-4">
                    <i class="fas fa-user mr-2"></i>Basit AnlatÄ±m
                </h3>
                <p class="text-slate-300">
                    Åu an sadece ÅŸarkÄ± <strong>baÅŸladÄ±ÄŸÄ±nda</strong> veri kaydediyoruz.
                    Yeni alanlar iÃ§in ÅŸarkÄ± <strong>bittiÄŸinde de</strong> sunucuya haber vermemiz gerekir.
                    Bu, her ÅŸarkÄ± iÃ§in 1 yerine 2 istek demek.
                </p>
            </div>

            <!-- KarÅŸÄ±laÅŸtÄ±rma Tablosu -->
            <div class="overflow-x-auto mb-6">
                <table class="w-full text-sm">
                    <thead>
                        <tr class="border-b border-slate-700 bg-slate-800/50">
                            <th class="text-left py-3 px-4 text-slate-400">Alan</th>
                            <th class="text-left py-3 px-4 text-slate-400">Ne Zaman ToplanÄ±r?</th>
                            <th class="text-left py-3 px-4 text-slate-400">API Ä°steÄŸi</th>
                            <th class="text-left py-3 px-4 text-slate-400">DB Etkisi</th>
                            <th class="text-left py-3 px-4 text-slate-400">Performans</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-slate-800">
                        <tr>
                            <td class="py-3 px-4 font-mono text-cyan-400">source_type</td>
                            <td class="py-3 px-4">BaÅŸlangÄ±Ã§ta</td>
                            <td class="py-3 px-4"><span class="text-green-400">Mevcut istekte</span></td>
                            <td class="py-3 px-4">+1 varchar field</td>
                            <td class="py-3 px-4"><span class="px-2 py-1 bg-green-600/20 text-green-400 rounded text-xs">âœ… SÄ±fÄ±r etki</span></td>
                        </tr>
                        <tr class="bg-slate-800/30">
                            <td class="py-3 px-4 font-mono text-cyan-400">source_id</td>
                            <td class="py-3 px-4">BaÅŸlangÄ±Ã§ta</td>
                            <td class="py-3 px-4"><span class="text-green-400">Mevcut istekte</span></td>
                            <td class="py-3 px-4">+1 bigint field</td>
                            <td class="py-3 px-4"><span class="px-2 py-1 bg-green-600/20 text-green-400 rounded text-xs">âœ… SÄ±fÄ±r etki</span></td>
                        </tr>
                        <tr>
                            <td class="py-3 px-4 font-mono text-yellow-400">ended_at</td>
                            <td class="py-3 px-4">BitiÅŸte</td>
                            <td class="py-3 px-4"><span class="text-yellow-400">+1 yeni istek</span></td>
                            <td class="py-3 px-4">UPDATE query</td>
                            <td class="py-3 px-4"><span class="px-2 py-1 bg-yellow-600/20 text-yellow-400 rounded text-xs">âš ï¸ Orta etki</span></td>
                        </tr>
                        <tr class="bg-slate-800/30">
                            <td class="py-3 px-4 font-mono text-yellow-400">listened_duration</td>
                            <td class="py-3 px-4">BitiÅŸte</td>
                            <td class="py-3 px-4"><span class="text-yellow-400">ended_at ile birlikte</span></td>
                            <td class="py-3 px-4">+1 int field</td>
                            <td class="py-3 px-4"><span class="px-2 py-1 bg-green-600/20 text-green-400 rounded text-xs">âœ… Ek etki yok</span></td>
                        </tr>
                        <tr>
                            <td class="py-3 px-4 font-mono text-yellow-400">was_skipped</td>
                            <td class="py-3 px-4">BitiÅŸte</td>
                            <td class="py-3 px-4"><span class="text-yellow-400">ended_at ile birlikte</span></td>
                            <td class="py-3 px-4">+1 boolean field</td>
                            <td class="py-3 px-4"><span class="px-2 py-1 bg-green-600/20 text-green-400 rounded text-xs">âœ… Ek etki yok</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- DetaylÄ± Analiz -->
            <div class="grid md:grid-cols-2 gap-6 mb-6">
                <!-- Åu An -->
                <div class="bg-slate-800/50 border border-slate-700 rounded-lg p-6">
                    <h4 class="font-semibold text-white mb-4">
                        <i class="fas fa-clock mr-2 text-blue-400"></i>Åu Anki Durum
                    </h4>
                    <div class="space-y-3 text-sm">
                        <div class="flex justify-between">
                            <span class="text-slate-400">Her ÅŸarkÄ± iÃ§in API isteÄŸi:</span>
                            <span class="font-mono text-green-400">1</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-slate-400">1000 ÅŸarkÄ±/gÃ¼n iÃ§in:</span>
                            <span class="font-mono">1,000 istek</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-slate-400">DB query/ÅŸarkÄ±:</span>
                            <span class="font-mono">1 INSERT</span>
                        </div>
                    </div>
                </div>

                <!-- SonrasÄ± -->
                <div class="bg-yellow-900/20 border border-yellow-800 rounded-lg p-6">
                    <h4 class="font-semibold text-white mb-4">
                        <i class="fas fa-clock mr-2 text-yellow-400"></i>ended_at Eklendikten Sonra
                    </h4>
                    <div class="space-y-3 text-sm">
                        <div class="flex justify-between">
                            <span class="text-slate-400">Her ÅŸarkÄ± iÃ§in API isteÄŸi:</span>
                            <span class="font-mono text-yellow-400">2 (start + end)</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-slate-400">1000 ÅŸarkÄ±/gÃ¼n iÃ§in:</span>
                            <span class="font-mono text-yellow-400">2,000 istek</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-slate-400">DB query/ÅŸarkÄ±:</span>
                            <span class="font-mono">1 INSERT + 1 UPDATE</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SayÄ±sal Etki -->
            <div class="bg-slate-800/50 border border-slate-700 rounded-lg p-6 mb-6">
                <h4 class="font-semibold text-white mb-4">
                    <i class="fas fa-calculator mr-2 text-purple-400"></i>SayÄ±sal Etki HesabÄ±
                </h4>

                <div class="grid md:grid-cols-3 gap-4 text-center">
                    <div class="bg-slate-900 rounded-lg p-4">
                        <div class="text-3xl font-bold text-blue-400">226</div>
                        <div class="text-sm text-slate-400">HaftalÄ±k dinleme (1 kullanÄ±cÄ±)</div>
                    </div>
                    <div class="bg-slate-900 rounded-lg p-4">
                        <div class="text-3xl font-bold text-yellow-400">+226</div>
                        <div class="text-sm text-slate-400">Ek "end" isteÄŸi</div>
                    </div>
                    <div class="bg-slate-900 rounded-lg p-4">
                        <div class="text-3xl font-bold text-green-400">~0.5KB</div>
                        <div class="text-sm text-slate-400">Ä°stek baÅŸÄ±na veri</div>
                    </div>
                </div>

                <div class="mt-4 p-4 bg-green-900/20 border border-green-800/50 rounded">
                    <p class="text-sm text-slate-300">
                        <i class="fas fa-check-circle text-green-400 mr-2"></i>
                        <strong>SonuÃ§:</strong> 100 aktif kullanÄ±cÄ± ile haftalÄ±k ~22,600 ek istek.
                        Modern sunucu iÃ§in <strong>ihmal edilebilir</strong>.
                        Redis/Nginx zaten bu trafiÄŸi rahat kaldÄ±rÄ±r.
                    </p>
                </div>
            </div>

            <!-- Riskler ve Ã‡Ã¶zÃ¼mler -->
            <div class="bg-red-900/20 border border-red-800 rounded-lg p-6">
                <h4 class="font-semibold text-red-400 mb-4">
                    <i class="fas fa-exclamation-triangle mr-2"></i>Potansiyel Riskler ve Ã‡Ã¶zÃ¼mler
                </h4>

                <div class="space-y-4">
                    <div class="flex gap-4">
                        <div class="w-8 h-8 bg-red-600/20 rounded flex items-center justify-center shrink-0">
                            <i class="fas fa-wifi-slash text-red-400"></i>
                        </div>
                        <div>
                            <h5 class="font-medium">Ä°nternet kesilirse "end" isteÄŸi gitmez</h5>
                            <p class="text-sm text-slate-400">Ã‡Ã¶zÃ¼m: localStorage'a kaydet, sonra gÃ¶nder (queue)</p>
                        </div>
                    </div>
                    <div class="flex gap-4">
                        <div class="w-8 h-8 bg-red-600/20 rounded flex items-center justify-center shrink-0">
                            <i class="fas fa-times-circle text-red-400"></i>
                        </div>
                        <div>
                            <h5 class="font-medium">Sekme kapatÄ±lÄ±rsa "end" isteÄŸi gitmez</h5>
                            <p class="text-sm text-slate-400">Ã‡Ã¶zÃ¼m: beforeunload + sendBeacon API (fire-and-forget)</p>
                        </div>
                    </div>
                    <div class="flex gap-4">
                        <div class="w-8 h-8 bg-red-600/20 rounded flex items-center justify-center shrink-0">
                            <i class="fas fa-database text-red-400"></i>
                        </div>
                        <div>
                            <h5 class="font-medium">UPDATE query yÃ¼kÃ¼</h5>
                            <p class="text-sm text-slate-400">Ã‡Ã¶zÃ¼m: play_id indexed olmalÄ±, UPDATE hÄ±zlÄ± olur</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ã–neri -->
        <div class="bg-gradient-to-r from-blue-900/30 to-purple-900/30 border border-blue-800/50 rounded-lg p-6 mb-8">
            <h3 class="text-lg font-semibold text-white mb-4">
                <i class="fas fa-thumbs-up mr-2 text-green-400"></i>Ã–neri
            </h3>

            <div class="space-y-3">
                <div class="flex items-start gap-3">
                    <span class="text-green-400 text-lg">1.</span>
                    <p><strong>Ã–nce source_type/source_id ekle</strong> - SÄ±fÄ±r performans etkisi, hemen eklenebilir</p>
                </div>
                <div class="flex items-start gap-3">
                    <span class="text-yellow-400 text-lg">2.</span>
                    <p><strong>ended_at iÃ§in JS altyapÄ±sÄ± hazÄ±rla</strong> - sendBeacon, localStorage queue</p>
                </div>
                <div class="flex items-start gap-3">
                    <span class="text-blue-400 text-lg">3.</span>
                    <p><strong>Test ortamÄ±nda dene</strong> - GerÃ§ek yÃ¼k ile performans Ã¶lÃ§</p>
                </div>
                <div class="flex items-start gap-3">
                    <span class="text-purple-400 text-lg">4.</span>
                    <p><strong>Production'a al</strong> - EÄŸer sorun yoksa</p>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="text-center text-slate-500 text-sm border-t border-slate-800 pt-8">
            <p>Claude AI tarafÄ±ndan oluÅŸturuldu</p>
            <p class="mt-1">Muzibu - B2B MÃ¼zik Platformu</p>
        </footer>
    </div>
</body>
</html>
