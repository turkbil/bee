<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Muzibu (Tenant 1001) - KapsamlÄ± Sistem Analizi</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #e2e8f0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            line-height: 1.7;
            padding: 40px 20px;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        header { margin-bottom: 50px; padding-bottom: 30px; border-bottom: 2px solid #334155; }
        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #ec4899, #f43f5e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .meta { color: #94a3b8; font-size: 0.95rem; }
        section { margin-bottom: 50px; }
        h2 {
            font-size: 1.8rem;
            margin-bottom: 25px;
            color: #ec4899;
        }
        h3 { font-size: 1.3rem; color: #f472b6; margin-top: 20px; margin-bottom: 15px; }
        .card {
            background: rgba(30, 41, 59, 0.5);
            padding: 25px;
            margin-bottom: 20px;
            border-radius: 12px;
            border-left: 4px solid #ec4899;
            backdrop-filter: blur(10px);
        }
        .file-path { color: #60a5fa; font-family: 'Courier New', monospace; font-size: 0.9rem; background: rgba(96, 165, 250, 0.1); padding: 2px 6px; border-radius: 4px; }
        .code-block { background: rgba(15, 23, 42, 0.8); border: 1px solid #334155; border-radius: 8px; padding: 15px; margin: 15px 0; overflow-x: auto; font-family: 'Courier New', monospace; font-size: 0.85rem; color: #cbd5e1; }
        table { width: 100%; border-collapse: collapse; margin: 15px 0; }
        table th { background: rgba(96, 165, 250, 0.2); padding: 12px; text-align: left; color: #60a5fa; font-weight: 600; border-bottom: 2px solid #334155; }
        table td { padding: 12px; border-bottom: 1px solid #334155; color: #cbd5e1; }
        .status-badge { display: inline-block; padding: 4px 12px; border-radius: 12px; font-size: 0.85rem; font-weight: 600; }
        .status-working { background: #10b981; color: white; }
        .list-item { margin: 10px 0; padding-left: 20px; position: relative; }
        .list-item::before { content: "â–¸"; position: absolute; left: 0; color: #ec4899; }
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0; }
        @media (max-width: 900px) { .grid-2 { grid-template-columns: 1fr; } }
        footer { margin-top: 60px; padding-top: 30px; border-top: 1px solid #334155; color: #64748b; font-size: 0.9rem; text-align: center; }
        .flow-item { background: rgba(236, 72, 153, 0.1); border-left: 3px solid #ec4899; padding: 12px 15px; margin: 10px 0; border-radius: 4px; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸµ Muzibu (Tenant 1001) - Sistem Analizi</h1>
            <div class="meta">
                ğŸ“… Tarih: 2025-11-26 | ğŸ¯ Tenant: Muzibu (1001) | ğŸ‘¤ Sistem: Multi-tenant MÃ¼zik Platformu
            </div>
        </header>

        <section>
            <h2>ğŸ¹ 1. Player Sistemi</h2>
            <div class="card">
                <h4>MimarÄ± & Konum</h4>
                <p class="list-item">Ana Player: <span class="file-path">resources/views/themes/muzibu/components/player.blade.php</span></p>
                <p class="list-item">Sidebar: <span class="file-path">resources/views/themes/muzibu/components/sidebar.blade.php</span></p>
            </div>
            <div class="card">
                <h4>ğŸ™ï¸ Ã–zellikler</h4>
                <p class="list-item">Audio Teknolojisi: HTML5 Audio API + Alpine.js</p>
                <p class="list-item">Ä°kili Audio Ã–ÄŸesi: Crossfade iÃ§in 2 element</p>
                <p class="list-item">Dinleme KaydÄ±: Otomatik (user_id, ip_address, user_agent, device_type)</p>
                <p class="list-item">Formatlar: MP3 (direkt) ve HLS (dÃ¶nÃ¼ÅŸtÃ¼rÃ¼lmÃ¼ÅŸ)</p>
            </div>
            <div class="card">
                <h4>ğŸ” Authentication</h4>
                <p class="list-item">Login: Email + Åifre</p>
                <p class="list-item">Register: Ad, Soyad, Email, Telefon (Tenant 1001), Åifre</p>
                <p class="list-item">Åifre Kriterleri: Min 8 karakter, BÃ¼yÃ¼k harf, KÃ¼Ã§Ã¼k harf, SayÄ±</p>
            </div>
        </section>

        <section>
            <h2>ğŸ’ 2. Subscription/Premium Sistemi</h2>
            <div class="card">
                <h4>Subscription Plans</h4>
                <p class="list-item">Tablo: subscription_plans</p>
                <p class="list-item">FiyatlandÄ±rma: daily, weekly, monthly, quarterly, yearly</p>
                <p class="list-item">Ã–zellikler: has_trial, device_limit, has_analytics, has_priority_support</p>
            </div>
            <div class="card">
                <h4>User Subscriptions</h4>
                <p class="list-item">Tablo: subscriptions</p>
                <p class="list-item">Durumlar: active, trial, expired, cancelled, paused, pending_payment</p>
                <p class="list-item">Metodlar: isActive(), isTrial(), daysRemaining(), cancel(), pause(), resume()</p>
            </div>
        </section>

        <section>
            <h2>ğŸ“Š 3. Dinleme Log Sistemi</h2>
            <div class="card">
                <h4>SongPlay Model</h4>
                <p class="list-item">Tablo: muzibu_song_plays</p>
                <p class="list-item">KayÄ±tlar: song_id, user_id, ip_address, user_agent, device_type, created_at</p>
            </div>
            <div class="card">
                <h4>Analytics MetodlarÄ±</h4>
                <p class="list-item">getTopSongs($limit, $period) - En Ã§ok dinlenenler</p>
                <p class="list-item">getDeviceDistribution($period) - Cihaz daÄŸÄ±lÄ±mÄ±</p>
                <p class="list-item">getHourlyDistribution($date) - Saatlik daÄŸÄ±lÄ±m</p>
                <p class="list-item">getUniqueListenersCount($period) - Toplam dinleyici</p>
            </div>
        </section>

        <section>
            <h2>ğŸµ 4. MÃ¼zik Veri YapÄ±sÄ±</h2>
            <div class="card">
                <h4>Modeller</h4>
                <p class="list-item">Artist â†’ Album â†’ Song â† Genre</p>
                <p class="list-item">Song â† SongPlay (dinleme kayÄ±tlarÄ±)</p>
                <p class="list-item">Playlist â†” Song (M2M) dengan position</p>
                <p class="list-item">Playlist â†” Sector, Radio (M2M)</p>
            </div>
            <div class="card">
                <h4>Song Model Ã–zellikleri</h4>
                <p class="list-item">HLS Streaming: Lazy conversion + MP3 fallback</p>
                <p class="list-item">Metadata: Duration, bitrate, sample_rate, channels</p>
                <p class="list-item">Encryption: is_encrypted, encryption_key fields</p>
                <p class="list-item">Media: Thumbmaker cover (media_id)</p>
                <p class="list-item">SEO: Schema.org MusicRecording</p>
            </div>
        </section>

        <section>
            <h2>ğŸ”Œ 5. API Endpoints</h2>
            <div class="card">
                <h4>Base URL: /api/muzibu/</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Endpoint</th>
                            <th>Method</th>
                            <th>Auth</th>
                            <th>AÃ§Ä±klama</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>/songs/popular</td>
                            <td>GET</td>
                            <td>âŒ</td>
                            <td>En Ã§ok dinlenenler</td>
                        </tr>
                        <tr>
                            <td>/songs/recent</td>
                            <td>GET</td>
                            <td>âœ…</td>
                            <td>Son dinlenenler</td>
                        </tr>
                        <tr>
                            <td>/songs/{id}/stream</td>
                            <td>GET</td>
                            <td>âŒ</td>
                            <td>Stream URL</td>
                        </tr>
                        <tr>
                            <td>/songs/{id}/track-play</td>
                            <td>POST</td>
                            <td>âœ…</td>
                            <td>Dinleme kaydÄ±</td>
                        </tr>
                        <tr>
                            <td>/playlists</td>
                            <td>GET</td>
                            <td>âŒ</td>
                            <td>TÃ¼m playlistler</td>
                        </tr>
                        <tr>
                            <td>/albums/new-releases</td>
                            <td>GET</td>
                            <td>âŒ</td>
                            <td>Yeni Ã§Ä±kanlar</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <section>
            <h2>ğŸ”’ 6. GÃ¼venlik</h2>
            <div class="card">
                <h4>Authentication</h4>
                <p class="list-item">Frontend: Session-based (Sanctum)</p>
                <p class="list-item">API: Sanctum token (stateless)</p>
                <p class="list-item">Admin: Session + Role-based</p>
            </div>
            <div class="card">
                <h4>Log GÃ¼venliÄŸi</h4>
                <p class="list-item">IP adresi kaydediliyor</p>
                <p class="list-item">User agent kaydediliyor</p>
                <p class="list-item">Device type tespit ediliyor</p>
                <p class="list-item">GDPR-uyumlu (minimal kiÅŸisel veri)</p>
            </div>
            <div class="card">
                <h4>âš ï¸ Eksik GÃ¼venlik Ã–nlemleri</h4>
                <p class="list-item">âŒ Rate limiting (API'de yoksa)</p>
                <p class="list-item">âŒ IP whitelist/blacklist</p>
                <p class="list-item">âš ï¸ Audio download korumasÄ±</p>
            </div>
        </section>

        <section>
            <h2>ğŸ¬ 7. HLS Streaming</h2>
            <div class="card">
                <h4>DÃ¶nÃ¼ÅŸÃ¼m Mimarisi</h4>
                <p class="list-item">YÃ¶ntem: Lazy conversion (isteÄŸe baÄŸlÄ±)</p>
                <p class="list-item">Trigger: Ä°lk stream isteÄŸinde ConvertToHLSJob</p>
                <p class="list-item">Format: M3U8 playlist + TS segments</p>
                <p class="list-item">Fallback: MP3 olarak sunulur</p>
            </div>
            <div class="card">
                <h4>Song HLS AlanlarÄ±</h4>
                <p class="list-item">file_path: Orijinal MP3</p>
                <p class="list-item">hls_path: HLS playlist.m3u8</p>
                <p class="list-item">hls_converted: DÃ¶nÃ¼ÅŸtÃ¼rÃ¼ldÃ¼ mÃ¼?</p>
                <p class="list-item">encryption_key: Ä°steÄŸe baÄŸlÄ± ÅŸifreleme</p>
            </div>
        </section>

        <section>
            <h2>ğŸ¢ 8. Tenant-Aware YapÄ±</h2>
            <div class="card">
                <h4>Dinamik Connection</h4>
                <p class="list-item">TÃ¼m modeller tenant connection'u otomatik kullanÄ±r</p>
                <p class="list-item">Central fallback: Default connection</p>
            </div>
            <div class="card">
                <h4>Ã‡oklu Dil & CSS</h4>
                <p class="list-item">Ã‡oklu Dil: HasTranslations trait (JSON)</p>
                <p class="list-item">CSS: Tenant-specific Tailwind CSS</p>
                <p class="list-item">Build: npm run css:all veya css:muzibu</p>
            </div>
        </section>

        <section>
            <h2>ğŸ“ 9. Dosya ReferanslarÄ±</h2>
            <div class="card">
                <h4>Modeller</h4>
                <p class="list-item"><span class="file-path">Modules/Muzibu/app/Models/Song.php</span></p>
                <p class="list-item"><span class="file-path">Modules/Muzibu/app/Models/SongPlay.php</span></p>
                <p class="list-item"><span class="file-path">Modules/Subscription/app/Models/Subscription.php</span></p>
            </div>
            <div class="card">
                <h4>Controllers</h4>
                <p class="list-item"><span class="file-path">Modules/Muzibu/app/Http/Controllers/Api/SongController.php</span></p>
                <p class="list-item"><span class="file-path">Modules/Muzibu/app/Http/Controllers/Api/SongStreamController.php</span></p>
            </div>
            <div class="card">
                <h4>Routes & Views</h4>
                <p class="list-item"><span class="file-path">Modules/Muzibu/routes/api.php</span></p>
                <p class="list-item"><span class="file-path">resources/views/themes/muzibu/components/player.blade.php</span></p>
            </div>
        </section>

        <footer>
            ğŸ¤– Claude AI tarafÄ±ndan oluÅŸturulan detaylÄ± sistem analizi
        </footer>
    </div>
</body>
</html>
