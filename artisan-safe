#!/bin/bash
#
# SAFE ARTISAN WRAPPER
# Bu script artisan komutlarÄ±nÄ± her zaman doÄŸru kullanÄ±cÄ± (tuufi.com_) ile Ã§alÄ±ÅŸtÄ±rÄ±r
# Root olarak Ã§alÄ±ÅŸtÄ±rÄ±lsa bile cache dosyalarÄ± doÄŸru permission'a sahip olur
#

# Proje root directory
PROJECT_ROOT="/var/www/vhosts/tuufi.com/httpdocs"
cd "$PROJECT_ROOT" || exit 1

# Web sunucusu kullanÄ±cÄ±sÄ±
WEB_USER="tuufi.com_"

# Mevcut kullanÄ±cÄ± kim?
CURRENT_USER=$(whoami)

# EÄŸer root veya baÅŸka bir kullanÄ±cÄ± ise, tuufi.com_ olarak Ã§alÄ±ÅŸtÄ±r
if [ "$CURRENT_USER" != "$WEB_USER" ]; then
    echo "ğŸ”’ Running as $WEB_USER (safe mode)..."
    exec sudo -u "$WEB_USER" php artisan "$@"
else
    # Zaten doÄŸru kullanÄ±cÄ±, direkt Ã§alÄ±ÅŸtÄ±r
    exec php artisan "$@"
fi
