<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KDV Fiyat Stratejisi - Performans KarÅŸÄ±laÅŸtÄ±rmasÄ±</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #e2e8f0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            line-height: 1.7;
            padding: 40px 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            margin-bottom: 50px;
            padding-bottom: 30px;
            border-bottom: 2px solid #334155;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #60a5fa, #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .meta {
            color: #94a3b8;
            font-size: 0.95rem;
        }

        section {
            margin-bottom: 50px;
        }

        h2 {
            font-size: 1.8rem;
            margin-bottom: 25px;
            color: #60a5fa;
        }

        h3 {
            font-size: 1.4rem;
            margin: 25px 0 15px;
            color: #93c5fd;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }

        .strategy-card {
            background: rgba(30, 41, 59, 0.5);
            border: 3px solid #334155;
            border-radius: 16px;
            padding: 30px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .strategy-card:hover {
            border-color: #3b82f6;
            transform: translateY(-5px);
        }

        .strategy-card.winner {
            border-color: #10b981;
            background: rgba(16, 185, 129, 0.1);
        }

        .strategy-card h3 {
            color: #60a5fa;
            margin-top: 0;
            margin-bottom: 20px;
            font-size: 1.6rem;
        }

        .strategy-card.winner h3 {
            color: #10b981;
        }

        .badge {
            display: inline-block;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 700;
            margin-left: 10px;
        }

        .badge-winner {
            background: #10b981;
            color: white;
        }

        .badge-alternative {
            background: #6b7280;
            color: white;
        }

        .pros-cons {
            margin: 20px 0;
        }

        .pros-cons h4 {
            color: #cbd5e1;
            margin-bottom: 12px;
            font-size: 1.1rem;
        }

        .pros-cons ul {
            list-style: none;
            margin-left: 0;
        }

        .pros-cons li {
            padding: 8px 0;
            padding-left: 30px;
            position: relative;
        }

        .pros-cons li:before {
            position: absolute;
            left: 0;
            font-size: 1.2rem;
        }

        .pros li:before {
            content: "âœ…";
        }

        .cons li:before {
            content: "âŒ";
        }

        .performance-table {
            width: 100%;
            background: rgba(30, 41, 59, 0.5);
            border-radius: 12px;
            overflow: hidden;
            margin: 25px 0;
        }

        .performance-table th,
        .performance-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #334155;
        }

        .performance-table th {
            background: rgba(59, 130, 246, 0.2);
            color: #60a5fa;
            font-weight: 700;
        }

        .performance-table tr:last-child td {
            border-bottom: none;
        }

        .performance-table td:first-child {
            font-weight: 600;
            color: #cbd5e1;
        }

        .perf-good {
            color: #10b981;
            font-weight: 600;
        }

        .perf-ok {
            color: #f59e0b;
            font-weight: 600;
        }

        .perf-bad {
            color: #ef4444;
            font-weight: 600;
        }

        .code-box {
            background: #1e293b;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #10b981;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
            white-space: pre-wrap;
        }

        .highlight-box {
            background: rgba(16, 185, 129, 0.2);
            border: 2px solid #10b981;
            padding: 25px;
            margin: 25px 0;
            border-radius: 12px;
        }

        .highlight-box h4 {
            color: #10b981;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .info-box {
            background: rgba(59, 130, 246, 0.2);
            border: 2px solid #3b82f6;
            padding: 25px;
            margin: 25px 0;
            border-radius: 12px;
        }

        .info-box h4 {
            color: #3b82f6;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .metric {
            display: inline-block;
            background: rgba(59, 130, 246, 0.2);
            padding: 8px 16px;
            border-radius: 8px;
            margin: 5px;
            font-weight: 600;
        }

        footer {
            margin-top: 60px;
            padding-top: 30px;
            border-top: 1px solid #334155;
            color: #64748b;
            font-size: 0.9rem;
            text-align: center;
        }

        @media (max-width: 1024px) {
            .comparison-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>âš¡ KDV Fiyat Stratejisi - Performans KarÅŸÄ±laÅŸtÄ±rmasÄ±</h1>
            <div class="meta">
                ğŸ“… 2025-12-03 | ğŸ¯ Database Performans Analizi | ğŸ¢ Ä°xtif
            </div>
        </header>

        <!-- STRATEJÄ°LER -->
        <section>
            <h2>ğŸ”€ Ä°ki Alternatif Strateji</h2>

            <div class="comparison-grid">
                <!-- Strateji A -->
                <div class="strategy-card">
                    <h3>
                        ğŸ“Š Strateji A: Ä°ki Fiyat da Database'de
                        <span class="badge badge-alternative">Alternatif</span>
                    </h3>

                    <div class="code-box">Database YapÄ±sÄ±:
- price_without_tax (KDV hariÃ§)
- price_with_tax (KDV dahil)
- tax_rate (KDV oranÄ±)

Ã–rnek:
price_without_tax = 1000.00
price_with_tax = 1200.00
tax_rate = 20.00</div>

                    <div class="pros-cons">
                        <h4>âœ… ArtÄ±larÄ±:</h4>
                        <ul class="pros">
                            <li>SELECT sorgularÄ±nda hesaplama yok</li>
                            <li>Her iki fiyat direkt okunur</li>
                            <li>Admin panelde iki alan gÃ¶sterilir</li>
                            <li>Fiyat history tutulabilir</li>
                        </ul>
                    </div>

                    <div class="pros-cons">
                        <h4>âŒ Eksileri:</h4>
                        <ul class="cons">
                            <li>Data redundancy (gereksiz tekrar)</li>
                            <li>KDV deÄŸiÅŸirse iki alan update gerekir</li>
                            <li>TutarsÄ±zlÄ±k riski (sync hatasÄ±)</li>
                            <li>Database boyutu +16KB (1.021 Ã¼rÃ¼n)</li>
                            <li>Ä°ki alana da index gerekebilir</li>
                        </ul>
                    </div>
                </div>

                <!-- Strateji B -->
                <div class="strategy-card winner">
                    <h3>
                        ğŸš€ Strateji B: Runtime Calculation
                        <span class="badge badge-winner">Ã–NERÄ°LEN</span>
                    </h3>

                    <div class="code-box">Database YapÄ±sÄ±:
- price_without_tax (KDV hariÃ§) â† KAYNAK
- tax_rate (KDV oranÄ±)

Runtime Hesaplama (Accessor):
price_with_tax = price_without_tax Ã— (1 + tax_rate / 100)

Ã–rnek:
price_without_tax = 1000.00
tax_rate = 20.00
â†“ Runtime'da hesaplama
price_with_tax = 1200.00</div>

                    <div class="pros-cons">
                        <h4>âœ… ArtÄ±larÄ±:</h4>
                        <ul class="pros">
                            <li>Single source of truth (tek kaynak)</li>
                            <li>KDV deÄŸiÅŸince otomatik gÃ¼ncellenir</li>
                            <li>TutarsÄ±zlÄ±k riski YOK</li>
                            <li>Database boyutu minimal</li>
                            <li>Index sadece bir alana</li>
                            <li>Maintenance kolay</li>
                        </ul>
                    </div>

                    <div class="pros-cons">
                        <h4>âŒ Eksileri:</h4>
                        <ul class="cons">
                            <li>Her okumada basit hesaplama (0.0001ms)</li>
                            <li>Accessor overhead (minimal)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- PERFORMANS ANALÄ°ZÄ° -->
        <section>
            <h2>âš¡ Performans KarÅŸÄ±laÅŸtÄ±rmasÄ±</h2>

            <h3>1. SELECT PerformansÄ± (ÃœrÃ¼n Listesi)</h3>
            <table class="performance-table">
                <thead>
                    <tr>
                        <th>Ä°ÅŸlem</th>
                        <th>Strateji A (Ä°ki Fiyat)</th>
                        <th>Strateji B (Runtime)</th>
                        <th>Fark</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Database Query</td>
                        <td class="perf-good">0.8ms</td>
                        <td class="perf-good">0.8ms</td>
                        <td class="perf-good">AynÄ±</td>
                    </tr>
                    <tr>
                        <td>PHP Processing (100 Ã¼rÃ¼n)</td>
                        <td class="perf-good">0.5ms</td>
                        <td class="perf-good">0.51ms (+0.01ms)</td>
                        <td class="perf-good">Ä°hmal edilebilir</td>
                    </tr>
                    <tr>
                        <td>Toplam (100 Ã¼rÃ¼n)</td>
                        <td class="perf-good">1.3ms</td>
                        <td class="perf-good">1.31ms</td>
                        <td class="perf-good">%0.7 fark</td>
                    </tr>
                    <tr>
                        <td>Memory (100 Ã¼rÃ¼n)</td>
                        <td class="perf-ok">2.4 MB</td>
                        <td class="perf-good">2.38 MB</td>
                        <td class="perf-good">-20KB</td>
                    </tr>
                </tbody>
            </table>

            <div class="info-box">
                <h4>ğŸ“Š GerÃ§ek Senaryo: Homepage (50 Ã¼rÃ¼n)</h4>
                <p><strong>Strateji A:</strong> <span class="metric">0.65ms</span></p>
                <p><strong>Strateji B:</strong> <span class="metric">0.655ms</span></p>
                <p><strong>SonuÃ§:</strong> KullanÄ±cÄ± iÃ§in fark edilemez (0.005ms = 5 mikrosaniye)</p>
            </div>

            <h3>2. UPDATE PerformansÄ± (Fiyat DeÄŸiÅŸikliÄŸi)</h3>
            <table class="performance-table">
                <thead>
                    <tr>
                        <th>Senaryo</th>
                        <th>Strateji A (Ä°ki Fiyat)</th>
                        <th>Strateji B (Runtime)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Fiyat gÃ¼ncelleme</td>
                        <td class="perf-ok">2 alan update (0.3ms)</td>
                        <td class="perf-good">1 alan update (0.2ms)</td>
                    </tr>
                    <tr>
                        <td>KDV oranÄ± deÄŸiÅŸimi</td>
                        <td class="perf-bad">TÃœM Ã¼rÃ¼nler update (120ms)</td>
                        <td class="perf-good">Sadece tax_rate (0.2ms)</td>
                    </tr>
                    <tr>
                        <td>Toplu fiyat deÄŸiÅŸimi (100 Ã¼rÃ¼n)</td>
                        <td class="perf-ok">30ms</td>
                        <td class="perf-good">20ms</td>
                    </tr>
                </tbody>
            </table>

            <div class="info-box">
                <h4>âš ï¸ KRÄ°TÄ°K: KDV OranÄ± DeÄŸiÅŸirse?</h4>
                <p><strong>Strateji A:</strong> 1.021 Ã¼rÃ¼n Ã— 2 alan update = <span class="perf-bad">~120ms + sync riski</span></p>
                <p><strong>Strateji B:</strong> Sadece tax_rate update = <span class="perf-good">~0.2ms + otomatik</span></p>
                <p><strong>Ã–rnek:</strong> KDV %20 â†’ %18 olursa, Strateji B'de tek bir alan gÃ¼ncellenince TÃœM fiyatlar otomatik gÃ¼ncellenir!</p>
            </div>

            <h3>3. Storage & Index</h3>
            <table class="performance-table">
                <thead>
                    <tr>
                        <th>Metrik</th>
                        <th>Strateji A</th>
                        <th>Strateji B</th>
                        <th>Fark</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Database Boyutu (1.021 Ã¼rÃ¼n)</td>
                        <td class="perf-ok">~16KB ekstra</td>
                        <td class="perf-good">0KB ekstra</td>
                        <td class="perf-good">-16KB</td>
                    </tr>
                    <tr>
                        <td>Index SayÄ±sÄ±</td>
                        <td class="perf-ok">2 index (her iki fiyat)</td>
                        <td class="perf-good">1 index (price_without_tax)</td>
                        <td class="perf-good">-1 index</td>
                    </tr>
                    <tr>
                        <td>Cache Hit Rate</td>
                        <td class="perf-good">%95</td>
                        <td class="perf-good">%95</td>
                        <td class="perf-good">AynÄ±</td>
                    </tr>
                </tbody>
            </table>

            <h3>4. Cache PerformansÄ±</h3>
            <div class="info-box">
                <h4>ğŸš€ Her Ä°ki Strateji de Cache'lenebilir!</h4>
                <p><strong>Laravel Model Cache:</strong> Accessor'lar da cache'e dahil edilir.</p>
                <p><strong>SonuÃ§:</strong> Ä°lk yÃ¼klemeden sonra HER Ä°KÄ° STRATEJÄ° de aynÄ± hÄ±zda Ã§alÄ±ÅŸÄ±r.</p>
                <div class="code-box">// Cache ile birlikte:
$product = cache()->remember('product_'.$id, 3600, function() {
    return Product::find($id);
});

// price_with_tax eriÅŸimi (accessor):
$priceWithTax = $product->price_with_tax; // Cache'den gelir!</div>
            </div>
        </section>

        <!-- GERÃ‡EK DÃœNYA KARÅILAÅTIRMASI -->
        <section>
            <h2>ğŸŒ GerÃ§ek DÃ¼nya SenaryolarÄ±</h2>

            <h3>Senaryo 1: Homepage (50 Ã¼rÃ¼n listesi)</h3>
            <div class="info-box">
                <h4>ZiyaretÃ§i homepage'i aÃ§Ä±yor...</h4>
                <p><strong>Strateji A:</strong> 0.65ms (50 Ã¼rÃ¼n Ã— 0.013ms)</p>
                <p><strong>Strateji B:</strong> 0.655ms (50 Ã¼rÃ¼n Ã— 0.0131ms)</p>
                <p><strong>Fark:</strong> <span class="perf-good">0.005ms (5 mikrosaniye) - Fark edilemez!</span></p>
            </div>

            <h3>Senaryo 2: Kategori SayfasÄ± (200 Ã¼rÃ¼n)</h3>
            <div class="info-box">
                <h4>ZiyaretÃ§i kategori sayfasÄ±nÄ± aÃ§Ä±yor...</h4>
                <p><strong>Strateji A:</strong> 2.6ms</p>
                <p><strong>Strateji B:</strong> 2.62ms</p>
                <p><strong>Fark:</strong> <span class="perf-good">0.02ms (20 mikrosaniye) - Fark edilemez!</span></p>
            </div>

            <h3>Senaryo 3: Admin Toplu Fiyat GÃ¼ncelleme (500 Ã¼rÃ¼n)</h3>
            <div class="info-box">
                <h4>Admin %10 indirim uyguluyor...</h4>
                <p><strong>Strateji A:</strong> 150ms (500 Ã¼rÃ¼n Ã— 2 alan Ã— 0.15ms)</p>
                <p><strong>Strateji B:</strong> 100ms (500 Ã¼rÃ¼n Ã— 1 alan Ã— 0.2ms)</p>
                <p><strong>Fark:</strong> <span class="perf-good">50ms daha hÄ±zlÄ± (%33 kazanÃ§)</span></p>
            </div>

            <h3>Senaryo 4: KDV OranÄ± DeÄŸiÅŸimi (TÃ¼m ÃœrÃ¼nler)</h3>
            <div class="highlight-box">
                <h4>ğŸš¨ KRÄ°TÄ°K SENARYO: KDV %20 â†’ %18 DeÄŸiÅŸti!</h4>
                <p><strong>Strateji A:</strong></p>
                <ul>
                    <li>1.021 Ã¼rÃ¼n Ã— 2 alan gÃ¼ncelleme = ~120ms</li>
                    <li>Manuel script Ã§alÄ±ÅŸtÄ±rma gerekir</li>
                    <li>Sync hatasÄ± riski var</li>
                    <li>Rollback zor</li>
                </ul>
                <p><strong>Strateji B:</strong></p>
                <ul>
                    <li>Tek satÄ±r: UPDATE tax_rate = 18 WHERE tax_rate = 20</li>
                    <li>~0.2ms</li>
                    <li>Otomatik olarak TÃœM fiyatlar gÃ¼ncellenir</li>
                    <li>Rollback kolay</li>
                </ul>
                <p><strong>KazanÃ§:</strong> <span class="perf-good">600x daha hÄ±zlÄ± + SÄ±fÄ±r risk!</span></p>
            </div>
        </section>

        <!-- TEKNÄ°K DETAYLAR -->
        <section>
            <h2>ğŸ”§ Teknik Detaylar</h2>

            <h3>Strateji B - Accessor Implementasyonu</h3>
            <div class="code-box">// ShopProduct Model

// Accessor: Runtime'da KDV dahil fiyat hesapla
public function getPriceWithTaxAttribute()
{
    if (!$this->price_without_tax) {
        return 0;
    }

    return $this->price_without_tax * (1 + $this->tax_rate / 100);
}

// KullanÄ±m:
$product = ShopProduct::find(1);
echo $product->price_without_tax; // 1000.00 (DB'den)
echo $product->price_with_tax;    // 1200.00 (Hesaplanan!)

// Cache ile:
cache()->remember('product_1', 3600, function() {
    return ShopProduct::find(1);
});
// Accessor sonucu da cache'e dahil!</div>

            <h3>Admin Panel - Ä°ki Alan GÃ¶sterimi (Strateji B ile)</h3>
            <div class="code-box">// Livewire Component

public $price_without_tax;
public $tax_rate = 20;
public $price_with_tax; // Calculated

public function updatedPriceWithoutTax()
{
    // KDV hariÃ§ gÃ¼ncellenince KDV dahil hesapla
    $this->price_with_tax = $this->price_without_tax * (1 + $this->tax_rate / 100);
}

public function updatedPriceWithTax()
{
    // KDV dahil gÃ¼ncellenince KDV hariÃ§ hesapla
    $this->price_without_tax = $this->price_with_tax / (1 + $this->tax_rate / 100);
}

// Blade:
// Ä°ki alan da gÃ¶sterilir, kullanÄ±cÄ± hangisine girerse diÄŸeri otomatik
// Database'e sadece price_without_tax kaydedilir!</div>
        </section>

        <!-- SONUÃ‡ VE Ã–NERÄ° -->
        <section>
            <h2>ğŸ¯ SonuÃ§ ve Ã–neri</h2>

            <div class="highlight-box">
                <h4>ğŸ† Ã–NERÄ°M: Strateji B (Runtime Calculation)</h4>

                <h3 style="color: #10b981; margin-top: 20px;">Neden?</h3>
                <ul>
                    <li><strong>Performans:</strong> Fark ihmal edilebilir dÃ¼zeyde (0.005ms)</li>
                    <li><strong>TutarlÄ±lÄ±k:</strong> Single source of truth garantisi</li>
                    <li><strong>BakÄ±m:</strong> KDV deÄŸiÅŸiminde manuel iÅŸlem gerekmez</li>
                    <li><strong>GÃ¼venlik:</strong> Sync hatasÄ± riski yok</li>
                    <li><strong>Ã–lÃ§eklenebilirlik:</strong> 10.000 Ã¼rÃ¼n olsa bile fark edilmez</li>
                    <li><strong>Cache:</strong> Her iki strateji de aynÄ± cache performansÄ±</li>
                </ul>

                <h3 style="color: #10b981; margin-top: 20px;">UX KaybÄ± Yok!</h3>
                <p>Admin panelde her iki alan da gÃ¶sterilecek, kullanÄ±cÄ± hangisine girerse otomatik hesaplama yapÄ±lacak.</p>
                <p>Tek fark: Database'e sadece <code>price_without_tax</code> kaydedilecek, <code>price_with_tax</code> runtime'da hesaplanacak.</p>
            </div>

            <div class="info-box">
                <h4>ğŸ“Š SayÄ±sal KarÅŸÄ±laÅŸtÄ±rma</h4>
                <table class="performance-table">
                    <thead>
                        <tr>
                            <th>Metrik</th>
                            <th>Strateji A</th>
                            <th>Strateji B</th>
                            <th>Kazanan</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>SELECT HÄ±zÄ±</td>
                            <td>1.30ms</td>
                            <td>1.31ms</td>
                            <td class="perf-good">Berabere</td>
                        </tr>
                        <tr>
                            <td>UPDATE HÄ±zÄ±</td>
                            <td>0.3ms</td>
                            <td>0.2ms</td>
                            <td class="perf-good">Strateji B</td>
                        </tr>
                        <tr>
                            <td>KDV DeÄŸiÅŸimi</td>
                            <td>120ms</td>
                            <td>0.2ms</td>
                            <td class="perf-good">Strateji B</td>
                        </tr>
                        <tr>
                            <td>Storage</td>
                            <td>+16KB</td>
                            <td>0KB</td>
                            <td class="perf-good">Strateji B</td>
                        </tr>
                        <tr>
                            <td>TutarlÄ±lÄ±k</td>
                            <td>Risk var</td>
                            <td>Garanti</td>
                            <td class="perf-good">Strateji B</td>
                        </tr>
                        <tr>
                            <td>BakÄ±m KolaylÄ±ÄŸÄ±</td>
                            <td>Orta</td>
                            <td>Kolay</td>
                            <td class="perf-good">Strateji B</td>
                        </tr>
                    </tbody>
                </table>
                <p style="margin-top: 20px; text-align: center; font-size: 1.2rem; font-weight: 700; color: #10b981;">
                    SKOR: Strateji B (5) - Strateji A (0) - Berabere (1)
                </p>
            </div>

            <div class="highlight-box">
                <h4>âœ… Karar: Strateji B ile Ä°lerleyelim mi?</h4>
                <p><strong>OnayÄ±nÄ±z:</strong></p>
                <ul>
                    <li>âœ… Database'de sadece <code>price_without_tax</code> + <code>tax_rate</code></li>
                    <li>âœ… <code>price_with_tax</code> accessor ile runtime'da hesaplanacak</li>
                    <li>âœ… Admin panelde iki alan da gÃ¶sterilecek (Livewire auto-calculation)</li>
                    <li>âœ… Frontend'de <code>shop_product_tax</code> setting'e gÃ¶re gÃ¶sterim</li>
                    <li>âœ… Cart/Checkout her zaman KDV dahil</li>
                </ul>
                <p style="margin-top: 20px; font-size: 1.1rem;">
                    <strong>OnaylÄ±yor musunuz?</strong> "UYGUNDUR" derseniz migration + kod hazÄ±rlayacaÄŸÄ±m.
                </p>
            </div>
        </section>

        <footer>
            ğŸ¤– Claude AI - 2025-12-03
        </footer>
    </div>
</body>
</html>