<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kurumsal Subscription Yonetimi - Mimari Plan v2</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-slate-900 text-gray-100 min-h-screen">
    <div class="max-w-6xl mx-auto px-4 py-12">

        <!-- Header -->
        <div class="text-center mb-12">
            <div class="inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl mb-6">
                <i class="fas fa-building text-white text-3xl"></i>
            </div>
            <h1 class="text-4xl font-bold text-white mb-4">Kurumsal Subscription Yonetimi</h1>
            <p class="text-xl text-gray-400">Muzibu Corporate - Uyelik Odeme Sistemi</p>
            <div class="flex items-center justify-center gap-4 mt-4 text-sm text-gray-500">
                <span><i class="fas fa-calendar mr-2"></i>23 Aralik 2025</span>
                <span class="px-2 py-1 bg-pink-500/20 text-pink-400 rounded">Tenant 1001 - Muzibu ONLY</span>
                <span><i class="fas fa-tag mr-2"></i>v2.0</span>
            </div>
        </div>

        <!-- Tenant Warning -->
        <div class="bg-pink-900/30 border-2 border-pink-500 rounded-2xl p-6 mb-8">
            <div class="flex items-start gap-4">
                <div class="w-12 h-12 bg-pink-500 rounded-xl flex items-center justify-center flex-shrink-0">
                    <i class="fas fa-exclamation-triangle text-white text-xl"></i>
                </div>
                <div>
                    <h2 class="text-xl font-bold text-pink-400 mb-2">SADECE MUZiBU (Tenant 1001)</h2>
                    <p class="text-gray-300">
                        Bu ozellik <strong>sadece Muzibu tenant'ina (1001)</strong> ozgudur.
                        Diger tenant'larda (ixtif, varilsan vb.) bu ozellik YOKTUR ve OLMAYACAKTIR.
                        Tum kod <code class="bg-slate-800 px-2 py-1 rounded">Modules/Muzibu/</code> icinde kalacak.
                    </p>
                </div>
            </div>
        </div>

        <!-- Basit Anlatim -->
        <div class="bg-green-900/20 border border-green-800 rounded-2xl p-8 mb-8">
            <h2 class="text-2xl font-bold text-green-400 mb-4">
                <i class="fas fa-lightbulb mr-3"></i>Basit Anlatim (Herkes icin)
            </h2>
            <div class="text-gray-300 space-y-4">
                <p>
                    <strong>Ne yapilacak?</strong> Kurumsal hesap sahibi (sirket yoneticisi),
                    calisanlarinin Muzibu Premium uyeliklerini tek bir yerden yonetebilecek ve odeme yapabilecek.
                </p>
                <div class="grid md:grid-cols-3 gap-4 mt-6">
                    <div class="bg-white/5 rounded-xl p-4">
                        <div class="text-3xl mb-2">1</div>
                        <h3 class="font-semibold text-white mb-1">Uye Sec</h3>
                        <p class="text-sm text-gray-400">Tek tek veya toplu olarak calisanlari sec</p>
                    </div>
                    <div class="bg-white/5 rounded-xl p-4">
                        <div class="text-3xl mb-2">2</div>
                        <h3 class="font-semibold text-white mb-1">Plan Sec</h3>
                        <p class="text-sm text-gray-400">Aylik veya yillik plan sec</p>
                    </div>
                    <div class="bg-white/5 rounded-xl p-4">
                        <div class="text-3xl mb-2">3</div>
                        <h3 class="font-semibold text-white mb-1">Ode</h3>
                        <p class="text-sm text-gray-400">Toplu odeme yap, tum uyeler aktif</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Database Yapisi - DUZELTILDI -->
        <div class="bg-blue-900/20 border border-blue-800 rounded-2xl p-8 mb-8">
            <h2 class="text-2xl font-bold text-blue-400 mb-4">
                <i class="fas fa-database mr-3"></i>Database Yapisi (TENANT DB)
            </h2>

            <div class="bg-yellow-900/20 border border-yellow-600 rounded-xl p-4 mb-6">
                <p class="text-yellow-400 font-semibold">
                    <i class="fas fa-info-circle mr-2"></i>ONEMLI: Tum subscription verileri TENANT DB'de!
                </p>
                <p class="text-gray-400 text-sm mt-2">
                    subscriptions, subscription_plans, invoices tablolari
                    <code class="bg-slate-800 px-2 py-1 rounded">tenant_muzibu_1528d0</code> database'inde.
                    Central DB'de DEGiL!
                </p>
            </div>

            <div class="grid md:grid-cols-2 gap-4">
                <div class="bg-white/5 rounded-xl p-4">
                    <h4 class="text-pink-400 font-semibold mb-3">
                        <i class="fas fa-database mr-2"></i>Tenant DB (tenant_muzibu_1528d0)
                    </h4>
                    <ul class="text-sm text-gray-400 space-y-2">
                        <li class="flex items-center gap-2">
                            <i class="fas fa-check text-green-400"></i>
                            <code class="text-gray-300">subscriptions</code> - Uyelik kayitlari
                        </li>
                        <li class="flex items-center gap-2">
                            <i class="fas fa-check text-green-400"></i>
                            <code class="text-gray-300">subscription_plans</code> - Plan tanimlari
                        </li>
                        <li class="flex items-center gap-2">
                            <i class="fas fa-check text-green-400"></i>
                            <code class="text-gray-300">invoices</code> - Faturalar (varsa)
                        </li>
                        <li class="flex items-center gap-2">
                            <i class="fas fa-check text-green-400"></i>
                            <code class="text-gray-300">muzibu_corporate_accounts</code> - Kurumsal hesaplar
                        </li>
                    </ul>
                </div>
                <div class="bg-white/5 rounded-xl p-4">
                    <h4 class="text-purple-400 font-semibold mb-3">
                        <i class="fas fa-database mr-2"></i>Central DB (tuufi_4ekim)
                    </h4>
                    <ul class="text-sm text-gray-400 space-y-2">
                        <li class="flex items-center gap-2">
                            <i class="fas fa-check text-green-400"></i>
                            <code class="text-gray-300">users</code> - Kullanici bilgileri
                        </li>
                        <li class="flex items-center gap-2">
                            <i class="fas fa-check text-green-400"></i>
                            <code class="text-gray-300">tenants</code> - Tenant kayitlari
                        </li>
                    </ul>
                    <p class="text-xs text-gray-500 mt-3 italic">
                        Subscription verileri burada DEGIL!
                    </p>
                </div>
            </div>
        </div>

        <!-- Teknik Mimari -->
        <div class="bg-slate-800/50 border border-white/10 rounded-2xl p-8 mb-8">
            <h2 class="text-2xl font-bold text-white mb-4">
                <i class="fas fa-sitemap mr-3 text-cyan-400"></i>Teknik Mimari
            </h2>

            <!-- Dosya Yapisi -->
            <div class="mb-8">
                <h3 class="text-lg font-semibold text-white mb-4">Dosya Yapisi (Sadece Muzibu Modulunde)</h3>
                <div class="bg-slate-900 rounded-xl p-4 font-mono text-sm overflow-x-auto">
                    <pre class="text-gray-300">
Modules/Muzibu/
|
+-- app/Http/Controllers/Front/
|   +-- CorporateFrontController.php      <span class="text-green-400"># Mevcut - subscription metodlari EKLENECEK</span>
|
+-- app/Services/
|   +-- MuzibuCorporateService.php        <span class="text-green-400"># Mevcut</span>
|   +-- <span class="text-yellow-400">CorporateSubscriptionService.php</span>  <span class="text-blue-400"># YENI - toplu odeme mantigi</span>
|
+-- resources/views/themes/muzibu/corporate/
|   +-- dashboard.blade.php               <span class="text-green-400"># Mevcut - "Uyelikleri Yonet" butonu EKLENECEK</span>
|   +-- <span class="text-yellow-400">subscriptions.blade.php</span>           <span class="text-blue-400"># YENI - plan secimi + uye listesi</span>
|
+-- routes/web.php
    +-- <span class="text-yellow-400">/corporate/subscriptions</span>          <span class="text-blue-400"># YENI Route</span></pre>
                </div>
            </div>

            <!-- Routes -->
            <div class="mb-8">
                <h3 class="text-lg font-semibold text-white mb-4">Route Yapisi</h3>
                <div class="overflow-x-auto">
                    <table class="w-full text-sm">
                        <thead>
                            <tr class="text-left text-gray-400 border-b border-white/10">
                                <th class="py-3 px-4">Method</th>
                                <th class="py-3 px-4">URI</th>
                                <th class="py-3 px-4">Metod</th>
                                <th class="py-3 px-4">Aciklama</th>
                            </tr>
                        </thead>
                        <tbody class="text-gray-300">
                            <tr class="border-b border-white/5">
                                <td class="py-3 px-4"><span class="px-2 py-1 bg-green-500/20 text-green-400 rounded text-xs">GET</span></td>
                                <td class="py-3 px-4 font-mono">/corporate/subscriptions</td>
                                <td class="py-3 px-4">subscriptions()</td>
                                <td class="py-3 px-4">Plan secimi + uye listesi sayfasi</td>
                            </tr>
                            <tr class="border-b border-white/5">
                                <td class="py-3 px-4"><span class="px-2 py-1 bg-green-500/20 text-green-400 rounded text-xs">GET</span></td>
                                <td class="py-3 px-4 font-mono">/api/corporate/subscriptions</td>
                                <td class="py-3 px-4">apiSubscriptions()</td>
                                <td class="py-3 px-4">SPA icin JSON data</td>
                            </tr>
                            <tr class="border-b border-white/5">
                                <td class="py-3 px-4"><span class="px-2 py-1 bg-blue-500/20 text-blue-400 rounded text-xs">POST</span></td>
                                <td class="py-3 px-4 font-mono">/corporate/subscriptions/purchase</td>
                                <td class="py-3 px-4">purchaseSubscriptions()</td>
                                <td class="py-3 px-4">Secilen uyeler icin odeme baslat</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- User Flow -->
        <div class="bg-purple-900/20 border border-purple-800 rounded-2xl p-8 mb-8">
            <h2 class="text-2xl font-bold text-purple-400 mb-6">
                <i class="fas fa-route mr-3"></i>Kullanici Akisi
            </h2>

            <div class="space-y-4">
                <!-- Step 1 -->
                <div class="flex items-start gap-4">
                    <div class="w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center text-white font-bold flex-shrink-0">1</div>
                    <div class="flex-1 bg-white/5 rounded-xl p-4">
                        <h3 class="text-white font-semibold">Corporate Dashboard'da "Uyelikleri Yonet" Butonu</h3>
                        <p class="text-gray-400 text-sm mt-1">/corporate/dashboard sayfasinda yeni buton</p>
                    </div>
                </div>

                <!-- Step 2 -->
                <div class="flex items-start gap-4">
                    <div class="w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center text-white font-bold flex-shrink-0">2</div>
                    <div class="flex-1 bg-white/5 rounded-xl p-4">
                        <h3 class="text-white font-semibold">/corporate/subscriptions Sayfasi</h3>
                        <p class="text-gray-400 text-sm mt-1">
                            Sol: Plan secimi (Aylik 299TL / Yillik 2999TL)<br>
                            Sag: Uye listesi (checkbox ile secim)
                        </p>
                    </div>
                </div>

                <!-- Step 3 -->
                <div class="flex items-start gap-4">
                    <div class="w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center text-white font-bold flex-shrink-0">3</div>
                    <div class="flex-1 bg-white/5 rounded-xl p-4">
                        <h3 class="text-white font-semibold">Fiyat Hesaplama (Alpine.js ile anlik)</h3>
                        <p class="text-gray-400 text-sm mt-1">
                            3 uye x 299 TL = 897 TL toplam (anlik guncelleme)
                        </p>
                    </div>
                </div>

                <!-- Step 4 -->
                <div class="flex items-start gap-4">
                    <div class="w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center text-white font-bold flex-shrink-0">4</div>
                    <div class="flex-1 bg-white/5 rounded-xl p-4">
                        <h3 class="text-white font-semibold">Odeme (Mevcut Cart/Checkout Sistemi)</h3>
                        <p class="text-gray-400 text-sm mt-1">
                            Cart'a "Kurumsal Uyelik Paketi" olarak eklenir, checkout'a yonlendirilir
                        </p>
                    </div>
                </div>

                <!-- Step 5 -->
                <div class="flex items-start gap-4">
                    <div class="w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center text-white font-bold flex-shrink-0">5</div>
                    <div class="flex-1 bg-green-500/10 border border-green-500/30 rounded-xl p-4">
                        <h3 class="text-green-400 font-semibold">Odeme Basarili</h3>
                        <p class="text-gray-400 text-sm mt-1">
                            Her secilen uye icin tenant DB'ye subscription kaydi olusturulur
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- UI Mockup -->
        <div class="bg-slate-800/50 border border-white/10 rounded-2xl p-8 mb-8">
            <h2 class="text-2xl font-bold text-white mb-6">
                <i class="fas fa-desktop mr-3 text-cyan-400"></i>UI Taslagi (/corporate/subscriptions)
            </h2>

            <!-- Mockup -->
            <div class="bg-slate-900 rounded-xl overflow-hidden border border-white/10">
                <!-- Header -->
                <div class="bg-gradient-to-r from-purple-500/20 to-pink-500/20 p-6 border-b border-white/10">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-xl font-bold text-white">Uyelikleri Yonet</h3>
                            <p class="text-gray-400 text-sm">Kurumsal uyeleriniz icin premium uyelik satin alin</p>
                        </div>
                        <a href="#" class="px-4 py-2 bg-white/10 text-white rounded-lg text-sm hover:bg-white/20 transition">
                            <i class="fas fa-arrow-left mr-2"></i>Dashboard'a Don
                        </a>
                    </div>
                </div>

                <!-- Content -->
                <div class="p-6 grid md:grid-cols-2 gap-6">
                    <!-- Sol: Plan Secimi -->
                    <div>
                        <h4 class="text-white font-semibold mb-4">Plan Secin</h4>
                        <div class="space-y-3">
                            <div class="bg-white/5 border-2 border-purple-500 rounded-xl p-4 cursor-pointer">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-white font-semibold">Aylik Plan</span>
                                    <span class="px-2 py-1 bg-purple-500/20 text-purple-400 rounded text-xs">Secili</span>
                                </div>
                                <p class="text-2xl font-bold text-white">299 TL <span class="text-sm font-normal text-gray-400">/ay/uye</span></p>
                            </div>
                            <div class="bg-white/5 border border-white/10 rounded-xl p-4 cursor-pointer hover:border-white/30 transition">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-white font-semibold">Yillik Plan</span>
                                    <span class="px-2 py-1 bg-green-500/20 text-green-400 rounded text-xs">%17 Tasarruf</span>
                                </div>
                                <p class="text-2xl font-bold text-white">2.999 TL <span class="text-sm font-normal text-gray-400">/yil/uye</span></p>
                            </div>
                        </div>

                        <!-- Ozet -->
                        <div class="mt-6 bg-purple-500/10 border border-purple-500/30 rounded-xl p-4">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-gray-400">Secilen Uye</span>
                                <span class="text-white font-bold">2 uye</span>
                            </div>
                            <div class="flex items-center justify-between mb-4">
                                <span class="text-gray-400">Toplam</span>
                                <span class="text-2xl font-bold text-white">598 TL</span>
                            </div>
                            <button class="w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-semibold rounded-xl">
                                <i class="fas fa-credit-card mr-2"></i>Odemeye Gec
                            </button>
                        </div>
                    </div>

                    <!-- Sag: Uye Listesi -->
                    <div>
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="text-white font-semibold">Uyeleri Secin</h4>
                            <label class="flex items-center gap-2 text-sm text-gray-400 cursor-pointer">
                                <input type="checkbox" class="rounded bg-white/10 border-white/20">
                                <span>Tumunu Sec</span>
                            </label>
                        </div>
                        <div class="space-y-2 max-h-80 overflow-y-auto">
                            <div class="flex items-center gap-3 bg-white/5 rounded-lg p-3">
                                <input type="checkbox" checked class="rounded bg-white/10 border-white/20">
                                <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-sm">AY</div>
                                <div class="flex-1 min-w-0">
                                    <p class="text-white font-medium truncate">Ahmet Yilmaz</p>
                                    <p class="text-gray-500 text-xs">Sube: Istanbul</p>
                                </div>
                                <span class="px-2 py-1 bg-red-500/20 text-red-400 rounded text-xs whitespace-nowrap">Suresi Dolmus</span>
                            </div>
                            <div class="flex items-center gap-3 bg-white/5 rounded-lg p-3">
                                <input type="checkbox" checked class="rounded bg-white/10 border-white/20">
                                <div class="w-10 h-10 bg-gradient-to-br from-green-500 to-teal-500 rounded-full flex items-center justify-center text-white font-bold text-sm">MK</div>
                                <div class="flex-1 min-w-0">
                                    <p class="text-white font-medium truncate">Mehmet Kaya</p>
                                    <p class="text-gray-500 text-xs">Sube: Ankara</p>
                                </div>
                                <span class="px-2 py-1 bg-yellow-500/20 text-yellow-400 rounded text-xs whitespace-nowrap">3 gun kaldi</span>
                            </div>
                            <div class="flex items-center gap-3 bg-white/5 rounded-lg p-3">
                                <input type="checkbox" class="rounded bg-white/10 border-white/20">
                                <div class="w-10 h-10 bg-gradient-to-br from-pink-500 to-rose-500 rounded-full flex items-center justify-center text-white font-bold text-sm">ZD</div>
                                <div class="flex-1 min-w-0">
                                    <p class="text-white font-medium truncate">Zeynep Demir</p>
                                    <p class="text-gray-500 text-xs">Sube: Izmir</p>
                                </div>
                                <span class="px-2 py-1 bg-green-500/20 text-green-400 rounded text-xs whitespace-nowrap">45 gun</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Implementation Steps -->
        <div class="bg-orange-900/20 border border-orange-800 rounded-2xl p-8 mb-8">
            <h2 class="text-2xl font-bold text-orange-400 mb-6">
                <i class="fas fa-tasks mr-3"></i>Yapilacaklar
            </h2>

            <div class="space-y-4">
                <div class="flex items-start gap-4">
                    <div class="w-8 h-8 bg-orange-500/20 rounded-lg flex items-center justify-center text-orange-400 font-bold flex-shrink-0">1</div>
                    <div>
                        <h3 class="text-white font-semibold">CorporateFrontController'a Metodlar Ekle</h3>
                        <p class="text-gray-400 text-sm mt-1">
                            <code>subscriptions()</code>, <code>apiSubscriptions()</code>, <code>purchaseSubscriptions()</code>
                        </p>
                    </div>
                </div>
                <div class="flex items-start gap-4">
                    <div class="w-8 h-8 bg-orange-500/20 rounded-lg flex items-center justify-center text-orange-400 font-bold flex-shrink-0">2</div>
                    <div>
                        <h3 class="text-white font-semibold">CorporateSubscriptionService Olustur</h3>
                        <p class="text-gray-400 text-sm mt-1">
                            Fiyat hesaplama, subscription olusturma, odeme entegrasyonu
                        </p>
                    </div>
                </div>
                <div class="flex items-start gap-4">
                    <div class="w-8 h-8 bg-orange-500/20 rounded-lg flex items-center justify-center text-orange-400 font-bold flex-shrink-0">3</div>
                    <div>
                        <h3 class="text-white font-semibold">Routes Ekle</h3>
                        <p class="text-gray-400 text-sm mt-1">
                            <code>/corporate/subscriptions</code> ve <code>/api/corporate/subscriptions</code>
                        </p>
                    </div>
                </div>
                <div class="flex items-start gap-4">
                    <div class="w-8 h-8 bg-orange-500/20 rounded-lg flex items-center justify-center text-orange-400 font-bold flex-shrink-0">4</div>
                    <div>
                        <h3 class="text-white font-semibold">subscriptions.blade.php View Olustur</h3>
                        <p class="text-gray-400 text-sm mt-1">
                            Alpine.js ile reaktif UI, plan secimi, uye listesi, fiyat hesaplama
                        </p>
                    </div>
                </div>
                <div class="flex items-start gap-4">
                    <div class="w-8 h-8 bg-orange-500/20 rounded-lg flex items-center justify-center text-orange-400 font-bold flex-shrink-0">5</div>
                    <div>
                        <h3 class="text-white font-semibold">Dashboard'a Buton Ekle</h3>
                        <p class="text-gray-400 text-sm mt-1">
                            Corporate dashboard'da "Uyelikleri Yonet" butonu
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notes -->
        <div class="bg-slate-800/50 border border-white/10 rounded-2xl p-8">
            <h2 class="text-2xl font-bold text-white mb-4">
                <i class="fas fa-sticky-note mr-3 text-yellow-400"></i>Onemli Notlar
            </h2>
            <ul class="space-y-3 text-gray-400">
                <li class="flex items-start gap-3">
                    <i class="fas fa-check-circle text-green-400 mt-1"></i>
                    <span><strong class="text-white">Tenant Isolated:</strong> Tum kod Modules/Muzibu icinde, diger tenant'lari ETKiLEMEZ</span>
                </li>
                <li class="flex items-start gap-3">
                    <i class="fas fa-check-circle text-green-400 mt-1"></i>
                    <span><strong class="text-white">Tenant DB:</strong> subscriptions, subscription_plans tenant DB'de (central degil)</span>
                </li>
                <li class="flex items-start gap-3">
                    <i class="fas fa-check-circle text-green-400 mt-1"></i>
                    <span><strong class="text-white">Mevcut Sistem:</strong> Cart/Checkout sistemini kullanir, yeni odeme altyapisi GEREKMEZ</span>
                </li>
                <li class="flex items-start gap-3">
                    <i class="fas fa-check-circle text-green-400 mt-1"></i>
                    <span><strong class="text-white">SPA Uyumlu:</strong> apiSubscriptions() ile JSON endpoint, SPA router ile calisir</span>
                </li>
            </ul>
        </div>

        <!-- Footer -->
        <div class="text-center mt-12 pt-8 border-t border-white/10">
            <p class="text-gray-500 text-sm">
                <i class="fas fa-robot mr-2"></i>Claude AI tarafindan olusturuldu - v2.0
            </p>
        </div>
    </div>
</body>
</html>
