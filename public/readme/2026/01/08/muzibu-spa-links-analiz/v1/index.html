<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Muzibu SPA Links Analiz Raporu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        body { background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); }
        .status-badge { @apply px-3 py-1 rounded-full text-xs font-semibold; }
        .status-ok { @apply bg-green-500/20 text-green-400 border border-green-500/30; }
        .status-error { @apply bg-red-500/20 text-red-400 border border-red-500/30; }
        .status-warning { @apply bg-yellow-500/20 text-yellow-400 border border-yellow-500/30; }
        .card { @apply bg-slate-800/50 border border-slate-700 rounded-xl p-6 backdrop-blur-sm; }
    </style>
</head>
<body class="text-slate-200 p-8">
    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <header class="mb-8">
            <div class="flex items-center gap-3 mb-4">
                <span class="status-badge status-warning">
                    <i class="fas fa-link mr-1"></i> SPA Links Analiz
                </span>
                <span class="text-slate-400 text-sm">08 Ocak 2026</span>
            </div>
            <h1 class="text-4xl font-bold text-white mb-2">
                <i class="fas fa-route mr-3 text-blue-400"></i>
                Muzibu SPA Links Analiz Raporu
            </h1>
            <p class="text-slate-400 text-lg">Anasayfa SPA linklerinin durumu ve Ã§alÄ±ÅŸmayan sayfalarÄ±n analizi</p>
        </header>

        <!-- Basit AnlatÄ±m -->
        <div class="card bg-green-900/20 border-green-800 mb-6">
            <h3 class="text-xl font-bold text-green-400 mb-4 flex items-center gap-2">
                <i class="fas fa-info-circle"></i>
                ğŸ“ Basit AnlatÄ±m (Herkes Ä°Ã§in)
            </h3>
            <div class="space-y-3 text-slate-300">
                <p><strong>Ne oldu?</strong></p>
                <p>Muzibu anasayfasÄ±nda bazÄ± linkler (Radyolar ve SektÃ¶rler) boÅŸ sayfa gÃ¶steriyor. TÃ¼m SPA linklerini inceledim.</p>

                <p class="mt-4"><strong>Ana Sorun:</strong></p>
                <ul class="list-disc list-inside space-y-2 ml-4">
                    <li><strong>Radyolar (/radios):</strong> 122 radyo var ama hiÃ§birinin playlist iliÅŸkisi yok â†’ Sayfa boÅŸ</li>
                    <li><strong>SektÃ¶rler (/sectors):</strong> 23 sektÃ¶r var ama hiÃ§birinin playlist iliÅŸkisi yok â†’ Sayfa boÅŸ</li>
                </ul>

                <p class="mt-4"><strong>Neden Ã¶nemli?</strong></p>
                <p>Controller (kod) sadece "playlist'i olan" radyo/sektÃ¶rleri gÃ¶steriyor. HiÃ§birinin playlist iliÅŸkisi olmadÄ±ÄŸÄ± iÃ§in liste boÅŸ geliyor.</p>
            </div>
        </div>

        <!-- Teknik Detaylar -->
        <div class="card bg-blue-900/20 border-blue-800 mb-6">
            <h3 class="text-xl font-bold text-blue-400 mb-4 flex items-center gap-2">
                <i class="fas fa-code"></i>
                ğŸ”§ Teknik Detaylar (GeliÅŸtiriciler Ä°Ã§in)
            </h3>
            <div class="space-y-4 text-slate-300">
                <div>
                    <h4 class="text-lg font-semibold text-white mb-2">Radios Controller Sorunu:</h4>
                    <p class="mb-2"><strong>Dosya:</strong> <code class="bg-slate-900 px-2 py-1 rounded">Modules/Muzibu/app/Http/Controllers/Front/RadioController.php</code></p>
                    <p class="mb-2"><strong>SatÄ±r:</strong> 13-20</p>
                    <div class="bg-slate-900 p-4 rounded-lg overflow-x-auto mb-3">
                        <pre class="text-sm text-green-400">$radios = Radio::with('logoMedia')
    -&gt;where('is_active', 1)
    -&gt;whereHas('playlists', function($q) {  // âŒ SORUN: Playlist iliÅŸkisi zorunlu
        $q-&gt;where('is_active', 1)
          -&gt;whereHas('songs', function($sq) {
              $sq-&gt;where('is_active', 1);
          });
    })
    -&gt;paginate(200);</pre>
                    </div>
                    <p><strong>Sorun:</strong> <code>whereHas('playlists')</code> filtresi tÃ¼m radyolarÄ± eliyor Ã§Ã¼nkÃ¼ hiÃ§bir radyonun playlist iliÅŸkisi yok.</p>
                </div>

                <div class="mt-6">
                    <h4 class="text-lg font-semibold text-white mb-2">Database Durumu:</h4>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>muzibu_radios:</strong> 122 aktif kayÄ±t (title, logo, description var)</li>
                        <li><strong>muzibu_sectors:</strong> 23 aktif kayÄ±t (title, icon, description var)</li>
                        <li><strong>Playlist iliÅŸkisi:</strong> 0 kayÄ±t (pivot table boÅŸ veya iliÅŸki kurulmamÄ±ÅŸ)</li>
                    </ul>
                </div>

                <div class="mt-6">
                    <h4 class="text-lg font-semibold text-white mb-2">Ä°lgili Model Ä°liÅŸkileri:</h4>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><code>Radio::class</code> â†’ <code>playlists()</code> iliÅŸkisi: belongsToMany veya hasMany?</li>
                        <li><code>Sector::class</code> â†’ <code>playlists()</code> iliÅŸkisi: belongsToMany veya hasMany?</li>
                        <li>Pivot tablo: <code>radio_playlist</code> veya <code>sector_playlist</code> mevcut mu?</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Anasayfa SPA Links Durumu -->
        <div class="card mb-6">
            <h3 class="text-2xl font-bold text-white mb-6 flex items-center gap-2">
                <i class="fas fa-home"></i>
                Anasayfa SPA Links Durumu
            </h3>

            <!-- Navigation Links -->
            <div class="mb-8">
                <h4 class="text-lg font-semibold text-slate-300 mb-4 flex items-center gap-2">
                    <i class="fas fa-bars"></i>
                    Ana MenÃ¼ (Sidebar Left)
                </h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="bg-slate-900/50 p-4 rounded-lg border border-slate-700">
                        <div class="flex items-center justify-between mb-2">
                            <span class="font-medium"><i class="fas fa-home mr-2"></i>Ana Sayfa</span>
                            <span class="status-badge status-ok">âœ“ Ã‡alÄ±ÅŸÄ±yor</span>
                        </div>
                        <code class="text-xs text-slate-400">href="/"</code>
                    </div>

                    <div class="bg-slate-900/50 p-4 rounded-lg border border-slate-700">
                        <div class="flex items-center justify-between mb-2">
                            <span class="font-medium"><i class="fas fa-list-music mr-2"></i>Ã‡alma Listeleri</span>
                            <span class="status-badge status-ok">âœ“ Ã‡alÄ±ÅŸÄ±yor</span>
                        </div>
                        <code class="text-xs text-slate-400">href="/playlists"</code>
                        <p class="text-xs text-green-400 mt-2">8 Ã¶ne Ã§Ä±kan playlist gÃ¶steriliyor</p>
                    </div>

                    <div class="bg-slate-900/50 p-4 rounded-lg border border-slate-700">
                        <div class="flex items-center justify-between mb-2">
                            <span class="font-medium"><i class="fas fa-microphone-lines mr-2"></i>AlbÃ¼mler</span>
                            <span class="status-badge status-ok">âœ“ Ã‡alÄ±ÅŸÄ±yor</span>
                        </div>
                        <code class="text-xs text-slate-400">href="/albums"</code>
                        <p class="text-xs text-green-400 mt-2">8 yeni albÃ¼m gÃ¶steriliyor (baÅŸlÄ±klar restore edildi)</p>
                    </div>

                    <div class="bg-slate-900/50 p-4 rounded-lg border border-slate-700">
                        <div class="flex items-center justify-between mb-2">
                            <span class="font-medium"><i class="fas fa-guitars mr-2"></i>TÃ¼rler</span>
                            <span class="status-badge status-ok">âœ“ Ã‡alÄ±ÅŸÄ±yor</span>
                        </div>
                        <code class="text-xs text-slate-400">href="/genres"</code>
                        <p class="text-xs text-green-400 mt-2">8 tÃ¼r gÃ¶steriliyor (songs_count > 0 olanlar)</p>
                    </div>

                    <div class="bg-slate-900/50 p-4 rounded-lg border border-red-900 border-2">
                        <div class="flex items-center justify-between mb-2">
                            <span class="font-medium"><i class="fas fa-radio mr-2"></i>Radyolar</span>
                            <span class="status-badge status-error">âœ— BOÅ</span>
                        </div>
                        <code class="text-xs text-slate-400">href="/radios"</code>
                        <p class="text-xs text-red-400 mt-2">122 radyo var ama playlist iliÅŸkisi yok â†’ Sayfa boÅŸ</p>
                    </div>

                    <div class="bg-slate-900/50 p-4 rounded-lg border border-red-900 border-2">
                        <div class="flex items-center justify-between mb-2">
                            <span class="font-medium"><i class="fas fa-building mr-2"></i>SektÃ¶rler</span>
                            <span class="status-badge status-error">âœ— BOÅ</span>
                        </div>
                        <code class="text-xs text-slate-400">href="/sectors"</code>
                        <p class="text-xs text-red-400 mt-2">23 sektÃ¶r var ama playlist iliÅŸkisi yok â†’ Sayfa boÅŸ</p>
                    </div>
                </div>
            </div>

            <!-- User Links -->
            <div class="mb-8">
                <h4 class="text-lg font-semibold text-slate-300 mb-4 flex items-center gap-2">
                    <i class="fas fa-user"></i>
                    KullanÄ±cÄ± AlanlarÄ±
                </h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="bg-slate-900/50 p-4 rounded-lg border border-slate-700">
                        <div class="flex items-center justify-between mb-2">
                            <span class="font-medium"><i class="fas fa-user-circle mr-2"></i>Panelim</span>
                            <span class="status-badge status-ok">âœ“ Ã‡alÄ±ÅŸÄ±yor</span>
                        </div>
                        <code class="text-xs text-slate-400">href="/dashboard"</code>
                    </div>

                    <div class="bg-slate-900/50 p-4 rounded-lg border border-slate-700">
                        <div class="flex items-center justify-between mb-2">
                            <span class="font-medium"><i class="fas fa-heart mr-2"></i>Favorilerim</span>
                            <span class="status-badge status-ok">âœ“ Ã‡alÄ±ÅŸÄ±yor</span>
                        </div>
                        <code class="text-xs text-slate-400">href="/muzibu/favorites"</code>
                    </div>

                    <div class="bg-slate-900/50 p-4 rounded-lg border border-slate-700">
                        <div class="flex items-center justify-between mb-2">
                            <span class="font-medium"><i class="fas fa-list mr-2"></i>Playlistlerim</span>
                            <span class="status-badge status-ok">âœ“ Ã‡alÄ±ÅŸÄ±yor</span>
                        </div>
                        <code class="text-xs text-slate-400">href="/muzibu/my-playlists"</code>
                    </div>

                    <div class="bg-slate-900/50 p-4 rounded-lg border border-slate-700">
                        <div class="flex items-center justify-between mb-2">
                            <span class="font-medium"><i class="fas fa-building mr-2"></i>Kurumsal</span>
                            <span class="status-badge status-ok">âœ“ Ã‡alÄ±ÅŸÄ±yor</span>
                        </div>
                        <code class="text-xs text-slate-400">href="/muzibu/corporate-playlists"</code>
                    </div>
                </div>
            </div>

            <!-- Dynamic Content Links (Examples) -->
            <div class="mb-8">
                <h4 class="text-lg font-semibold text-slate-300 mb-4 flex items-center gap-2">
                    <i class="fas fa-link"></i>
                    Dinamik Ä°Ã§erik Linkleri (Ã–rnekler)
                </h4>
                <div class="grid grid-cols-1 gap-3">
                    <div class="bg-slate-900/50 p-3 rounded-lg border border-slate-700">
                        <div class="flex items-center justify-between mb-1">
                            <span class="text-sm font-medium">Playlist Detay</span>
                            <span class="status-badge status-ok">âœ“ Ã‡alÄ±ÅŸÄ±yor</span>
                        </div>
                        <code class="text-xs text-slate-400">/playlists/chill-reggae-acoustic-playlist</code>
                    </div>

                    <div class="bg-slate-900/50 p-3 rounded-lg border border-slate-700">
                        <div class="flex items-center justify-between mb-1">
                            <span class="text-sm font-medium">AlbÃ¼m Detay</span>
                            <span class="status-badge status-ok">âœ“ Ã‡alÄ±ÅŸÄ±yor</span>
                        </div>
                        <code class="text-xs text-slate-400">/albums/1spanish-lounge-album</code>
                        <p class="text-xs text-green-400 mt-1">BaÅŸlÄ±k: "Spanish Lounge Album" (restore edildi)</p>
                    </div>
                </div>
            </div>

            <!-- Static Pages -->
            <div>
                <h4 class="text-lg font-semibold text-slate-300 mb-4 flex items-center gap-2">
                    <i class="fas fa-file-alt"></i>
                    Statik Sayfalar (Footer)
                </h4>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                    <div class="bg-slate-900/50 p-3 rounded-lg border border-slate-700">
                        <div class="flex items-center justify-between mb-1">
                            <span class="text-sm">Ä°letiÅŸim</span>
                            <span class="status-badge status-ok">âœ“</span>
                        </div>
                        <code class="text-xs text-slate-400">/iletisim</code>
                    </div>

                    <div class="bg-slate-900/50 p-3 rounded-lg border border-slate-700">
                        <div class="flex items-center justify-between mb-1">
                            <span class="text-sm">Gizlilik</span>
                            <span class="status-badge status-ok">âœ“</span>
                        </div>
                        <code class="text-xs text-slate-400">/gizlilik-politikasi</code>
                    </div>

                    <div class="bg-slate-900/50 p-3 rounded-lg border border-slate-700">
                        <div class="flex items-center justify-between mb-1">
                            <span class="text-sm">KullanÄ±m KoÅŸullarÄ±</span>
                            <span class="status-badge status-ok">âœ“</span>
                        </div>
                        <code class="text-xs text-slate-400">/kullanim-kosullari...</code>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ã‡Ã¶zÃ¼m Ã–nerileri -->
        <div class="card bg-purple-900/20 border-purple-800 mb-6">
            <h3 class="text-2xl font-bold text-purple-400 mb-6 flex items-center gap-2">
                <i class="fas fa-lightbulb"></i>
                Ã‡Ã¶zÃ¼m Ã–nerileri
            </h3>

            <div class="space-y-6">
                <!-- SeÃ§enek 1 -->
                <div class="bg-slate-900/50 p-5 rounded-lg border border-purple-700">
                    <h4 class="text-lg font-semibold text-white mb-3 flex items-center gap-2">
                        <span class="bg-purple-500 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm">1</span>
                        Playlist Ä°liÅŸkilerini Kur (Ã–nerilen)
                    </h4>
                    <p class="text-slate-300 mb-3">Radyo ve sektÃ¶r iÃ§in playlist iliÅŸkileri oluÅŸtur.</p>
                    <div class="bg-slate-800 p-4 rounded-lg">
                        <p class="text-sm text-slate-400 mb-2"><strong>AdÄ±mlar:</strong></p>
                        <ul class="list-disc list-inside space-y-2 text-sm text-slate-300">
                            <li>Radio ve Sector modellerdeki <code>playlists()</code> iliÅŸkisini kontrol et</li>
                            <li>Pivot tablo var mÄ± kontrol et: <code>radio_playlist</code>, <code>sector_playlist</code></li>
                            <li>Admin panelden radyo/sektÃ¶rlere playlist atama Ã¶zelliÄŸi ekle</li>
                            <li>Mevcut playlist'leri radyo/sektÃ¶rlere daÄŸÄ±t</li>
                        </ul>
                    </div>
                </div>

                <!-- SeÃ§enek 2 -->
                <div class="bg-slate-900/50 p-5 rounded-lg border border-purple-700">
                    <h4 class="text-lg font-semibold text-white mb-3 flex items-center gap-2">
                        <span class="bg-purple-500 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm">2</span>
                        Controller Filtresini KaldÄ±r (HÄ±zlÄ± Ã‡Ã¶zÃ¼m)
                    </h4>
                    <p class="text-slate-300 mb-3">whereHas('playlists') filtresini kaldÄ±r, tÃ¼m radyo/sektÃ¶rleri gÃ¶ster.</p>
                    <div class="bg-slate-800 p-4 rounded-lg">
                        <p class="text-sm text-slate-400 mb-2"><strong>DeÄŸiÅŸiklik:</strong></p>
                        <div class="bg-slate-900 p-3 rounded overflow-x-auto">
                            <pre class="text-xs text-red-400 mb-2">// Ã–NCE (Mevcut - BoÅŸ sonuÃ§)
$radios = Radio::where('is_active', 1)
    ->whereHas('playlists') // âŒ Bu filtre tÃ¼m radyolarÄ± eliyor
    ->paginate(200);</pre>
                            <pre class="text-xs text-green-400">// SONRA (TÃ¼m radyolar gÃ¶sterilir)
$radios = Radio::where('is_active', 1)
    ->with('logoMedia')
    ->orderByRaw('LOWER(JSON_UNQUOTE(JSON_EXTRACT(title, "$.tr")))')
    ->paginate(200);</pre>
                        </div>
                        <p class="text-sm text-yellow-400 mt-3">âš ï¸ Not: Bu durumda bazÄ± radyolarÄ±n playlist'i olmayabilir, detay sayfasÄ±nda "HenÃ¼z ÅŸarkÄ± yok" mesajÄ± gÃ¶ster.</p>
                    </div>
                </div>

                <!-- SeÃ§enek 3 -->
                <div class="bg-slate-900/50 p-5 rounded-lg border border-purple-700">
                    <h4 class="text-lg font-semibold text-white mb-3 flex items-center gap-2">
                        <span class="bg-purple-500 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm">3</span>
                        Radyo/SektÃ¶r Konseptini DeÄŸiÅŸtir
                    </h4>
                    <p class="text-slate-300 mb-3">Radyo/SektÃ¶rleri "playlist container" deÄŸil, "genre/mood" gibi kullan.</p>
                    <div class="bg-slate-800 p-4 rounded-lg">
                        <p class="text-sm text-slate-400 mb-2"><strong>Alternatif YaklaÅŸÄ±m:</strong></p>
                        <ul class="list-disc list-inside space-y-2 text-sm text-slate-300">
                            <li>Radio â†’ MÃ¼zik tÃ¼rÃ¼ filtresi olarak kullan (Blues, Rock, Jazz radyolarÄ±)</li>
                            <li>Sector â†’ Mekan bazlÄ± filtre (Cafe, Restaurant â†’ sakin mÃ¼zik, Bar â†’ canlÄ± mÃ¼zik)</li>
                            <li>Her radio/sector iÃ§in Ã¶nceden tanÄ±mlÄ± genre/mood kombinasyonlarÄ± kullan</li>
                            <li>Playlist yerine doÄŸrudan ÅŸarkÄ± sorgula: <code>Song::whereHas('genres', ...)</code></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ã–zet -->
        <div class="card bg-slate-900 border-slate-600">
            <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
                <i class="fas fa-clipboard-check"></i>
                ğŸ“Š Ã–zet
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="text-center p-4 bg-green-900/30 rounded-lg border border-green-700">
                    <div class="text-4xl font-bold text-green-400 mb-2">10+</div>
                    <div class="text-sm text-slate-300">Ã‡alÄ±ÅŸan Link</div>
                    <p class="text-xs text-slate-400 mt-2">Playlists, Albums, Genres, User pages</p>
                </div>

                <div class="text-center p-4 bg-red-900/30 rounded-lg border border-red-700">
                    <div class="text-4xl font-bold text-red-400 mb-2">2</div>
                    <div class="text-sm text-slate-300">BoÅŸ Sayfa</div>
                    <p class="text-xs text-slate-400 mt-2">Radios (122 kayÄ±t), Sectors (23 kayÄ±t)</p>
                </div>

                <div class="text-center p-4 bg-blue-900/30 rounded-lg border border-blue-700">
                    <div class="text-4xl font-bold text-blue-400 mb-2">0</div>
                    <div class="text-sm text-slate-300">Playlist Ä°liÅŸkisi</div>
                    <p class="text-xs text-slate-400 mt-2">Radio ve Sector'lerin hiÃ§birinde yok</p>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="mt-8 text-center text-slate-500 text-sm">
            <p>ğŸ¤– Claude Code tarafÄ±ndan oluÅŸturuldu</p>
            <p class="mt-1">08 Ocak 2026 - Muzibu SPA Links Analiz Raporu</p>
        </footer>
    </div>
</body>
</html>