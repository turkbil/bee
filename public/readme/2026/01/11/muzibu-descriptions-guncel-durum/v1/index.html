<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Muzibu Description'lar - GÃ¼ncel Durum | 11 Ocak 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
        .description-card { transition: all 0.2s; }
        .description-card:hover { transform: translateY(-2px); box-shadow: 0 8px 16px rgba(0,0,0,0.3); }
        .tab-button.active { background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%); }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; }
    </style>
</head>
<body class="bg-slate-900 text-slate-100 min-h-screen">

    <!-- Header -->
    <header class="bg-gradient-to-r from-slate-800 to-slate-900 border-b border-slate-700 sticky top-0 z-50 backdrop-blur-sm bg-opacity-95">
        <div class="container mx-auto px-6 py-6">
            <div class="flex items-center justify-between">
                <div>
                    <div class="flex items-center gap-3 mb-2">
                        <span class="bg-green-600 text-white text-xs font-bold px-3 py-1 rounded-full">âœ… TEMÄ°ZLENDÄ°</span>
                        <span class="bg-blue-600 text-white text-xs font-bold px-3 py-1 rounded-full">ğŸ“‹ RAPOR</span>
                    </div>
                    <h1 class="text-3xl font-bold bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent">
                        Muzibu Description'lar - GÃ¼ncel Durum
                    </h1>
                    <p class="text-slate-400 mt-2">TÃ¼m tablolardaki description alanlarÄ±nÄ±n temizlik sonrasÄ± durumu</p>
                </div>
                <div class="text-right">
                    <div class="text-sm text-slate-400">muzibu.com.tr</div>
                    <div class="text-2xl font-bold text-cyan-400">11 Ocak 2026</div>
                </div>
            </div>
        </div>
    </header>

    <div class="container mx-auto px-6 py-8">

        <!-- Basit AnlatÄ±m -->
        <div class="bg-green-900/20 border border-green-800 rounded-xl p-6 mb-8">
            <h2 class="text-2xl font-bold text-green-400 mb-4">ğŸ“ Basit AnlatÄ±m (Herkes Ä°Ã§in)</h2>
            <div class="space-y-3 text-slate-300 leading-relaxed">
                <p><strong>Ne YapÄ±ldÄ±?</strong><br>Muzibu platformundaki tÃ¼m mÃ¼zik iÃ§eriklerinin (playlistler, albÃ¼mler, sanatÃ§Ä±lar, tÃ¼rler) aÃ§Ä±klamalarÄ±nÄ± temizledik ve sadeleÅŸtirdik.</p>

                <p><strong>Neden YapÄ±ldÄ±?</strong><br>BazÄ± aÃ§Ä±klamalar Ã§ok uzundu, HTML kodlarÄ± iÃ§eriyordu ve birden fazla cÃ¼mle vardÄ±. Bu hem kullanÄ±cÄ± deneyimini bozuyor hem de sayfa yÃ¼klemelerini yavaÅŸlatÄ±yordu.</p>

                <p><strong>Ne DeÄŸiÅŸti?</strong><br>Åimdi tÃ¼m aÃ§Ä±klamalar:</p>
                <ul class="list-disc list-inside pl-4 space-y-1">
                    <li>âœ… Maksimum 150 karakter (kÄ±sa ve Ã¶z)</li>
                    <li>âœ… Sadece 1 cÃ¼mle (net ve anlaÅŸÄ±lÄ±r)</li>
                    <li>âœ… HTML kod yok (temiz metin)</li>
                    <li>âœ… Ã–zel karakterler dÃ¼zeltildi (Ã¼, Ã§, ÄŸ, ÅŸ)</li>
                </ul>

                <p><strong>SonuÃ§:</strong><br>Toplamda <strong class="text-green-400">748 kayÄ±t</strong> gÃ¼ncellendi. ArtÄ±k tÃ¼m aÃ§Ä±klamalar kÄ±sa, temiz ve hÄ±zlÄ± yÃ¼kleniyor! ğŸš€</p>
            </div>
        </div>

        <!-- Teknik Detaylar -->
        <div class="bg-blue-900/20 border border-blue-800 rounded-xl p-6 mb-8">
            <h2 class="text-2xl font-bold text-blue-400 mb-4">ğŸ”§ Teknik Detaylar (GeliÅŸtiriciler Ä°Ã§in)</h2>
            <div class="space-y-3 text-slate-300 leading-relaxed">
                <p><strong>Ä°ÅŸlem KomutlarÄ±:</strong></p>
                <div class="bg-slate-950 border border-slate-700 rounded-lg p-4 font-mono text-sm">
                    <div class="text-cyan-400"># Ä°lk temizlik (HTML tag/entity)</div>
                    <div class="text-slate-300">php artisan muzibu:clean-descriptions</div>
                    <div class="text-green-400"># SonuÃ§: 577 kayÄ±t gÃ¼ncellendi</div>
                    <br>
                    <div class="text-cyan-400"># Ä°kinci temizlik (uzun cÃ¼mleler)</div>
                    <div class="text-slate-300">php artisan muzibu:clean-descriptions</div>
                    <div class="text-green-400"># SonuÃ§: 171 kayÄ±t gÃ¼ncellendi</div>
                    <br>
                    <div class="text-purple-400"># Toplam: 748 kayÄ±t</div>
                </div>

                <p><strong>Etkilenen Tablolar:</strong></p>
                <ul class="list-disc list-inside pl-4 space-y-1">
                    <li><code class="bg-slate-800 px-2 py-1 rounded">muzibu_genres</code> â†’ description field (JSON)</li>
                    <li><code class="bg-slate-800 px-2 py-1 rounded">muzibu_playlists</code> â†’ description field (JSON)</li>
                    <li><code class="bg-slate-800 px-2 py-1 rounded">muzibu_albums</code> â†’ description field (JSON)</li>
                    <li><code class="bg-slate-800 px-2 py-1 rounded">muzibu_sectors</code> â†’ description field (JSON)</li>
                    <li><code class="bg-slate-800 px-2 py-1 rounded">muzibu_radios</code> â†’ description field (longText)</li>
                    <li><code class="bg-slate-800 px-2 py-1 rounded">muzibu_artists</code> â†’ bio field (JSON)</li>
                </ul>

                <p><strong>Temizleme KurallarÄ±:</strong></p>
                <ol class="list-decimal list-inside pl-4 space-y-1">
                    <li>HTML tag'lerini kaldÄ±r (<code>&lt;p&gt;</code>, <code>&lt;b&gt;</code>, <code>&lt;br&gt;</code> vb.)</li>
                    <li>HTML entity'leri decode et (<code>&amp;rsquo;</code> â†’ <code>'</code>, <code>&amp;ccedil;</code> â†’ <code>Ã§</code>)</li>
                    <li>Whitespace normalize et (fazla boÅŸluklarÄ± temizle)</li>
                    <li>Ä°lk cÃ¼mleyi al (nokta, Ã¼nlem veya soru iÅŸaretine kadar)</li>
                    <li>150 karakterden uzunsa kÄ±salt ve nokta ekle</li>
                </ol>

                <p><strong>Komut DosyasÄ±:</strong><br>
                <code class="bg-slate-800 px-2 py-1 rounded">app/Console/Commands/CleanDescriptionFieldsCommand.php</code></p>
            </div>
        </div>

        <!-- Arama -->
        <div class="mb-6">
            <input
                type="text"
                id="searchInput"
                placeholder="ğŸ” Ara (ID, baÅŸlÄ±k veya description iÃ§eriÄŸi)..."
                class="w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3 text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500"
            >
        </div>

        <!-- Tabs -->
        <div class="flex flex-wrap gap-2 mb-6">
            <button class="tab-button active px-6 py-3 rounded-lg font-semibold text-white transition" data-tab="genres">
                ğŸµ Genres (<span id="count-genres">0</span>)
            </button>
            <button class="tab-button px-6 py-3 rounded-lg font-semibold bg-slate-800 text-slate-300 hover:bg-slate-700 transition" data-tab="playlists">
                ğŸ“‹ Playlists (<span id="count-playlists">0</span>)
            </button>
            <button class="tab-button px-6 py-3 rounded-lg font-semibold bg-slate-800 text-slate-300 hover:bg-slate-700 transition" data-tab="albums">
                ğŸ’¿ Albums (<span id="count-albums">0</span>)
            </button>
            <button class="tab-button px-6 py-3 rounded-lg font-semibold bg-slate-800 text-slate-300 hover:bg-slate-700 transition" data-tab="sectors">
                ğŸ¢ Sectors (<span id="count-sectors">0</span>)
            </button>
            <button class="tab-button px-6 py-3 rounded-lg font-semibold bg-slate-800 text-slate-300 hover:bg-slate-700 transition" data-tab="radios">
                ğŸ“» Radios (<span id="count-radios">0</span>)
            </button>
            <button class="tab-button px-6 py-3 rounded-lg font-semibold bg-slate-800 text-slate-300 hover:bg-slate-700 transition" data-tab="artists">
                ğŸ¤ Artists (<span id="count-artists">0</span>)
            </button>
        </div>

        <!-- Ä°statistikler -->
        <div id="statsContainer" class="stats-grid mb-8"></div>

        <!-- Content -->
        <div id="contentContainer" class="space-y-4"></div>

        <!-- Loading -->
        <div id="loading" class="text-center py-12">
            <div class="animate-spin inline-block w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full"></div>
            <p class="text-slate-400 mt-4">Veriler yÃ¼kleniyor...</p>
        </div>

    </div>

    <!-- Footer -->
    <footer class="bg-slate-800 border-t border-slate-700 mt-12 py-6">
        <div class="container mx-auto px-6 text-center text-slate-400">
            <p class="mb-2">ğŸ¤– Bu rapor <strong class="text-cyan-400">Claude Code</strong> tarafÄ±ndan oluÅŸturuldu</p>
            <p class="text-sm">Description temizleme: <code class="bg-slate-900 px-2 py-1 rounded">php artisan muzibu:clean-descriptions</code></p>
        </div>
    </footer>

    <script>
        let allData = {};
        let currentTab = 'genres';
        let searchTerm = '';

        // Load data
        fetch('data.json')
            .then(r => r.json())
            .then(data => {
                allData = data;
                updateCounts();
                renderTab(currentTab);
                document.getElementById('loading').style.display = 'none';
            })
            .catch(err => {
                document.getElementById('loading').innerHTML = '<p class="text-red-400">âŒ Veri yÃ¼klenemedi</p>';
            });

        // Update counts
        function updateCounts() {
            Object.keys(allData).forEach(key => {
                const count = allData[key].length;
                document.getElementById(`count-${key}`).textContent = count;
            });
        }

        // Tab switching
        document.querySelectorAll('.tab-button').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.tab-button').forEach(b => {
                    b.classList.remove('active');
                    b.classList.add('bg-slate-800', 'text-slate-300', 'hover:bg-slate-700');
                    b.classList.remove('bg-gradient-to-r', 'from-blue-600', 'to-blue-700');
                });
                btn.classList.add('active');
                btn.classList.remove('bg-slate-800', 'text-slate-300', 'hover:bg-slate-700');

                currentTab = btn.dataset.tab;
                renderTab(currentTab);
            });
        });

        // Search
        document.getElementById('searchInput').addEventListener('input', (e) => {
            searchTerm = e.target.value.toLowerCase();
            renderTab(currentTab);
        });

        // Render tab
        function renderTab(tab) {
            const container = document.getElementById('contentContainer');
            const statsContainer = document.getElementById('statsContainer');
            const items = allData[tab] || [];

            // Filter
            const filtered = items.filter(item => {
                const titleStr = JSON.stringify(item.title).toLowerCase();
                const descStr = JSON.stringify(item.description).toLowerCase();
                return titleStr.includes(searchTerm) || descStr.includes(searchTerm) || item.id.toString().includes(searchTerm);
            });

            // Stats
            const stats = calculateStats(filtered);
            statsContainer.innerHTML = `
                <div class="bg-blue-900/30 border border-blue-800 rounded-lg p-4">
                    <div class="text-blue-400 text-sm font-semibold mb-1">Toplam KayÄ±t</div>
                    <div class="text-3xl font-bold text-white">${stats.total}</div>
                </div>
                <div class="bg-green-900/30 border border-green-800 rounded-lg p-4">
                    <div class="text-green-400 text-sm font-semibold mb-1">Ort. Uzunluk</div>
                    <div class="text-3xl font-bold text-white">${stats.avgLength} <span class="text-lg text-slate-400">karakter</span></div>
                </div>
                <div class="bg-purple-900/30 border border-purple-800 rounded-lg p-4">
                    <div class="text-purple-400 text-sm font-semibold mb-1">En Uzun</div>
                    <div class="text-3xl font-bold text-white">${stats.maxLength} <span class="text-lg text-slate-400">karakter</span></div>
                </div>
                <div class="bg-cyan-900/30 border border-cyan-800 rounded-lg p-4">
                    <div class="text-cyan-400 text-sm font-semibold mb-1">En KÄ±sa</div>
                    <div class="text-3xl font-bold text-white">${stats.minLength} <span class="text-lg text-slate-400">karakter</span></div>
                </div>
            `;

            // Content
            if (filtered.length === 0) {
                container.innerHTML = '<p class="text-center text-slate-400 py-12">SonuÃ§ bulunamadÄ±</p>';
                return;
            }

            container.innerHTML = filtered.map(item => renderCard(item, tab)).join('');
        }

        // Calculate stats
        function calculateStats(items) {
            if (items.length === 0) return { total: 0, avgLength: 0, maxLength: 0, minLength: 0 };

            const lengths = items.map(item => {
                const desc = item.description;
                if (typeof desc === 'string') return desc.length;
                if (typeof desc === 'object') {
                    const allTexts = Object.values(desc).join(' ');
                    return allTexts.length;
                }
                return 0;
            });

            return {
                total: items.length,
                avgLength: Math.round(lengths.reduce((a, b) => a + b, 0) / lengths.length),
                maxLength: Math.max(...lengths),
                minLength: Math.min(...lengths)
            };
        }

        // Render card
        function renderCard(item, tab) {
            const title = item.title.tr || item.title.en || 'N/A';
            const desc = item.description;

            let descHtml = '';
            if (typeof desc === 'string') {
                descHtml = `<div class="space-y-2">
                    <div class="bg-slate-800/50 rounded-lg p-3">
                        <div class="text-xs text-slate-500 mb-1">Text</div>
                        <div class="text-slate-200">${desc}</div>
                        <div class="text-xs text-slate-500 mt-2">${desc.length} karakter</div>
                    </div>
                </div>`;
            } else if (desc.text) {
                descHtml = `<div class="space-y-2">
                    <div class="bg-slate-800/50 rounded-lg p-3">
                        <div class="text-xs text-slate-500 mb-1">Text</div>
                        <div class="text-slate-200">${desc.text}</div>
                        <div class="text-xs text-slate-500 mt-2">${desc.text.length} karakter</div>
                    </div>
                </div>`;
            } else {
                descHtml = Object.entries(desc).map(([lang, text]) => {
                    if (!text) return '';
                    const sentences = (text.match(/[.!?]/g) || []).length;
                    return `
                        <div class="bg-slate-800/50 rounded-lg p-3">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-xs font-semibold text-slate-400 uppercase">${lang}</span>
                                <span class="text-xs text-slate-500">${text.length} karakter â€¢ ${sentences} cÃ¼mle</span>
                            </div>
                            <div class="text-slate-200">${text}</div>
                        </div>
                    `;
                }).join('');
            }

            return `
                <div class="description-card bg-slate-800 border border-slate-700 rounded-xl p-5">
                    <div class="flex items-start justify-between mb-3">
                        <div>
                            <span class="text-xs text-slate-500 font-mono">ID: ${item.id}</span>
                            <h3 class="text-lg font-bold text-white mt-1">${title}</h3>
                        </div>
                        <span class="bg-blue-600 text-white text-xs px-2 py-1 rounded">${tab}</span>
                    </div>
                    <div class="space-y-2">${descHtml}</div>
                </div>
            `;
        }
    </script>
</body>
</html>
