<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Abuse Detection System - FINAL PLAN v8</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 100%); }
        .card { background: rgba(30, 41, 59, 0.9); backdrop-filter: blur(10px); }
        .glow-red { box-shadow: 0 0 20px rgba(239, 68, 68, 0.3); }
        .glow-green { box-shadow: 0 0 20px rgba(34, 197, 94, 0.3); }
        .glow-blue { box-shadow: 0 0 20px rgba(59, 130, 246, 0.3); }
        .timeline-line { position: relative; }
        .timeline-line::before {
            content: '';
            position: absolute;
            left: 1.5rem;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(to bottom, #3b82f6, #8b5cf6, #ec4899);
        }
        code { background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 4px; font-size: 0.85em; }
    </style>
</head>
<body class="min-h-screen text-white">

    <!-- Header -->
    <header class="border-b border-white/10 py-8 bg-slate-900/50">
        <div class="max-w-6xl mx-auto px-4">
            <div class="flex items-center gap-4 mb-4">
                <span class="px-4 py-2 bg-gradient-to-r from-red-500 to-orange-500 text-white text-sm font-bold rounded-full">
                    <i class="fas fa-file-signature mr-2"></i>FINAL PLAN v8
                </span>
                <span class="px-3 py-1 bg-green-500/20 text-green-400 text-xs font-bold rounded-full border border-green-500/30">
                    <i class="fas fa-check mr-1"></i>ONAY BEKLIYOR
                </span>
            </div>
            <h1 class="text-4xl font-bold bg-gradient-to-r from-white via-blue-200 to-purple-200 bg-clip-text text-transparent">
                Muzibu B2B - Abuse Detection System
            </h1>
            <p class="text-gray-400 mt-2 text-lg">Queue-based Concurrent Streaming Detection</p>
            <p class="text-gray-500 text-sm mt-1">29 Aralik 2025 | Tum kararlar ve mimari final</p>
        </div>
    </header>

    <main class="max-w-6xl mx-auto px-4 py-8 space-y-8">

        <!-- SECTION 1: Problem & Solution -->
        <section class="card rounded-2xl border border-white/10 overflow-hidden">
            <div class="p-6 border-b border-white/10 bg-gradient-to-r from-red-900/30 to-transparent">
                <h2 class="text-2xl font-bold flex items-center gap-3">
                    <div class="w-10 h-10 bg-red-500/20 rounded-lg flex items-center justify-center">
                        <i class="fas fa-exclamation-triangle text-red-400"></i>
                    </div>
                    Problem & Cozum
                </h2>
            </div>
            <div class="p-6 space-y-6">
                <!-- Simple Explanation -->
                <div class="bg-green-900/20 border border-green-800 rounded-lg p-5">
                    <h3 class="text-green-400 font-bold mb-3"><i class="fas fa-user mr-2"></i>Basit Anlatim (Herkes Icin)</h3>
                    <p class="text-gray-300 leading-relaxed">
                        <strong>Problem:</strong> Bir kullanici tek abonelik ile hem telefondan hem bilgisayardan ayni anda muzik dinleyebiliyor.
                        Bu "hesap paylasimi" anlamina geliyor ve gelir kaybi yasiyor.
                    </p>
                    <p class="text-gray-300 leading-relaxed mt-3">
                        <strong>Cozum:</strong> Sistem otomatik olarak "ayni anda farkli cihazlardan dinleme" tespiti yapacak.
                        Admin panelinden tek tu≈üla tum premium kullanicilari tarayabilecek. Suistimal edenler raporlanacak.
                    </p>
                </div>

                <!-- Technical -->
                <div class="bg-blue-900/20 border border-blue-800 rounded-lg p-5">
                    <h3 class="text-blue-400 font-bold mb-3"><i class="fas fa-cogs mr-2"></i>Teknik Detay</h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <p class="text-gray-400 text-sm font-semibold mb-2">OVERLAP DETECTION ALGORITMASI:</p>
                            <ul class="text-gray-300 text-sm space-y-1">
                                <li><i class="fas fa-check text-green-400 mr-2"></i>Play1 bitis > Play2 baslangic</li>
                                <li><i class="fas fa-check text-green-400 mr-2"></i>Play1.device != Play2.device</li>
                                <li><i class="fas fa-check text-green-400 mr-2"></i>Overlap seconds = Play1_end - Play2_start</li>
                            </ul>
                        </div>
                        <div>
                            <p class="text-gray-400 text-sm font-semibold mb-2">ABUSE SCORE HESAPLAMA:</p>
                            <ul class="text-gray-300 text-sm space-y-1">
                                <li><i class="fas fa-calculator text-yellow-400 mr-2"></i>SUM(overlap_seconds) per user</li>
                                <li><i class="fas fa-flag text-red-400 mr-2"></i>Score > 300s = Suspicious</li>
                                <li><i class="fas fa-ban text-red-400 mr-2"></i>Score > 600s = Abuse Confirmed</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 2: System Architecture -->
        <section class="card rounded-2xl border border-white/10 overflow-hidden">
            <div class="p-6 border-b border-white/10 bg-gradient-to-r from-blue-900/30 to-transparent">
                <h2 class="text-2xl font-bold flex items-center gap-3">
                    <div class="w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center">
                        <i class="fas fa-sitemap text-blue-400"></i>
                    </div>
                    Sistem Mimarisi
                </h2>
            </div>
            <div class="p-6">
                <!-- Flow Diagram -->
                <div class="bg-slate-800/50 rounded-xl p-6 mb-6">
                    <h3 class="text-white font-bold mb-4 text-center">Queue-Based Scan Flow</h3>
                    <div class="flex flex-wrap items-center justify-center gap-4 text-sm">
                        <div class="bg-blue-500/20 border border-blue-500/50 rounded-lg px-4 py-3 text-center">
                            <i class="fas fa-mouse-pointer text-blue-400 text-xl mb-1"></i>
                            <div class="text-blue-300 font-semibold">Admin Buton</div>
                            <div class="text-gray-500 text-xs">"Tarama Baslat"</div>
                        </div>
                        <i class="fas fa-arrow-right text-gray-600"></i>
                        <div class="bg-purple-500/20 border border-purple-500/50 rounded-lg px-4 py-3 text-center">
                            <i class="fas fa-users text-purple-400 text-xl mb-1"></i>
                            <div class="text-purple-300 font-semibold">Premium Users</div>
                            <div class="text-gray-500 text-xs">Active subscriptions</div>
                        </div>
                        <i class="fas fa-arrow-right text-gray-600"></i>
                        <div class="bg-orange-500/20 border border-orange-500/50 rounded-lg px-4 py-3 text-center">
                            <i class="fas fa-layer-group text-orange-400 text-xl mb-1"></i>
                            <div class="text-orange-300 font-semibold">Queue Jobs</div>
                            <div class="text-gray-500 text-xs">1 job per user</div>
                        </div>
                        <i class="fas fa-arrow-right text-gray-600"></i>
                        <div class="bg-green-500/20 border border-green-500/50 rounded-lg px-4 py-3 text-center">
                            <i class="fas fa-cog text-green-400 text-xl mb-1"></i>
                            <div class="text-green-300 font-semibold">Horizon</div>
                            <div class="text-gray-500 text-xs">Paralel isleme</div>
                        </div>
                        <i class="fas fa-arrow-right text-gray-600"></i>
                        <div class="bg-red-500/20 border border-red-500/50 rounded-lg px-4 py-3 text-center">
                            <i class="fas fa-database text-red-400 text-xl mb-1"></i>
                            <div class="text-red-300 font-semibold">abuse_reports</div>
                            <div class="text-gray-500 text-xs">Sonuclar kaydedilir</div>
                        </div>
                    </div>
                </div>

                <!-- Benefits -->
                <div class="grid md:grid-cols-3 gap-4">
                    <div class="bg-slate-800/30 rounded-lg p-4 border border-white/5">
                        <div class="text-green-400 font-bold mb-2"><i class="fas fa-check-circle mr-2"></i>Veri Yigilmasi Yok</div>
                        <p class="text-gray-400 text-sm">Her kullanici ayri job. Memory overflow riski sifir.</p>
                    </div>
                    <div class="bg-slate-800/30 rounded-lg p-4 border border-white/5">
                        <div class="text-green-400 font-bold mb-2"><i class="fas fa-check-circle mr-2"></i>Paralel Islem</div>
                        <p class="text-gray-400 text-sm">Horizon ile 2-3 worker ayni anda calisir.</p>
                    </div>
                    <div class="bg-slate-800/30 rounded-lg p-4 border border-white/5">
                        <div class="text-green-400 font-bold mb-2"><i class="fas fa-check-circle mr-2"></i>Izlenebilirlik</div>
                        <p class="text-gray-400 text-sm">Her job'in durumu Horizon'da gorunur.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 3: Database Structure -->
        <section class="card rounded-2xl border border-white/10 overflow-hidden">
            <div class="p-6 border-b border-white/10 bg-gradient-to-r from-purple-900/30 to-transparent">
                <h2 class="text-2xl font-bold flex items-center gap-3">
                    <div class="w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center">
                        <i class="fas fa-database text-purple-400"></i>
                    </div>
                    Veritabani Yapisi
                </h2>
            </div>
            <div class="p-6 space-y-6">

                <!-- Existing Table -->
                <div class="bg-slate-800/50 rounded-xl p-5 border border-white/5">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="px-3 py-1 bg-green-500/20 text-green-400 text-xs font-bold rounded-full">MEVCUT</span>
                        <h3 class="text-lg font-bold text-white">muzibu_song_plays</h3>
                    </div>
                    <div class="grid md:grid-cols-2 gap-4 text-sm">
                        <div class="space-y-2">
                            <div class="flex justify-between"><code>id</code> <span class="text-gray-500">BIGINT PK</span></div>
                            <div class="flex justify-between"><code>song_id</code> <span class="text-gray-500">FK -> muzibu_songs</span></div>
                            <div class="flex justify-between"><code>user_id</code> <span class="text-gray-500">FK -> users (nullable)</span></div>
                        </div>
                        <div class="space-y-2">
                            <div class="flex justify-between"><code>device_type</code> <span class="text-gray-500">mobile/desktop/tablet</span></div>
                            <div class="flex justify-between"><code>ip_address</code> <span class="text-gray-500">VARCHAR(45)</span></div>
                            <div class="flex justify-between"><code>created_at</code> <span class="text-gray-500">TIMESTAMP</span></div>
                        </div>
                    </div>
                </div>

                <!-- New Table -->
                <div class="bg-slate-800/50 rounded-xl p-5 border border-red-500/30 glow-red">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="px-3 py-1 bg-red-500/20 text-red-400 text-xs font-bold rounded-full">YENI TABLO</span>
                        <h3 class="text-lg font-bold text-white">muzibu_abuse_reports</h3>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm">
                            <thead>
                                <tr class="text-left text-gray-400 border-b border-white/10">
                                    <th class="pb-2">Field</th>
                                    <th class="pb-2">Type</th>
                                    <th class="pb-2">Aciklama</th>
                                </tr>
                            </thead>
                            <tbody class="text-gray-300">
                                <tr class="border-b border-white/5">
                                    <td class="py-2"><code>id</code></td>
                                    <td>BIGINT PK</td>
                                    <td class="text-gray-500">Auto increment</td>
                                </tr>
                                <tr class="border-b border-white/5">
                                    <td class="py-2"><code>user_id</code></td>
                                    <td>FK -> users</td>
                                    <td class="text-gray-500">Taranan kullanici</td>
                                </tr>
                                <tr class="border-b border-white/5">
                                    <td class="py-2"><code>scan_date</code></td>
                                    <td>DATE</td>
                                    <td class="text-gray-500">Tarama tarihi</td>
                                </tr>
                                <tr class="border-b border-white/5">
                                    <td class="py-2"><code>period_start</code></td>
                                    <td>DATETIME</td>
                                    <td class="text-gray-500">Incelenen donem basi</td>
                                </tr>
                                <tr class="border-b border-white/5">
                                    <td class="py-2"><code>period_end</code></td>
                                    <td>DATETIME</td>
                                    <td class="text-gray-500">Incelenen donem sonu</td>
                                </tr>
                                <tr class="border-b border-white/5">
                                    <td class="py-2"><code>total_plays</code></td>
                                    <td>INT</td>
                                    <td class="text-gray-500">Toplam dinleme sayisi</td>
                                </tr>
                                <tr class="border-b border-white/5">
                                    <td class="py-2"><code>overlap_count</code></td>
                                    <td>INT</td>
                                    <td class="text-gray-500">Cakisma sayisi</td>
                                </tr>
                                <tr class="border-b border-white/5">
                                    <td class="py-2"><code>abuse_score</code></td>
                                    <td>INT</td>
                                    <td class="text-gray-500">Toplam cakisma saniyesi</td>
                                </tr>
                                <tr class="border-b border-white/5">
                                    <td class="py-2"><code>status</code></td>
                                    <td>ENUM</td>
                                    <td class="text-gray-500">clean / suspicious / abuse</td>
                                </tr>
                                <tr class="border-b border-white/5">
                                    <td class="py-2"><code>overlaps_json</code></td>
                                    <td>JSON</td>
                                    <td class="text-gray-500">Detayli cakisma verileri</td>
                                </tr>
                                <tr class="border-b border-white/5">
                                    <td class="py-2"><code>reviewed_by</code></td>
                                    <td>FK -> users (nullable)</td>
                                    <td class="text-gray-500">Inceleyen admin</td>
                                </tr>
                                <tr class="border-b border-white/5">
                                    <td class="py-2"><code>reviewed_at</code></td>
                                    <td>DATETIME (nullable)</td>
                                    <td class="text-gray-500">Inceleme tarihi</td>
                                </tr>
                                <tr class="border-b border-white/5">
                                    <td class="py-2"><code>action_taken</code></td>
                                    <td>ENUM (nullable)</td>
                                    <td class="text-gray-500">none / warned / suspended</td>
                                </tr>
                                <tr>
                                    <td class="py-2"><code>notes</code></td>
                                    <td>TEXT (nullable)</td>
                                    <td class="text-gray-500">Admin notlari</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Indexes -->
                <div class="bg-yellow-900/20 border border-yellow-800 rounded-lg p-4">
                    <h4 class="text-yellow-400 font-bold mb-2"><i class="fas fa-bolt mr-2"></i>Onerilen Indexler</h4>
                    <div class="text-gray-300 text-sm space-y-1">
                        <p><code>INDEX (user_id, scan_date)</code> - Kullanici bazli sorgular</p>
                        <p><code>INDEX (status, abuse_score)</code> - Filtreleme</p>
                        <p><code>INDEX (scan_date)</code> - Tarih bazli listeleme</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 4: Files to Create -->
        <section class="card rounded-2xl border border-white/10 overflow-hidden">
            <div class="p-6 border-b border-white/10 bg-gradient-to-r from-green-900/30 to-transparent">
                <h2 class="text-2xl font-bold flex items-center gap-3">
                    <div class="w-10 h-10 bg-green-500/20 rounded-lg flex items-center justify-center">
                        <i class="fas fa-folder-tree text-green-400"></i>
                    </div>
                    Olusturulacak Dosyalar
                </h2>
            </div>
            <div class="p-6 space-y-4">

                <!-- File 1: Migration -->
                <div class="bg-slate-800/30 rounded-lg p-4 border-l-4 border-purple-500">
                    <div class="flex items-center gap-3 mb-2">
                        <span class="px-2 py-1 bg-purple-500/20 text-purple-400 text-xs rounded">MIGRATION</span>
                        <span class="text-white font-mono text-sm">create_muzibu_abuse_reports_table.php</span>
                    </div>
                    <p class="text-gray-400 text-sm">Lokasyon: <code>Modules/Muzibu/database/migrations/tenant/</code></p>
                    <p class="text-gray-500 text-xs mt-1">Tenant database'de calisir (tenant_muzibu_1528d0)</p>
                </div>

                <!-- File 2: Model -->
                <div class="bg-slate-800/30 rounded-lg p-4 border-l-4 border-blue-500">
                    <div class="flex items-center gap-3 mb-2">
                        <span class="px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded">MODEL</span>
                        <span class="text-white font-mono text-sm">AbuseReport.php</span>
                    </div>
                    <p class="text-gray-400 text-sm">Lokasyon: <code>Modules/Muzibu/app/Models/</code></p>
                    <p class="text-gray-500 text-xs mt-1">Eloquent model with relationships, casts, scopes</p>
                </div>

                <!-- File 3: Service -->
                <div class="bg-slate-800/30 rounded-lg p-4 border-l-4 border-green-500">
                    <div class="flex items-center gap-3 mb-2">
                        <span class="px-2 py-1 bg-green-500/20 text-green-400 text-xs rounded">SERVICE</span>
                        <span class="text-white font-mono text-sm">AbuseDetectionService.php</span>
                    </div>
                    <p class="text-gray-400 text-sm">Lokasyon: <code>Modules/Muzibu/app/Services/</code></p>
                    <div class="mt-2 text-gray-500 text-xs space-y-1">
                        <p><i class="fas fa-check text-green-400 mr-1"></i> <code>scanUser(userId, periodDays = 7)</code> - Tek kullanici tara</p>
                        <p><i class="fas fa-check text-green-400 mr-1"></i> <code>detectOverlaps(plays)</code> - Cakisma bul</p>
                        <p><i class="fas fa-check text-green-400 mr-1"></i> <code>calculateAbuseScore(overlaps)</code> - Skor hesapla</p>
                        <p><i class="fas fa-check text-green-400 mr-1"></i> <code>determineStatus(score)</code> - clean/suspicious/abuse</p>
                    </div>
                </div>

                <!-- File 4: Job -->
                <div class="bg-slate-800/30 rounded-lg p-4 border-l-4 border-orange-500">
                    <div class="flex items-center gap-3 mb-2">
                        <span class="px-2 py-1 bg-orange-500/20 text-orange-400 text-xs rounded">JOB</span>
                        <span class="text-white font-mono text-sm">ScanUserForAbuseJob.php</span>
                    </div>
                    <p class="text-gray-400 text-sm">Lokasyon: <code>Modules/Muzibu/app/Jobs/</code></p>
                    <div class="mt-2 text-gray-500 text-xs space-y-1">
                        <p><i class="fas fa-cog text-orange-400 mr-1"></i> Queue: <code>abuse-scan</code></p>
                        <p><i class="fas fa-redo text-orange-400 mr-1"></i> Tries: 3, Backoff: 60s</p>
                        <p><i class="fas fa-clock text-orange-400 mr-1"></i> Timeout: 120s</p>
                    </div>
                </div>

                <!-- File 5: Controller -->
                <div class="bg-slate-800/30 rounded-lg p-4 border-l-4 border-red-500">
                    <div class="flex items-center gap-3 mb-2">
                        <span class="px-2 py-1 bg-red-500/20 text-red-400 text-xs rounded">CONTROLLER</span>
                        <span class="text-white font-mono text-sm">AbuseReportController.php</span>
                    </div>
                    <p class="text-gray-400 text-sm">Lokasyon: <code>Modules/Muzibu/app/Http/Controllers/Admin/</code></p>
                    <div class="mt-2 text-gray-500 text-xs space-y-1">
                        <p><i class="fas fa-list text-red-400 mr-1"></i> <code>index()</code> - Rapor listesi</p>
                        <p><i class="fas fa-play text-red-400 mr-1"></i> <code>startScan()</code> - Toplu tarama baslat</p>
                        <p><i class="fas fa-eye text-red-400 mr-1"></i> <code>show(id)</code> - Detay + Timeline</p>
                        <p><i class="fas fa-check text-red-400 mr-1"></i> <code>review(id)</code> - Admin aksiyonu</p>
                    </div>
                </div>

                <!-- File 6: Livewire Component -->
                <div class="bg-slate-800/30 rounded-lg p-4 border-l-4 border-pink-500">
                    <div class="flex items-center gap-3 mb-2">
                        <span class="px-2 py-1 bg-pink-500/20 text-pink-400 text-xs rounded">LIVEWIRE</span>
                        <span class="text-white font-mono text-sm">AbuseReportTable.php</span>
                    </div>
                    <p class="text-gray-400 text-sm">Lokasyon: <code>Modules/Muzibu/app/Http/Livewire/Admin/</code></p>
                    <p class="text-gray-500 text-xs mt-1">Filtreleme, pagination, real-time updates</p>
                </div>

                <!-- File 7: Blade Views -->
                <div class="bg-slate-800/30 rounded-lg p-4 border-l-4 border-cyan-500">
                    <div class="flex items-center gap-3 mb-2">
                        <span class="px-2 py-1 bg-cyan-500/20 text-cyan-400 text-xs rounded">VIEWS</span>
                        <span class="text-white font-mono text-sm">abuse-reports/*.blade.php</span>
                    </div>
                    <p class="text-gray-400 text-sm">Lokasyon: <code>Modules/Muzibu/resources/views/admin/</code></p>
                    <div class="mt-2 text-gray-500 text-xs space-y-1">
                        <p><i class="fas fa-file text-cyan-400 mr-1"></i> index.blade.php - Liste sayfasi</p>
                        <p><i class="fas fa-file text-cyan-400 mr-1"></i> show.blade.php - Detay + Vis.js Timeline</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 5: Admin Panel UI -->
        <section class="card rounded-2xl border border-white/10 overflow-hidden">
            <div class="p-6 border-b border-white/10 bg-gradient-to-r from-pink-900/30 to-transparent">
                <h2 class="text-2xl font-bold flex items-center gap-3">
                    <div class="w-10 h-10 bg-pink-500/20 rounded-lg flex items-center justify-center">
                        <i class="fas fa-desktop text-pink-400"></i>
                    </div>
                    Admin Panel Arayuzu
                </h2>
            </div>
            <div class="p-6 space-y-6">

                <!-- Main Dashboard -->
                <div class="bg-slate-800/50 rounded-xl p-5 border border-white/5">
                    <h3 class="text-white font-bold mb-4">Ana Sayfa: Abuse Raporlari</h3>

                    <!-- Action Bar Mock -->
                    <div class="bg-slate-700/50 rounded-lg p-4 mb-4 flex flex-wrap items-center justify-between gap-4">
                        <div class="flex gap-2">
                            <button class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm font-semibold">
                                <i class="fas fa-sync mr-2"></i>Tarama Baslat
                            </button>
                            <select class="px-3 py-2 bg-slate-800 border border-white/20 rounded-lg text-sm">
                                <option>Son 7 gun</option>
                                <option>Son 30 gun</option>
                            </select>
                        </div>
                        <div class="flex gap-2">
                            <span class="px-3 py-2 bg-slate-800 rounded-lg text-sm text-gray-400">
                                <i class="fas fa-clock mr-1"></i>Son Tarama: 5 dk once
                            </span>
                        </div>
                    </div>

                    <!-- Stats Cards Mock -->
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-4">
                        <div class="bg-slate-700/30 rounded-lg p-3 text-center">
                            <div class="text-2xl font-bold text-white">156</div>
                            <div class="text-xs text-gray-500">Taranan</div>
                        </div>
                        <div class="bg-green-500/10 rounded-lg p-3 text-center">
                            <div class="text-2xl font-bold text-green-400">142</div>
                            <div class="text-xs text-gray-500">Temiz</div>
                        </div>
                        <div class="bg-yellow-500/10 rounded-lg p-3 text-center">
                            <div class="text-2xl font-bold text-yellow-400">11</div>
                            <div class="text-xs text-gray-500">Suphe</div>
                        </div>
                        <div class="bg-red-500/10 rounded-lg p-3 text-center">
                            <div class="text-2xl font-bold text-red-400">3</div>
                            <div class="text-xs text-gray-500">Suistimal</div>
                        </div>
                    </div>

                    <!-- Table Mock -->
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm">
                            <thead>
                                <tr class="text-left text-gray-400 border-b border-white/10">
                                    <th class="pb-2">Kullanici</th>
                                    <th class="pb-2">Tarama</th>
                                    <th class="pb-2">Play</th>
                                    <th class="pb-2">Cakisma</th>
                                    <th class="pb-2">Skor</th>
                                    <th class="pb-2">Durum</th>
                                    <th class="pb-2"></th>
                                </tr>
                            </thead>
                            <tbody class="text-gray-300">
                                <tr class="border-b border-white/5">
                                    <td class="py-3">
                                        <div class="flex items-center gap-2">
                                            <div class="w-8 h-8 bg-slate-600 rounded-full"></div>
                                            <div>
                                                <div class="font-medium">user@example.com</div>
                                                <div class="text-xs text-gray-500">#123</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>29 Ara</td>
                                    <td>54</td>
                                    <td>3</td>
                                    <td class="text-red-400 font-bold">842s</td>
                                    <td><span class="px-2 py-1 bg-red-500/20 text-red-400 text-xs rounded">ABUSE</span></td>
                                    <td><button class="text-blue-400 hover:text-blue-300"><i class="fas fa-eye"></i></button></td>
                                </tr>
                                <tr class="border-b border-white/5">
                                    <td class="py-3">
                                        <div class="flex items-center gap-2">
                                            <div class="w-8 h-8 bg-slate-600 rounded-full"></div>
                                            <div>
                                                <div class="font-medium">test@test.com</div>
                                                <div class="text-xs text-gray-500">#456</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>29 Ara</td>
                                    <td>23</td>
                                    <td>1</td>
                                    <td class="text-yellow-400">312s</td>
                                    <td><span class="px-2 py-1 bg-yellow-500/20 text-yellow-400 text-xs rounded">SUSPICIOUS</span></td>
                                    <td><button class="text-blue-400 hover:text-blue-300"><i class="fas fa-eye"></i></button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Detail Page -->
                <div class="bg-slate-800/50 rounded-xl p-5 border border-white/5">
                    <h3 class="text-white font-bold mb-4">Detay Sayfasi: User Timeline</h3>
                    <p class="text-gray-400 text-sm mb-4">
                        Tiklandiginda Vis.js Timeline acilir (v7 raporu gibi). Admin overlapleri gorsel inceler,
                        not ekler, aksiyon alir (warn/suspend).
                    </p>
                    <div class="bg-slate-700/30 rounded-lg p-4 border border-dashed border-white/20 text-center">
                        <i class="fas fa-chart-gantt text-4xl text-gray-600 mb-2"></i>
                        <p class="text-gray-500 text-sm">Vis.js Interactive Timeline</p>
                        <p class="text-gray-600 text-xs">(v7 raporundaki gibi)</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 6: Thresholds -->
        <section class="card rounded-2xl border border-white/10 overflow-hidden">
            <div class="p-6 border-b border-white/10 bg-gradient-to-r from-yellow-900/30 to-transparent">
                <h2 class="text-2xl font-bold flex items-center gap-3">
                    <div class="w-10 h-10 bg-yellow-500/20 rounded-lg flex items-center justify-center">
                        <i class="fas fa-sliders-h text-yellow-400"></i>
                    </div>
                    Esik Degerleri (Thresholds)
                </h2>
            </div>
            <div class="p-6">
                <div class="grid md:grid-cols-3 gap-6">
                    <div class="bg-green-500/10 rounded-xl p-5 border border-green-500/30 text-center">
                        <div class="text-4xl font-bold text-green-400 mb-2">0-300s</div>
                        <div class="text-green-300 font-semibold">CLEAN</div>
                        <p class="text-gray-500 text-sm mt-2">Normal kullanim. Aksiyon yok.</p>
                    </div>
                    <div class="bg-yellow-500/10 rounded-xl p-5 border border-yellow-500/30 text-center">
                        <div class="text-4xl font-bold text-yellow-400 mb-2">301-600s</div>
                        <div class="text-yellow-300 font-semibold">SUSPICIOUS</div>
                        <p class="text-gray-500 text-sm mt-2">Supheli. Izleme listesine al.</p>
                    </div>
                    <div class="bg-red-500/10 rounded-xl p-5 border border-red-500/30 text-center glow-red">
                        <div class="text-4xl font-bold text-red-400 mb-2">600s+</div>
                        <div class="text-red-300 font-semibold">ABUSE</div>
                        <p class="text-gray-500 text-sm mt-2">Kesin suistimal. Uyari/Askiya al.</p>
                    </div>
                </div>
                <p class="text-gray-500 text-sm text-center mt-4">
                    <i class="fas fa-info-circle mr-1"></i>
                    Bu degerler Settings'den ayarlanabilir hale getirilebilir.
                </p>
            </div>
        </section>

        <!-- SECTION 7: Implementation Steps -->
        <section class="card rounded-2xl border border-white/10 overflow-hidden">
            <div class="p-6 border-b border-white/10 bg-gradient-to-r from-indigo-900/30 to-transparent">
                <h2 class="text-2xl font-bold flex items-center gap-3">
                    <div class="w-10 h-10 bg-indigo-500/20 rounded-lg flex items-center justify-center">
                        <i class="fas fa-tasks text-indigo-400"></i>
                    </div>
                    Uygulama Adimlari
                </h2>
            </div>
            <div class="p-6">
                <div class="timeline-line space-y-6 pl-12">

                    <div class="relative">
                        <div class="absolute -left-12 w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-sm font-bold">1</div>
                        <div class="bg-slate-800/30 rounded-lg p-4 border border-white/5">
                            <h4 class="font-bold text-white">Migration Olustur</h4>
                            <p class="text-gray-400 text-sm mt-1"><code>muzibu_abuse_reports</code> tablosu tenant migration olarak</p>
                            <p class="text-gray-500 text-xs mt-2"><code>php artisan tenants:migrate</code> ile calistir</p>
                        </div>
                    </div>

                    <div class="relative">
                        <div class="absolute -left-12 w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-sm font-bold">2</div>
                        <div class="bg-slate-800/30 rounded-lg p-4 border border-white/5">
                            <h4 class="font-bold text-white">Model Olustur</h4>
                            <p class="text-gray-400 text-sm mt-1"><code>AbuseReport.php</code> with relationships, scopes</p>
                        </div>
                    </div>

                    <div class="relative">
                        <div class="absolute -left-12 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-sm font-bold">3</div>
                        <div class="bg-slate-800/30 rounded-lg p-4 border border-white/5">
                            <h4 class="font-bold text-white">Service Olustur</h4>
                            <p class="text-gray-400 text-sm mt-1"><code>AbuseDetectionService.php</code> - Core detection logic</p>
                            <p class="text-gray-500 text-xs mt-2">v7'deki JavaScript mantigi PHP'ye cevirilir</p>
                        </div>
                    </div>

                    <div class="relative">
                        <div class="absolute -left-12 w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center text-sm font-bold">4</div>
                        <div class="bg-slate-800/30 rounded-lg p-4 border border-white/5">
                            <h4 class="font-bold text-white">Job Olustur</h4>
                            <p class="text-gray-400 text-sm mt-1"><code>ScanUserForAbuseJob.php</code> - Queue worker</p>
                            <p class="text-gray-500 text-xs mt-2">Horizon'da <code>abuse-scan</code> queue'sunde calisir</p>
                        </div>
                    </div>

                    <div class="relative">
                        <div class="absolute -left-12 w-8 h-8 bg-red-500 rounded-full flex items-center justify-center text-sm font-bold">5</div>
                        <div class="bg-slate-800/30 rounded-lg p-4 border border-white/5">
                            <h4 class="font-bold text-white">Admin Controller & Views</h4>
                            <p class="text-gray-400 text-sm mt-1">Liste, detay, aksiyon sayfasi</p>
                            <p class="text-gray-500 text-xs mt-2">Tabler.io + Livewire + Vis.js Timeline</p>
                        </div>
                    </div>

                    <div class="relative">
                        <div class="absolute -left-12 w-8 h-8 bg-pink-500 rounded-full flex items-center justify-center text-sm font-bold">6</div>
                        <div class="bg-slate-800/30 rounded-lg p-4 border border-white/5">
                            <h4 class="font-bold text-white">Route & Menu</h4>
                            <p class="text-gray-400 text-sm mt-1">Admin menuye "Abuse Reports" ekle</p>
                            <p class="text-gray-500 text-xs mt-2"><code>/admin/abuse-reports</code></p>
                        </div>
                    </div>

                    <div class="relative">
                        <div class="absolute -left-12 w-8 h-8 bg-cyan-500 rounded-full flex items-center justify-center text-sm font-bold">7</div>
                        <div class="bg-slate-800/30 rounded-lg p-4 border border-white/5">
                            <h4 class="font-bold text-white">Test & Deploy</h4>
                            <p class="text-gray-400 text-sm mt-1">User #1 ile test, queue calistir</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 8: Horizon Config -->
        <section class="card rounded-2xl border border-white/10 overflow-hidden">
            <div class="p-6 border-b border-white/10 bg-gradient-to-r from-teal-900/30 to-transparent">
                <h2 class="text-2xl font-bold flex items-center gap-3">
                    <div class="w-10 h-10 bg-teal-500/20 rounded-lg flex items-center justify-center">
                        <i class="fas fa-server text-teal-400"></i>
                    </div>
                    Horizon Yapilandirmasi
                </h2>
            </div>
            <div class="p-6">
                <div class="bg-slate-800/50 rounded-xl p-5 border border-white/5">
                    <p class="text-gray-300 mb-4">
                        <code>config/horizon.php</code> dosyasinda yeni queue tanimla:
                    </p>
                    <div class="bg-slate-900 rounded-lg p-4 font-mono text-sm text-gray-300 overflow-x-auto">
                        <pre>'abuse-scan' => [
    'connection' => 'redis',
    'queue' => ['abuse-scan'],
    'balance' => 'auto',
    'processes' => 2,
    'tries' => 3,
    'timeout' => 120,
],</pre>
                    </div>
                    <p class="text-gray-500 text-sm mt-4">
                        <i class="fas fa-info-circle mr-1"></i>
                        2 process ile paralel calisiyor. Timeout 2 dakika. 3 deneme hakki.
                    </p>
                </div>
            </div>
        </section>

        <!-- Approval Box -->
        <section class="card rounded-2xl border-2 border-green-500/50 overflow-hidden glow-green">
            <div class="p-8 text-center">
                <div class="w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-check-circle text-green-400 text-3xl"></i>
                </div>
                <h2 class="text-2xl font-bold text-white mb-2">ONAY BEKLIYOR</h2>
                <p class="text-gray-400 mb-6">
                    Yukaridaki plan ve mimari uygunsa "UYGUNDUR" deyin,
                    degisiklik istiyorsaniz belirtin.
                </p>
                <div class="flex justify-center gap-4">
                    <div class="px-6 py-3 bg-green-500/20 border border-green-500/50 rounded-lg text-green-400 font-semibold">
                        <i class="fas fa-thumbs-up mr-2"></i>UYGUNDUR
                    </div>
                    <div class="px-6 py-3 bg-yellow-500/20 border border-yellow-500/50 rounded-lg text-yellow-400 font-semibold">
                        <i class="fas fa-edit mr-2"></i>DEGISIKLIK
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="border-t border-white/10 py-6 mt-8">
        <div class="max-w-6xl mx-auto px-4 text-center text-gray-500 text-sm">
            <p>Muzibu B2B - Abuse Detection System | FINAL PLAN v8</p>
            <p class="text-gray-600 mt-1">Generated by Claude AI | 29 Aralik 2025</p>
        </div>
    </footer>

</body>
</html>
