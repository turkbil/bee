<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Muzibu - G√ºvenli M√ºzik Streaming Sistemi</title>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <style>
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        @keyframes pulse-glow {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        .log-entry { animation: slideIn 0.3s ease-out; }
        .pulse-glow { animation: pulse-glow 1s infinite; }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 min-h-screen p-6"
      x-data="{
          hls: null,
          isPlaying: false,
          chunksLoaded: 0,
          streamStatus: 'Ready',
          logs: [],

          addLog(message, type = 'info') {
              const time = new Date().toLocaleTimeString('tr-TR');
              this.logs.push({ time, message, type });
              this.$nextTick(() => {
                  const consoleBody = this.$refs.consoleBody;
                  consoleBody.scrollTop = consoleBody.scrollHeight;
              });
          },

          clearConsole() {
              this.logs = [];
              this.addLog('Console temizlendi', 'info');
          },

          startDemo() {
              if (this.isPlaying) {
                  this.$refs.audioPlayer.pause();
                  this.isPlaying = false;
                  this.streamStatus = 'Paused';
                  this.addLog('‚è∏ Duraklatƒ±ldƒ±', 'warning');
                  return;
              }

              if (Hls.isSupported()) {
                  this.addLog('‚è≥ Playlist y√ºkleniyor...', 'info');
                  const startTime = Date.now();

                  if (!this.hls) {
                      this.hls = new Hls({ enableWorker: true, lowLatencyMode: false });
                      this.hls.loadSource('https://tuufi.com/stream/play/M5sxjFPOXZgIfARp/playlist.m3u8');
                      this.hls.attachMedia(this.$refs.audioPlayer);

                      this.hls.on(Hls.Events.MANIFEST_PARSED, () => {
                          const loadTime = Date.now() - startTime;
                          this.addLog('‚úÖ Playlist y√ºklendi (cache\\'li)', 'success');
                          this.addLog(`‚ö° Hƒ±z: ${loadTime}ms`, 'speed');
                          this.streamStatus = 'Playing';
                          this.$refs.audioPlayer.play();
                          this.isPlaying = true;
                      });

                      this.hls.on(Hls.Events.KEY_LOADED, () => {
                          this.addLog('üîë ≈ûifreleme anahtarƒ± alƒ±ndƒ±', 'success');
                      });

                      this.hls.on(Hls.Events.FRAG_LOADING, () => {
                          this.addLog(`[LOADING] >>> chunk_${String(this.chunksLoaded).padStart(3, '0')}.ts`, 'info');
                      });

                      this.hls.on(Hls.Events.FRAG_LOADED, (event, data) => {
                          this.chunksLoaded++;
                          const chunkSize = (data.frag.stats.total / 1024).toFixed(2);
                          const loadTime = data.frag.stats.loading.end - data.frag.stats.loading.start;
                          this.addLog(`[DECRYPT] <<< chunk_${String(this.chunksLoaded - 1).padStart(3, '0')}.ts | ${chunkSize}KB | ${loadTime}ms`, 'chunk');
                      });

                      this.hls.on(Hls.Events.ERROR, (event, data) => {
                          if (data.fatal) {
                              this.streamStatus = 'Error';
                              this.addLog('‚ùå Y√ºkleme hatasƒ± - Tekrar deneyin', 'warning');
                          }
                      });
                  } else {
                      this.$refs.audioPlayer.play();
                      this.isPlaying = true;
                      this.streamStatus = 'Playing';
                      this.addLog('‚ñ∂Ô∏è Devam ediliyor', 'success');
                  }
              }
          },

          init() {
              this.addLog('‚úÖ Sistem hazƒ±r', 'success');
              this.addLog('üîê AES-128 ≈üifreleme aktif', 'success');
          }
      }">

    <div class="max-w-5xl mx-auto">
        <!-- Header -->
        <div class="bg-gradient-to-br from-slate-800 to-purple-900 rounded-t-3xl p-10 text-center border border-emerald-500 border-b-0">
            <div class="text-6xl mb-4">üéµ</div>
            <h1 class="text-4xl font-bold text-emerald-400 mb-3 drop-shadow-[0_0_20px_rgba(16,185,129,0.5)]">
                Muzibu - G√ºvenli M√ºzik Streaming
            </h1>
            <p class="text-cyan-400 text-lg">
                M√ºzikleriniz Par√ßalara B√∂l√ºnerek ≈ûifreli Akƒ±≈ü ile Korunur
            </p>
        </div>

        <!-- Player Section -->
        <div class="bg-gradient-to-br from-slate-800 to-purple-900 p-10 border-x border-emerald-500">
            <!-- Audio Player -->
            <div class="bg-black rounded-2xl overflow-hidden mb-8 shadow-2xl">
                <audio x-ref="audioPlayer" controls class="w-full h-16"></audio>
            </div>

            <!-- Play Button -->
            <button @click="startDemo()"
                    class="w-full bg-gradient-to-r from-emerald-500 to-cyan-500 hover:from-emerald-600 hover:to-cyan-600
                           text-white font-bold py-4 px-8 rounded-full text-xl mb-6
                           transform transition hover:scale-105 shadow-[0_0_30px_rgba(16,185,129,0.4)]">
                <span x-text="isPlaying ? '‚è∏ Duraklat' : '‚ñ∂Ô∏è Demo ≈ûarkƒ±yƒ± Dinle'"></span>
            </button>

            <!-- Status Text -->
            <p class="text-center text-lg mb-8"
               :class="streamStatus === 'Playing' ? 'text-emerald-400 font-bold' : 'text-cyan-400'"
               x-text="streamStatus === 'Ready' ? 'Dinlemeye hazƒ±r' :
                       streamStatus === 'Playing' ? 'üéµ ≈ûarkƒ± √áalƒ±yor - G√ºvenli Akƒ±≈ü Aktif' :
                       streamStatus === 'Paused' ? 'Duraklatƒ±ldƒ±' : 'Hata'">
            </p>

            <!-- Console Panel -->
            <div class="bg-slate-950 rounded-xl overflow-hidden shadow-[0_0_30px_rgba(16,185,129,0.2)] border border-emerald-500 mb-8">
                <div class="bg-gradient-to-r from-slate-900 to-purple-900 px-6 py-4 flex justify-between items-center border-b-2 border-emerald-500">
                    <span class="text-emerald-400 font-bold text-sm tracking-widest uppercase">‚ö° Sistem Durumu</span>
                    <button @click="clearConsole()"
                            class="border-2 border-pink-500 text-pink-500 hover:bg-pink-500 hover:text-white
                                   px-4 py-1 rounded text-xs font-bold uppercase transition">
                        Temizle
                    </button>
                </div>
                <div x-ref="consoleBody"
                     class="p-6 max-h-80 overflow-y-auto font-mono text-sm bg-slate-950
                            scrollbar-thin scrollbar-thumb-emerald-500 scrollbar-track-slate-800">
                    <template x-for="log in logs" :key="log.time + log.message">
                        <div class="log-entry mb-2 pl-3 border-l-2"
                             :class="{
                                 'border-emerald-500 text-emerald-400 drop-shadow-[0_0_10px_rgba(16,185,129,0.5)]': log.type === 'success',
                                 'border-cyan-500 text-cyan-400 drop-shadow-[0_0_10px_rgba(6,182,212,0.5)]': log.type === 'info',
                                 'border-pink-500 text-pink-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]': log.type === 'chunk',
                                 'border-yellow-500 text-yellow-400 drop-shadow-[0_0_15px_rgba(234,179,8,0.8)] pulse-glow': log.type === 'speed',
                                 'border-orange-500 text-orange-400 drop-shadow-[0_0_10px_rgba(249,115,22,0.5)]': log.type === 'warning'
                             }">
                            <span x-text="`[${log.time}] ${log.message}`"></span>
                        </div>
                    </template>
                </div>
            </div>

            <!-- Info Cards -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="bg-gradient-to-br from-slate-900 to-slate-800 p-6 rounded-2xl text-center
                            border border-emerald-500 shadow-[0_0_20px_rgba(16,185,129,0.2)]">
                    <div class="text-4xl mb-3">üì¶</div>
                    <div class="text-cyan-400 text-xs font-semibold uppercase tracking-wider mb-2">Chunks Loaded</div>
                    <div class="text-emerald-400 text-3xl font-bold drop-shadow-[0_0_15px_rgba(16,185,129,0.5)]"
                         x-text="chunksLoaded">0</div>
                </div>

                <div class="bg-gradient-to-br from-slate-900 to-slate-800 p-6 rounded-2xl text-center
                            border border-emerald-500 shadow-[0_0_20px_rgba(16,185,129,0.2)]">
                    <div class="text-4xl mb-3">‚ö°</div>
                    <div class="text-cyan-400 text-xs font-semibold uppercase tracking-wider mb-2">Status</div>
                    <div class="text-emerald-400 text-3xl font-bold drop-shadow-[0_0_15px_rgba(16,185,129,0.5)]"
                         x-text="streamStatus">Ready</div>
                </div>

                <div class="bg-gradient-to-br from-slate-900 to-slate-800 p-6 rounded-2xl text-center
                            border border-emerald-500 shadow-[0_0_20px_rgba(16,185,129,0.2)]">
                    <div class="text-4xl mb-3">üîê</div>
                    <div class="text-cyan-400 text-xs font-semibold uppercase tracking-wider mb-2">Encryption</div>
                    <div class="text-emerald-400 text-3xl font-bold drop-shadow-[0_0_15px_rgba(16,185,129,0.5)]">
                        AES-128
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="bg-gradient-to-br from-slate-800 to-purple-900 rounded-b-3xl p-6 text-center border border-emerald-500 border-t-0">
            <p class="text-emerald-400 text-sm opacity-70">üéµ Muzibu - Profesyonel M√ºzik Streaming Platformu</p>
            <p class="text-emerald-400 text-xs opacity-60 mt-1">¬© 2025 - T√ºm m√ºzikler ≈üifreli akƒ±≈ü ile korunmaktadƒ±r</p>
        </div>
    </div>
</body>
</html>
