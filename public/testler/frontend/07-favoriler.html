<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frontend 07: Favoriler - Muzibu Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: { extend: { colors: { slate: { 850: '#1a202e', 950: '#0f1419' } } } }
        }
    </script>
    <style>
        @media print {
            .no-print { display: none; }
            input[type="checkbox"] { -webkit-appearance: checkbox; appearance: checkbox; }
        }
    </style>
</head>
<body class="bg-slate-950 text-slate-200 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-5xl">

        <div class="mb-8">
            <div class="flex items-center justify-between mb-4">
                <a href="../index.html" class="text-emerald-400 hover:text-emerald-300 no-print">â† Geri</a>
                <button onclick="window.print()" class="bg-slate-800 hover:bg-slate-700 px-4 py-2 rounded text-sm no-print">ğŸ–¨ï¸ YazdÄ±r</button>
            </div>
            <h1 class="text-3xl font-bold text-emerald-400 mb-2">Frontend 07: Favoriler Sistemi</h1>
            <p class="text-slate-400">Favorilere ekleme/Ã§Ä±karma, favoriler sayfasÄ±, kalp ikonu toggle</p>

            <div class="mt-4 bg-slate-900 rounded-lg p-4">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-sm font-semibold">Ä°lerleme</span>
                    <span class="text-sm" id="progress-text">0 / 10</span>
                </div>
                <div class="w-full bg-slate-800 rounded-full h-3">
                    <div id="progress-bar" class="bg-emerald-500 h-3 rounded-full transition-all duration-300" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <div class="space-y-6">

            <!-- Favorilere Ekleme -->
            <div class="bg-slate-900 border border-slate-700 rounded-lg p-6">
                <h2 class="text-xl font-bold text-emerald-300 mb-4">â¤ï¸ Favorilere Ekleme</h2>
                <div class="space-y-4">

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="fav-add-song">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">ÅarkÄ± Favorilere Ekleme</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ ÅarkÄ± kartÄ±/satÄ±rÄ±nda kalp ikonu (â™¡) olmalÄ±<br>
                                â–¸ Kalp ikonuna tÄ±klandÄ±ÄŸÄ±nda ÅŸarkÄ± favorilere eklenmeli<br>
                                â–¸ Ä°kon dolu kalbe (â™¥) dÃ¶nÃ¼ÅŸmeli ve kÄ±rmÄ±zÄ± renkte olmalÄ±<br>
                                â–¸ API endpoint: POST /api/muzibu/favorite/add<br>
                                â–¸ Database: favorites tablosuna kayÄ±t eklenmeli (user_id, favoriteable_type, favoriteable_id)<br>
                                â–¸ Toast mesajÄ±: "âœ… Favorilere eklendi"
                            </div>
                        </div>
                    </label>

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="fav-add-album">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">Album Favorilere Ekleme</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ Album detay sayfasÄ±nda "Favorilere Ekle" butonu olmalÄ±<br>
                                â–¸ Buton tÄ±klandÄ±ÄŸÄ±nda album favorilere eklenmeli<br>
                                â–¸ Buton metni "Favorilerden Ã‡Ä±kar" olarak deÄŸiÅŸmeli<br>
                                â–¸ Favoriteable polymorphic iliÅŸkisi: type="album", id=album_id
                            </div>
                        </div>
                    </label>

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="fav-add-playlist">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">Playlist Favorilere Ekleme</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ Playlist detay sayfasÄ±nda kalp ikonu olmalÄ±<br>
                                â–¸ Toggle davranÄ±ÅŸÄ±: Ekle/Ã‡Ä±kar<br>
                                â–¸ Playlist kartlarÄ±nda favori durumu gÃ¶sterilmeli (dolu/boÅŸ kalp)<br>
                                â–¸ User'Ä±n kendi oluÅŸturduÄŸu playlist'lerde favori ikonu gÃ¶sterilmemeli (gereksiz)
                            </div>
                        </div>
                    </label>

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="fav-auth-required">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">GiriÅŸ ZorunluluÄŸu</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ Guest kullanÄ±cÄ± (giriÅŸ yapmamÄ±ÅŸ) favorilere ekleyemez<br>
                                â–¸ Kalp ikonuna tÄ±klandÄ±ÄŸÄ±nda "GiriÅŸ yapmalÄ±sÄ±nÄ±z" modal'Ä± aÃ§Ä±lmalÄ±<br>
                                â–¸ Modal'da "GiriÅŸ Yap" ve "KayÄ±t Ol" butonlarÄ± olmalÄ±<br>
                                â–¸ GiriÅŸ yaptÄ±ktan sonra aynÄ± sayfaya dÃ¶nÃ¼lmeli (redirect back)
                            </div>
                        </div>
                    </label>

                </div>
            </div>

            <!-- Favorilerden Ã‡Ä±karma -->
            <div class="bg-slate-900 border border-slate-700 rounded-lg p-6">
                <h2 class="text-xl font-bold text-emerald-300 mb-4">ğŸ’” Favorilerden Ã‡Ä±karma</h2>
                <div class="space-y-4">

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="fav-remove-toggle">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">Toggle ile Ã‡Ä±karma</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ Favorideki ÅŸarkÄ±da dolu kalp (â™¥) gÃ¶rÃ¼nÃ¼r<br>
                                â–¸ Tekrar tÄ±klandÄ±ÄŸÄ±nda favorilerden Ã§Ä±karÄ±lÄ±r<br>
                                â–¸ Ä°kon boÅŸ kalbe (â™¡) dÃ¶nÃ¼ÅŸÃ¼r<br>
                                â–¸ API: DELETE /api/muzibu/favorite/remove<br>
                                â–¸ Toast mesajÄ±: "âŒ Favorilerden Ã§Ä±karÄ±ldÄ±"
                            </div>
                        </div>
                    </label>

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="fav-remove-from-page">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">Favoriler SayfasÄ±ndan Ã‡Ä±karma</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ Favoriler sayfasÄ±nda "Ã‡Ä±kar" butonu olmalÄ±<br>
                                â–¸ Onay modal'Ä±: "Favorilerden Ã§Ä±karÄ±lsÄ±n mÄ±?"<br>
                                â–¸ OnaylanÄ±nca item listeden kaldÄ±rÄ±lmalÄ± (fade-out animasyonu)<br>
                                â–¸ Liste boÅŸaldÄ±ysa "HenÃ¼z favori eklemediniz" mesajÄ± gÃ¶sterilmeli
                            </div>
                        </div>
                    </label>

                </div>
            </div>

            <!-- Favoriler SayfasÄ± -->
            <div class="bg-slate-900 border border-slate-700 rounded-lg p-6">
                <h2 class="text-xl font-bold text-emerald-300 mb-4">ğŸ“„ Favoriler SayfasÄ±</h2>
                <div class="space-y-4">

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="fav-page-layout">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">Sayfa DÃ¼zeni</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ Tab'lar: "ÅarkÄ±lar", "AlbÃ¼mler", "Playlist'ler"<br>
                                â–¸ Her tab iÃ§in ayrÄ± liste gÃ¶rÃ¼nÃ¼mÃ¼<br>
                                â–¸ Favori sayÄ±sÄ± tab baÅŸlÄ±ÄŸÄ±nda gÃ¶sterilmeli (Ã¶r: "ÅarkÄ±lar (24)")<br>
                                â–¸ URL: /muzibu/favorites (auth required)
                            </div>
                        </div>
                    </label>

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="fav-page-songs">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">Favori ÅarkÄ±lar Listesi</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ ÅarkÄ± adÄ±, sanatÃ§Ä±, album, sÃ¼re gÃ¶sterilmeli<br>
                                â–¸ Her ÅŸarkÄ±da: Play butonu, Queue'ya ekle, Playlist'e ekle, Ã‡Ä±kar<br>
                                â–¸ "TÃ¼mÃ¼nÃ¼ Oynat" butonu en Ã¼stte olmalÄ± (tÃ¼m favori ÅŸarkÄ±larÄ± queue'ya ekler)<br>
                                â–¸ BoÅŸ liste mesajÄ±: "HenÃ¼z favori ÅŸarkÄ±nÄ±z yok. KeÅŸfetmeye baÅŸlayÄ±n!"
                            </div>
                        </div>
                    </label>

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="fav-page-albums">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">Favori AlbÃ¼mler</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ Grid gÃ¶rÃ¼nÃ¼m: Album kapaÄŸÄ±, isim, sanatÃ§Ä±<br>
                                â–¸ Album kartÄ±na tÄ±klandÄ±ÄŸÄ±nda detay sayfasÄ±na gidilmeli<br>
                                â–¸ Hover'da "Oynat" ve "Ã‡Ä±kar" butonlarÄ± gÃ¶sterilmeli<br>
                                â–¸ Pagination: 12 album/sayfa
                            </div>
                        </div>
                    </label>

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="fav-page-playlists">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">Favori Playlist'ler</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ Grid gÃ¶rÃ¼nÃ¼m: Playlist kapaÄŸÄ±, isim, ÅŸarkÄ± sayÄ±sÄ±<br>
                                â–¸ Playlist kartÄ±na tÄ±klandÄ±ÄŸÄ±nda detay sayfasÄ±na gidilmeli<br>
                                â–¸ "Kopyala" butonu: Favori playlist'i kendi hesabÄ±na kopyalar<br>
                                â–¸ SÄ±ralama: En son eklenen en Ã¼stte
                            </div>
                        </div>
                    </label>

                </div>
            </div>

        </div>

        <div class="mt-8 flex gap-4 no-print">
            <button onclick="resetProgress()" class="bg-red-600 hover:bg-red-500 px-6 py-3 rounded-lg text-white font-semibold">
                ğŸ”„ Ä°lerlemeyi SÄ±fÄ±rla
            </button>
            <button onclick="markAllComplete()" class="bg-emerald-600 hover:bg-emerald-500 px-6 py-3 rounded-lg text-white font-semibold">
                âœ… TÃ¼mÃ¼nÃ¼ Tamamla
            </button>
        </div>

        <div class="mt-12 text-center text-slate-500 text-sm border-t border-slate-800 pt-6">
            <p>ğŸµ Muzibu.com.tr - Favoriler Test Checklist</p>
        </div>

    </div>

    <script>
        const STORAGE_KEY = 'muzibu_test_frontend_07_favorites';
        const TOTAL_TESTS = 10;

        function loadProgress() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (saved) {
                const data = JSON.parse(saved);
                document.querySelectorAll('.test-checkbox').forEach(checkbox => {
                    if (data[checkbox.dataset.test]) checkbox.checked = true;
                });
            }
            updateProgress();
        }

        function saveProgress() {
            const data = {};
            document.querySelectorAll('.test-checkbox').forEach(checkbox => {
                data[checkbox.dataset.test] = checkbox.checked;
            });
            localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
            updateProgress();
        }

        function updateProgress() {
            const checked = document.querySelectorAll('.test-checkbox:checked').length;
            const percentage = Math.round((checked / TOTAL_TESTS) * 100);
            document.getElementById('progress-bar').style.width = percentage + '%';
            document.getElementById('progress-text').textContent = `${checked} / ${TOTAL_TESTS}`;
        }

        function resetProgress() {
            if (!confirm('âš ï¸ TÃ¼m iÅŸaretlemeler silinecek! Emin misiniz?')) return;
            localStorage.removeItem(STORAGE_KEY);
            document.querySelectorAll('.test-checkbox').forEach(cb => cb.checked = false);
            updateProgress();
        }

        function markAllComplete() {
            document.querySelectorAll('.test-checkbox').forEach(cb => cb.checked = true);
            saveProgress();
        }

        document.querySelectorAll('.test-checkbox').forEach(checkbox => {
            checkbox.addEventListener('change', saveProgress);
        });

        loadProgress();
    </script>
</body>
</html>