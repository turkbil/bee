<?php

namespace Modules\AI\Database\Seeders;

use Illuminate\Database\Seeder;
use Modules\AI\app\Models\AIProfileSector;
use App\Helpers\TenantHelpers;

class AIProfileSectorFullSeeder2 extends Seeder
{
    public function run()
    {
        if (!TenantHelpers::isCentral()) {
            return;
        }
        
        // √ñnce mevcut se√ßimleri kontrol et (hem name hem code)
        $existingNames = AIProfileSector::whereNull('category_id')->pluck('name')->toArray();
        $existingCodes = AIProfileSector::pluck('code')->toArray();
        
        // Kalan kategoriler
        $remainingSectorData = [
            // 11. End√ºstri & ƒ∞malat
            [
                'name' => 'End√ºstri & ƒ∞malat',
                'code' => 'manufacturing',
                'emoji' => 'üè≠',
                'description' => 'Sanayi √ºretimi, imalat, fabrikasyon',
                'keywords' => 'imalat, √ºretim, sanayi, fabrika, end√ºstri',
                'subcategories' => [
                    ['name' => 'Makina & Par√ßa ƒ∞malatƒ±', 'code' => 'manufacturing_1', 'emoji' => '‚öôÔ∏è', 'description' => 'CNC torna, freze, par√ßa √ºretim'],
                    ['name' => 'Metal √úr√ºnleri & ƒ∞≈üleme', 'code' => 'manufacturing_2', 'emoji' => 'üî©', 'description' => '√áelik i≈üleme, metal par√ßa √ºretim'],
                    ['name' => 'Tekstil & Konfeksiyon', 'code' => 'manufacturing_3', 'emoji' => 'üßµ', 'description' => 'Kuma≈ü, giyim, ev tekstili √ºretim'],
                    ['name' => 'Gƒ±da & ƒ∞√ßecek √úretimi', 'code' => 'manufacturing_4', 'emoji' => 'üè≠', 'description' => 'Gƒ±da i≈üleme, ambalaj, i√ßecek √ºretimi'],
                    ['name' => 'Kimya & Petrokimya', 'code' => 'manufacturing_5', 'emoji' => 'üß™', 'description' => 'Kimyasal √ºretim, plastik, deterjan'],
                    ['name' => 'Elektronik & Elektrik', 'code' => 'manufacturing_6', 'emoji' => '‚ö°', 'description' => 'Elektronik kart, kablo, elektrik malzeme'],
                    ['name' => 'Cam, √áimento & ƒ∞n≈üaat Malzemesi', 'code' => 'manufacturing_7', 'emoji' => 'üè†', 'description' => 'Cam √ºretim, √ßimento, tuƒüla, kiremit'],
                    ['name' => 'Otomotiv Yan Sanayi', 'code' => 'manufacturing_8', 'emoji' => 'üöó', 'description' => 'Ara√ß par√ßa √ºretimi, OEM, yedek par√ßa']
                ]
            ],
            
            // 12. Tarƒ±m & Hayvancƒ±lƒ±k
            [
                'name' => 'Tarƒ±m & Hayvancƒ±lƒ±k',
                'code' => 'agriculture',
                'emoji' => 'üåæ',
                'description' => 'Tarƒ±msal √ºretim, hayvancƒ±lƒ±k, gƒ±da',
                'keywords' => 'tarƒ±m, hayvancƒ±lƒ±k, √ßiftlik, √ºretici, gƒ±da',
                'subcategories' => [
                    ['name' => 'Bitkisel √úretim & Tarƒ±m', 'code' => 'agriculture_1', 'emoji' => 'üå±', 'description' => 'Meyve, sebze, hububat, end√ºstri bitkileri'],
                    ['name' => 'Hayvancƒ±lƒ±k & √áiftlik', 'code' => 'agriculture_2', 'emoji' => 'üêÑ', 'description' => 'B√ºy√ºkba≈ü, k√º√ß√ºkba≈ü, k√ºmes hayvanlarƒ±'],
                    ['name' => 'Su √úr√ºnleri & Balƒ±k√ßƒ±lƒ±k', 'code' => 'agriculture_3', 'emoji' => 'üêü', 'description' => 'Balƒ±k √ºretimi, su √ºr√ºnleri, akvak√ºlt√ºr'],
                    ['name' => 'Tarƒ±m Makinalarƒ± & Ekipman', 'code' => 'agriculture_4', 'emoji' => 'üöú', 'description' => 'Trakt√∂r, tarƒ±m aleti, sulama sistemleri'],
                    ['name' => 'G√ºbre & Tarƒ±m ƒ∞la√ßlarƒ±', 'code' => 'agriculture_5', 'emoji' => 'üß™', 'description' => 'Organik g√ºbre, kimyasal g√ºbre, zirai ila√ß'],
                    ['name' => 'Tohum & Fide √úretimi', 'code' => 'agriculture_6', 'emoji' => 'üå∞', 'description' => 'Sertifikalƒ± tohum, fide, fidan √ºretimi'],
                    ['name' => 'Arƒ±cƒ±lƒ±k & Bal √úretimi', 'code' => 'agriculture_7', 'emoji' => 'üêù', 'description' => 'Bal, polen, propolis, arƒ± √ºr√ºnleri'],
                    ['name' => 'Tarƒ±msal Danƒ±≈ümanlƒ±k', 'code' => 'agriculture_8', 'emoji' => 'üë®‚Äçüåæ', 'description' => 'Tarƒ±m tekniƒüi, verim artƒ±rma, eƒüitim']
                ]
            ],
            
            // 13. Medya & ƒ∞leti≈üim
            [
                'name' => 'Medya & ƒ∞leti≈üim',
                'code' => 'media',
                'emoji' => 'üì∫',
                'description' => 'Medya, yayƒ±ncƒ±lƒ±k, reklam, halkla ili≈ükiler',
                'keywords' => 'medya, televizyon, radyo, gazete, reklam',
                'subcategories' => [
                    ['name' => 'Televizyon & Radyo', 'code' => 'media_1', 'emoji' => 'üìª', 'description' => 'TV kanalƒ±, radyo istasyonu, yayƒ±ncƒ±lƒ±k'],
                    ['name' => 'Gazete & Dergi', 'code' => 'media_2', 'emoji' => 'üì∞', 'description' => 'Yerel gazete, dergi, basƒ±lƒ± yayƒ±n'],
                    ['name' => 'Dijital Medya & Sosyal Medya', 'code' => 'media_3', 'emoji' => 'üì±', 'description' => 'Haber sitesi, sosyal medya y√∂netimi'],
                    ['name' => 'Reklam Ajansƒ± & Pazarlama', 'code' => 'media_4', 'emoji' => 'üì¢', 'description' => 'Reklam kampanya, marka y√∂netimi'],
                    ['name' => 'Halkla ƒ∞li≈ükiler & PR', 'code' => 'media_5', 'emoji' => 'ü§ù', 'description' => 'Kurumsal ileti≈üim, basƒ±n s√∂zc√ºl√ºƒü√º'],
                    ['name' => 'Etkinlik & Organizasyon', 'code' => 'media_6', 'emoji' => 'üé™', 'description' => 'Konser, festival, fuar organizasyonu'],
                    ['name' => 'ƒ∞√ßerik √úretimi & Podcasting', 'code' => 'media_7', 'emoji' => 'üéôÔ∏è', 'description' => 'Podcast, YouTube, blog i√ßeriƒüi'],
                    ['name' => 'Basƒ±m & Matbaa', 'code' => 'media_8', 'emoji' => 'üñ®Ô∏è', 'description' => 'Ofset basƒ±m, dijital baskƒ±, matbaacƒ±lƒ±k']
                ]
            ],
            
            // 14. Bireysel & Freelance
            [
                'name' => 'Bireysel & Freelance',
                'code' => 'freelance',
                'emoji' => 'üë§',
                'description' => 'Bireysel hizmetler, freelance, danƒ±≈ümanlƒ±k',
                'keywords' => 'freelance, bireysel, danƒ±≈üman, uzman, hizmet',
                'subcategories' => [
                    ['name' => 'Danƒ±≈üman & Uzman', 'code' => 'freelance_1', 'emoji' => 'üß†', 'description' => 'Serbest danƒ±≈üman, uzman, mentor'],
                    ['name' => 'Yazar & ƒ∞√ßerik √úretici', 'code' => 'freelance_2', 'emoji' => '‚úçÔ∏è', 'description' => 'Copywriter, blog yazarƒ±, edit√∂r'],
                    ['name' => '√áevirmen & Dil Uzmanƒ±', 'code' => 'freelance_3', 'emoji' => 'üåç', 'description' => 'Terc√ºman, s√∂zl√º √ßeviri, √ßeviri'],
                    ['name' => 'Sanat√ßƒ± & Portfolyo', 'code' => 'freelance_4', 'emoji' => 'üé®', 'description' => 'Ressam, heykeltƒ±ra≈ü, sanat eseri'],
                    ['name' => 'M√ºzisyen & Ses Sanat√ßƒ±sƒ±', 'code' => 'freelance_5', 'emoji' => 'üéµ', 'description' => 'M√ºzik √∂ƒüretmeni, icracƒ±, beste'],
                    ['name' => 'Ki≈üisel Bakƒ±m & G√ºzellik', 'code' => 'freelance_6', 'emoji' => 'üíÖ', 'description' => 'Kuaf√∂r, estetisyen, mas√∂z'],
                    ['name' => 'Ev Temizlik & Bakƒ±m', 'code' => 'freelance_7', 'emoji' => 'üßπ', 'description' => 'Temizlik, bah√ßƒ±van, ev bakƒ±m'],
                    ['name' => 'Ula≈üƒ±m & ≈ûof√∂rl√ºk', 'code' => 'freelance_8', 'emoji' => 'üöó', 'description' => 'Taksi, ≈üof√∂r, kurye, nakliye']
                ]
            ],
            
            // 15. Hukuk & Danƒ±≈ümanlƒ±k
            [
                'name' => 'Hukuk & Danƒ±≈ümanlƒ±k',
                'code' => 'legal',
                'emoji' => '‚öñÔ∏è',
                'description' => 'Avukat, hukuk b√ºrosu, yasal danƒ±≈ümanlƒ±k',
                'keywords' => 'avukat, hukuk, dava, mahkeme, danƒ±≈ümanlƒ±k',
                'subcategories' => [
                    ['name' => 'Avukatlƒ±k & Hukuk B√ºrosu', 'code' => 'legal_1', 'emoji' => '‚öñÔ∏è', 'description' => 'Genel hukuk, dava takibi, hukuki danƒ±≈ümanlƒ±k'],
                    ['name' => 'Kurumsal Hukuk & Ticaret Hukuku', 'code' => 'legal_2', 'emoji' => 'üè¢', 'description' => '≈ûirket hukuku, s√∂zle≈üme, ticari dava'],
                    ['name' => 'Emlak Hukuku & Gayrimenkul', 'code' => 'legal_3', 'emoji' => 'üè†', 'description' => 'Tapu i≈ülemleri, kira hukuku, in≈üaat'],
                    ['name' => 'Aile Hukuku & Bo≈üanma', 'code' => 'legal_4', 'emoji' => 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶', 'description' => 'Bo≈üanma, velayet, nafaka, miras'],
                    ['name' => 'ƒ∞≈ü Hukuku & ƒ∞≈ü√ßi Haklarƒ±', 'code' => 'legal_5', 'emoji' => '‚ö°', 'description' => 'ƒ∞≈ü s√∂zle≈ümesi, i≈ü√ßi haklarƒ±, tazminat'],
                    ['name' => 'Bili≈üim Hukuku & Ki≈üisel Veri', 'code' => 'legal_6', 'emoji' => 'üíª', 'description' => 'KVKK, cyber hukuk, e-ticaret hukuku'],
                    ['name' => 'Trafik Hukuku & Sigorta', 'code' => 'legal_7', 'emoji' => 'üöó', 'description' => 'Trafik kazasƒ±, sigorta tazminatƒ±'],
                    ['name' => 'ƒ∞dare Hukuku & Kamu', 'code' => 'legal_8', 'emoji' => 'üèõÔ∏è', 'description' => 'ƒ∞dari dava, belediye, ihale, vergi']
                ]
            ],
            
            // 16. √áevre & Geri D√∂n√º≈ü√ºm
            [
                'name' => '√áevre & Geri D√∂n√º≈ü√ºm',
                'code' => 'environment',
                'emoji' => '‚ôªÔ∏è',
                'description' => '√áevre hizmetleri, geri d√∂n√º≈ü√ºm, temizlik',
                'keywords' => '√ßevre, geri d√∂n√º≈ü√ºm, atƒ±k, temizlik, ye≈üil',
                'subcategories' => [
                    ['name' => 'Geri D√∂n√º≈ü√ºm & Atƒ±k Y√∂netimi', 'code' => 'environment_1', 'emoji' => '‚ôªÔ∏è', 'description' => 'Plastik, kaƒüƒ±t, cam geri d√∂n√º≈ü√ºm'],
                    ['name' => '√áevre Danƒ±≈ümanlƒ±ƒüƒ± & S√ºrd√ºr√ºlebilirlik', 'code' => 'environment_2', 'emoji' => 'üå±', 'description' => 'ISO 14001, s√ºrd√ºr√ºlebilirlik raporu'],
                    ['name' => 'Temizlik & Hijyen Hizmetleri', 'code' => 'environment_3', 'emoji' => 'üßπ', 'description' => 'End√ºstriyel temizlik, ofis hijyeni'],
                    ['name' => 'Peyzaj & Bah√ßƒ±vanlƒ±k', 'code' => 'environment_4', 'emoji' => 'üåø', 'description' => 'Bah√ße bakƒ±mƒ±, aƒüa√ßlandƒ±rma, ye≈üil alan'],
                    ['name' => 'Su Arƒ±tma & √áevre Teknolojileri', 'code' => 'environment_5', 'emoji' => 'üíß', 'description' => 'Su arƒ±tma, hava filtreleme teknoloji'],
                    ['name' => 'Yenilenebilir Enerji', 'code' => 'environment_6', 'emoji' => '‚òÄÔ∏è', 'description' => 'G√ºne≈ü, r√ºzgar, hidrolik enerji'],
                    ['name' => 'End√ºstriyel √áevre √á√∂z√ºmleri', 'code' => 'environment_7', 'emoji' => 'üè≠', 'description' => 'Emisyon kontrol√º, atƒ±k su arƒ±tma'],
                    ['name' => 'Organik Tarƒ±m & Ekoloji', 'code' => 'environment_8', 'emoji' => 'üåæ', 'description' => 'Organik √ºr√ºn, permak√ºlt√ºr, ekoloji']
                ]
            ],
            
            // 17. Metal & Demir √áelik
            [
                'name' => 'Metal & Demir √áelik',
                'code' => 'metallurgy',
                'emoji' => 'üî©',
                'description' => 'Metal i≈üleme, demir √ßelik, metal √ºr√ºnleri',
                'keywords' => 'metal, demir, √ßelik, kaynak, i≈üleme',
                'subcategories' => [
                    ['name' => 'Demir √áelik √úretimi', 'code' => 'metallurgy_1', 'emoji' => 'üè≠', 'description' => 'Ham √ßelik, profil √ßelik, sac √ºretimi'],
                    ['name' => 'Metal ƒ∞≈üleme & Makina Par√ßalarƒ±', 'code' => 'metallurgy_2', 'emoji' => '‚öôÔ∏è', 'description' => 'CNC i≈üleme, torna, freze'],
                    ['name' => 'Metal Konstr√ºksiyon & √áelik Yapƒ±', 'code' => 'metallurgy_3', 'emoji' => 'üèóÔ∏è', 'description' => '√áelik konstr√ºksiyon, hangar, fabrika'],
                    ['name' => 'Kaynak & Metal Birle≈ütirme', 'code' => 'metallurgy_4', 'emoji' => '‚ö°', 'description' => 'Argon kaynak, elektrik kaynak, lehim'],
                    ['name' => 'Metal Kaplama & Y√ºzey ƒ∞≈ülemi', 'code' => 'metallurgy_5', 'emoji' => 'üé®', 'description' => 'Galvaniz, boyama, krom kaplama'],
                    ['name' => 'Baƒülantƒ± Elemanlarƒ±', 'code' => 'metallurgy_6', 'emoji' => 'üî©', 'description' => 'Civata, somun, vida, metal aksesu'],
                    ['name' => 'Metal Ambalaj & Teneke', 'code' => 'metallurgy_7', 'emoji' => 'üì¶', 'description' => 'Konserve kutusu, metal ambalaj'],
                    ['name' => 'Metal Hurda & Geri D√∂n√º≈ü√ºm', 'code' => 'metallurgy_8', 'emoji' => 'üîß', 'description' => 'Demir hurda, metal geri d√∂n√º≈ü√ºm']
                ]
            ]
        ];
        
        foreach ($remainingSectorData as $sector) {
            // Ana kategori kontrol√º (hem name hem code)
            if (!in_array($sector['name'], $existingNames) && !in_array($sector['code'], $existingCodes)) {
                \Log::info("Creating main category: " . $sector['name']);
                
                $mainCategory = AIProfileSector::create([
                    'name' => $sector['name'],
                    'code' => $sector['code'],
                    'emoji' => $sector['emoji'],
                    'description' => $sector['description'],
                    'keywords' => $sector['keywords'],
                    'category_id' => null,
                    'is_active' => true,
                    'sort_order' => 100
                ]);
                
                // Ana kategori code'unu listeye ekle
                $existingCodes[] = $sector['code'];
            
                // Alt kategoriler
                foreach ($sector['subcategories'] as $index => $sub) {
                    // Subcategory code kontrol√º
                    if (!in_array($sub['code'], $existingCodes)) {
                        AIProfileSector::create([
                            'name' => $sub['name'],
                            'code' => $sub['code'],
                            'emoji' => $sub['emoji'],
                            'description' => $sub['description'],
                            'keywords' => $sub['description'] . ' ' . $sector['keywords'],
                            'category_id' => $mainCategory->id,
                            'is_active' => true,
                            'sort_order' => ($index + 1) * 10
                        ]);
                        
                        // Code listesine ekle
                        $existingCodes[] = $sub['code'];
                    }
                }
                
                \Log::info("Created " . count($sector['subcategories']) . " subcategories for " . $sector['name']);
            }
        }
        
        \Log::info("AIProfileSectorFullSeeder2 completed");
    }
}