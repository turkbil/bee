@extends('themes.blank.layouts.app')
{{-- V5: DARK PREMIUM - Glassmorphism, gradients, premium dark aesthetic --}}
@section('module_content')
<div class="min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 text-white">
@php
$currentLocale=app()->getLocale();$title=$item->getTranslated('title',$currentLocale);$shortDescription=$item->getTranslated('short_description',$currentLocale);$longDescription=$item->getTranslated('long_description',$currentLocale);$featuredImage=$item->getFirstMedia('featured_image');$galleryImages=$item->getMedia('gallery');$resolveLocalized=static function($data)use($currentLocale){if(!is_array($data))return $data;return $data[$currentLocale]??$data['tr']??$data['en']??reset($data);};$formatSpecValue=static function($value)use(&$formatSpecValue){if(is_bool($value))return $value?'Var':'Yok';if(is_array($value)){if(isset($value['value'])&&isset($value['unit'])){$note=$value['note']??'';$formatted=$value['value'].' '.$value['unit'];return $note?$formatted.' ('.$note.')':$formatted;}if(isset($value['unit'])){$unit=$value['unit'];$parts=[];foreach($value as $key=>$val){if($key==='unit')continue;$formattedVal=is_array($val)?$formatSpecValue($val):$val;$parts[]=ucfirst($key).': '.$formattedVal.' '.$unit;}return implode(' | ',$parts);}if(count($value)>1){$unit=$value['unit']??'';$parts=[];foreach($value as $key=>$val){if($key==='unit')continue;$formattedVal=is_array($val)?$formatSpecValue($val):$val;$parts[]=ucfirst($key).': '.$formattedVal;}return implode(' × ',$parts).($unit?' '.$unit:'');}return json_encode($value);}return(string)$value;};$primarySpecs=is_array($item->primary_specs)?array_values(array_filter($item->primary_specs,fn($spec)=>is_array($spec)&&($spec['label']??false)&&($spec['value']??false))):[];$highlightedFeatures=collect($item->highlighted_features??[])->map(fn($feature)=>is_array($feature)?['icon'=>$feature['icon']??'bolt','title'=>is_array($feature['title']??null)?$resolveLocalized($feature['title']):($feature['title']??null),'description'=>is_array($feature['description']??null)?$resolveLocalized($feature['description']):($feature['description']??null)]:null)->filter(fn($feature)=>$feature&&($feature['title']||$feature['description']));$technicalSpecs=is_array($item->technical_specs)?$item->technical_specs:[];$featuresList=[];if(is_array($item->features)){$resolvedFeatures=$resolveLocalized($item->features)??[];if(is_array($resolvedFeatures)){if(array_is_list($resolvedFeatures)){$featuresList=collect($resolvedFeatures)->map(fn($f)=>is_array($f)&&isset($f['text'])?$f:['icon'=>'check-circle','text'=>$f])->filter(fn($f)=>!empty($f['text']))->values()->all();}else{$featuresList=collect($resolvedFeatures['list']??[])->map(fn($f)=>is_array($f)&&isset($f['text'])?$f:['icon'=>'check-circle','text'=>$f])->filter(fn($f)=>!empty($f['text']))->values()->all();}}}$accessories=[];if(is_array($item->accessories)){$accessories=collect($item->accessories)->filter(fn($acc)=>is_array($acc)&&!empty($acc['name']))->values()->all();}$certifications=[];if(is_array($item->certifications)){$certifications=collect($item->certifications)->filter(fn($cert)=>is_array($cert)&&!empty($cert['name']))->values()->all();}$siblingVariants=$siblingVariants??collect();
@endphp
<section class="relative py-24"><div class="max-w-7xl mx-auto px-6"><div class="grid lg:grid-cols-2 gap-16 items-center"><div class="order-2 lg:order-1">@if($featuredImage)<div class="relative"><div class="absolute inset-0 bg-gradient-to-r from-blue-500 to-purple-500 blur-3xl opacity-30"></div><img src="{{ $featuredImage->hasGeneratedConversion('large')?$featuredImage->getUrl('large'):$featuredImage->getUrl() }}" alt="{{ $title }}" class="relative w-full rounded-3xl shadow-2xl shadow-blue-500/20 border border-white/10"></div>@endif</div><div class="order-1 lg:order-2"><div class="inline-block px-5 py-2 bg-gradient-to-r from-green-400 to-emerald-500 text-gray-900 text-sm font-bold rounded-full mb-6 shadow-lg shadow-green-500/50">● STOKTA</div><h1 class="text-5xl md:text-6xl font-black mb-6 bg-gradient-to-r from-white via-blue-200 to-purple-300 bg-clip-text text-transparent">{{ $title }}</h1>@if($shortDescription)<p class="text-xl text-gray-300 mb-8">{{ $shortDescription }}</p>@endif<div class="flex flex-col sm:flex-row gap-4"><a href="#contact" class="px-10 py-5 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl font-bold text-lg shadow-lg shadow-blue-500/50 hover:shadow-2xl hover:shadow-blue-500/70 transition-all">TEKLİF AL</a><a href="tel:02167553555" class="px-10 py-5 backdrop-blur-xl bg-white/10 border-2 border-white/20 rounded-2xl font-bold text-lg hover:bg-white/20 transition-all">0216 755 3 555</a></div></div></div></div></section>
@if(!empty($primarySpecs))<section class="py-16"><div class="max-w-7xl mx-auto px-6"><div class="grid grid-cols-2 md:grid-cols-4 gap-6">@foreach($primarySpecs as $spec)<div class="backdrop-blur-xl bg-white/5 border border-white/10 rounded-2xl p-6 hover:border-blue-500/50 hover:shadow-lg hover:shadow-blue-500/20 transition-all"><div class="text-4xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent mb-2">{{ $spec['value'] }}</div><div class="text-sm text-gray-400 uppercase">{{ $spec['label'] }}</div></div>@endforeach</div></div></section>@endif
@if($highlightedFeatures->isNotEmpty())<section class="py-24"><div class="max-w-7xl mx-auto px-6"><h2 class="text-4xl font-bold text-center mb-16 bg-gradient-to-r from-white to-gray-400 bg-clip-text text-transparent">Öne Çıkan Özellikler</h2><div class="grid md:grid-cols-3 gap-8">@foreach($highlightedFeatures as $feature)<div class="backdrop-blur-xl bg-white/5 border border-white/10 rounded-3xl p-8 hover:border-purple-500/50 hover:shadow-2xl hover:shadow-purple-500/20 transition-all group"><div class="w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform shadow-lg shadow-blue-500/50"><i class="fa-solid fa-{{ $feature['icon'] }} text-white text-3xl"></i></div><h3 class="text-2xl font-bold mb-4">{{ $feature['title'] }}</h3><p class="text-gray-300">{{ $feature['description'] }}</p></div>@endforeach</div></div></section>@endif
@if($galleryImages->count()>0)<section class="py-24"><div class="max-w-7xl mx-auto px-6"><h2 class="text-4xl font-bold text-center mb-16 bg-gradient-to-r from-white to-gray-400 bg-clip-text text-transparent">Galeri</h2><div class="grid grid-cols-2 md:grid-cols-3 gap-6">@foreach($galleryImages as $image)<a href="{{ $image->getUrl() }}" class="glightbox block rounded-2xl overflow-hidden border border-white/10 hover:border-blue-500/50 transition-all" data-gallery="g"><img src="{{ $image->hasGeneratedConversion('medium')?$image->getUrl('medium'):$image->getUrl() }}" alt="" class="w-full h-64 object-cover"></a>@endforeach</div></div></section>@endif
@if(!empty($featuresList))<section class="py-24"><div class="max-w-7xl mx-auto px-6"><h2 class="text-4xl font-bold text-center mb-16 bg-gradient-to-r from-white to-gray-400 bg-clip-text text-transparent">Avantajlar</h2><div class="grid md:grid-cols-2 gap-4">@foreach($featuresList as $feature)@php $featureIcon=is_array($feature)?($feature['icon']??'check-circle'):'check-circle';$featureText=is_array($feature)?($feature['text']??$feature):$feature;@endphp<div class="flex gap-3 p-5 backdrop-blur-xl bg-white/5 border border-white/10 rounded-xl hover:border-green-500/50 transition-all"><i class="fa-solid fa-{{ $featureIcon }} text-green-400 text-xl mt-1"></i><span class="text-gray-200">{{ $featureText }}</span></div>@endforeach</div></div></section>@endif
@if(!empty($technicalSpecs))<section class="py-24"><div class="max-w-7xl mx-auto px-6"><h2 class="text-4xl font-bold text-center mb-16 bg-gradient-to-r from-white to-gray-400 bg-clip-text text-transparent">Teknik Özellikler</h2><div class="backdrop-blur-xl bg-white/5 border border-white/10 rounded-3xl overflow-hidden">@php $isFlat=!empty($technicalSpecs)&&!collect($technicalSpecs)->contains(fn($v)=>is_array($v));@endphp @if($isFlat)@foreach($technicalSpecs as $key=>$value)<div class="flex border-b border-white/10 last:border-0"><div class="w-1/2 p-5 text-gray-400">{{ $key }}</div><div class="w-1/2 p-5 font-semibold">{{ $formatSpecValue($value) }}</div></div>@endforeach @else @foreach($technicalSpecs as $sectionKey=>$sectionValues)@if(is_array($sectionValues)&&!empty($sectionValues))@php $sectionTitle=$sectionValues['_title']??\Illuminate\Support\Str::headline(str_replace('_',' ',$sectionKey));unset($sectionValues['_title'],$sectionValues['_icon']);@endphp<div class="p-6 bg-gradient-to-r from-blue-600/20 to-purple-600/20 border-b border-white/10"><h3 class="text-xl font-bold">{{ $sectionTitle }}</h3></div>@foreach($sectionValues as $key=>$value)@php $propertyLabel=is_array($value)&&isset($value['_label'])?$value['_label']:$key;$propertyValue=is_array($value)&&isset($value['_value'])?$value['_value']:$value;@endphp<div class="flex border-b border-white/10 last:border-0"><div class="w-1/2 p-5 text-gray-400">{{ $propertyLabel }}</div><div class="w-1/2 p-5 font-semibold">{{ $formatSpecValue($propertyValue) }}</div></div>@endforeach @endif @endforeach @endif</div></div></section>@endif
@if(!empty($accessories))<section class="py-24"><div class="max-w-7xl mx-auto px-6"><h2 class="text-4xl font-bold text-center mb-16 bg-gradient-to-r from-white to-gray-400 bg-clip-text text-transparent">Aksesuarlar</h2><div class="grid md:grid-cols-3 gap-6">@foreach($accessories as $accessory)@php $isStandard=$accessory['is_standard']??false;$accIcon=$accessory['icon']??'puzzle-piece';@endphp<div class="backdrop-blur-xl bg-white/5 border {{ $isStandard?'border-green-500/50 shadow-lg shadow-green-500/20':'border-white/10' }} rounded-2xl p-6">@if($isStandard)<span class="inline-block px-3 py-1 bg-green-500 text-white text-xs font-bold rounded-full mb-4">STANDART</span>@else<span class="inline-block px-3 py-1 bg-blue-500 text-white text-xs font-bold rounded-full mb-4">OPSİYONEL</span>@endif<div class="w-14 h-14 bg-gradient-to-br from-orange-500 to-red-500 rounded-xl flex items-center justify-center mb-4 shadow-lg shadow-orange-500/50"><i class="fa-solid fa-{{ $accIcon }} text-white text-2xl"></i></div><h3 class="text-lg font-bold mb-2">{{ $accessory['name'] }}</h3>@if(!empty($accessory['description']))<p class="text-sm text-gray-400">{{ $accessory['description'] }}</p>@endif</div>@endforeach</div></div></section>@endif
@if(!empty($certifications))<section class="py-24"><div class="max-w-7xl mx-auto px-6"><h2 class="text-4xl font-bold text-center mb-16 bg-gradient-to-r from-white to-gray-400 bg-clip-text text-transparent">Sertifikalar</h2><div class="grid grid-cols-2 md:grid-cols-4 gap-6">@foreach($certifications as $cert)@php $certIcon=$cert['icon']??'certificate';@endphp<div class="backdrop-blur-xl bg-white/5 border border-white/10 rounded-2xl p-6 text-center hover:border-blue-500/50 transition-all"><div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg shadow-blue-500/50"><i class="fa-solid fa-{{ $certIcon }} text-white text-2xl"></i></div><h3 class="font-bold mb-1">{{ $cert['name'] }}</h3>@if(!empty($cert['year']))<div class="text-xs text-gray-400">{{ $cert['year'] }}</div>@endif</div>@endforeach</div></div></section>@endif
@if($siblingVariants->count()>0)<section class="py-24"><div class="max-w-7xl mx-auto px-6"><h2 class="text-4xl font-bold text-center mb-16 bg-gradient-to-r from-white to-gray-400 bg-clip-text text-transparent">Varyantlar</h2><div class="grid md:grid-cols-4 gap-6">@foreach($siblingVariants as $variant)@php $variantTitle=$variant->getTranslated('title',$currentLocale)??$variant->sku;$variantUrl=\Modules\Shop\App\Http\Controllers\Front\ShopController::resolveProductUrl($variant,$currentLocale);$variantImage=$variant->getFirstMedia('featured_image');@endphp<a href="{{ $variantUrl }}" class="block backdrop-blur-xl bg-white/5 border border-white/10 hover:border-blue-500/50 rounded-2xl p-4 transition-all hover:shadow-lg hover:shadow-blue-500/20">@if($variantImage)<img src="{{ $variantImage->hasGeneratedConversion('thumb')?$variantImage->getUrl('thumb'):$variantImage->getUrl() }}" alt="{{ $variantTitle }}" class="w-full h-32 object-cover rounded-xl mb-3">@endif<h3 class="font-bold">{{ $variantTitle }}</h3></a>@endforeach</div></div></section>@endif
<section id="contact" class="py-24"><div class="max-w-4xl mx-auto px-6"><h2 class="text-5xl font-bold text-center mb-12 bg-gradient-to-r from-white via-blue-200 to-purple-300 bg-clip-text text-transparent">Teklif Al</h2><form action="{{ route('shop.quote.submit') }}" method="POST" class="space-y-6 backdrop-blur-xl bg-white/10 border border-white/20 rounded-3xl p-8 shadow-2xl shadow-blue-500/20">@csrf<input type="hidden" name="product_id" value="{{ $item->product_id }}"><input type="hidden" name="product_title" value="{{ $title }}"><div class="grid md:grid-cols-2 gap-6"><input type="text" name="name" required placeholder="Ad Soyad *" class="px-5 py-4 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/60 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/50"><input type="email" name="email" required placeholder="E-posta *" class="px-5 py-4 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/60 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/50"></div><input type="tel" name="phone" required placeholder="Telefon *" class="w-full px-5 py-4 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/60 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/50"><textarea name="message" rows="4" placeholder="Mesajınız" class="w-full px-5 py-4 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/60 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/50"></textarea><button type="submit" class="w-full px-10 py-5 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl font-bold text-lg shadow-lg shadow-blue-500/50 hover:shadow-2xl hover:shadow-blue-500/70 transition-all">TEKLİF İSTE</button></form></div></section>
</div>
@endsection
