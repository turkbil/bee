<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frontend 06: Queue YÃ¶netimi - Muzibu Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: { extend: { colors: { slate: { 850: '#1a202e', 950: '#0f1419' } } } }
        }
    </script>
    <style>
        @media print {
            .no-print { display: none; }
            input[type="checkbox"] { -webkit-appearance: checkbox; appearance: checkbox; }
        }
    </style>
</head>
<body class="bg-slate-950 text-slate-200 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-5xl">

        <div class="mb-8">
            <div class="flex items-center justify-between mb-4">
                <a href="../index.html" class="text-emerald-400 hover:text-emerald-300 no-print">â† Geri</a>
                <button onclick="window.print()" class="bg-slate-800 hover:bg-slate-700 px-4 py-2 rounded text-sm no-print">ğŸ–¨ï¸ YazdÄ±r</button>
            </div>
            <h1 class="text-3xl font-bold text-emerald-400 mb-2">Frontend 06: Queue YÃ¶netimi</h1>
            <p class="text-slate-400">Queue gÃ¶rÃ¼nÃ¼mÃ¼, sÄ±ralama, silme, auto-refill, queue overlay</p>

            <div class="mt-4 bg-slate-900 rounded-lg p-4">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-sm font-semibold">Ä°lerleme</span>
                    <span class="text-sm" id="progress-text">0 / 12</span>
                </div>
                <div class="w-full bg-slate-800 rounded-full h-3">
                    <div id="progress-bar" class="bg-emerald-500 h-3 rounded-full transition-all duration-300" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <div class="space-y-6">

            <!-- Queue GÃ¶rÃ¼nÃ¼mÃ¼ -->
            <div class="bg-slate-900 border border-slate-700 rounded-lg p-6">
                <h2 class="text-xl font-bold text-emerald-300 mb-4">ğŸ“‹ Queue GÃ¶rÃ¼nÃ¼mÃ¼ & Overlay</h2>
                <div class="space-y-4">

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="queue-overlay-open">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">Queue Overlay AÃ§Ä±lmasÄ±</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ Player'da "Queue" ikonu/butonu olmalÄ±<br>
                                â–¸ TÄ±klandÄ±ÄŸÄ±nda saÄŸ taraftan overlay panel aÃ§Ä±lmalÄ± (slide-in animasyonu)<br>
                                â–¸ Overlay geniÅŸliÄŸi: mobilde full-width, desktop'ta 400-500px<br>
                                â–¸ Arka planda backdrop (karartma) olmalÄ±<br>
                                â–¸ ESC tuÅŸu veya backdrop'a tÄ±klandÄ±ÄŸÄ±nda kapanmalÄ±
                            </div>
                        </div>
                    </label>

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="queue-current-song">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">Åu Anda Ã‡alan (Now Playing)</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ Queue overlay'de ilk sÄ±rada "Åimdi Ã‡alÄ±yor" bÃ¶lÃ¼mÃ¼ olmalÄ±<br>
                                â–¸ ÅarkÄ±: Kapak gÃ¶rseli (kÃ¼Ã§Ã¼k), isim, sanatÃ§Ä±, sÃ¼re<br>
                                â–¸ "Åimdi Ã‡alÄ±yor" badge'i belirgin olmalÄ± (yeÅŸil/aktif renk)<br>
                                â–¸ Pulse animasyonu ile vurgulanmalÄ±
                            </div>
                        </div>
                    </label>

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="queue-next-songs">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">SÄ±radaki ÅarkÄ±lar (Up Next)</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ "SÄ±rada" baÅŸlÄ±ÄŸÄ± altÄ±nda sonraki ÅŸarkÄ±lar listelenmiÅŸ<br>
                                â–¸ Her ÅŸarkÄ± kartÄ±: SÄ±ra numarasÄ±, kapak, isim, sanatÃ§Ä±, sÃ¼re<br>
                                â–¸ Scroll edilebilir liste (max 50 ÅŸarkÄ± gÃ¶rÃ¼nÃ¼r)<br>
                                â–¸ Queue boÅŸsa "SÄ±rada ÅŸarkÄ± yok" placeholder gÃ¶ster
                            </div>
                        </div>
                    </label>

                </div>
            </div>

            <!-- Queue Ä°ÅŸlemleri -->
            <div class="bg-slate-900 border border-slate-700 rounded-lg p-6">
                <h2 class="text-xl font-bold text-emerald-300 mb-4">âš™ï¸ Queue Ä°ÅŸlemleri</h2>
                <div class="space-y-4">

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="queue-reorder">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">SÄ±ralama (Drag & Drop)</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ Queue'daki ÅŸarkÄ±lar drag-drop ile sÄ±ralanabilmeli<br>
                                â–¸ SÃ¼rÃ¼klerken ÅŸarkÄ± kartÄ± shadow/opacity deÄŸiÅŸmeli (visual feedback)<br>
                                â–¸ BÄ±rakÄ±ldÄ±ÄŸÄ±nda yeni sÄ±raya eklenip API'ye kaydedilmeli<br>
                                â–¸ Åu anda Ã§alan ÅŸarkÄ± taÅŸÄ±namamalÄ± (disabled)<br>
                                â–¸ Mobilde: Long press ile drag baÅŸlamalÄ±
                            </div>
                        </div>
                    </label>

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="queue-remove-single">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">Tekil Silme</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ Her ÅŸarkÄ± kartÄ±nda "X" veya "KaldÄ±r" ikonu olmalÄ±<br>
                                â–¸ TÄ±klandÄ±ÄŸÄ±nda ÅŸarkÄ± queue'dan Ã§Ä±karÄ±lmalÄ± (slide-out animasyonu)<br>
                                â–¸ API'ye DELETE isteÄŸi gÃ¶nderilmeli<br>
                                â–¸ Åu anda Ã§alan ÅŸarkÄ± silinemez, butonu disabled<br>
                                â–¸ Toast mesajÄ±: "ÅarkÄ± queue'dan Ã§Ä±karÄ±ldÄ±"
                            </div>
                        </div>
                    </label>

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="queue-clear-all">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">TÃ¼mÃ¼nÃ¼ Temizle</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ Queue overlay'de "TÃ¼mÃ¼nÃ¼ Temizle" butonu olmalÄ±<br>
                                â–¸ TÄ±klandÄ±ÄŸÄ±nda onay modal'Ä± aÃ§Ä±lmalÄ±: "Queue tamamen temizlenecek!"<br>
                                â–¸ OnaylanÄ±nca ÅŸu anda Ã§alan hariÃ§ tÃ¼m ÅŸarkÄ±lar silinmeli<br>
                                â–¸ API'ye bulk delete isteÄŸi gÃ¶nderilmeli<br>
                                â–¸ Player durmadan devam etmeli (current song korunur)
                            </div>
                        </div>
                    </label>

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="queue-save-playlist">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">Queue'yu Playlist Olarak Kaydet</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ "Playlist Olarak Kaydet" butonu olmalÄ±<br>
                                â–¸ TÄ±klandÄ±ÄŸÄ±nda modal aÃ§Ä±lsÄ±n: Playlist ismi ve aÃ§Ä±klama gir<br>
                                â–¸ Kaydet butonuna basÄ±ldÄ±ÄŸÄ±nda yeni playlist oluÅŸturulsun<br>
                                â–¸ Queue'daki tÃ¼m ÅŸarkÄ±lar playlist'e eklensin<br>
                                â–¸ Toast: "âœ… Playlist oluÅŸturuldu!" + playlist'e git linki
                            </div>
                        </div>
                    </label>

                </div>
            </div>

            <!-- Auto-Refill -->
            <div class="bg-slate-900 border border-slate-700 rounded-lg p-6">
                <h2 class="text-xl font-bold text-emerald-300 mb-4">ğŸ”„ Auto-Refill</h2>
                <div class="space-y-4">

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="queue-refill-trigger">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">Tetikleme KoÅŸulu</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ Queue'da 3 veya daha az ÅŸarkÄ± kaldÄ±ÄŸÄ±nda auto-refill tetiklenmeli<br>
                                â–¸ API endpoint: POST /api/queue/refill<br>
                                â–¸ Background'da yeni ÅŸarkÄ±lar eklenmeli (kullanÄ±cÄ± fark etmemeli)<br>
                                â–¸ Refill sÄ±rasÄ±nda player kesintisiz Ã§almalÄ±
                            </div>
                        </div>
                    </label>

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="queue-refill-logic">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">Refill MantÄ±ÄŸÄ±</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ KullanÄ±cÄ±nÄ±n listening history'sine gÃ¶re Ã¶neri Ã¼ret<br>
                                â–¸ Favori genre/sector bazlÄ± ÅŸarkÄ±lar ekle (20 adet)<br>
                                â–¸ Benzer sanatÃ§Ä±lardan ÅŸarkÄ±lar ekle<br>
                                â–¸ PopÃ¼ler ÅŸarkÄ±lar karÄ±ÅŸtÄ±r (randomize)<br>
                                â–¸ Daha Ã¶nce Ã§alÄ±nmÄ±ÅŸ ÅŸarkÄ±lar Ã¶ncelik dÃ¼ÅŸÃ¼k
                            </div>
                        </div>
                    </label>

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="queue-refill-notification">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">Refill Bildirimi</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ Refill tamamlandÄ±ÄŸÄ±nda kÃ¼Ã§Ã¼k toast gÃ¶ster: "20 yeni ÅŸarkÄ± eklendi"<br>
                                â–¸ Queue overlay aÃ§Ä±ksa otomatik gÃ¼ncellenip yeni ÅŸarkÄ±lar gÃ¶sterilmeli<br>
                                â–¸ Queue uzunluÄŸu artmalÄ± (console'da log)<br>
                                â–¸ KullanÄ±cÄ± dilerse refill'i kapatabilmeli (settings'ten)
                            </div>
                        </div>
                    </label>

                </div>
            </div>

            <!-- State & Persistence -->
            <div class="bg-slate-900 border border-slate-700 rounded-lg p-6">
                <h2 class="text-xl font-bold text-emerald-300 mb-4">ğŸ’¾ State & Persistence</h2>
                <div class="space-y-4">

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="queue-sync-api">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">API Senkronizasyonu</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ Queue deÄŸiÅŸiklikleri (ekle, Ã§Ä±kar, sÄ±rala) API'ye kaydedilmeli<br>
                                â–¸ Endpoint: GET /api/queue (load), POST /api/queue (add), DELETE /api/queue/{id}<br>
                                â–¸ Optimistic update: UI hemen gÃ¼ncellenir, arka planda API Ã§aÄŸrÄ±lÄ±r<br>
                                â–¸ API hatasÄ± durumunda rollback (eski state'e dÃ¶n)
                            </div>
                        </div>
                    </label>

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="queue-session-persist">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">Session Persistence</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ Sayfa yenilendiÄŸinde queue korunmalÄ± (localStorage veya API'den yÃ¼kle)<br>
                                â–¸ Ã‡alan ÅŸarkÄ±nÄ±n pozisyonu hatÄ±rlanmalÄ± (kaldÄ±ÄŸÄ± yerden devam)<br>
                                â–¸ Login/logout sonrasÄ± queue temizlenmeli (gÃ¼venlik)<br>
                                â–¸ Multi-device sync: FarklÄ± cihazlarda aynÄ± queue (isteÄŸe baÄŸlÄ± feature)
                            </div>
                        </div>
                    </label>

                    <label class="flex items-start space-x-3 p-3 hover:bg-slate-800 rounded cursor-pointer group">
                        <input type="checkbox" class="test-checkbox mt-1 w-5 h-5 rounded border-slate-600" data-test="queue-history">
                        <div class="flex-1">
                            <div class="font-semibold text-slate-200 group-hover:text-emerald-300">Queue History</div>
                            <div class="text-sm text-slate-400 mt-1">
                                â–¸ Daha Ã¶nce Ã§alÄ±nmÄ±ÅŸ ÅŸarkÄ±lar "GeÃ§miÅŸ" bÃ¶lÃ¼mÃ¼nde listelenmiÅŸ olmalÄ±<br>
                                â–¸ Queue overlay'de tab: "SÄ±rada" ve "GeÃ§miÅŸ"<br>
                                â–¸ GeÃ§miÅŸ ÅŸarkÄ±lara tÄ±klandÄ±ÄŸÄ±nda tekrar queue'ya eklenebilmeli<br>
                                â–¸ GeÃ§miÅŸ max 50 ÅŸarkÄ± (daha eski olanlar silinir)
                            </div>
                        </div>
                    </label>

                </div>
            </div>

        </div>

        <div class="mt-8 flex gap-4 no-print">
            <button onclick="resetProgress()" class="bg-red-600 hover:bg-red-500 px-6 py-3 rounded-lg text-white font-semibold">
                ğŸ”„ Ä°lerlemeyi SÄ±fÄ±rla
            </button>
            <button onclick="markAllComplete()" class="bg-emerald-600 hover:bg-emerald-500 px-6 py-3 rounded-lg text-white font-semibold">
                âœ… TÃ¼mÃ¼nÃ¼ Tamamla
            </button>
        </div>

        <div class="mt-12 text-center text-slate-500 text-sm border-t border-slate-800 pt-6">
            <p>ğŸµ Muzibu.com.tr - Queue YÃ¶netimi Test Checklist</p>
        </div>

    </div>

    <script>
        const STORAGE_KEY = 'muzibu_test_frontend_06_queue';
        const TOTAL_TESTS = 12;

        function loadProgress() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (saved) {
                const data = JSON.parse(saved);
                document.querySelectorAll('.test-checkbox').forEach(checkbox => {
                    const testId = checkbox.dataset.test;
                    if (data[testId]) checkbox.checked = true;
                });
            }
            updateProgress();
        }

        function saveProgress() {
            const data = {};
            document.querySelectorAll('.test-checkbox').forEach(checkbox => {
                data[checkbox.dataset.test] = checkbox.checked;
            });
            localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
            updateProgress();
        }

        function updateProgress() {
            const checked = document.querySelectorAll('.test-checkbox:checked').length;
            const percentage = Math.round((checked / TOTAL_TESTS) * 100);
            document.getElementById('progress-bar').style.width = percentage + '%';
            document.getElementById('progress-text').textContent = `${checked} / ${TOTAL_TESTS}`;
        }

        function resetProgress() {
            if (!confirm('âš ï¸ TÃ¼m iÅŸaretlemeler silinecek! Emin misiniz?')) return;
            localStorage.removeItem(STORAGE_KEY);
            document.querySelectorAll('.test-checkbox').forEach(cb => cb.checked = false);
            updateProgress();
        }

        function markAllComplete() {
            document.querySelectorAll('.test-checkbox').forEach(cb => cb.checked = true);
            saveProgress();
        }

        document.querySelectorAll('.test-checkbox').forEach(checkbox => {
            checkbox.addEventListener('change', saveProgress);
        });

        loadProgress();
    </script>
</body>
</html>
